!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e,t,n){n=n||we;var r,i,o=n.createElement("script");if(o.text=e,t)for(r in Te)i=t[r]||t.getAttribute&&t.getAttribute(r),i&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function r(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?de[he.call(e)]||"object":typeof e}function i(e){var t=!!e&&"length"in e&&e.length,n=r(e);return!xe(e)&&!be(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function o(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function a(e,t,n){return xe(t)?Ee.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?Ee.grep(e,function(e){return e===t!==n}):"string"!=typeof t?Ee.grep(e,function(e){return pe.call(t,e)>-1!==n}):Ee.filter(t,e,n)}function s(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){var t={};return Ee.each(e.match(Pe)||[],function(e,n){t[n]=!0}),t}function l(e){return e}function c(e){throw e}function f(e,t,n,r){var i;try{e&&xe(i=e.promise)?i.call(e).done(t).fail(n):e&&xe(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}function p(){we.removeEventListener("DOMContentLoaded",p),e.removeEventListener("load",p),Ee.ready()}function d(e,t){return t.toUpperCase()}function h(e){return e.replace(We,"ms-").replace(Fe,d)}function g(){this.expando=Ee.expando+g.uid++}function v(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ze.test(e)?JSON.parse(e):e)}function y(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Ue,"-$&").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n=v(n)}catch(i){}_e.set(e,t,n)}else n=void 0;return n}function m(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return Ee.css(e,t,"")},u=s(),l=n&&n[3]||(Ee.cssNumber[t]?"":"px"),c=e.nodeType&&(Ee.cssNumber[t]||"px"!==l&&+u)&&Ve.exec(Ee.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)Ee.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c=2*c,Ee.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}function x(e){var t,n=e.ownerDocument,r=e.nodeName,i=Ze[r];return i?i:(t=n.body.appendChild(n.createElement(r)),i=Ee.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),Ze[r]=i,i)}function b(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=$e.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Ke(r)&&(i[o]=x(r))):"none"!==n&&(i[o]="none",$e.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}function w(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&o(e,t)?Ee.merge([e],n):n}function T(e,t){for(var n=0,r=e.length;n<r;n++)$e.set(e[n],"globalEval",!t||$e.get(t[n],"globalEval"))}function C(e,t,n,i,o){for(var a,s,u,l,c,f,p=t.createDocumentFragment(),d=[],h=0,g=e.length;h<g;h++)if(a=e[h],a||0===a)if("object"===r(a))Ee.merge(d,a.nodeType?[a]:a);else if(it.test(a)){for(s=s||p.appendChild(t.createElement("div")),u=(tt.exec(a)||["",""])[1].toLowerCase(),l=rt[u]||rt._default,s.innerHTML=l[1]+Ee.htmlPrefilter(a)+l[2],f=l[0];f--;)s=s.lastChild;Ee.merge(d,s.childNodes),s=p.firstChild,s.textContent=""}else d.push(t.createTextNode(a));for(p.textContent="",h=0;a=d[h++];)if(i&&Ee.inArray(a,i)>-1)o&&o.push(a);else if(c=Qe(a),s=w(p.appendChild(a),"script"),c&&T(s),n)for(f=0;a=s[f++];)nt.test(a.type||"")&&n.push(a);return p}function E(){return!0}function S(){return!1}function k(e,t){return e===A()==("focus"===t)}function A(){try{return we.activeElement}catch(e){}}function N(e,t,n,r,i,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(r=r||n,n=void 0);for(s in t)N(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=S;else if(!i)return e;return 1===o&&(a=i,i=function(e){return Ee().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=Ee.guid++)),e.each(function(){Ee.event.add(this,t,i,r,n)})}function D(e,t,n){return n?($e.set(e,t,!1),void Ee.event.add(e,t,{namespace:!1,handler:function(e){var r,i,o=$e.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(Ee.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=le.call(arguments),$e.set(this,t,o),r=n(this,t),this[t](),i=$e.get(this,t),o!==i||r?$e.set(this,t,!1):i={},o!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else o.length&&($e.set(this,t,{value:Ee.event.trigger(Ee.extend(o[0],Ee.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void(void 0===$e.get(e,t)&&Ee.event.add(e,t,E))}function j(e,t){return o(e,"table")&&o(11!==t.nodeType?t:t.firstChild,"tr")?Ee(e).children("tbody")[0]||e:e}function q(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function L(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function H(e,t){var n,r,i,o,a,s,u;if(1===t.nodeType){if($e.hasData(e)&&(o=$e.get(e),u=o.events)){$e.remove(t,"handle events");for(i in u)for(n=0,r=u[i].length;n<r;n++)Ee.event.add(t,i,u[i][n])}_e.hasData(e)&&(a=_e.access(e),s=Ee.extend({},a),_e.set(t,s))}}function O(e,t){var n=t.nodeName.toLowerCase();"input"===n&&et.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function P(e,t,r,i){t=ce(t);var o,a,s,u,l,c,f=0,p=e.length,d=p-1,h=t[0],g=xe(h);if(g||p>1&&"string"==typeof h&&!me.checkClone&&lt.test(h))return e.each(function(n){var o=e.eq(n);g&&(t[0]=h.call(this,n,o.html())),P(o,t,r,i)});if(p&&(o=C(t,e[0].ownerDocument,!1,e,i),a=o.firstChild,1===o.childNodes.length&&(o=a),a||i)){for(s=Ee.map(w(o,"script"),q),u=s.length;f<p;f++)l=o,f!==d&&(l=Ee.clone(l,!0,!0),u&&Ee.merge(s,w(l,"script"))),r.call(e[f],l,f);if(u)for(c=s[s.length-1].ownerDocument,Ee.map(s,L),f=0;f<u;f++)l=s[f],nt.test(l.type||"")&&!$e.access(l,"globalEval")&&Ee.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?Ee._evalUrl&&!l.noModule&&Ee._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):n(l.textContent.replace(ct,""),l,c))}return e}function R(e,t,n){for(var r,i=t?Ee.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||Ee.cleanData(w(r)),r.parentNode&&(n&&Qe(r)&&T(w(r,"script")),r.parentNode.removeChild(r));return e}function M(e,t,n){var r,i,o,a,s=e.style;return n=n||pt(e),n&&(a=n.getPropertyValue(t)||n[t],""!==a||Qe(e)||(a=Ee.style(e,t)),!me.pixelBoxStyles()&&ft.test(a)&&ht.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function I(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function W(e){for(var t=e[0].toUpperCase()+e.slice(1),n=gt.length;n--;)if(e=gt[n]+t,e in vt)return e}function F(e){var t=Ee.cssProps[e]||yt[e];return t?t:e in vt?e:yt[e]=W(e)||e}function B(e,t,n){var r=Ve.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function $(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=Ee.css(e,n+Ge[a],!0,i)),r?("content"===n&&(u-=Ee.css(e,"padding"+Ge[a],!0,i)),"margin"!==n&&(u-=Ee.css(e,"border"+Ge[a]+"Width",!0,i))):(u+=Ee.css(e,"padding"+Ge[a],!0,i),"padding"!==n?u+=Ee.css(e,"border"+Ge[a]+"Width",!0,i):s+=Ee.css(e,"border"+Ge[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function _(e,t,n){var r=pt(e),i=!me.boxSizingReliable()||n,a=i&&"border-box"===Ee.css(e,"boxSizing",!1,r),s=a,u=M(e,t,r),l="offset"+t[0].toUpperCase()+t.slice(1);if(ft.test(u)){if(!n)return u;u="auto"}return(!me.boxSizingReliable()&&a||!me.reliableTrDimensions()&&o(e,"tr")||"auto"===u||!parseFloat(u)&&"inline"===Ee.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===Ee.css(e,"boxSizing",!1,r),s=l in e,s&&(u=e[l])),u=parseFloat(u)||0,u+$(e,t,n||(a?"border":"content"),s,r,u)+"px"}function z(e,t,n,r,i){return new z.prototype.init(e,t,n,r,i)}function U(){Ct&&(we.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(U):e.setTimeout(U,Ee.fx.interval),Ee.fx.tick())}function X(){return e.setTimeout(function(){Tt=void 0}),Tt=Date.now()}function V(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=Ge[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function G(e,t,n){for(var r,i=(J.tweeners[t]||[]).concat(J.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function Y(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&Ke(e),v=$e.get(e,"fxshow");n.queue||(a=Ee._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,Ee.queue(e,"fx").length||a.empty.fire()})}));for(r in t)if(i=t[r],Et.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||Ee.style(e,r)}if(u=!Ee.isEmptyObject(t),u||!Ee.isEmptyObject(d)){f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=v&&v.display,null==l&&(l=$e.get(e,"display")),c=Ee.css(e,"display"),"none"===c&&(l?c=l:(b([e],!0),l=e.style.display||l,c=Ee.css(e,"display"),b([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===Ee.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1;for(r in d)u||(v?"hidden"in v&&(g=v.hidden):v=$e.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&b([e],!0),p.done(function(){g||b([e]),$e.remove(e,"fxshow");for(r in d)Ee.style(e,r,d[r])})),u=G(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}}function Q(e,t){var n,r,i,o,a;for(n in e)if(r=h(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=Ee.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function J(e,t,n){var r,i,o=0,a=J.prefilters.length,s=Ee.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Tt||X(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;a<u;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),o<1&&u?n:(u||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:Ee.extend({},t),opts:Ee.extend(!0,{specialEasing:{},easing:Ee.easing._default},n),originalProperties:t,originalOptions:n,startTime:Tt||X(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Ee.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(Q(c,l.opts.specialEasing);o<a;o++)if(r=J.prefilters[o].call(l,e,c,l.opts))return xe(r.stop)&&(Ee._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return Ee.map(c,G,l),xe(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),Ee.fx.timer(Ee.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}function K(e){var t=e.match(Pe)||[];return t.join(" ")}function Z(e){return e.getAttribute&&e.getAttribute("class")||""}function ee(e){return Array.isArray(e)?e:"string"==typeof e?e.match(Pe)||[]:[]}function te(e,t,n,i){var o;if(Array.isArray(t))Ee.each(t,function(t,r){n||Rt.test(e)?i(e,r):te(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==r(t))i(e,t);else for(o in t)te(e+"["+o+"]",t[o],n,i)}function ne(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Pe)||[];if(xe(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function re(e,t,n,r){function i(s){var u;return o[s]=!0,Ee.each(e[s]||[],function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},a=e===Gt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function ie(e,t){var n,r,i=Ee.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Ee.extend(!0,e,r),e}function oe(e,t,n){for(var r,i,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function ae(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(i in l)if(s=i.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[i]:l[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}var se=[],ue=Object.getPrototypeOf,le=se.slice,ce=se.flat?function(e){return se.flat.call(e)}:function(e){return se.concat.apply([],e)},fe=se.push,pe=se.indexOf,de={},he=de.toString,ge=de.hasOwnProperty,ve=ge.toString,ye=ve.call(Object),me={},xe=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},be=function(e){return null!=e&&e===e.window},we=e.document,Te={type:!0,src:!0,nonce:!0,noModule:!0},Ce="3.5.1",Ee=function(e,t){return new Ee.fn.init(e,t)};Ee.fn=Ee.prototype={jquery:Ce,constructor:Ee,length:0,toArray:function(){return le.call(this)},get:function(e){return null==e?le.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=Ee.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return Ee.each(this,e)},map:function(e){return this.pushStack(Ee.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(le.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(Ee.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(Ee.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:fe,sort:se.sort,splice:se.splice},Ee.extend=Ee.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||xe(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(Ee.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||Ee.isPlainObject(n)?n:{},i=!1,a[t]=Ee.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},Ee.extend({expando:"jQuery"+(Ce+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==he.call(e))&&(!(t=ue(e))||(n=ge.call(t,"constructor")&&t.constructor,"function"==typeof n&&ve.call(n)===ye))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){n(e,{nonce:t&&t.nonce},r)},each:function(e,t){var n,r=0;if(i(e))for(n=e.length;r<n&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(i(Object(e))?Ee.merge(n,"string"==typeof e?[e]:e):fe.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:pe.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,o,a=0,s=[];if(i(e))for(r=e.length;a<r;a++)o=t(e[a],a,n),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,n),null!=o&&s.push(o);return ce(s)},guid:1,support:me}),"function"==typeof Symbol&&(Ee.fn[Symbol.iterator]=se[Symbol.iterator]),Ee.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){de["[object "+t+"]"]=t.toLowerCase()});var Se=function(e){function t(e,t,n,r){var i,o,a,s,u,l,c,p=t&&t.ownerDocument,h=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return n;if(!r&&(L(t),t=t||H,P)){if(11!==h&&(u=xe.exec(e)))if(i=u[1]){if(9===h){if(!(a=t.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&W(t,a)&&a.id===i)return n.push(a),n}else{if(u[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&T.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(i)),n}if(T.qsa&&!V[e+" "]&&(!R||!R.test(e))&&(1!==h||"object"!==t.nodeName.toLowerCase())){if(c=e,p=t,1===h&&(fe.test(e)||ce.test(e))){for(p=be.test(e)&&f(t.parentNode)||t,p===t&&T.scope||((s=t.getAttribute("id"))?s=s.replace(Ce,Ee):t.setAttribute("id",s=F)),l=k(e),o=l.length;o--;)l[o]=(s?"#"+s:":scope")+" "+d(l[o]);c=l.join(",")}try{return Z.apply(n,p.querySelectorAll(c)),n}catch(g){V(e,!0)}finally{s===F&&t.removeAttribute("id")}}}return N(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[F]=!0,e}function i(e){var t=H.createElement("fieldset");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=n.length;r--;)C.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ke(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function f(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function d(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function h(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var l,c,f,p=[$,s];if(u){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(f=t[F]||(t[F]={}),c=f[t.uniqueID]||(f[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[o])&&l[0]===$&&l[1]===s)return p[2]=l[2];if(c[o]=p,p[2]=e(t,n,u))return!0}return!1}}function g(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function v(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function y(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function m(e,t,n,i,o,a){return i&&!i[F]&&(i=m(i)),o&&!o[F]&&(o=m(o,a)),r(function(r,a,s,u){var l,c,f,p=[],d=[],h=a.length,g=r||v(t||"*",s.nodeType?[s]:s,[]),m=!e||!r&&t?g:y(g,p,e,s,u),x=n?o||(r?e:h||i)?[]:a:m;if(n&&n(m,x,s,u),i)for(l=y(x,d),i(l,[],s,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(m[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(m[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?te(r,f):p[c])>-1&&(r[l]=!(a[l]=f))}}else x=y(x===a?x.splice(h,x.length):x),o?o(null,a,x,u):Z.apply(a,x)})}function x(e){for(var t,n,r,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,u=h(function(e){return e===t},a,!0),l=h(function(e){return te(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==D)||((t=n).nodeType?u(e,n,r):l(e,n,r));return t=null,i}];s<i;s++)if(n=C.relative[e[s].type])c=[h(g(c),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[F]){for(r=++s;r<i&&!C.relative[e[r].type];r++);return m(s>1&&g(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,s<r&&x(e.slice(s,r)),r<i&&x(e=e.slice(r)),r<i&&d(e))}c.push(n)}return g(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],m=D,x=r||o&&C.find.TAG("*",l),b=$+=null==m?1:Math.random()||.1,w=x.length;for(l&&(D=a==H||a||l);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0,a||c.ownerDocument==H||(L(c),s=!P);p=e[f++];)if(p(c,a||H,s)){u.push(c);break}l&&($=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,a,s);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=J.call(u));v=y(v)}Z.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&($=b,D=m),g};return i?r(a):a}var w,T,C,E,S,k,A,N,D,j,q,L,H,O,P,R,M,I,W,F="sizzle"+1*new Date,B=e.document,$=0,_=0,z=n(),U=n(),X=n(),V=n(),G=function(e,t){return e===t&&(q=!0),0},Y={}.hasOwnProperty,Q=[],J=Q.pop,K=Q.push,Z=Q.push,ee=Q.slice,te=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",oe="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+re+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(re+"+","g"),ue=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),fe=new RegExp(re+"|>"),pe=new RegExp(ae),de=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/HTML$/i,ve=/^(?:input|select|textarea|button)$/i,ye=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,xe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,we=new RegExp("\\\\[\\da-fA-F]{1,6}"+re+"?|\\\\([^\\r\\n\\f])","g"),Te=function(e,t){var n="0x"+e.slice(1)-65536;return t?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ee=function(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},Se=function(){L()},ke=h(function(e){return e.disabled===!0&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Z.apply(Q=ee.call(B.childNodes),B.childNodes),Q[B.childNodes.length].nodeType}catch(Ae){Z={apply:Q.length?function(e,t){K.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}T=t.support={},S=t.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!ge.test(t||n&&n.nodeName||"HTML")},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:B;return r!=H&&9===r.nodeType&&r.documentElement?(H=r,O=H.documentElement,P=!S(H),B!=H&&(n=H.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),T.scope=i(function(e){return O.appendChild(e).appendChild(H.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),T.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),T.getElementsByTagName=i(function(e){return e.appendChild(H.createComment("")),!e.getElementsByTagName("*").length}),T.getElementsByClassName=me.test(H.getElementsByClassName),T.getById=i(function(e){return O.appendChild(e).id=F,!H.getElementsByName||!H.getElementsByName(F).length}),T.getById?(C.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n=t.getElementById(e);return n?[n]:[]}}):(C.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&P){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),C.find.TAG=T.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):T.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},C.find.CLASS=T.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&P)return t.getElementsByClassName(e)},M=[],R=[],(T.qsa=me.test(H.querySelectorAll))&&(i(function(e){var t;O.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll("[id~="+F+"-]").length||R.push("~="),t=H.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||R.push("\\["+re+"*name"+re+"*="+re+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||R.push(".#.+[+~]"),e.querySelectorAll("\\\f"),R.push("[\\r\\n\\f]")}),i(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=H.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+re+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),O.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(T.matchesSelector=me.test(I=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&i(function(e){T.disconnectedMatch=I.call(e,"*"),I.call(e,"[s!='']:x"),M.push("!=",ae)}),R=R.length&&new RegExp(R.join("|")),M=M.length&&new RegExp(M.join("|")),t=me.test(O.compareDocumentPosition),W=t||me.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return q=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!T.sortDetached&&t.compareDocumentPosition(e)===n?e==H||e.ownerDocument==B&&W(B,e)?-1:t==H||t.ownerDocument==B&&W(B,t)?1:j?te(j,e)-te(j,t):0:4&n?-1:1)}:function(e,t){if(e===t)return q=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!i||!o)return e==H?-1:t==H?1:i?-1:o?1:j?te(j,e)-te(j,t):0;if(i===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[r]===u[r];)r++;return r?a(s[r],u[r]):s[r]==B?-1:u[r]==B?1:0},H):H},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if(L(e),T.matchesSelector&&P&&!V[n+" "]&&(!M||!M.test(n))&&(!R||!R.test(n)))try{var r=I.call(e,n);if(r||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){V(n,!0)}return t(n,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!=H&&L(e),W(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!=H&&L(e);var n=C.attrHandle[t.toLowerCase()],r=n&&Y.call(C.attrHandle,t.toLowerCase())?n(e,t,!P):void 0;return void 0!==r?r:T.attributes||!P?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.escape=function(e){return(e+"").replace(Ce,Ee)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(q=!T.detectDuplicates,j=!T.sortStable&&e.slice(0),e.sort(G),q){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return j=null,e},E=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=E(t);return n},C=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),m=!u&&!s,x=!1;if(v){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&m){for(p=v,f=p[F]||(p[F]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],d=l[0]===$&&l[1],x=d&&l[2],p=d&&v.childNodes[d];p=++d&&p&&p[g]||(x=d=0)||h.pop();)if(1===p.nodeType&&++x&&p===t){c[e]=[$,d,x];break}}else if(m&&(p=t,f=p[F]||(p[F]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),l=c[e]||[],
d=l[0]===$&&l[1],x=d),x===!1)for(;(p=++d&&p&&p[g]||(x=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++x||(m&&(f=p[F]||(p[F]={}),c=f[p.uniqueID]||(f[p.uniqueID]={}),c[e]=[$,x]),p!==t)););return x-=i,x===r||x%r===0&&x/r>=0}}},PSEUDO:function(e,n){var i,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[F]?o(n):o.length>1?(i=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=te(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=A(e.replace(ue,"$1"));return i[F]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Te),function(t){return(t.textContent||E(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do if(n=P?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:l(!1),disabled:l(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return ye.test(e.nodeName)},input:function(e){return ve.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:c(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=u(w);return p.prototype=C.filters=C.pseudos,C.setFilters=new p,k=t.tokenize=function(e,n){var r,i,o,a,s,u,l,c=U[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=C.preFilter;s;){r&&!(i=le.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),s=s.slice(r.length));for(a in C.filter)!(i=he[a].exec(s))||l[a]&&!(i=l[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):U(e,u).slice(0)},A=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=x(t[n]),o[F]?r.push(o):i.push(o);o=X(e,b(i,r)),o.selector=e}return o},N=t.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&k(e=l.selector||e);if(n=n||[],1===c.length){if(o=c[0]=c[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&P&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(we,Te),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!C.relative[s=a.type]);)if((u=C.find[s])&&(r=u(a.matches[0].replace(we,Te),be.test(o[0].type)&&f(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&d(o),!e)return Z.apply(n,r),n;break}}return(l||A(e,c))(r,t,!P,n,!t||be.test(e)&&f(t.parentNode)||t),n},T.sortStable=F.split("").sort(G).join("")===F,T.detectDuplicates=!!q,L(),T.sortDetached=i(function(e){return 1&e.compareDocumentPosition(H.createElement("fieldset"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),T.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Ee.find=Se,Ee.expr=Se.selectors,Ee.expr[":"]=Ee.expr.pseudos,Ee.uniqueSort=Ee.unique=Se.uniqueSort,Ee.text=Se.getText,Ee.isXMLDoc=Se.isXML,Ee.contains=Se.contains,Ee.escapeSelector=Se.escape;var ke=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Ee(e).is(n))break;r.push(e)}return r},Ae=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ne=Ee.expr.match.needsContext,De=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;Ee.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Ee.find.matchesSelector(r,e)?[r]:[]:Ee.find.matches(e,Ee.grep(t,function(e){return 1===e.nodeType}))},Ee.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(Ee(e).filter(function(){for(t=0;t<r;t++)if(Ee.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)Ee.find(e,i[t],n);return r>1?Ee.uniqueSort(n):n},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&Ne.test(e)?Ee(e):e||[],!1).length}});var je,qe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Le=Ee.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||je,"string"==typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:qe.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof Ee?t[0]:t,Ee.merge(this,Ee.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:we,!0)),De.test(r[1])&&Ee.isPlainObject(t))for(r in t)xe(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=we.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):xe(e)?void 0!==n.ready?n.ready(e):e(Ee):Ee.makeArray(e,this)};Le.prototype=Ee.fn,je=Ee(we);var He=/^(?:parents|prev(?:Until|All))/,Oe={children:!0,contents:!0,next:!0,prev:!0};Ee.fn.extend({has:function(e){var t=Ee(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(Ee.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&Ee(e);if(!Ne.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Ee.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Ee.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?pe.call(Ee(e),this[0]):pe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Ee.uniqueSort(Ee.merge(this.get(),Ee(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Ee.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ke(e,"parentNode")},parentsUntil:function(e,t,n){return ke(e,"parentNode",n)},next:function(e){return s(e,"nextSibling")},prev:function(e){return s(e,"previousSibling")},nextAll:function(e){return ke(e,"nextSibling")},prevAll:function(e){return ke(e,"previousSibling")},nextUntil:function(e,t,n){return ke(e,"nextSibling",n)},prevUntil:function(e,t,n){return ke(e,"previousSibling",n)},siblings:function(e){return Ae((e.parentNode||{}).firstChild,e)},children:function(e){return Ae(e.firstChild)},contents:function(e){return null!=e.contentDocument&&ue(e.contentDocument)?e.contentDocument:(o(e,"template")&&(e=e.content||e),Ee.merge([],e.childNodes))}},function(e,t){Ee.fn[e]=function(n,r){var i=Ee.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Ee.filter(r,i)),this.length>1&&(Oe[e]||Ee.uniqueSort(i),He.test(e)&&i.reverse()),this.pushStack(i)}});var Pe=/[^\x20\t\r\n\f]+/g;Ee.Callbacks=function(e){e="string"==typeof e?u(e):Ee.extend({},e);var t,n,i,o,a=[],s=[],l=-1,c=function(){for(o=o||e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)a[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},f={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function i(t){Ee.each(t,function(t,n){xe(n)?e.unique&&f.has(n)||a.push(n):n&&n.length&&"string"!==r(n)&&i(n)})}(arguments),n&&!t&&c()),this},remove:function(){return Ee.each(arguments,function(e,t){for(var n;(n=Ee.inArray(t,a,n))>-1;)a.splice(n,1),n<=l&&l--}),this},has:function(e){return e?Ee.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=s=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},Ee.extend({Deferred:function(t){var n=[["notify","progress",Ee.Callbacks("memory"),Ee.Callbacks("memory"),2],["resolve","done",Ee.Callbacks("once memory"),Ee.Callbacks("once memory"),0,"resolved"],["reject","fail",Ee.Callbacks("once memory"),Ee.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},"catch":function(e){return i.then(null,e)},pipe:function(){var e=arguments;return Ee.Deferred(function(t){Ee.each(n,function(n,r){var i=xe(e[r[4]])&&e[r[4]];o[r[1]](function(){var e=i&&i.apply(this,arguments);e&&xe(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){function o(t,n,r,i){return function(){var s=this,u=arguments,f=function(){var e,f;if(!(t<a)){if(e=r.apply(s,u),e===n.promise())throw new TypeError("Thenable self-resolution");f=e&&("object"==typeof e||"function"==typeof e)&&e.then,xe(f)?i?f.call(e,o(a,n,l,i),o(a,n,c,i)):(a++,f.call(e,o(a,n,l,i),o(a,n,c,i),o(a,n,l,n.notifyWith))):(r!==l&&(s=void 0,u=[e]),(i||n.resolveWith)(s,u))}},p=i?f:function(){try{f()}catch(e){Ee.Deferred.exceptionHook&&Ee.Deferred.exceptionHook(e,p.stackTrace),t+1>=a&&(r!==c&&(s=void 0,u=[e]),n.rejectWith(s,u))}};t?p():(Ee.Deferred.getStackHook&&(p.stackTrace=Ee.Deferred.getStackHook()),e.setTimeout(p))}}var a=0;return Ee.Deferred(function(e){n[0][3].add(o(0,e,xe(i)?i:l,e.notifyWith)),n[1][3].add(o(0,e,xe(t)?t:l)),n[2][3].add(o(0,e,xe(r)?r:c))}).promise()},promise:function(e){return null!=e?Ee.extend(e,i):i}},o={};return Ee.each(n,function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add(function(){r=s},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith}),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=le.call(arguments),o=Ee.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?le.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&(f(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||xe(i[n]&&i[n].then)))return o.then();for(;n--;)f(i[n],a(n),o.reject);return o.promise()}});var Re=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Ee.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Re.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},Ee.readyException=function(t){e.setTimeout(function(){throw t})};var Me=Ee.Deferred();Ee.fn.ready=function(e){return Me.then(e)["catch"](function(e){Ee.readyException(e)}),this},Ee.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--Ee.readyWait:Ee.isReady)||(Ee.isReady=!0,e!==!0&&--Ee.readyWait>0||Me.resolveWith(we,[Ee]))}}),Ee.ready.then=Me.then,"complete"===we.readyState||"loading"!==we.readyState&&!we.documentElement.doScroll?e.setTimeout(Ee.ready):(we.addEventListener("DOMContentLoaded",p),e.addEventListener("load",p));var Ie=function(e,t,n,i,o,a,s){var u=0,l=e.length,c=null==n;if("object"===r(n)){o=!0;for(u in n)Ie(e,t,u,n[u],!0,a,s)}else if(void 0!==i&&(o=!0,xe(i)||(s=!0),c&&(s?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(Ee(e),n)})),t))for(;u<l;u++)t(e[u],n,s?i:i.call(e[u],u,t(e[u],n)));return o?e:c?t.call(e):l?t(e[0],n):a},We=/^-ms-/,Fe=/-([a-z])/g,Be=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};g.uid=1,g.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Be(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[h(t)]=n;else for(r in t)i[h(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][h(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(h):(t=h(t),t=t in r?[t]:t.match(Pe)||[]),n=t.length;for(;n--;)delete r[t[n]]}(void 0===t||Ee.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!Ee.isEmptyObject(t)}};var $e=new g,_e=new g,ze=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ue=/[A-Z]/g;Ee.extend({hasData:function(e){return _e.hasData(e)||$e.hasData(e)},data:function(e,t,n){return _e.access(e,t,n)},removeData:function(e,t){_e.remove(e,t)},_data:function(e,t,n){return $e.access(e,t,n)},_removeData:function(e,t){$e.remove(e,t)}}),Ee.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=_e.get(o),1===o.nodeType&&!$e.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=h(r.slice(5)),y(o,r,i[r])));$e.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){_e.set(this,e)}):Ie(this,function(t){var n;if(o&&void 0===t){if(n=_e.get(o,e),void 0!==n)return n;if(n=y(o,e),void 0!==n)return n}else this.each(function(){_e.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){_e.remove(this,e)})}}),Ee.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=$e.get(e,t),n&&(!r||Array.isArray(n)?r=$e.access(e,t,Ee.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=Ee.queue(e,t),r=n.length,i=n.shift(),o=Ee._queueHooks(e,t),a=function(){Ee.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return $e.get(e,n)||$e.access(e,n,{empty:Ee.Callbacks("once memory").add(function(){$e.remove(e,[t+"queue",n])})})}}),Ee.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Ee.queue(this[0],e):void 0===t?this:this.each(function(){var n=Ee.queue(this,e,t);Ee._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Ee.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Ee.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Ee.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=$e.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ve=new RegExp("^(?:([+-])=|)("+Xe+")([a-z%]*)$","i"),Ge=["Top","Right","Bottom","Left"],Ye=we.documentElement,Qe=function(e){return Ee.contains(e.ownerDocument,e)},Je={composed:!0};Ye.getRootNode&&(Qe=function(e){return Ee.contains(e.ownerDocument,e)||e.getRootNode(Je)===e.ownerDocument});var Ke=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&Qe(e)&&"none"===Ee.css(e,"display")},Ze={};Ee.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ke(this)?Ee(this).show():Ee(this).hide()})}});var et=/^(?:checkbox|radio)$/i,tt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,nt=/^$|^module$|\/(?:java|ecma)script/i;!function(){var e=we.createDocumentFragment(),t=e.appendChild(we.createElement("div")),n=we.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),me.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",me.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",me.option=!!t.lastChild}();var rt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td,me.option||(rt.optgroup=rt.option=[1,"<select multiple='multiple'>","</select>"]);var it=/<|&#?\w+;/,ot=/^key/,at=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,st=/^([^.]*)(?:\.(.+)|)/;Ee.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=$e.get(e);if(Be(e))for(n.handler&&(o=n,n=o.handler,i=o.selector),i&&Ee.find.matchesSelector(Ye,i),n.guid||(n.guid=Ee.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return"undefined"!=typeof Ee&&Ee.event.triggered!==t.type?Ee.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Pe)||[""],l=t.length;l--;)s=st.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d&&(f=Ee.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=Ee.event.special[d]||{},c=Ee.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Ee.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,a)!==!1||e.addEventListener&&e.addEventListener(d,a)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Ee.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=$e.hasData(e)&&$e.get(e);if(v&&(u=v.events)){for(t=(t||"").match(Pe)||[""],l=t.length;l--;)if(s=st.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(f=Ee.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&f.teardown.call(e,h,v.handle)!==!1||Ee.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)Ee.event.remove(e,d+t[l],n,r,!0);Ee.isEmptyObject(u)&&$e.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=Ee.event.fix(e),l=($e.get(this,"events")||Object.create(null))[u.type]||[],c=Ee.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,u)!==!1){for(a=Ee.event.handlers.call(this,u,l),t=0;(i=a[t++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&o.namespace!==!1&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,r=((Ee.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(u.result=r)===!1&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||l.disabled!==!0)){for(o=[],a={},n=0;n<u;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?Ee(i,this).index(l)>-1:Ee.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(Ee.Event.prototype,e,{enumerable:!0,configurable:!0,get:xe(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[Ee.expando]?e:new Ee.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return et.test(t.type)&&t.click&&o(t,"input")&&D(t,"click",E),!1},trigger:function(e){var t=this||e;return et.test(t.type)&&t.click&&o(t,"input")&&D(t,"click"),!0},_default:function(e){var t=e.target;return et.test(t.type)&&t.click&&o(t,"input")&&$e.get(t,"click")||o(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},Ee.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},Ee.Event=function(e,t){return this instanceof Ee.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?E:S,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&Ee.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),void(this[Ee.expando]=!0)):new Ee.Event(e,t)},Ee.Event.prototype={constructor:Ee.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=E,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=E,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=E,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},Ee.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&ot.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&at.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},Ee.event.addProp),Ee.each({focus:"focusin",blur:"focusout"},function(e,t){Ee.event.special[e]={setup:function(){return D(this,e,k),!1},trigger:function(){return D(this,e),!0},delegateType:t}}),Ee.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Ee.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||Ee.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Ee.fn.extend({on:function(e,t,n,r){return N(this,e,t,n,r)},one:function(e,t,n,r){return N(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Ee(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=S),this.each(function(){Ee.event.remove(this,e,n,t)})}});var ut=/<script|<style|<link/i,lt=/checked\s*(?:[^=]|=\s*.checked.)/i,ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Ee.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=Qe(e);if(!(me.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Ee.isXMLDoc(e)))for(a=w(s),o=w(e),r=0,i=o.length;r<i;r++)O(o[r],a[r]);if(t)if(n)for(o=o||w(e),a=a||w(s),r=0,i=o.length;r<i;r++)H(o[r],a[r]);else H(e,s);return a=w(s,"script"),a.length>0&&T(a,!u&&w(e,"script")),s},cleanData:function(e){for(var t,n,r,i=Ee.event.special,o=0;void 0!==(n=e[o]);o++)if(Be(n)){if(t=n[$e.expando]){if(t.events)for(r in t.events)i[r]?Ee.event.remove(n,r):Ee.removeEvent(n,r,t.handle);n[$e.expando]=void 0}n[_e.expando]&&(n[_e.expando]=void 0)}}}),Ee.fn.extend({detach:function(e){return R(this,e,!0)},remove:function(e){return R(this,e)},text:function(e){return Ie(this,function(e){return void 0===e?Ee.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return P(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=j(this,e);t.appendChild(e)}})},prepend:function(){return P(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=j(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return P(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Ee.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Ee.clone(this,e,t)})},html:function(e){return Ie(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ut.test(e)&&!rt[(tt.exec(e)||["",""])[1].toLowerCase()]){e=Ee.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(Ee.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return P(this,arguments,function(t){var n=this.parentNode;Ee.inArray(this,e)<0&&(Ee.cleanData(w(this)),n&&n.replaceChild(t,this))},e)}}),Ee.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Ee.fn[e]=function(e){for(var n,r=[],i=Ee(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),Ee(i[a])[t](n),fe.apply(r,n.get());return this.pushStack(r)}});var ft=new RegExp("^("+Xe+")(?!px)[a-z%]+$","i"),pt=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},dt=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];r=n.call(e);for(i in t)e.style[i]=o[i];return r},ht=new RegExp(Ge.join("|"),"i");!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ye.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);r="1%"!==t.top,u=12===n(t.marginLeft),c.style.right="60%",a=36===n(t.right),i=36===n(t.width),c.style.position="absolute",o=12===n(c.offsetWidth/3),Ye.removeChild(l),c=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,l=we.createElement("div"),c=we.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",me.clearCloneStyle="content-box"===c.style.backgroundClip,Ee.extend(me,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,n,r,i;return null==s&&(t=we.createElement("table"),n=we.createElement("tr"),r=we.createElement("div"),t.style.cssText="position:absolute;left:-11111px",n.style.height="1px",r.style.height="9px",Ye.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),s=parseInt(i.height)>3,Ye.removeChild(t)),s}}))}();var gt=["Webkit","Moz","ms"],vt=we.createElement("div").style,yt={},mt=/^(none|table(?!-c[ea]).+)/,xt=/^--/,bt={position:"absolute",visibility:"hidden",display:"block"},wt={letterSpacing:"0",fontWeight:"400"};Ee.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=M(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=h(t),u=xt.test(t),l=e.style;return u||(t=F(s)),a=Ee.cssHooks[t]||Ee.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]:(o=typeof n,"string"===o&&(i=Ve.exec(n))&&i[1]&&(n=m(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||u||(n+=i&&i[3]||(Ee.cssNumber[s]?"":"px")),me.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,a,s=h(t),u=xt.test(t);return u||(t=F(s)),a=Ee.cssHooks[t]||Ee.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=M(e,t,r)),"normal"===i&&t in wt&&(i=wt[t]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),Ee.each(["height","width"],function(e,t){Ee.cssHooks[t]={get:function(e,n,r){if(n)return!mt.test(Ee.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?_(e,t,r):dt(e,bt,function(){return _(e,t,r)})},set:function(e,n,r){var i,o=pt(e),a=!me.scrollboxSize()&&"absolute"===o.position,s=a||r,u=s&&"border-box"===Ee.css(e,"boxSizing",!1,o),l=r?$(e,t,r,u,o):0;return u&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-$(e,t,"border",!1,o)-.5)),l&&(i=Ve.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=Ee.css(e,t)),B(e,n,l)}}}),Ee.cssHooks.marginLeft=I(me.reliableMarginLeft,function(e,t){if(t)return(parseFloat(M(e,"marginLeft"))||e.getBoundingClientRect().left-dt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),Ee.each({margin:"",padding:"",border:"Width"},function(e,t){Ee.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+Ge[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(Ee.cssHooks[e+t].set=B)}),Ee.fn.extend({css:function(e,t){return Ie(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=pt(e),i=t.length;a<i;a++)o[t[a]]=Ee.css(e,t[a],!1,r);return o}return void 0!==n?Ee.style(e,t,n):Ee.css(e,t)},e,t,arguments.length>1)}}),Ee.Tween=z,z.prototype={constructor:z,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||Ee.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Ee.cssNumber[n]?"":"px")},cur:function(){var e=z.propHooks[this.prop];return e&&e.get?e.get(this):z.propHooks._default.get(this)},run:function(e){var t,n=z.propHooks[this.prop];return this.options.duration?this.pos=t=Ee.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):z.propHooks._default.set(this),this}},z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:function(e){
var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=Ee.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){Ee.fx.step[e.prop]?Ee.fx.step[e.prop](e):1!==e.elem.nodeType||!Ee.cssHooks[e.prop]&&null==e.elem.style[F(e.prop)]?e.elem[e.prop]=e.now:Ee.style(e.elem,e.prop,e.now+e.unit)}}},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Ee.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},Ee.fx=z.prototype.init,Ee.fx.step={};var Tt,Ct,Et=/^(?:toggle|show|hide)$/,St=/queueHooks$/;Ee.Animation=Ee.extend(J,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return m(n.elem,e,Ve.exec(t),n),n}]},tweener:function(e,t){xe(e)?(t=e,e=["*"]):e=e.match(Pe);for(var n,r=0,i=e.length;r<i;r++)n=e[r],J.tweeners[n]=J.tweeners[n]||[],J.tweeners[n].unshift(t)},prefilters:[Y],prefilter:function(e,t){t?J.prefilters.unshift(e):J.prefilters.push(e)}}),Ee.speed=function(e,t,n){var r=e&&"object"==typeof e?Ee.extend({},e):{complete:n||!n&&t||xe(e)&&e,duration:e,easing:n&&t||t&&!xe(t)&&t};return Ee.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in Ee.fx.speeds?r.duration=Ee.fx.speeds[r.duration]:r.duration=Ee.fx.speeds._default),null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){xe(r.old)&&r.old.call(this),r.queue&&Ee.dequeue(this,r.queue)},r},Ee.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Ee.isEmptyObject(e),o=Ee.speed(t,n,r),a=function(){var t=J(this,Ee.extend({},e),o);(i||$e.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Ee.timers,a=$e.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&St.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||Ee.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=$e.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Ee.timers,a=r?r.length:0;for(n.finish=!0,Ee.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Ee.each(["toggle","show","hide"],function(e,t){var n=Ee.fn[t];Ee.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(V(t,!0),e,r,i)}}),Ee.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Ee.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Ee.timers=[],Ee.fx.tick=function(){var e,t=0,n=Ee.timers;for(Tt=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Ee.fx.stop(),Tt=void 0},Ee.fx.timer=function(e){Ee.timers.push(e),Ee.fx.start()},Ee.fx.interval=13,Ee.fx.start=function(){Ct||(Ct=!0,U())},Ee.fx.stop=function(){Ct=null},Ee.fx.speeds={slow:600,fast:200,_default:400},Ee.fn.delay=function(t,n){return t=Ee.fx?Ee.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=we.createElement("input"),t=we.createElement("select"),n=t.appendChild(we.createElement("option"));e.type="checkbox",me.checkOn=""!==e.value,me.optSelected=n.selected,e=we.createElement("input"),e.value="t",e.type="radio",me.radioValue="t"===e.value}();var kt,At=Ee.expr.attrHandle;Ee.fn.extend({attr:function(e,t){return Ie(this,Ee.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Ee.removeAttr(this,e)})}}),Ee.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?Ee.prop(e,t,n):(1===o&&Ee.isXMLDoc(e)||(i=Ee.attrHooks[t.toLowerCase()]||(Ee.expr.match.bool.test(t)?kt:void 0)),void 0!==n?null===n?void Ee.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=Ee.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!me.radioValue&&"radio"===t&&o(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Pe);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),kt={set:function(e,t,n){return t===!1?Ee.removeAttr(e,n):e.setAttribute(n,n),n}},Ee.each(Ee.expr.match.bool.source.match(/\w+/g),function(e,t){var n=At[t]||Ee.find.attr;At[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=At[a],At[a]=i,i=null!=n(e,t,r)?a:null,At[a]=o),i}});var Nt=/^(?:input|select|textarea|button)$/i,Dt=/^(?:a|area)$/i;Ee.fn.extend({prop:function(e,t){return Ie(this,Ee.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Ee.propFix[e]||e]})}}),Ee.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&Ee.isXMLDoc(e)||(t=Ee.propFix[t]||t,i=Ee.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=Ee.find.attr(e,"tabindex");return t?parseInt(t,10):Nt.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),me.optSelected||(Ee.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),Ee.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Ee.propFix[this.toLowerCase()]=this}),Ee.fn.extend({addClass:function(e){var t,n,r,i,o,a,s,u=0;if(xe(e))return this.each(function(t){Ee(this).addClass(e.call(this,t,Z(this)))});if(t=ee(e),t.length)for(;n=this[u++];)if(i=Z(n),r=1===n.nodeType&&" "+K(i)+" "){for(a=0;o=t[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=K(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,o,a,s,u=0;if(xe(e))return this.each(function(t){Ee(this).removeClass(e.call(this,t,Z(this)))});if(!arguments.length)return this.attr("class","");if(t=ee(e),t.length)for(;n=this[u++];)if(i=Z(n),r=1===n.nodeType&&" "+K(i)+" "){for(a=0;o=t[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=K(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):xe(e)?this.each(function(n){Ee(this).toggleClass(e.call(this,n,Z(this),t),t)}):this.each(function(){var t,i,o,a;if(r)for(i=0,o=Ee(this),a=ee(e);t=a[i++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||(t=Z(this),t&&$e.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":$e.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+K(Z(n))+" ").indexOf(t)>-1)return!0;return!1}});var jt=/\r/g;Ee.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=xe(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Ee(this).val()):e,null==i?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=Ee.map(i,function(e){return null==e?"":e+""})),t=Ee.valHooks[this.type]||Ee.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Ee.valHooks[i.type]||Ee.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(jt,""):null==n?"":n)}}}),Ee.extend({valHooks:{option:{get:function(e){var t=Ee.find.attr(e,"value");return null!=t?t:K(Ee.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,s="select-one"===e.type,u=s?null:[],l=s?a+1:i.length;for(r=a<0?l:s?a:0;r<l;r++)if(n=i[r],(n.selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!o(n.parentNode,"optgroup"))){if(t=Ee(n).val(),s)return t;u.push(t)}return u},set:function(e,t){for(var n,r,i=e.options,o=Ee.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=Ee.inArray(Ee.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Ee.each(["radio","checkbox"],function(){Ee.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=Ee.inArray(Ee(e).val(),t)>-1}},me.checkOn||(Ee.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),me.focusin="onfocusin"in e;var qt=/^(?:focusinfocus|focusoutblur)$/,Lt=function(e){e.stopPropagation()};Ee.extend(Ee.event,{trigger:function(t,n,r,i){var o,a,s,u,l,c,f,p,d=[r||we],h=ge.call(t,"type")?t.type:t,g=ge.call(t,"namespace")?t.namespace.split("."):[];if(a=p=s=r=r||we,3!==r.nodeType&&8!==r.nodeType&&!qt.test(h+Ee.event.triggered)&&(h.indexOf(".")>-1&&(g=h.split("."),h=g.shift(),g.sort()),l=h.indexOf(":")<0&&"on"+h,t=t[Ee.expando]?t:new Ee.Event(h,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Ee.makeArray(n,[t]),f=Ee.event.special[h]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!be(r)){for(u=f.delegateType||h,qt.test(u+h)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||we)&&d.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=d[o++])&&!t.isPropagationStopped();)p=a,t.type=o>1?u:f.bindType||h,c=($e.get(a,"events")||Object.create(null))[t.type]&&$e.get(a,"handle"),c&&c.apply(a,n),c=l&&a[l],c&&c.apply&&Be(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=h,i||t.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),n)!==!1||!Be(r)||l&&xe(r[h])&&!be(r)&&(s=r[l],s&&(r[l]=null),Ee.event.triggered=h,t.isPropagationStopped()&&p.addEventListener(h,Lt),r[h](),t.isPropagationStopped()&&p.removeEventListener(h,Lt),Ee.event.triggered=void 0,s&&(r[l]=s)),t.result}},simulate:function(e,t,n){var r=Ee.extend(new Ee.Event,n,{type:e,isSimulated:!0});Ee.event.trigger(r,null,t)}}),Ee.fn.extend({trigger:function(e,t){return this.each(function(){Ee.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return Ee.event.trigger(e,t,n,!0)}}),me.focusin||Ee.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Ee.event.simulate(t,e.target,Ee.event.fix(e))};Ee.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=$e.access(r,t);i||r.addEventListener(e,n,!0),$e.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=$e.access(r,t)-1;i?$e.access(r,t,i):(r.removeEventListener(e,n,!0),$e.remove(r,t))}}});var Ht=e.location,Ot={guid:Date.now()},Pt=/\?/;Ee.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||Ee.error("Invalid XML: "+t),n};var Rt=/\[\]$/,Mt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Wt=/^(?:input|select|textarea|keygen)/i;Ee.param=function(e,t){var n,r=[],i=function(e,t){var n=xe(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!Ee.isPlainObject(e))Ee.each(e,function(){i(this.name,this.value)});else for(n in e)te(n,e[n],t,i);return r.join("&")},Ee.fn.extend({serialize:function(){return Ee.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Ee.prop(this,"elements");return e?Ee.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Ee(this).is(":disabled")&&Wt.test(this.nodeName)&&!It.test(e)&&(this.checked||!et.test(e))}).map(function(e,t){var n=Ee(this).val();return null==n?null:Array.isArray(n)?Ee.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}});var Ft=/%20/g,Bt=/#.*$/,$t=/([?&])_=[^&]*/,_t=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Xt=/^\/\//,Vt={},Gt={},Yt="*/".concat("*"),Qt=we.createElement("a");Qt.href=Ht.href,Ee.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ht.href,type:"GET",isLocal:zt.test(Ht.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Ee.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ie(ie(e,Ee.ajaxSettings),t):ie(Ee.ajaxSettings,e)},ajaxPrefilter:ne(Vt),ajaxTransport:ne(Gt),ajax:function(t,n){function r(t,n,r,s){var l,p,d,b,w,T=n;c||(c=!0,u&&e.clearTimeout(u),i=void 0,a=s||"",C.readyState=t>0?4:0,l=t>=200&&t<300||304===t,r&&(b=oe(h,C,r)),!l&&Ee.inArray("script",h.dataTypes)>-1&&(h.converters["text script"]=function(){}),b=ae(h,b,C,l),l?(h.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(Ee.lastModified[o]=w),w=C.getResponseHeader("etag"),w&&(Ee.etag[o]=w)),204===t||"HEAD"===h.type?T="nocontent":304===t?T="notmodified":(T=b.state,p=b.data,d=b.error,l=!d)):(d=T,!t&&T||(T="error",t<0&&(t=0))),C.status=t,C.statusText=(n||T)+"",l?y.resolveWith(g,[p,T,C]):y.rejectWith(g,[C,T,d]),C.statusCode(x),x=void 0,f&&v.trigger(l?"ajaxSuccess":"ajaxError",[C,h,l?p:d]),m.fireWith(g,[C,T]),f&&(v.trigger("ajaxComplete",[C,h]),--Ee.active||Ee.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var i,o,a,s,u,l,c,f,p,d,h=Ee.ajaxSetup({},n),g=h.context||h,v=h.context&&(g.nodeType||g.jquery)?Ee(g):Ee.event,y=Ee.Deferred(),m=Ee.Callbacks("once memory"),x=h.statusCode||{},b={},w={},T="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=_t.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)C.always(e[C.status]);else for(t in e)x[t]=[x[t],e[t]];return this},abort:function(e){var t=e||T;return i&&i.abort(t),r(0,t),this}};if(y.promise(C),h.url=((t||h.url||Ht.href)+"").replace(Xt,Ht.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(Pe)||[""],null==h.crossDomain){l=we.createElement("a");try{l.href=h.url,l.href=l.href,h.crossDomain=Qt.protocol+"//"+Qt.host!=l.protocol+"//"+l.host}catch(E){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Ee.param(h.data,h.traditional)),re(Vt,h,n,C),c)return C;f=Ee.event&&h.global,f&&0===Ee.active++&&Ee.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Ut.test(h.type),o=h.url.replace(Bt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Ft,"+")):(d=h.url.slice(o.length),h.data&&(h.processData||"string"==typeof h.data)&&(o+=(Pt.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(o=o.replace($t,"$1"),d=(Pt.test(o)?"&":"?")+"_="+Ot.guid++ +d),h.url=o+d),h.ifModified&&(Ee.lastModified[o]&&C.setRequestHeader("If-Modified-Since",Ee.lastModified[o]),Ee.etag[o]&&C.setRequestHeader("If-None-Match",Ee.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Yt+"; q=0.01":""):h.accepts["*"]);for(p in h.headers)C.setRequestHeader(p,h.headers[p]);if(h.beforeSend&&(h.beforeSend.call(g,C,h)===!1||c))return C.abort();if(T="abort",m.add(h.complete),C.done(h.success),C.fail(h.error),i=re(Gt,h,n,C)){if(C.readyState=1,f&&v.trigger("ajaxSend",[C,h]),c)return C;h.async&&h.timeout>0&&(u=e.setTimeout(function(){C.abort("timeout")},h.timeout));try{c=!1,i.send(b,r)}catch(E){if(c)throw E;r(-1,E)}}else r(-1,"No Transport");return C},getJSON:function(e,t,n){return Ee.get(e,t,n,"json")},getScript:function(e,t){return Ee.get(e,void 0,t,"script")}}),Ee.each(["get","post"],function(e,t){Ee[t]=function(e,n,r,i){return xe(n)&&(i=i||r,r=n,n=void 0),Ee.ajax(Ee.extend({url:e,type:t,dataType:i,data:n,success:r},Ee.isPlainObject(e)&&e))}}),Ee.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),Ee._evalUrl=function(e,t,n){return Ee.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){Ee.globalEval(e,t,n)}})},Ee.fn.extend({wrapAll:function(e){var t;return this[0]&&(xe(e)&&(e=e.call(this[0])),t=Ee(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return xe(e)?this.each(function(t){Ee(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Ee(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=xe(e);return this.each(function(n){Ee(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){Ee(this).replaceWith(this.childNodes)}),this}}),Ee.expr.pseudos.hidden=function(e){return!Ee.expr.pseudos.visible(e)},Ee.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},Ee.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Jt={0:200,1223:204},Kt=Ee.ajaxSettings.xhr();me.cors=!!Kt&&"withCredentials"in Kt,me.ajax=Kt=!!Kt,Ee.ajaxTransport(function(t){var n,r;if(me.cors||Kt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Jt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(u){if(n)throw u}},abort:function(){n&&n()}}}),Ee.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),Ee.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return Ee.globalEval(e),e}}}),Ee.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Ee.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var t,n;return{send:function(r,i){t=Ee("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),we.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Zt=[],en=/(=)\?(?=&|$)|\?\?/;Ee.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Zt.pop()||Ee.expando+"_"+Ot.guid++;return this[e]=!0,e}}),Ee.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=t.jsonp!==!1&&(en.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&en.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=xe(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(en,"$1"+i):t.jsonp!==!1&&(t.url+=(Pt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||Ee.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){void 0===o?Ee(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Zt.push(i)),a&&xe(o)&&o(a[0]),a=o=void 0}),"script"}),me.createHTMLDocument=function(){var e=we.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),Ee.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var r,i,o;return t||(me.createHTMLDocument?(t=we.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=we.location.href,t.head.appendChild(r)):t=we),i=De.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=C([e],t,o),o&&o.length&&Ee(o).remove(),Ee.merge([],i.childNodes))},Ee.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=K(e.slice(s)),e=e.slice(0,s)),xe(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&Ee.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?Ee("<div>").append(Ee.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},Ee.expr.pseudos.animated=function(e){return Ee.grep(Ee.timers,function(t){return e===t.elem}).length},Ee.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l,c=Ee.css(e,"position"),f=Ee(e),p={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=Ee.css(e,"top"),u=Ee.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),xe(t)&&(t=t.call(e,n,Ee.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+i),"using"in t?t.using.call(e,p):("number"==typeof p.top&&(p.top+="px"),"number"==typeof p.left&&(p.left+="px"),f.css(p))}},Ee.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Ee.offset.setOffset(this,e,t)});var t,n,r=this[0];if(r)return r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===Ee.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===Ee.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=Ee(e).offset(),i.top+=Ee.css(e,"borderTopWidth",!0),i.left+=Ee.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-Ee.css(r,"marginTop",!0),left:t.left-i.left-Ee.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===Ee.css(e,"position");)e=e.offsetParent;return e||Ye})}}),Ee.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;Ee.fn[e]=function(r){return Ie(this,function(e,r,i){var o;return be(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i?o?o[t]:e[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i)},e,r,arguments.length)}}),Ee.each(["top","left"],function(e,t){Ee.cssHooks[t]=I(me.pixelPosition,function(e,n){if(n)return n=M(e,t),ft.test(n)?Ee(e).position()[t]+"px":n})}),Ee.each({Height:"height",Width:"width"},function(e,t){Ee.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Ee.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(i===!0||o===!0?"margin":"border");return Ie(this,function(t,n,i){var o;return be(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?Ee.css(t,n,s):Ee.style(t,n,i,s)},t,a?i:void 0,a)}})}),Ee.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Ee.fn[t]=function(e){return this.on(t,e)}}),Ee.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),Ee.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){Ee.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var tn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;Ee.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),xe(e))return r=le.call(arguments,2),i=function(){return e.apply(t||this,r.concat(le.call(arguments)))},i.guid=e.guid=e.guid||Ee.guid++,i},Ee.holdReady=function(e){e?Ee.readyWait++:Ee.ready(!0)},Ee.isArray=Array.isArray,Ee.parseJSON=JSON.parse,Ee.nodeName=o,Ee.isFunction=xe,Ee.isWindow=be,Ee.camelCase=h,Ee.type=r,Ee.now=Date.now,Ee.isNumeric=function(e){var t=Ee.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},Ee.trim=function(e){return null==e?"":(e+"").replace(tn,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return Ee});var nn=e.jQuery,rn=e.$;return Ee.noConflict=function(t){return e.$===Ee&&(e.$=rn),t&&e.jQuery===Ee&&(e.jQuery=nn),Ee},"undefined"==typeof t&&(e.jQuery=e.$=Ee),Ee});
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.Tether=e()}(this,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t){var o=t.getBoundingClientRect(),n={};for(var i in o)n[i]=o[i];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=e(r);n.top+=s.top,n.bottom+=s.top,n.left+=s.left,n.right+=s.left}}return n}function o(t){var e=getComputedStyle(t)||{},o=e.position,n=[];if("fixed"===o)return[t];for(var i=t;(i=i.parentNode)&&i&&1===i.nodeType;){var r=void 0;try{r=getComputedStyle(i)}catch(s){}if("undefined"==typeof r||null===r)return n.push(i),n;var a=r,f=a.overflow,l=a.overflowX,h=a.overflowY;/(auto|scroll|overlay)/.test(f+h+l)&&("absolute"!==o||["relative","absolute","fixed"].indexOf(r.position)>=0)&&n.push(i)}return n.push(t.ownerDocument.body),t.ownerDocument!==document&&n.push(t.ownerDocument.defaultView),n}function n(){O&&document.body.removeChild(O),O=null}function i(t){var o=void 0;t===document?(o=document,t=document.documentElement):o=t.ownerDocument;var n=o.documentElement,i=e(t),r=A();return i.top-=r.top,i.left-=r.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-n.clientTop,i.left=i.left-n.clientLeft,i.right=o.body.clientWidth-i.width-i.left,i.bottom=o.body.clientHeight-i.height-i.top,i}function r(t){return t.offsetParent||document.documentElement}function s(){if(T)return T;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");a(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var o=t.offsetWidth;e.style.overflow="scroll";var n=t.offsetWidth;o===n&&(n=e.clientWidth),document.body.removeChild(e);var i=o-n;return T={width:i,height:i}}function a(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var o in e)({}).hasOwnProperty.call(e,o)&&(t[o]=e[o])}),t}function f(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var o=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),n=d(t).replace(o," ");u(t,n)}}function l(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{f(t,e);var o=d(t)+(" "+e);u(t,o)}}function h(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var o=d(t);return new RegExp("(^| )"+e+"( |$)","gi").test(o)}function d(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function u(t,e){t.setAttribute("class",e)}function p(t,e,o){o.forEach(function(o){e.indexOf(o)===-1&&h(t,o)&&f(t,o)}),e.forEach(function(e){h(t,e)||l(t,e)})}function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function g(t,e){var o=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+o>=e&&e>=t-o}function m(){return"object"==typeof performance&&"function"==typeof performance.now?performance.now():+new Date}function v(){for(var t={top:0,left:0},e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];return o.forEach(function(e){var o=e.top,n=e.left;"string"==typeof o&&(o=parseFloat(o,10)),"string"==typeof n&&(n=parseFloat(n,10)),t.top+=o,t.left+=n}),t}function y(t,e){return"string"==typeof t.left&&t.left.indexOf("%")!==-1&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&t.top.indexOf("%")!==-1&&(t.top=parseFloat(t.top,10)/100*e.height),t}function b(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&!function(){var t=e,o=i(e),n=o,r=getComputedStyle(e);if(e=[n.left,n.top,o.width+n.left,o.height+n.top],t.ownerDocument!==document){var s=t.ownerDocument.defaultView;e[0]+=s.pageXOffset,e[1]+=s.pageYOffset,e[2]+=s.pageXOffset,e[3]+=s.pageYOffset}I.forEach(function(t,o){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[o]+=parseFloat(r["border"+t+"Width"]):e[o]-=parseFloat(r["border"+t+"Width"])})}(),e}var w=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),C=void 0;"undefined"==typeof C&&(C={modules:[]});var O=null,E=function(){var t=0;return function(){return++t}}(),x={},A=function(){var t=O;t&&document.body.contains(t)||(t=document.createElement("div"),t.setAttribute("data-tether-id",E()),a(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),O=t);var o=t.getAttribute("data-tether-id");return"undefined"==typeof x[o]&&(x[o]=e(t),P(function(){delete x[o]})),x[o]},T=null,S=[],P=function(t){S.push(t)},M=function(){for(var t=void 0;t=S.pop();)t()},W=function(){function e(){t(this,e)}return w(e,[{key:"on",value:function(t,e,o){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:o,once:n})}},{key:"once",value:function(t,e,o){this.on(t,e,o,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if("undefined"==typeof e)delete this.bindings[t];else for(var o=0;o<this.bindings[t].length;)this.bindings[t][o].handler===e?this.bindings[t].splice(o,1):++o}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,o=arguments.length,n=Array(o>1?o-1:0),i=1;i<o;i++)n[i-1]=arguments[i];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,f=r.once,l=a;"undefined"==typeof l&&(l=this),s.apply(l,n),f?this.bindings[t].splice(e,1):++e}}}}]),e}();C.Utils={getActualBoundingClientRect:e,getScrollParents:o,getBounds:i,getOffsetParent:r,extend:a,addClass:l,removeClass:f,hasClass:h,updateClasses:p,defer:P,flush:M,uniqueId:E,Evented:W,getScrollBarSize:s,removeUtilElements:n};var k=function(){function t(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(f){i=!0,r=f}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),_=function(t,e,o){for(var n=!0;n;){var i=t,r=e,s=o;n=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,r);if(void 0!==a){if("value"in a)return a.value;var f=a.get;if(void 0===f)return;return f.call(s)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=r,o=s,n=!0,a=l=void 0}};if("undefined"==typeof C)throw new Error("You must include the utils.js file before tether.js");var z=C.Utils,o=z.getScrollParents,i=z.getBounds,r=z.getOffsetParent,a=z.extend,l=z.addClass,f=z.removeClass,p=z.updateClasses,P=z.defer,M=z.flush,s=z.getScrollBarSize,n=z.removeUtilElements,B=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],o=0;o<e.length;++o){var n=e[o];if(void 0!==t.style[n])return n}}(),j=[],F=function(){j.forEach(function(t){t.position(!1)}),M()};!function(){var t=null,e=null,o=null,n=function i(){return"undefined"!=typeof e&&e>16?(e=Math.min(e-16,250),void(o=setTimeout(i,250))):void("undefined"!=typeof t&&m()-t<10||(null!=o&&(clearTimeout(o),o=null),t=m(),F(),e=m()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,n)})}();var Y={center:"center",left:"right",right:"left"},D={middle:"middle",top:"bottom",bottom:"top"},L={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},X=function(t,e){var o=t.left,n=t.top;return"auto"===o&&(o=Y[e.left]),"auto"===n&&(n=D[e.top]),{left:o,top:n}},H=function(t){var e=t.left,o=t.top;return"undefined"!=typeof L[t.left]&&(e=L[t.left]),"undefined"!=typeof L[t.top]&&(o=L[t.top]),{left:e,top:o}},N=function(t){var e=t.split(" "),o=k(e,2),n=o[0],i=o[1];return{top:n,left:i}},U=N,V=function(e){function h(e){var o=this;t(this,h),_(Object.getPrototypeOf(h.prototype),"constructor",this).call(this),this.position=this.position.bind(this),j.push(this),this.history=[],this.setOptions(e,!1),C.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(o)}),this.position()}return c(h,e),w(h,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return"undefined"!=typeof e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]||arguments[1],i={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=a(i,t);var r=this.options,s=r.element,f=r.target,h=r.targetModifier;if(this.element=s,this.target=f,this.targetModifier=h,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),l(this.element,this.getClass("element")),this.options.addTargetClasses!==!1&&l(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=U(this.options.targetAttachment),this.attachment=U(this.options.attachment),this.offset=N(this.options.offset),this.targetOffset=N(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=o(this.target),this.options.enabled!==!1&&this.enable(n)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return i(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=i(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,o=this.target;o===document.body?(o=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=i(o);var n=getComputedStyle(o),r=o.scrollWidth>o.clientWidth||[n.overflow,n.overflowX].indexOf("scroll")>=0||this.target!==document.body,s=0;r&&(s=15);var a=t.height-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-s,e={width:15,height:.975*a*(a/o.scrollHeight),left:t.left+t.width-parseFloat(n.borderLeftWidth)-15},f=0;a<408&&this.target===document.body&&(f=-11e-5*Math.pow(a,2)-.00727*a+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var l=this.target.scrollTop/(o.scrollHeight-a);return e.top=l*(a-e.height-f)+t.top+parseFloat(n.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];this.options.addTargetClasses!==!1&&l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;f(this.target,this.getClass("enabled")),f(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),j.forEach(function(e,o){e===t&&j.splice(o,1)}),0===j.length&&n()}},{key:"updateAttachClasses",value:function(t,e){var o=this;t=t||this.attachment,e=e||this.targetAttachment;var n=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var i=this._addAttachClasses;t.top&&i.push(this.getClass("element-attached")+"-"+t.top),t.left&&i.push(this.getClass("element-attached")+"-"+t.left),e.top&&i.push(this.getClass("target-attached")+"-"+e.top),e.left&&i.push(this.getClass("target-attached")+"-"+e.left);var r=[];n.forEach(function(t){r.push(o.getClass("element-attached")+"-"+t),r.push(o.getClass("target-attached")+"-"+t)}),P(function(){"undefined"!=typeof o._addAttachClasses&&(p(o.element,o._addAttachClasses,r),o.options.addTargetClasses!==!1&&p(o.target,o._addAttachClasses,r),delete o._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var o=X(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,o);var n=this.cache("element-bounds",function(){return i(t.element)}),a=n.width,f=n.height;if(0===a&&0===f&&"undefined"!=typeof this.lastSize){var l=this.lastSize;a=l.width,f=l.height}else this.lastSize={width:a,height:f};var h=this.cache("target-bounds",function(){return t.getTargetBounds()}),d=h,u=y(H(this.attachment),{width:a,height:f}),p=y(H(o),d),c=y(this.offset,{width:a,height:f}),g=y(this.targetOffset,d);u=v(u,c),p=v(p,g);for(var m=h.left+p.left-u.left,b=h.top+p.top-u.top,w=0;w<C.modules.length;++w){var O=C.modules[w],E=O.position.call(this,{left:m,top:b,targetAttachment:o,targetPos:h,elementPos:n,offset:u,targetOffset:p,manualOffset:c,manualTargetOffset:g,scrollbarSize:S,attachment:this.attachment});if(E===!1)return!1;"undefined"!=typeof E&&"object"==typeof E&&(b=E.top,m=E.left)}var x={page:{top:b,left:m},viewport:{top:b-pageYOffset,bottom:pageYOffset-b-f+innerHeight,left:m-pageXOffset,right:pageXOffset-m-a+innerWidth}},A=this.target.ownerDocument,T=A.defaultView,S=void 0;return T.innerHeight>A.documentElement.clientHeight&&(S=this.cache("scrollbar-size",s),x.viewport.bottom-=S.height),T.innerWidth>A.documentElement.clientWidth&&(S=this.cache("scrollbar-size",s),x.viewport.right-=S.width),["","static"].indexOf(A.body.style.position)!==-1&&["","static"].indexOf(A.body.parentElement.style.position)!==-1||(x.page.bottom=A.body.scrollHeight-b-f,x.page.right=A.body.scrollWidth-m-a),"undefined"!=typeof this.options.optimizations&&this.options.optimizations.moveElement!==!1&&"undefined"==typeof this.targetModifier&&!function(){var e=t.cache("target-offsetparent",function(){return r(t.target)}),o=t.cache("target-offsetparent-bounds",function(){return i(e)}),n=getComputedStyle(e),s=o,a={};if(["Top","Left","Bottom","Right"].forEach(function(t){a[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])}),o.right=A.body.scrollWidth-o.left-s.width+a.right,o.bottom=A.body.scrollHeight-o.top-s.height+a.bottom,x.page.top>=o.top+a.top&&x.page.bottom>=o.bottom&&x.page.left>=o.left+a.left&&x.page.right>=o.right){var f=e.scrollTop,l=e.scrollLeft;x.offset={top:x.page.top-o.top+f-a.top,left:x.page.left-o.left+l-a.left}}}(),this.move(x),this.history.unshift(x),this.history.length>3&&this.history.pop(),e&&M(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var o={};for(var n in t){o[n]={};for(var i in t[n]){for(var s=!1,f=0;f<this.history.length;++f){var l=this.history[f];if("undefined"!=typeof l[n]&&!g(l[n][i],t[n][i])){s=!0;break}}s||(o[n][i]=!0)}}var h={top:"",left:"",right:"",bottom:""},d=function(t,o){var n="undefined"!=typeof e.options.optimizations,i=n?e.options.optimizations.gpu:null;if(i!==!1){var r=void 0,s=void 0;if(t.top?(h.top=0,r=o.top):(h.bottom=0,r=-o.bottom),t.left?(h.left=0,s=o.left):(h.right=0,s=-o.right),window.matchMedia){var a=window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches;a||(s=Math.round(s),r=Math.round(r))}h[B]="translateX("+s+"px) translateY("+r+"px)","msTransform"!==B&&(h[B]+=" translateZ(0)")}else t.top?h.top=o.top+"px":h.bottom=o.bottom+"px",t.left?h.left=o.left+"px":h.right=o.right+"px"},u=!1;if((o.page.top||o.page.bottom)&&(o.page.left||o.page.right)?(h.position="absolute",d(o.page,t.page)):(o.viewport.top||o.viewport.bottom)&&(o.viewport.left||o.viewport.right)?(h.position="fixed",d(o.viewport,t.viewport)):"undefined"!=typeof o.offset&&o.offset.top&&o.offset.left?!function(){h.position="absolute";var n=e.cache("target-offsetparent",function(){return r(e.target)});r(e.element)!==n&&P(function(){e.element.parentNode.removeChild(e.element),n.appendChild(e.element)}),d(o.offset,t.offset),u=!0}():(h.position="absolute",d({top:!0,left:!0},t.page)),!u)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var p=function(t){var e=t.ownerDocument,o=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement;return o===t},c=!0,m=this.element.parentNode;m&&1===m.nodeType&&"BODY"!==m.tagName&&!p(m);){if("static"!==getComputedStyle(m).position){c=!1;break}m=m.parentNode}c||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var v={},y=!1;for(var i in h){var b=h[i],w=this.element.style[i];w!==b&&(y=!0,v[i]=b)}y&&P(function(){a(e.element.style,v),e.trigger("repositioned")})}}}]),h}(W);V.modules=[],C.position=F;var R=a(V,C),k=function(){function t(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(f){i=!0,r=f}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),z=C.Utils,i=z.getBounds,a=z.extend,p=z.updateClasses,P=z.defer,I=["left","top","right","bottom"];C.modules.push({position:function(t){var e=this,o=t.top,n=t.left,r=t.targetAttachment;if(!this.options.constraints)return!0;var s=this.cache("element-bounds",function(){return i(e.element)}),f=s.height,l=s.width;if(0===l&&0===f&&"undefined"!=typeof this.lastSize){var h=this.lastSize;l=h.width,f=h.height}var d=this.cache("target-bounds",function(){return e.getTargetBounds()}),u=d.height,c=d.width,g=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,o=t.pinnedClass;e&&g.push(e),o&&g.push(o)}),g.forEach(function(t){["left","top","right","bottom"].forEach(function(e){g.push(t+"-"+e)})});var m=[],v=a({},r),y=a({},this.attachment);return this.options.constraints.forEach(function(t){var i=t.to,s=t.attachment,a=t.pin;"undefined"==typeof s&&(s="");var h=void 0,d=void 0;if(s.indexOf(" ")>=0){var p=s.split(" "),g=k(p,2);d=g[0],h=g[1]}else h=d=s;var w=b(e,i);"target"!==d&&"both"!==d||(o<w[1]&&"top"===v.top&&(o+=u,v.top="bottom"),o+f>w[3]&&"bottom"===v.top&&(o-=u,v.top="top")),"together"===d&&("top"===v.top&&("bottom"===y.top&&o<w[1]?(o+=u,v.top="bottom",o+=f,y.top="top"):"top"===y.top&&o+f>w[3]&&o-(f-u)>=w[1]&&(o-=f-u,v.top="bottom",y.top="bottom")),"bottom"===v.top&&("top"===y.top&&o+f>w[3]?(o-=u,v.top="top",o-=f,y.top="bottom"):"bottom"===y.top&&o<w[1]&&o+(2*f-u)<=w[3]&&(o+=f-u,v.top="top",y.top="top")),"middle"===v.top&&(o+f>w[3]&&"top"===y.top?(o-=f,y.top="bottom"):o<w[1]&&"bottom"===y.top&&(o+=f,y.top="top"))),"target"!==h&&"both"!==h||(n<w[0]&&"left"===v.left&&(n+=c,v.left="right"),n+l>w[2]&&"right"===v.left&&(n-=c,v.left="left")),"together"===h&&(n<w[0]&&"left"===v.left?"right"===y.left?(n+=c,v.left="right",n+=l,y.left="left"):"left"===y.left&&(n+=c,v.left="right",n-=l,y.left="right"):n+l>w[2]&&"right"===v.left?"left"===y.left?(n-=c,v.left="left",n-=l,y.left="right"):"right"===y.left&&(n-=c,v.left="left",n+=l,y.left="left"):"center"===v.left&&(n+l>w[2]&&"left"===y.left?(n-=l,y.left="right"):n<w[0]&&"right"===y.left&&(n+=l,y.left="left"))),"element"!==d&&"both"!==d||(o<w[1]&&"bottom"===y.top&&(o+=f,y.top="top"),o+f>w[3]&&"top"===y.top&&(o-=f,y.top="bottom")),"element"!==h&&"both"!==h||(n<w[0]&&("right"===y.left?(n+=l,y.left="left"):"center"===y.left&&(n+=l/2,y.left="left")),n+l>w[2]&&("left"===y.left?(n-=l,y.left="right"):"center"===y.left&&(n-=l/2,y.left="right"))),"string"==typeof a?a=a.split(",").map(function(t){return t.trim()}):a===!0&&(a=["top","left","right","bottom"]),a=a||[];var C=[],O=[];o<w[1]&&(a.indexOf("top")>=0?(o=w[1],C.push("top")):O.push("top")),o+f>w[3]&&(a.indexOf("bottom")>=0?(o=w[3]-f,C.push("bottom")):O.push("bottom")),n<w[0]&&(a.indexOf("left")>=0?(n=w[0],C.push("left")):O.push("left")),n+l>w[2]&&(a.indexOf("right")>=0?(n=w[2]-l,C.push("right")):O.push("right")),C.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),m.push(t),C.forEach(function(e){m.push(t+"-"+e)})}(),O.length&&!function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),m.push(t),O.forEach(function(e){m.push(t+"-"+e)})}(),(C.indexOf("left")>=0||C.indexOf("right")>=0)&&(y.left=v.left=!1),(C.indexOf("top")>=0||C.indexOf("bottom")>=0)&&(y.top=v.top=!1),v.top===r.top&&v.left===r.left&&y.top===e.attachment.top&&y.left===e.attachment.left||(e.updateAttachClasses(y,v),e.trigger("update",{attachment:y,targetAttachment:v}))}),P(function(){e.options.addTargetClasses!==!1&&p(e.target,m,g),p(e.element,m,g)}),{top:o,left:n}}});var z=C.Utils,i=z.getBounds,p=z.updateClasses,P=z.defer;C.modules.push({position:function(t){var e=this,o=t.top,n=t.left,r=this.cache("element-bounds",function(){return i(e.element)}),s=r.height,a=r.width,f=this.getTargetBounds(),l=o+s,h=n+a,d=[];o<=f.bottom&&l>=f.top&&["left","right"].forEach(function(t){var e=f[t];e!==n&&e!==h||d.push(t)}),n<=f.right&&h>=f.left&&["top","bottom"].forEach(function(t){var e=f[t];e!==o&&e!==l||d.push(t)});var u=[],c=[],g=["left","top","right","bottom"];return u.push(this.getClass("abutted")),g.forEach(function(t){u.push(e.getClass("abutted")+"-"+t)}),d.length&&c.push(this.getClass("abutted")),d.forEach(function(t){c.push(e.getClass("abutted")+"-"+t)}),P(function(){e.options.addTargetClasses!==!1&&p(e.target,c,u),p(e.element,c,u)}),!0}});var k=function(){function t(t,e){var o=[],n=!0,i=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(o.push(s.value),!e||o.length!==e);n=!0);}catch(f){i=!0,r=f}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw r}}return o}return function(e,o){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return C.modules.push({position:function(t){var e=t.top,o=t.left;if(this.options.shift){var n=this.options.shift;"function"==typeof this.options.shift&&(n=this.options.shift.call(this,{top:e,left:o}));var i=void 0,r=void 0;if("string"==typeof n){n=n.split(" "),n[1]=n[1]||n[0];var s=n,a=k(s,2);i=a[0],r=a[1],i=parseFloat(i,10),r=parseFloat(r,10)}else i=n.top,r=n.left;return e+=i,o+=r,{top:e,left:o}}}}),R});
!function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,e,r={};t=this,null!=t&&(e=t.async),r.noConflict=function(){return t.async=e,r};var i=Object.prototype.toString,u=Array.isArray||function(n){return"[object Array]"===i.call(n)},c=function(n,t){for(var e=0;e<n.length;e+=1)t(n[e],e,n)},o=function(n,t){if(n.map)return n.map(t);var e=[];return c(n,function(n,r,i){e.push(t(n,r,i))}),e},a=function(n,t,e){return n.reduce?n.reduce(t,e):(c(n,function(n,r,i){e=t(e,n,r,i)}),e)},l=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,"undefined"!=typeof setImmediate?r.setImmediate=function(n){setImmediate(n)}:r.setImmediate=r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(n){setImmediate(n)},r.setImmediate=r.nextTick):(r.nextTick=function(n){setTimeout(n,0)},r.setImmediate=r.nextTick),r.each=function(t,e,r){function i(n){n?(r(n),r=function(){}):(u+=1,u>=t.length&&r())}if(r=r||function(){},!t.length)return r();var u=0;c(t,function(t){e(t,n(i))})},r.forEach=r.each,r.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,i=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():i())})};i()},r.forEachSeries=r.eachSeries,r.eachLimit=function(n,t,e,r){var i=f(t);i.apply(null,[n,e,r])},r.forEachLimit=r.eachLimit;var f=function(n){return function(t,e,r){if(r=r||function(){},!t.length||n<=0)return r();var i=0,u=0,c=0;!function o(){if(i>=t.length)return r();for(;c<n&&u<t.length;)u+=1,c+=1,e(t[u-1],function(n){n?(r(n),r=function(){}):(i+=1,c-=1,i>=t.length?r():o())})}()}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.each].concat(t))}},p=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[f(n)].concat(e))}},d=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.eachSeries].concat(t))}},y=function(n,t,e,r){if(t=o(t,function(n,t){return{index:t,value:n}}),r){var i=[];n(t,function(n,t){e(n.value,function(e,r){i[n.index]=r,t(e)})},function(n){r(n,i)})}else n(t,function(n,t){e(n.value,function(n){t(n)})})};r.map=s(y),r.mapSeries=d(y),r.mapLimit=function(n,t,e,r){return v(t)(n,e,r)};var v=function(n){return p(n,y)};r.reduce=function(n,t,e,i){r.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){i(n,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(n,t,e,i){var u=o(n,function(n){return n}).reverse();r.reduce(u,t,e,i)},r.foldr=r.reduceRight;var h=function(n,t,e,r){var i=[];t=o(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&i.push(n),t()})},function(n){r(o(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.filter=s(h),r.filterSeries=d(h),r.select=r.filter,r.selectSeries=r.filterSeries;var m=function(n,t,e,r){var i=[];t=o(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||i.push(n),t()})},function(n){r(o(i.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.reject=s(m),r.rejectSeries=d(m);var g=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(n){r()})};r.detect=s(g),r.detectSeries=d(g),r.some=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(n){e(!1)})},r.any=r.some,r.every=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(n){e(!0)})},r.all=r.every,r.sortBy=function(n,t,e){r.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0};e(null,o(t.sort(r),function(n){return n.value}))})},r.auto=function(n,t){t=t||function(){};var e=l(n),i=e.length;if(!i)return t();var o={},f=[],s=function(n){f.unshift(n)},p=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},d=function(){i--,c(f.slice(0),function(n){n()})};s(function(){if(!i){var n=t;t=function(){},n(null,o)}}),c(e,function(e){var i=u(n[e])?n[e]:[n[e]],f=function(n){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),n){var u={};c(l(o),function(n){u[n]=o[n]}),u[e]=i,t(n,u),t=function(){}}else o[e]=i,r.setImmediate(d)},y=i.slice(0,Math.abs(i.length-1))||[],v=function(){return a(y,function(n,t){return n&&o.hasOwnProperty(t)},!0)&&!o.hasOwnProperty(e)};if(v())i[i.length-1](f,o);else{var h=function(){v()&&(p(h),i[i.length-1](f,o))};s(h)}})},r.retry=function(n,t,e){var i=5,u=[];"function"==typeof n&&(e=t,t=n,n=i),n=parseInt(n,10)||i;var c=function(i,c){for(var o=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},c)}};n;)u.push(o(t,!(n-=1)));r.series(u,function(n,t){t=t[t.length-1],(i||e)(t.err,t.result)})};return e?c():c},r.waterfall=function(n,t){if(t=t||function(){},!u(n)){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var i=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var u=Array.prototype.slice.call(arguments,1),c=n.next();c?u.push(i(c)):u.push(t),r.setImmediate(function(){n.apply(null,u)})}}};i(r.iterator(n))()};var k=function(n,t,e){if(e=e||function(){},u(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(l(t),function(n,e){t[n](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[n]=i,e(t)})},function(n){e(n,r)})}};r.parallel=function(n,t){k({map:r.map,each:r.each},n,t)},r.parallelLimit=function(n,t,e){k({map:v(t),each:f(t)},n,e)},r.series=function(n,t){if(t=t||function(){},u(n))r.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};r.eachSeries(l(n),function(t,r){n[t](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),e[t]=i,r(n)})},function(n){t(n,e)})}},r.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},r.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var A=function(n,t,e,r){var i=[];n(t,function(n,t){e(n,function(n,e){i=i.concat(e||[]),t(n)})},function(n){r(n,i)})};r.concat=s(A),r.concatSeries=d(A),r.whilst=function(n,t,e){n()?t(function(i){return i?e(i):void r.whilst(n,t,e)}):e()},r.doWhilst=function(n,t,e){n(function(i){if(i)return e(i);var u=Array.prototype.slice.call(arguments,1);t.apply(null,u)?r.doWhilst(n,t,e):e()})},r.until=function(n,t,e){n()?e():t(function(i){return i?e(i):void r.until(n,t,e)})},r.doUntil=function(n,t,e){n(function(i){if(i)return e(i);var u=Array.prototype.slice.call(arguments,1);t.apply(null,u)?e():r.doUntil(n,t,e)})},r.queue=function(t,e){function i(n,t,e,i){return n.started||(n.started=!0),u(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var u={data:t,callback:"function"==typeof i?i:null};e?n.tasks.unshift(u):n.tasks.push(u),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}void 0===e&&(e=1);var o=0,a={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){i(a,n,!1,t)},kill:function(){a.drain=null,a.tasks=[]},unshift:function(n,t){i(a,n,!0,t)},process:function(){if(!a.paused&&o<a.concurrency&&a.tasks.length){var e=a.tasks.shift();a.empty&&0===a.tasks.length&&a.empty(),o+=1;var r=function(){o-=1,e.callback&&e.callback.apply(e,arguments),a.drain&&a.tasks.length+o===0&&a.drain(),a.process()},i=n(r);t(e.data,i)}},length:function(){return a.tasks.length},running:function(){return o},idle:function(){return a.tasks.length+o===0},pause:function(){a.paused!==!0&&(a.paused=!0)},resume:function(){if(a.paused!==!1){a.paused=!1;for(var n=1;n<=a.concurrency;n++)r.setImmediate(a.process)}}};return a},r.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function i(n,t,e){for(var r=-1,i=n.length-1;r<i;){var u=r+(i-r+1>>>1);e(t,n[u])>=0?r=u:i=u-1}return r}function o(n,t,o,a){return n.started||(n.started=!0),u(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var u={data:t,priority:o,callback:"function"==typeof a?a:null};n.tasks.splice(i(n.tasks,u,e)+1,0,u),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}var a=r.queue(n,t);return a.push=function(n,t,e){o(a,n,t,e)},delete a.unshift,a},r.cargo=function(n,t){var e=!1,i=[],a={tasks:i,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){u(n)||(n=[n]),c(n,function(n){i.push({data:n,callback:"function"==typeof e?e:null}),a.drained=!1,a.saturated&&i.length===t&&a.saturated()}),r.setImmediate(a.process)},process:function l(){if(!e){if(0===i.length)return a.drain&&!a.drained&&a.drain(),void(a.drained=!0);var r="number"==typeof t?i.splice(0,t):i.splice(0,i.length),u=o(r,function(n){return n.data});a.empty&&a.empty(),e=!0,n(u,function(){e=!1;var n=arguments;c(r,function(t){t.callback&&t.callback.apply(null,n)}),l()})}},length:function(){return i.length},running:function(){return e}};return a};var x=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))}]))}};r.log=x("log"),r.dir=x("dir"),r.memoize=function(n,t){var e={},i={};t=t||function(n){return n};var u=function(){var u=Array.prototype.slice.call(arguments),c=u.pop(),o=t.apply(null,u);o in e?r.nextTick(function(){c.apply(null,e[o])}):o in i?i[o].push(c):(i[o]=[c],n.apply(null,u.concat([function(){e[o]=arguments;var n=i[o];delete i[o];for(var t=0,r=n.length;t<r;t++)n[t].apply(null,arguments)}])))};return u.memo=e,u.unmemoized=n,u},r.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},r.times=function(n,t,e){for(var i=[],u=0;u<n;u++)i.push(u);return r.map(i,t,e)},r.timesSeries=function(n,t,e){for(var i=[],u=0;u<n;u++)i.push(u);return r.mapSeries(i,t,e)},r.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),i=e.pop();r.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){i.apply(t,[n].concat(e))})}},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),i=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};r.applyEach=s(S),r.applyEachSeries=d(S),r.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof define&&define.amd?define([],function(){return r}):t.async=r}();
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.L={})}(this,function(t){"use strict";function i(t){var i,e,n,o;for(e=1,n=arguments.length;e<n;e++){o=arguments[e];for(i in o)t[i]=o[i]}return t}function e(t,i){var e=Array.prototype.slice;if(t.bind)return t.bind.apply(t,e.call(arguments,1));var n=e.call(arguments,2);return function(){return t.apply(i,n.length?n.concat(e.call(arguments)):arguments)}}function n(t){return t._leaflet_id=t._leaflet_id||++vi,t._leaflet_id}function o(t,i,e){var n,o,s,r;return r=function(){n=!1,o&&(s.apply(e,o),o=!1)},s=function(){n?o=arguments:(t.apply(e,arguments),setTimeout(r,i),n=!0)}}function s(t,i,e){var n=i[1],o=i[0],s=n-o;return t===n&&e?t:((t-o)%s+s)%s+o}function r(){return!1}function a(t,i){var e=Math.pow(10,void 0===i?6:i);return Math.round(t*e)/e}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function u(t){return h(t).split(/\s+/)}function l(t,i){t.hasOwnProperty("options")||(t.options=t.options?gi(t.options):{});for(var e in i)t.options[e]=i[e];return t.options}function c(t,i,e){var n=[];for(var o in t)n.push(encodeURIComponent(e?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(i&&i.indexOf("?")!==-1?"&":"?")+n.join("&")}function d(t,i){return t.replace(yi,function(t,e){var n=i[e];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(i)),n})}function _(t,i){for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1}function p(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function m(t){var i=+new Date,e=Math.max(0,16-(i-Pi));return Pi=i+e,window.setTimeout(t,e)}function f(t,i,n){return n&&Li===m?void t.call(i):Li.call(window,e(t,i))}function g(t){t&&bi.call(window,t)}function v(){}function y(t){if("undefined"!=typeof L&&L&&L.Mixin){t=xi(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function x(t,i,e){this.x=e?Math.round(t):t,this.y=e?Math.round(i):i}function w(t,i,e){return t instanceof x?t:xi(t)?new x(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new x(t.x,t.y):new x(t,i,e)}function P(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n])}function b(t,i){return!t||t instanceof P?t:new P(t,i)}function T(t,i){if(t)for(var e=i?[t,i]:t,n=0,o=e.length;n<o;n++)this.extend(e[n])}function z(t,i){return t instanceof T?t:new T(t,i)}function M(t,i,e){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,void 0!==e&&(this.alt=+e)}function C(t,i,e){return t instanceof M?t:xi(t)&&"object"!=typeof t[0]?3===t.length?new M(t[0],t[1],t[2]):2===t.length?new M(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new M(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===i?null:new M(t,i,e)}function S(t,i,e,n){return xi(t)?(this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3])):(this._a=t,this._b=i,this._c=e,void(this._d=n))}function E(t,i,e,n){return new S(t,i,e,n)}function Z(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function k(t,i){var e,n,o,s,r,a,h="";for(e=0,o=t.length;e<o;e++){for(r=t[e],n=0,s=r.length;n<s;n++)a=r[n],h+=(n?"L":"M")+a.x+" "+a.y;h+=i?me?"z":"x":""}return h||"M0 0"}function B(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function A(t,i,e,n){return"touchstart"===i?O(t,e,n):"touchmove"===i?W(t,e,n):"touchend"===i&&H(t,e,n),this}function I(t,i,e){var n=t["_leaflet_"+i+e];return"touchstart"===i?t.removeEventListener(ve,n,!1):"touchmove"===i?t.removeEventListener(ye,n,!1):"touchend"===i&&(t.removeEventListener(xe,n,!1),t.removeEventListener(we,n,!1)),this}function O(t,i,n){var o=e(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(Pe.indexOf(t.target.tagName)<0))return;Pt(t)}j(t,i)});t["_leaflet_touchstart"+n]=o,t.addEventListener(ve,o,!1),be||(document.documentElement.addEventListener(ve,R,!0),document.documentElement.addEventListener(ye,N,!0),document.documentElement.addEventListener(xe,D,!0),document.documentElement.addEventListener(we,D,!0),be=!0)}function R(t){Le[t.pointerId]=t,Te++}function N(t){Le[t.pointerId]&&(Le[t.pointerId]=t)}function D(t){delete Le[t.pointerId],Te--}function j(t,i){t.touches=[];for(var e in Le)t.touches.push(Le[e]);t.changedTouches=[t],i(t)}function W(t,i,e){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&j(t,i)};t["_leaflet_touchmove"+e]=n,t.addEventListener(ye,n,!1)}function H(t,i,e){var n=function(t){j(t,i)};t["_leaflet_touchend"+e]=n,t.addEventListener(xe,n,!1),t.addEventListener(we,n,!1)}function F(t,i,e){function n(t){var i;if(he){if(!Wi||"mouse"===t.pointerType)return;i=Te}else i=t.touches.length;if(!(i>1)){var e=Date.now(),n=e-(s||e);r=t.touches?t.touches[0]:t,a=n>0&&n<=h,s=e}}function o(t){if(a&&!r.cancelBubble){if(he){if(!Wi||"mouse"===t.pointerType)return;var e,n,o={};for(n in r)e=r[n],o[n]=e&&e.bind?e.bind(r):e;r=o}r.type="dblclick",r.button=0,i(r),s=null}}var s,r,a=!1,h=250;return t[Ce+ze+e]=n,t[Ce+Me+e]=o,t[Ce+"dblclick"+e]=i,t.addEventListener(ze,n,!!_e&&{passive:!1}),t.addEventListener(Me,o,!!_e&&{passive:!1}),t.addEventListener("dblclick",i,!1),this}function U(t,i){var e=t[Ce+ze+i],n=t[Ce+Me+i],o=t[Ce+"dblclick"+i];return t.removeEventListener(ze,e,!!_e&&{passive:!1}),t.removeEventListener(Me,n,!!_e&&{passive:!1}),Wi||t.removeEventListener("dblclick",o,!1),this}function V(t){return"string"==typeof t?document.getElementById(t):t}function q(t,i){var e=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!e||"auto"===e)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);e=n?n[i]:null}return"auto"===e?null:e}function G(t,i,e){var n=document.createElement(t);return n.className=i||"",e&&e.appendChild(n),n}function K(t){var i=t.parentNode;i&&i.removeChild(t)}function Y(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function X(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function J(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function $(t,i){if(void 0!==t.classList)return t.classList.contains(i);var e=et(t);return e.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(e)}function Q(t,i){if(void 0!==t.classList)for(var e=u(i),n=0,o=e.length;n<o;n++)t.classList.add(e[n]);else if(!$(t,i)){var s=et(t);it(t,(s?s+" ":"")+i)}}function tt(t,i){void 0!==t.classList?t.classList.remove(i):it(t,h((" "+et(t)+" ").replace(" "+i+" "," ")))}function it(t,i){void 0===t.className.baseVal?t.className=i:t.className.baseVal=i}function et(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function nt(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&ot(t,i)}function ot(t,i){var e=!1,n="DXImageTransform.Microsoft.Alpha";try{e=t.filters.item(n)}catch(o){if(1===i)return}i=Math.round(100*i),e?(e.Enabled=100!==i,e.Opacity=i):t.style.filter+=" progid:"+n+"(opacity="+i+")"}function st(t){for(var i=document.documentElement.style,e=0;e<t.length;e++)if(t[e]in i)return t[e];return!1}function rt(t,i,e){var n=i||new x(0,0);t.style[Se]=(te?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(e?" scale("+e+")":"")}function at(t,i){t._leaflet_pos=i,ne?rt(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function ht(t){return t._leaflet_pos||new x(0,0)}function ut(){mt(window,"dragstart",Pt)}function lt(){ft(window,"dragstart",Pt)}function ct(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(dt(),Be=t,Ae=t.style.outline,t.style.outline="none",mt(window,"keydown",dt))}function dt(){Be&&(Be.style.outline=Ae,Be=void 0,Ae=void 0,ft(window,"keydown",dt))}function _t(t){do t=t.parentNode;while(!(t.offsetWidth&&t.offsetHeight||t===document.body));return t}function pt(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}function mt(t,i,e,n){if("object"==typeof i)for(var o in i)gt(t,o,i[o],e);else{i=u(i);for(var s=0,r=i.length;s<r;s++)gt(t,i[s],e,n)}return this}function ft(t,i,e,n){if("object"==typeof i)for(var o in i)vt(t,o,i[o],e);else if(i){i=u(i);for(var s=0,r=i.length;s<r;s++)vt(t,i[s],e,n)}else{for(var a in t[Re])vt(t,a,t[Re][a]);delete t[Re]}return this}function gt(t,i,e,o){var s=i+n(e)+(o?"_"+n(o):"");if(t[Re]&&t[Re][s])return this;var r=function(i){return e.call(o||t,i||window.event)},a=r;he&&0===i.indexOf("touch")?A(t,i,r,s):!ue||"dblclick"!==i||!F||he&&Ki?"addEventListener"in t?"mousewheel"===i?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!!_e&&{passive:!1}):"mouseenter"===i||"mouseleave"===i?(r=function(i){i=i||window.event,Ct(t,i)&&a(i)},t.addEventListener("mouseenter"===i?"mouseover":"mouseout",r,!1)):("click"===i&&Fi&&(r=function(t){St(t,a)}),t.addEventListener(i,r,!1)):"attachEvent"in t&&t.attachEvent("on"+i,r):F(t,r,s),t[Re]=t[Re]||{},t[Re][s]=r}function vt(t,i,e,o){var s=i+n(e)+(o?"_"+n(o):""),r=t[Re]&&t[Re][s];return r?(he&&0===i.indexOf("touch")?I(t,i,s):!ue||"dblclick"!==i||!U||he&&Ki?"removeEventListener"in t?"mousewheel"===i?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!!_e&&{passive:!1}):t.removeEventListener("mouseenter"===i?"mouseover":"mouseleave"===i?"mouseout":i,r,!1):"detachEvent"in t&&t.detachEvent("on"+i,r):U(t,s),void(t[Re][s]=null)):this}function yt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Mt(t),this}function xt(t){return gt(t,"mousewheel",yt),this}function wt(t){return mt(t,"mousedown touchstart dblclick",yt),gt(t,"click",zt),this}function Pt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Lt(t){return Pt(t),yt(t),this}function bt(t,i){if(!i)return new x(t.clientX,t.clientY);var e=pt(i),n=e.boundingClientRect;return new x((t.clientX-n.left)/e.x-i.clientLeft,(t.clientY-n.top)/e.y-i.clientTop)}function Tt(t){return Wi?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ne:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function zt(t){De[t.type]=!0}function Mt(t){var i=De[t.type];return De[t.type]=!1,i}function Ct(t,i){var e=i.relatedTarget;if(!e)return!0;try{for(;e&&e!==t;)e=e.parentNode}catch(n){return!1}return e!==t}function St(t,i){var e=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=Ie&&e-Ie;return n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated?void Lt(t):(Ie=e,void i(t))}function Et(t,i){return new He(t,i)}function Zt(t,i){if(!i||!t.length)return t.slice();var e=i*i;return t=Ot(t,e),t=At(t,e)}function kt(t,i,e){return Math.sqrt(Wt(t,i,e,!0))}function Bt(t,i,e){return Wt(t,i,e)}function At(t,i){var e=t.length,n=typeof Uint8Array!=void 0+""?Uint8Array:Array,o=new n(e);o[0]=o[e-1]=1,It(t,o,i,0,e-1);var s,r=[];for(s=0;s<e;s++)o[s]&&r.push(t[s]);return r}function It(t,i,e,n,o){var s,r,a,h=0;for(r=n+1;r<=o-1;r++)a=Wt(t[r],t[n],t[o],!0),a>h&&(s=r,h=a);h>e&&(i[s]=1,It(t,i,e,n,s),It(t,i,e,s,o))}function Ot(t,i){for(var e=[t[0]],n=1,o=0,s=t.length;n<s;n++)jt(t[n],t[o])>i&&(e.push(t[n]),o=n);return o<s-1&&e.push(t[s-1]),e}function Rt(t,i,e,n,o){var s,r,a,h=n?tn:Dt(t,e),u=Dt(i,e);for(tn=u;;){if(!(h|u))return[t,i];if(h&u)return!1;s=h||u,r=Nt(t,i,s,e,o),a=Dt(r,e),s===h?(t=r,h=a):(i=r,u=a)}}function Nt(t,i,e,n,o){var s,r,a=i.x-t.x,h=i.y-t.y,u=n.min,l=n.max;return 8&e?(s=t.x+a*(l.y-t.y)/h,r=l.y):4&e?(s=t.x+a*(u.y-t.y)/h,r=u.y):2&e?(s=l.x,r=t.y+h*(l.x-t.x)/a):1&e&&(s=u.x,r=t.y+h*(u.x-t.x)/a),new x(s,r,o)}function Dt(t,i){var e=0;return t.x<i.min.x?e|=1:t.x>i.max.x&&(e|=2),t.y<i.min.y?e|=4:t.y>i.max.y&&(e|=8),e}function jt(t,i){var e=i.x-t.x,n=i.y-t.y;return e*e+n*n}function Wt(t,i,e,n){var o,s=i.x,r=i.y,a=e.x-s,h=e.y-r,u=a*a+h*h;return u>0&&(o=((t.x-s)*a+(t.y-r)*h)/u,o>1?(s=e.x,r=e.y):o>0&&(s+=a*o,r+=h*o)),a=t.x-s,h=t.y-r,n?a*a+h*h:new x(s,r)}function Ht(t){return!xi(t[0])||"object"!=typeof t[0][0]&&"undefined"!=typeof t[0][0]}function Ft(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ht(t)}function Ut(t,i,e){var n,o,s,r,a,h,u,l,c,d=[1,4,2,8];for(o=0,u=t.length;o<u;o++)t[o]._code=Dt(t[o],i);for(r=0;r<4;r++){for(l=d[r],n=[],o=0,u=t.length,s=u-1;o<u;s=o++)a=t[o],h=t[s],a._code&l?h._code&l||(c=Nt(h,a,l,i,e),c._code=Dt(c,i),n.push(c)):(h._code&l&&(c=Nt(h,a,l,i,e),c._code=Dt(c,i),n.push(c)),n.push(a));t=n}return t}function Vt(t){return new xn(t)}function qt(t,i){return new Ln(t,i)}function Gt(t,i){return new Tn(t,i)}function Kt(t,i,e){return new zn(t,i,e)}function Yt(t,i){return new Mn(t,i)}function Xt(t,i){return new Cn(t,i)}function Jt(t,i){var e,n,o,s,r="Feature"===t.type?t.geometry:t,a=r?r.coordinates:null,h=[],u=i&&i.pointToLayer,l=i&&i.coordsToLatLng||Qt;if(!a&&!r)return null;switch(r.type){case"Point":return e=l(a),$t(u,t,e,i);case"MultiPoint":for(o=0,s=a.length;o<s;o++)e=l(a[o]),h.push($t(u,t,e,i));return new vn(h);case"LineString":case"MultiLineString":return n=ti(a,"LineString"===r.type?0:1,l),new Mn(n,i);case"Polygon":case"MultiPolygon":return n=ti(a,"Polygon"===r.type?1:2,l),new Cn(n,i);case"GeometryCollection":for(o=0,s=r.geometries.length;o<s;o++){var c=Jt({geometry:r.geometries[o],type:"Feature",properties:t.properties},i);c&&h.push(c)}return new vn(h);default:throw new Error("Invalid GeoJSON object.")}}function $t(t,i,e,n){return t?t(i,e):new Ln(e,n&&n.markersInheritOptions&&n)}function Qt(t){return new M(t[1],t[0],t[2])}function ti(t,i,e){for(var n,o=[],s=0,r=t.length;s<r;s++)n=i?ti(t[s],i-1,e):(e||Qt)(t[s]),o.push(n);return o}function ii(t,i){return i="number"==typeof i?i:6,void 0!==t.alt?[a(t.lng,i),a(t.lat,i),a(t.alt,i)]:[a(t.lng,i),a(t.lat,i)]}function ei(t,i,e,n){for(var o=[],s=0,r=t.length;s<r;s++)o.push(i?ei(t[s],i-1,e,n):ii(t[s],n));return!i&&e&&o.push(o[0]),o}function ni(t,e){return t.feature?i({},t.feature,{geometry:e}):oi(e)}function oi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function si(t,i){return new Sn(t,i)}function ri(t,i,e){return new An(t,i,e)}function ai(t,i,e){return new In(t,i,e)}function hi(t){return new Wn(t)}function ui(t){return new Hn(t)}function li(t,i){return new Fn(t,i)}function ci(t,i){return new Un(t,i)}function di(t){return pe?new qn(t):null}function _i(t){return me||fe?new Xn(t):null}function pi(t,i){return new Jn(t,i)}var mi="1.6.0",fi=Object.freeze;Object.freeze=function(t){return t};var gi=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}(),vi=0,yi=/\{ *([\w_-]+) *\}/g,xi=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},wi="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",Pi=0,Li=window.requestAnimationFrame||p("RequestAnimationFrame")||m,bi=window.cancelAnimationFrame||p("CancelAnimationFrame")||p("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},Ti=(Object.freeze||Object)({freeze:fi,extend:i,create:gi,bind:e,lastId:vi,stamp:n,throttle:o,wrapNum:s,falseFn:r,formatNum:a,trim:h,splitWords:u,setOptions:l,getParamString:c,template:d,isArray:xi,indexOf:_,emptyImageUrl:wi,requestFn:Li,cancelFn:bi,requestAnimFrame:f,cancelAnimFrame:g});v.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,o=gi(n);o.constructor=e,e.prototype=o;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);return t.statics&&(i(e,t.statics),delete t.statics),t.includes&&(y(t.includes),i.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=i(gi(o.options),t.options)),i(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,i=o._initHooks.length;t<i;t++)o._initHooks[t].call(this)}},e},v.include=function(t){return i(this.prototype,t),this},v.mergeOptions=function(t){return i(this.prototype.options,t),this},v.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),e="function"==typeof t?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(e),this};var zi={on:function(t,i,e){if("object"==typeof t)for(var n in t)this._on(n,t[n],i);else{t=u(t);for(var o=0,s=t.length;o<s;o++)this._on(t[o],i,e)}return this},off:function(t,i,e){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],i);else{t=u(t);for(var o=0,s=t.length;o<s;o++)this._off(t[o],i,e)}else delete this._events;return this},_on:function(t,i,e){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),e===this&&(e=void 0);for(var o={fn:i,ctx:e},s=n,r=0,a=s.length;r<a;r++)if(s[r].fn===i&&s[r].ctx===e)return;s.push(o)},_off:function(t,i,e){var n,o,s;if(this._events&&(n=this._events[t])){if(!i){for(o=0,s=n.length;o<s;o++)n[o].fn=r;return void delete this._events[t]}if(e===this&&(e=void 0),n)for(o=0,s=n.length;o<s;o++){var a=n[o];if(a.ctx===e&&a.fn===i)return a.fn=r,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(o,1)}}},fire:function(t,e,n){if(!this.listens(t,n))return this;var o=i({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var s=this._events[t];if(s){this._firingCount=this._firingCount+1||1;for(var r=0,a=s.length;r<a;r++){var h=s[r];h.fn.call(h.ctx||this,o)}this._firingCount--}}return n&&this._propagateEvent(o),this},listens:function(t,i){var e=this._events&&this._events[t];if(e&&e.length)return!0;if(i)for(var n in this._eventParents)if(this._eventParents[n].listens(t,i))return!0;return!1},once:function(t,i,n){if("object"==typeof t){for(var o in t)this.once(o,t[o],i);return this}var s=e(function(){this.off(t,i,n).off(t,s,n)},this);return this.on(t,i,n).on(t,s,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[n(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[n(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,i({layer:t.target,propagatedFrom:t.target},t),!0)}};zi.addEventListener=zi.on,zi.removeEventListener=zi.clearAllEventListeners=zi.off,zi.addOneTimeEventListener=zi.once,zi.fireEvent=zi.fire,zi.hasEventListeners=zi.listens;var Mi=v.extend(zi),Ci=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};x.prototype={clone:function(){return new x(this.x,this.y)},add:function(t){return this.clone()._add(w(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(w(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new x(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new x(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ci(this.x),this.y=Ci(this.y),this},distanceTo:function(t){t=w(t);var i=t.x-this.x,e=t.y-this.y;return Math.sqrt(i*i+e*e)},equals:function(t){return t=w(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=w(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+a(this.x)+", "+a(this.y)+")"}},P.prototype={extend:function(t){return t=w(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new x((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new x(this.min.x,this.max.y)},getTopRight:function(){return new x(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,e;return t="number"==typeof t[0]||t instanceof x?w(t):b(t),t instanceof P?(i=t.min,e=t.max):i=e=t,i.x>=this.min.x&&e.x<=this.max.x&&i.y>=this.min.y&&e.y<=this.max.y},intersects:function(t){t=b(t);var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>=i.x&&n.x<=e.x,r=o.y>=i.y&&n.y<=e.y;return s&&r},overlaps:function(t){t=b(t);var i=this.min,e=this.max,n=t.min,o=t.max,s=o.x>i.x&&n.x<e.x,r=o.y>i.y&&n.y<e.y;return s&&r},isValid:function(){return!(!this.min||!this.max)}},T.prototype={extend:function(t){var i,e,n=this._southWest,o=this._northEast;if(t instanceof M)i=t,e=t;else{if(!(t instanceof T))return t?this.extend(C(t)||z(t)):this;if(i=t._southWest,e=t._northEast,!i||!e)return this}return n||o?(n.lat=Math.min(i.lat,n.lat),n.lng=Math.min(i.lng,n.lng),o.lat=Math.max(e.lat,o.lat),o.lng=Math.max(e.lng,o.lng)):(this._southWest=new M(i.lat,i.lng),this._northEast=new M(e.lat,e.lng)),this},pad:function(t){var i=this._southWest,e=this._northEast,n=Math.abs(i.lat-e.lat)*t,o=Math.abs(i.lng-e.lng)*t;return new T(new M(i.lat-n,i.lng-o),new M(e.lat+n,e.lng+o))},getCenter:function(){return new M((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new M(this.getNorth(),this.getWest())},getSouthEast:function(){return new M(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof M||"lat"in t?C(t):z(t);var i,e,n=this._southWest,o=this._northEast;return t instanceof T?(i=t.getSouthWest(),e=t.getNorthEast()):i=e=t,i.lat>=n.lat&&e.lat<=o.lat&&i.lng>=n.lng&&e.lng<=o.lng},intersects:function(t){t=z(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>=i.lat&&n.lat<=e.lat,r=o.lng>=i.lng&&n.lng<=e.lng;return s&&r},overlaps:function(t){t=z(t);var i=this._southWest,e=this._northEast,n=t.getSouthWest(),o=t.getNorthEast(),s=o.lat>i.lat&&n.lat<e.lat,r=o.lng>i.lng&&n.lng<e.lng;return s&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i))},isValid:function(){return!(!this._southWest||!this._northEast)}},M.prototype={equals:function(t,i){if(!t)return!1;t=C(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=(void 0===i?1e-9:i)},toString:function(t){return"LatLng("+a(this.lat,t)+", "+a(this.lng,t)+")"},distanceTo:function(t){return Ei.distance(this,C(t))},wrap:function(){return Ei.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,e=i/Math.cos(Math.PI/180*this.lat);return z([this.lat-i,this.lng-e],[this.lat+i,this.lng+e])},clone:function(){return new M(this.lat,this.lng,this.alt)}};var Si={latLngToPoint:function(t,i){var e=this.projection.project(t),n=this.scale(i);return this.transformation._transform(e,n)},pointToLatLng:function(t,i){var e=this.scale(i),n=this.transformation.untransform(t,e);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,e=this.scale(t),n=this.transformation.transform(i.min,e),o=this.transformation.transform(i.max,e);return new P(n,o)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?s(t.lng,this.wrapLng,!0):t.lng,e=this.wrapLat?s(t.lat,this.wrapLat,!0):t.lat,n=t.alt;return new M(e,i,n)},wrapLatLngBounds:function(t){var i=t.getCenter(),e=this.wrapLatLng(i),n=i.lat-e.lat,o=i.lng-e.lng;if(0===n&&0===o)return t;var s=t.getSouthWest(),r=t.getNorthEast(),a=new M(s.lat-n,s.lng-o),h=new M(r.lat-n,r.lng-o);return new T(a,h)}},Ei=i({},Si,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var e=Math.PI/180,n=t.lat*e,o=i.lat*e,s=Math.sin((i.lat-t.lat)*e/2),r=Math.sin((i.lng-t.lng)*e/2),a=s*s+Math.cos(n)*Math.cos(o)*r*r,h=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*h}}),Zi=6378137,ki={R:Zi,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,e=this.MAX_LATITUDE,n=Math.max(Math.min(e,t.lat),-e),o=Math.sin(n*i);return new x(this.R*t.lng*i,this.R*Math.log((1+o)/(1-o))/2)},unproject:function(t){var i=180/Math.PI;return new M((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=Zi*Math.PI;return new P([-t,-t],[t,t])}()};S.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new x((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};var Bi,Ai,Ii,Oi=i({},Ei,{code:"EPSG:3857",projection:ki,transformation:function(){var t=.5/(Math.PI*ki.R);return E(t,.5,-t,.5)}()}),Ri=i({},Oi,{code:"EPSG:900913"}),Ni=document.documentElement.style,Di="ActiveXObject"in window,ji=Di&&!document.addEventListener,Wi="msLaunchUri"in navigator&&!("documentMode"in document),Hi=B("webkit"),Fi=B("android"),Ui=B("android 2")||B("android 3"),Vi=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qi=Fi&&B("Google")&&Vi<537&&!("AudioNode"in window),Gi=!!window.opera,Ki=B("chrome"),Yi=B("gecko")&&!Hi&&!Gi&&!Di,Xi=!Ki&&B("safari"),Ji=B("phantom"),$i="OTransition"in Ni,Qi=0===navigator.platform.indexOf("Win"),te=Di&&"transition"in Ni,ie="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ui,ee="MozPerspective"in Ni,ne=!window.L_DISABLE_3D&&(te||ie||ee)&&!$i&&!Ji,oe="undefined"!=typeof orientation||B("mobile"),se=oe&&Hi,re=oe&&ie,ae=!window.PointerEvent&&window.MSPointerEvent,he=!(Hi||!window.PointerEvent&&!ae),ue=!window.L_NO_TOUCH&&(he||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),le=oe&&Gi,ce=oe&&Yi,de=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_e=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",r,i),window.removeEventListener("testPassiveEventSupport",r,i)}catch(e){}return t},pe=function(){return!!document.createElement("canvas").getContext}(),me=!(!document.createElementNS||!Z("svg").createSVGRect),fe=!me&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(e){return!1}}(),ge=(Object.freeze||Object)({ie:Di,ielt9:ji,edge:Wi,webkit:Hi,android:Fi,android23:Ui,androidStock:qi,opera:Gi,chrome:Ki,gecko:Yi,safari:Xi,phantom:Ji,opera12:$i,win:Qi,ie3d:te,webkit3d:ie,gecko3d:ee,any3d:ne,mobile:oe,mobileWebkit:se,mobileWebkit3d:re,msPointer:ae,pointer:he,touch:ue,mobileOpera:le,mobileGecko:ce,retina:de,passiveEvents:_e,canvas:pe,svg:me,vml:fe}),ve=ae?"MSPointerDown":"pointerdown",ye=ae?"MSPointerMove":"pointermove",xe=ae?"MSPointerUp":"pointerup",we=ae?"MSPointerCancel":"pointercancel",Pe=["INPUT","SELECT","OPTION"],Le={},be=!1,Te=0,ze=ae?"MSPointerDown":he?"pointerdown":"touchstart",Me=ae?"MSPointerUp":he?"pointerup":"touchend",Ce="_leaflet_",Se=st(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ee=st(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ze="webkitTransition"===Ee||"OTransition"===Ee?Ee+"End":"transitionend";if("onselectstart"in document)Bi=function(){mt(window,"selectstart",Pt)},Ai=function(){ft(window,"selectstart",Pt)};else{var ke=st(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bi=function(){if(ke){var t=document.documentElement.style;Ii=t[ke],t[ke]="none"}},Ai=function(){ke&&(document.documentElement.style[ke]=Ii,Ii=void 0)}}var Be,Ae,Ie,Oe=(Object.freeze||Object)({TRANSFORM:Se,TRANSITION:Ee,TRANSITION_END:Ze,get:V,getStyle:q,create:G,remove:K,empty:Y,toFront:X,toBack:J,hasClass:$,addClass:Q,removeClass:tt,setClass:it,getClass:et,setOpacity:nt,testProp:st,setTransform:rt,setPosition:at,getPosition:ht,disableTextSelection:Bi,enableTextSelection:Ai,disableImageDrag:ut,enableImageDrag:lt,preventOutline:ct,restoreOutline:dt,getSizedParentNode:_t,getScale:pt}),Re="_leaflet_events",Ne=Qi&&Ki?2*window.devicePixelRatio:Yi?window.devicePixelRatio:1,De={},je=(Object.freeze||Object)({on:mt,off:ft,stopPropagation:yt,disableScrollPropagation:xt,disableClickPropagation:wt,preventDefault:Pt,stop:Lt,getMousePosition:bt,getWheelDelta:Tt,fakeStop:zt,skipped:Mt,isExternalTarget:Ct,addListener:mt,removeListener:ft}),We=Mi.extend({run:function(t,i,e,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=e||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=ht(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=f(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,e=1e3*this._duration;i<e?this._runFrame(this._easeOut(i/e),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var e=this._startPos.add(this._offset.multiplyBy(t));i&&e._round(),at(this._el,e),this.fire("step")},_complete:function(){g(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),He=Mi.extend({options:{crs:Oi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=l(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=e(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),void 0!==i.zoom&&(this._zoom=this._limitZoom(i.zoom)),i.center&&void 0!==i.zoom&&this.setView(C(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ee&&ne&&!le&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mt(this._proxy,Ze,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,n){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(C(t),e,this.options.maxBounds),n=n||{},this._stop(),this._loaded&&!n.reset&&n!==!0){void 0!==n.animate&&(n.zoom=i({animate:n.animate},n.zoom),n.pan=i({animate:n.animate,duration:n.duration},n.pan));var o=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(o)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(ne?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(ne?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i);
},setZoomAround:function(t,i,e){var n=this.getZoomScale(i),o=this.getSize().divideBy(2),s=t instanceof x?t:this.latLngToContainerPoint(t),r=s.subtract(o).multiplyBy(1-1/n),a=this.containerPointToLatLng(o.add(r));return this.setView(a,i,{zoom:e})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():z(t);var e=w(i.paddingTopLeft||i.padding||[0,0]),n=w(i.paddingBottomRight||i.padding||[0,0]),o=this.getBoundsZoom(t,!1,e.add(n));if(o="number"==typeof i.maxZoom?Math.min(i.maxZoom,o):o,o===1/0)return{center:t.getCenter(),zoom:o};var s=n.subtract(e).divideBy(2),r=this.project(t.getSouthWest(),o),a=this.project(t.getNorthEast(),o),h=this.unproject(r.add(a).divideBy(2).add(s),o);return{center:h,zoom:o}},fitBounds:function(t,i){if(t=z(t),!t.isValid())throw new Error("Bounds are not valid.");var e=this._getBoundsCenterZoom(t,i);return this.setView(e.center,e.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=w(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new We,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Q(this._mapPane,"leaflet-pan-anim");var e=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,e,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,e){function n(t){var i=t?-1:1,e=t?g:m,n=g*g-m*m+i*x*x*v*v,o=2*e*x*v,s=n/o,r=Math.sqrt(s*s+1)-s,a=r<1e-9?-18:Math.log(r);return a}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function r(t){return o(t)/s(t)}function a(t){return m*(s(w)/s(w+y*t))}function h(t){return m*(s(w)*r(w+y*t)-o(w))/x}function u(t){return 1-Math.pow(1-t,1.5)}function l(){var e=(Date.now()-P)/b,n=u(e)*L;e<=1?(this._flyToFrame=f(l,this),this._move(this.unproject(c.add(d.subtract(c).multiplyBy(h(n)/v)),p),this.getScaleZoom(m/a(n),p),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}if(e=e||{},e.animate===!1||!ne)return this.setView(t,i,e);this._stop();var c=this.project(this.getCenter()),d=this.project(t),_=this.getSize(),p=this._zoom;t=C(t),i=void 0===i?p:i;var m=Math.max(_.x,_.y),g=m*this.getZoomScale(p,i),v=d.distanceTo(c)||1,y=1.42,x=y*y,w=n(0),P=Date.now(),L=(n(1)-w)/y,b=e.duration?1e3*e.duration:1e3*L*.8;return this._moveStart(!0,e.noMoveStart),l.call(this),this},flyToBounds:function(t,i){var e=this._getBoundsCenterZoom(t,i);return this.flyTo(e.center,e.zoom,i)},setMaxBounds:function(t){return t=z(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var e=this.getCenter(),n=this._limitCenter(e,this._zoom,z(t));return e.equals(n)||this.panTo(n,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var e=w(i.paddingTopLeft||i.padding||[0,0]),n=w(i.paddingBottomRight||i.padding||[0,0]),o=this.getCenter(),s=this.project(o),r=this.project(t),a=this.getPixelBounds(),h=a.getSize().divideBy(2),u=b([a.min.add(e),a.max.subtract(n)]);if(!u.contains(r)){this._enforcingBounds=!0;var l=s.subtract(r),c=w(r.x+l.x,r.y+l.y);(r.x<u.min.x||r.x>u.max.x)&&(c.x=s.x-l.x,l.x>0?c.x+=h.x-e.x:c.x-=h.x-n.x),(r.y<u.min.y||r.y>u.max.y)&&(c.y=s.y-l.y,l.y>0?c.y+=h.y-e.y:c.y-=h.y-n.y),this.panTo(this.unproject(c),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=i({animate:!1,pan:!0},t===!0?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),s=n.divideBy(2).round(),r=o.divideBy(2).round(),a=s.subtract(r);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(e(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:o})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=i({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=e(this._handleGeolocationResponse,this),o=e(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,o,t):navigator.geolocation.getCurrentPosition(n,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var i=t.code,e=t.message||(1===i?"permission denied":2===i?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+e+"."})},_handleGeolocationResponse:function(t){var i=t.coords.latitude,e=t.coords.longitude,n=new M(i,e),o=n.toBounds(2*t.coords.accuracy),s=this._locateOptions;if(s.setView){var r=this.getBoundsZoom(o);this.setView(n,s.maxZoom?Math.min(r,s.maxZoom):r)}var a={latlng:n,bounds:o,timestamp:t.timestamp};for(var h in t.coords)"number"==typeof t.coords[h]&&(a[h]=t.coords[h]);this.fire("locationfound",a)},addHandler:function(t,i){if(!i)return this;var e=this[t]=new i(this);return this._handlers.push(e),this.options[t]&&e.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),K(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(g(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)K(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var e="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=G("div",e,i||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),e=this.unproject(t.getTopRight());return new T(i,e)},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,e){t=z(t),e=w(e||[0,0]);var n=this.getZoom()||0,o=this.getMinZoom(),s=this.getMaxZoom(),r=t.getNorthWest(),a=t.getSouthEast(),h=this.getSize().subtract(e),u=b(this.project(a,n),this.project(r,n)).getSize(),l=ne?this.options.zoomSnap:1,c=h.x/u.x,d=h.y/u.y,_=i?Math.max(c,d):Math.min(c,d);return n=this.getScaleZoom(_,n),l&&(n=Math.round(n/(l/100))*(l/100),n=i?Math.ceil(n/l)*l:Math.floor(n/l)*l),Math.max(o,Math.min(s,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new x(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var e=this._getTopLeftPoint(t,i);return new P(e,e.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var e=this.options.crs;return i=void 0===i?this._zoom:i,e.scale(t)/e.scale(i)},getScaleZoom:function(t,i){var e=this.options.crs;i=void 0===i?this._zoom:i;var n=e.zoom(t*e.scale(i));return isNaN(n)?1/0:n},project:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.latLngToPoint(C(t),i)},unproject:function(t,i){return i=void 0===i?this._zoom:i,this.options.crs.pointToLatLng(w(t),i)},layerPointToLatLng:function(t){var i=w(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(C(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(C(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,i){return this.options.crs.distance(C(t),C(i))},containerPointToLayerPoint:function(t){return w(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return w(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(w(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(C(t)))},mouseEventToContainerPoint:function(t){return bt(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=V(t);if(!i)throw new Error("Map container not found.");if(i._leaflet_id)throw new Error("Map container is already initialized.");mt(i,"scroll",this._onScroll,this),this._containerId=n(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ne,Q(t,"leaflet-container"+(ue?" leaflet-touch":"")+(de?" leaflet-retina":"")+(ji?" leaflet-oldie":"")+(Xi?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=q(t,"position");"absolute"!==i&&"relative"!==i&&"fixed"!==i&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new x(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Q(t.markerPane,"leaflet-zoom-hide"),Q(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){at(this._mapPane,new x(0,0));var e=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var n=this._zoom!==i;this._moveStart(n,!1)._move(t,i)._moveEnd(n),this.fire("viewreset"),e&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,e){void 0===i&&(i=this._zoom);var n=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||e&&e.pinch)&&this.fire("zoom",e),this.fire("move",e)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return g(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){at(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[n(this._container)]=this;var i=t?ft:mt;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),ne&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){g(this._resizeRequest),this._resizeRequest=f(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var e,o=[],s="mouseout"===i||"mouseover"===i,r=t.target||t.srcElement,a=!1;r;){if(e=this._targets[n(r)],e&&("click"===i||"preclick"===i)&&!t._simulated&&this._draggableMoved(e)){a=!0;break}if(e&&e.listens(i,!0)){if(s&&!Ct(r,t))break;if(o.push(e),s)break}if(r===this._container)break;r=r.parentNode}return o.length||a||s||!Ct(r,t)||(o=[this]),o},_handleDOMEvent:function(t){if(this._loaded&&!Mt(t)){var i=t.type;"mousedown"!==i&&"keypress"!==i&&"keyup"!==i&&"keydown"!==i||ct(t.target||t.srcElement),this._fireDOMEvent(t,i)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,n){if("click"===t.type){var o=i({},t);o.type="preclick",this._fireDOMEvent(o,o.type,n)}if(!t._stopped&&(n=(n||[]).concat(this._findEventTargets(t,e)),n.length)){var s=n[0];"contextmenu"===e&&s.listens(e,!0)&&Pt(t);var r={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var a=s.getLatLng&&(!s._radius||s._radius<=10);r.containerPoint=a?this.latLngToContainerPoint(s.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=a?s.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var h=0;h<n.length;h++)if(n[h].fire(e,r,!0),r.originalEvent._stopped||n[h].options.bubblingMouseEvents===!1&&_(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return ht(this._mapPane)||new x(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var e=t&&void 0!==i?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return e.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var e=this.getSize()._divideBy(2);return this.project(t,i)._subtract(e)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,e){var n=this._getNewPixelOrigin(e,i);return this.project(t,i)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,i,e){var n=this._getNewPixelOrigin(e,i);return b([this.project(t.getSouthWest(),i)._subtract(n),this.project(t.getNorthWest(),i)._subtract(n),this.project(t.getSouthEast(),i)._subtract(n),this.project(t.getNorthEast(),i)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,e){if(!e)return t;var n=this.project(t,i),o=this.getSize().divideBy(2),s=new P(n.subtract(o),n.add(o)),r=this._getBoundsOffset(s,e,i);return r.round().equals([0,0])?t:this.unproject(n.add(r),i)},_limitOffset:function(t,i){if(!i)return t;var e=this.getPixelBounds(),n=new P(e.min.add(t),e.max.add(t));return t.add(this._getBoundsOffset(n,i))},_getBoundsOffset:function(t,i,e){var n=b(this.project(i.getNorthEast(),e),this.project(i.getSouthWest(),e)),o=n.min.subtract(t.min),s=n.max.subtract(t.max),r=this._rebound(o.x,-s.x),a=this._rebound(o.y,-s.y);return new x(r,a)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),e=this.getMaxZoom(),n=ne?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(i,Math.min(e,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var e=this._getCenterOffset(t)._trunc();return!((i&&i.animate)!==!0&&!this.getSize().contains(e))&&(this.panBy(e,i),!0)},_createAnimProxy:function(){var t=this._proxy=G("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var i=Se,e=this._proxy.style[i];rt(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),e===this._proxy.style[i]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){K(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();rt(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,e){if(this._animatingZoom)return!0;if(e=e||{},!this._zoomAnimated||e.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(i),o=this._getCenterOffset(t)._divideBy(1-1/n);return!(e.animate!==!0&&!this.getSize().contains(o))&&(f(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,n,o){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Q(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:o}),setTimeout(e(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),f(function(){this._moveEnd(!0)},this))}}),Fe=v.extend({options:{position:"topright"},initialize:function(t){l(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),e=this.getPosition(),n=t._controlCorners[e];return Q(i,"leaflet-control"),e.indexOf("bottom")!==-1?n.insertBefore(i,n.firstChild):n.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(K(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Ue=function(t){return new Fe(t)};He.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function t(t,o){var s=e+t+" "+e+o;i[t+o]=G("div",s,n)}var i=this._controlCorners={},e="leaflet-",n=this._controlContainer=G("div",e+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)K(this._controlCorners[t]);K(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ve=Fe.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,e,n){return e<n?-1:n<e?1:0}},initialize:function(t,i,e){l(this,e),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in i)this._addLayer(i[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Fe.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(n(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Q(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Q(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=G("div",t),e=this.options.collapsed;i.setAttribute("aria-haspopup",!0),wt(i),xt(i);var n=this._section=G("section",t+"-list");e&&(this._map.on("click",this.collapse,this),Fi||mt(i,{mouseenter:this.expand,mouseleave:this.collapse},this));var o=this._layersLink=G("a",t+"-toggle",i);o.href="#",o.title="Layers",ue?(mt(o,"click",Lt),mt(o,"click",this.expand,this)):mt(o,"focus",this.expand,this),e||this.expand(),this._baseLayersList=G("div",t+"-base",n),this._separator=G("div",t+"-separator",n),this._overlaysList=G("div",t+"-overlays",n),i.appendChild(n)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&n(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:n}),this.options.sortLayers&&this._layers.sort(e(function(t,i){return this.options.sortFunction(t.layer,i.layer,t.name,i.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Y(this._baseLayersList),Y(this._overlaysList),this._layerControlInputs=[];var t,i,e,n,o=0;for(e=0;e<this._layers.length;e++)n=this._layers[e],this._addItem(n),i=i||n.overlay,t=t||!n.overlay,o+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&o>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(n(t.target)),e=i.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;e&&this._map.fire(e,i)},_createRadioElement:function(t,i){var e='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=e,n.firstChild},_addItem:function(t){var i,e=document.createElement("label"),o=this._map.hasLayer(t.layer);t.overlay?(i=document.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=o):i=this._createRadioElement("leaflet-base-layers_"+n(this),o),this._layerControlInputs.push(i),i.layerId=n(t.layer),mt(i,"click",this._onInputClick,this);var s=document.createElement("span");s.innerHTML=" "+t.name;var r=document.createElement("div");e.appendChild(r),r.appendChild(i),r.appendChild(s);var a=t.overlay?this._overlaysList:this._baseLayersList;return a.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t,i,e=this._layerControlInputs,n=[],o=[];this._handlingClick=!0;for(var s=e.length-1;s>=0;s--)t=e[s],i=this._getLayer(t.layerId).layer,t.checked?n.push(i):t.checked||o.push(i);for(s=0;s<o.length;s++)this._map.hasLayer(o[s])&&this._map.removeLayer(o[s]);for(s=0;s<n.length;s++)this._map.hasLayer(n[s])||this._map.addLayer(n[s]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,i,e=this._layerControlInputs,n=this._map.getZoom(),o=e.length-1;o>=0;o--)t=e[o],i=this._getLayer(t.layerId).layer,t.disabled=void 0!==i.options.minZoom&&n<i.options.minZoom||void 0!==i.options.maxZoom&&n>i.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),qe=function(t,i,e){return new Ve(t,i,e)},Ge=Fe.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",e=G("div",i+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,i+"-in",e,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,i+"-out",e,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),e},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,e,n,o){var s=G("a",e,n);return s.innerHTML=t,s.href="#",s.title=i,s.setAttribute("role","button"),s.setAttribute("aria-label",i),wt(s),mt(s,"click",Lt),mt(s,"click",o,this),mt(s,"click",this._refocusOnMap,this),s},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";tt(this._zoomInButton,i),tt(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMinZoom())&&Q(this._zoomOutButton,i),(this._disabled||t._zoom===t.getMaxZoom())&&Q(this._zoomInButton,i)}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ge,this.addControl(this.zoomControl))});var Ke=function(t){return new Ge(t)},Ye=Fe.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",e=G("div",i),n=this.options;return this._addScales(n,i+"-line",e),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,e){t.metric&&(this._mScale=G("div",i,e)),t.imperial&&(this._iScale=G("div",i,e))},_update:function(){var t=this._map,i=t.getSize().y/2,e=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(e)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),e=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,e,i/t)},_updateImperial:function(t){var i,e,n,o=3.2808399*t;o>5280?(i=o/5280,e=this._getRoundNum(i),this._updateScale(this._iScale,e+" mi",e/i)):(n=this._getRoundNum(o),this._updateScale(this._iScale,n+" ft",n/o))},_updateScale:function(t,i,e){t.style.width=Math.round(this.options.maxWidth*e)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),e=t/i;return e=e>=10?10:e>=5?5:e>=3?3:e>=2?2:1,i*e}}),Xe=function(t){return new Ye(t)},Je=Fe.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){l(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=G("div","leaflet-control-attribution"),wt(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var e=[];this.options.prefix&&e.push(this.options.prefix),t.length&&e.push(t.join(", ")),this._container.innerHTML=e.join(" | ")}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&(new Je).addTo(this)});var $e=function(t){return new Je(t)};Fe.Layers=Ve,Fe.Zoom=Ge,Fe.Scale=Ye,Fe.Attribution=Je,Ue.layers=qe,Ue.zoom=Ke,Ue.scale=Xe,Ue.attribution=$e;var Qe=v.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qe.addTo=function(t,i){return t.addHandler(i,this),this};var tn,en={Events:zi},nn=ue?"touchstart mousedown":"mousedown",on={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},sn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},rn=Mi.extend({options:{clickTolerance:3},initialize:function(t,i,e,n){l(this,n),this._element=t,this._dragStartTarget=i||t,this._preventOutline=e},enable:function(){this._enabled||(mt(this._dragStartTarget,nn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(rn._dragging===this&&this.finishDrag(),ft(this._dragStartTarget,nn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!$(this._element,"leaflet-zoom-anim")&&!(rn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(rn._dragging=this,this._preventOutline&&ct(this._element),ut(),Bi(),this._moving)))){this.fire("down");var i=t.touches?t.touches[0]:t,e=_t(this._element);this._startPoint=new x(i.clientX,i.clientY),this._parentScale=pt(e),mt(document,sn[t.type],this._onMove,this),mt(document,on[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var i=t.touches&&1===t.touches.length?t.touches[0]:t,e=new x(i.clientX,i.clientY)._subtract(this._startPoint);(e.x||e.y)&&(Math.abs(e.x)+Math.abs(e.y)<this.options.clickTolerance||(e.x/=this._parentScale.x,e.y/=this._parentScale.y,Pt(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ht(this._element).subtract(e),Q(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Q(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(e),
this._moving=!0,g(this._animRequest),this._lastEvent=t,this._animRequest=f(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),at(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in sn)ft(document,sn[t],this._onMove,this),ft(document,on[t],this._onUp,this);lt(),Ai(),this._moved&&this._moving&&(g(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,rn._dragging=!1}}),an=(Object.freeze||Object)({simplify:Zt,pointToSegmentDistance:kt,closestPointOnSegment:Bt,clipSegment:Rt,_getEdgeIntersection:Nt,_getBitCode:Dt,_sqClosestPointOnSegment:Wt,isFlat:Ht,_flat:Ft}),hn=(Object.freeze||Object)({clipPolygon:Ut}),un={project:function(t){return new x(t.lng,t.lat)},unproject:function(t){return new M(t.y,t.x)},bounds:new P([-180,-90],[180,90])},ln={R:6378137,R_MINOR:6356752.314245179,bounds:new P([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var i=Math.PI/180,e=this.R,n=t.lat*i,o=this.R_MINOR/e,s=Math.sqrt(1-o*o),r=s*Math.sin(n),a=Math.tan(Math.PI/4-n/2)/Math.pow((1-r)/(1+r),s/2);return n=-e*Math.log(Math.max(a,1e-10)),new x(t.lng*i*e,n)},unproject:function(t){for(var i,e=180/Math.PI,n=this.R,o=this.R_MINOR/n,s=Math.sqrt(1-o*o),r=Math.exp(-t.y/n),a=Math.PI/2-2*Math.atan(r),h=0,u=.1;h<15&&Math.abs(u)>1e-7;h++)i=s*Math.sin(a),i=Math.pow((1-i)/(1+i),s/2),u=Math.PI/2-2*Math.atan(r*i)-a,a+=u;return new M(a*e,t.x*e/n)}},cn=(Object.freeze||Object)({LonLat:un,Mercator:ln,SphericalMercator:ki}),dn=i({},Ei,{code:"EPSG:3395",projection:ln,transformation:function(){var t=.5/(Math.PI*ln.R);return E(t,.5,-t,.5)}()}),_n=i({},Ei,{code:"EPSG:4326",projection:un,transformation:E(1/180,1,-1/180,.5)}),pn=i({},Si,{projection:un,transformation:E(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var e=i.lng-t.lng,n=i.lat-t.lat;return Math.sqrt(e*e+n*n)},infinite:!0});Si.Earth=Ei,Si.EPSG3395=dn,Si.EPSG3857=Oi,Si.EPSG900913=Ri,Si.EPSG4326=_n,Si.Simple=pn;var mn=Mi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[n(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[n(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var e=this.getEvents();i.on(e,this),this.once("remove",function(){i.off(e,this)},this)}this.onAdd(i),this.getAttribution&&i.attributionControl&&i.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),i.fire("layeradd",{layer:this})}}});He.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=n(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=n(t);return this._layers[i]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&n(t)in this._layers},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},_addLayers:function(t){t=t?xi(t)?t:[t]:[];for(var i=0,e=t.length;i<e;i++)this.addLayer(t[i])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[n(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=n(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-(1/0),e=this._getZoomSpan();for(var n in this._zoomBoundLayers){var o=this._zoomBoundLayers[n].options;t=void 0===o.minZoom?t:Math.min(t,o.minZoom),i=void 0===o.maxZoom?i:Math.max(i,o.maxZoom)}this._layersMaxZoom=i===-(1/0)?void 0:i,this._layersMinZoom=t===1/0?void 0:t,e!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var fn=mn.extend({initialize:function(t,i){l(this,i),this._layers={};var e,n;if(t)for(e=0,n=t.length;e<n;e++)this.addLayer(t[e])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i,e,n=Array.prototype.slice.call(arguments,1);for(i in this._layers)e=this._layers[i],e[t]&&e[t].apply(e,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var e in this._layers)t.call(i,this._layers[e]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return n(t)}}),gn=function(t,i){return new fn(t,i)},vn=fn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),fn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),fn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new T;for(var i in this._layers){var e=this._layers[i];t.extend(e.getBounds?e.getBounds():e.getLatLng())}return t}}),yn=function(t){return new vn(t)},xn=v.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){l(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var e=this._getIconUrl(t);if(!e){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(e,i&&"IMG"===i.tagName?i:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,i){var e=this.options,n=e[i+"Size"];"number"==typeof n&&(n=[n,n]);var o=w(n),s=w("shadow"===i&&e.shadowAnchor||e.iconAnchor||o&&o.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(e.className||""),s&&(t.style.marginLeft=-s.x+"px",t.style.marginTop=-s.y+"px"),o&&(t.style.width=o.x+"px",t.style.height=o.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return de&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),wn=xn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return wn.imagePath||(wn.imagePath=this._detectIconPath()),(this.options.imagePath||wn.imagePath)+xn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=G("div","leaflet-default-icon-path",document.body),i=q(t,"background-image")||q(t,"backgroundImage");return document.body.removeChild(t),i=null===i||0!==i.indexOf("url")?"":i.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Pn=Qe.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new rn(t,t,(!0))),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Q(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,e=i._map,n=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,s=ht(i._icon),r=e.getPixelBounds(),a=e.getPixelOrigin(),h=b(r.min._subtract(a).add(o),r.max._subtract(a).subtract(o));if(!h.contains(s)){var u=w((Math.max(h.max.x,s.x)-h.max.x)/(r.max.x-h.max.x)-(Math.min(h.min.x,s.x)-h.min.x)/(r.min.x-h.min.x),(Math.max(h.max.y,s.y)-h.max.y)/(r.max.y-h.max.y)-(Math.min(h.min.y,s.y)-h.min.y)/(r.min.y-h.min.y)).multiplyBy(n);e.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),at(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=f(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(g(this._panRequest),this._panRequest=f(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,e=i._shadow,n=ht(i._icon),o=i._map.layerPointToLatLng(n);e&&at(e,n),i._latlng=o,t.latlng=o,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){g(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ln=mn.extend({options:{icon:new wn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){l(this,i),this._latlng=C(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=C(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),e=t.icon.createIcon(this._icon),n=!1;e!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(e.title=t.title),"IMG"===e.tagName&&(e.alt=t.alt||"")),Q(e,i),t.keyboard&&(e.tabIndex="0"),this._icon=e,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var o=t.icon.createShadow(this._shadow),s=!1;o!==this._shadow&&(this._removeShadow(),s=!0),o&&(Q(o,i),o.alt=""),this._shadow=o,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),o&&s&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),K(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&K(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&at(this._icon,t),this._shadow&&at(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(Q(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&nt(this._icon,t),this._shadow&&nt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),bn=mn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return l(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&t.hasOwnProperty("weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Tn=bn.extend({options:{fill:!0,radius:10},initialize:function(t,i){l(this,i),this._latlng=C(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=C(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return bn.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,e=this._clickTolerance(),n=[t+e,i+e];this._pxBounds=new P(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),zn=Tn.extend({initialize:function(t,e,n){if("number"==typeof e&&(e=i({},n,{radius:e})),l(this,e),this._latlng=C(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new T(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:bn.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,e=this._map,n=e.options.crs;if(n.distance===Ei.distance){var o=Math.PI/180,s=this._mRadius/Ei.R/o,r=e.project([i+s,t]),a=e.project([i-s,t]),h=r.add(a).divideBy(2),u=e.unproject(h).lat,l=Math.acos((Math.cos(s*o)-Math.sin(i*o)*Math.sin(u*o))/(Math.cos(i*o)*Math.cos(u*o)))/o;(isNaN(l)||0===l)&&(l=s/Math.cos(Math.PI/180*i)),this._point=h.subtract(e.getPixelOrigin()),this._radius=isNaN(l)?0:h.x-e.project([u,t-l]).x,this._radiusY=h.y-r.y}else{var c=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=e.latLngToLayerPoint(this._latlng),this._radius=this._point.x-e.latLngToLayerPoint(c).x}this._updateBounds()}}),Mn=bn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){l(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i,e,n=1/0,o=null,s=Wt,r=0,a=this._parts.length;r<a;r++)for(var h=this._parts[r],u=1,l=h.length;u<l;u++){i=h[u-1],e=h[u];var c=s(t,i,e,!0);c<n&&(n=c,o=s(t,i,e))}return o&&(o.distance=Math.sqrt(n)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,e,n,o,s,r,a=this._rings[0],h=a.length;if(!h)return null;for(t=0,i=0;t<h-1;t++)i+=a[t].distanceTo(a[t+1])/2;if(0===i)return this._map.layerPointToLatLng(a[0]);for(t=0,n=0;t<h-1;t++)if(o=a[t],s=a[t+1],e=o.distanceTo(s),n+=e,n>i)return r=(n-i)/e,this._map.layerPointToLatLng([s.x-r*(s.x-o.x),s.y-r*(s.y-o.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=C(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new T,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ht(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],e=Ht(t),n=0,o=t.length;n<o;n++)e?(i[n]=C(t[n]),this._bounds.extend(i[n])):i[n]=this._convertLatLngs(t[n]);return i},_project:function(){var t=new P;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new x(t,t);this._pxBounds=new P([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)])},_projectLatlngs:function(t,i,e){var n,o,s=t[0]instanceof M,r=t.length;if(s){for(o=[],n=0;n<r;n++)o[n]=this._map.latLngToLayerPoint(t[n]),e.extend(o[n]);i.push(o)}else for(n=0;n<r;n++)this._projectLatlngs(t[n],i,e)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var i,e,n,o,s,r,a,h=this._parts;for(i=0,n=0,o=this._rings.length;i<o;i++)for(a=this._rings[i],e=0,s=a.length;e<s-1;e++)r=Rt(a[e],a[e+1],t,e,!0),r&&(h[n]=h[n]||[],h[n].push(r[0]),r[1]===a[e+1]&&e!==s-2||(h[n].push(r[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,e=0,n=t.length;e<n;e++)t[e]=Zt(t[e],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var e,n,o,s,r,a,h=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(e=0,s=this._parts.length;e<s;e++)for(a=this._parts[e],n=0,r=a.length,o=r-1;n<r;o=n++)if((i||0!==n)&&kt(t,a[o],a[n])<=h)return!0;return!1}});Mn._flat=Ft;var Cn=Mn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,e,n,o,s,r,a,h,u=this._rings[0],l=u.length;if(!l)return null;for(s=r=a=0,t=0,i=l-1;t<l;i=t++)e=u[t],n=u[i],o=e.y*n.x-n.y*e.x,r+=(e.x+n.x)*o,a+=(e.y+n.y)*o,s+=3*o;return h=0===s?u[0]:[r/s,a/s],this._map.layerPointToLatLng(h)},_convertLatLngs:function(t){var i=Mn.prototype._convertLatLngs.call(this,t),e=i.length;return e>=2&&i[0]instanceof M&&i[0].equals(i[e-1])&&i.pop(),i},_setLatLngs:function(t){Mn.prototype._setLatLngs.call(this,t),Ht(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ht(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,e=new x(i,i);if(t=new P(t.min.subtract(e),t.max.add(e)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,o=0,s=this._rings.length;o<s;o++)n=Ut(this._rings[o],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i,e,n,o,s,r,a,h,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,a=this._parts.length;o<a;o++)for(i=this._parts[o],s=0,h=i.length,r=h-1;s<h;r=s++)e=i[s],n=i[r],e.y>t.y!=n.y>t.y&&t.x<(n.x-e.x)*(t.y-e.y)/(n.y-e.y)+e.x&&(u=!u);return u||Mn.prototype._containsPoint.call(this,t,!0)}}),Sn=vn.extend({initialize:function(t,i){l(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i,e,n,o=xi(t)?t:t.features;if(o){for(i=0,e=o.length;i<e;i++)n=o[i],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var s=this.options;if(s.filter&&!s.filter(t))return this;var r=Jt(t,s);return r?(r.feature=oi(t),r.defaultOptions=r.options,this.resetStyle(r),s.onEachFeature&&s.onEachFeature(t,r),this.addLayer(r)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=i({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&("function"==typeof i&&(i=i(t.feature)),t.setStyle(i))}}),En={toGeoJSON:function(t){return ni(this,{type:"Point",coordinates:ii(this.getLatLng(),t)})}};Ln.include(En),zn.include(En),Tn.include(En),Mn.include({toGeoJSON:function(t){var i=!Ht(this._latlngs),e=ei(this._latlngs,i?1:0,!1,t);return ni(this,{type:(i?"Multi":"")+"LineString",coordinates:e})}}),Cn.include({toGeoJSON:function(t){var i=!Ht(this._latlngs),e=i&&!Ht(this._latlngs[0]),n=ei(this._latlngs,e?2:i?1:0,!0,t);return i||(n=[n]),ni(this,{type:(e?"Multi":"")+"Polygon",coordinates:n})}}),fn.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(e){i.push(e.toGeoJSON(t).geometry.coordinates)}),ni(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===i)return this.toMultiPoint(t);var e="GeometryCollection"===i,n=[];return this.eachLayer(function(i){if(i.toGeoJSON){var o=i.toGeoJSON(t);if(e)n.push(o.geometry);else{var s=oi(o);"FeatureCollection"===s.type?n.push.apply(n,s.features):n.push(s)}}}),e?ni(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var Zn=si,kn=mn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,e){this._url=t,this._bounds=z(i),l(this,e)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Q(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){K(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&X(this._image),this},bringToBack:function(){return this._map&&J(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,i=this._image=t?this._url:G("img");return Q(i,"leaflet-image-layer"),this._zoomAnimated&&Q(i,"leaflet-zoom-animated"),this.options.className&&Q(i,this.options.className),i.onselectstart=r,i.onmousemove=r,i.onload=e(this.fire,this,"load"),i.onerror=e(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?void(this._url=i.src):(i.src=this._url,void(i.alt=this.options.alt))},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),e=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;rt(this._image,e,i)},_reset:function(){var t=this._image,i=new P(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),e=i.getSize();at(t,i.min),t.style.width=e.x+"px",t.style.height=e.y+"px"},_updateOpacity:function(){nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Bn=function(t,i,e){return new kn(t,i,e)},An=kn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,i=this._image=t?this._url:G("video");if(Q(i,"leaflet-image-layer"),this._zoomAnimated&&Q(i,"leaflet-zoom-animated"),this.options.className&&Q(i,this.options.className),i.onselectstart=r,i.onmousemove=r,i.onloadeddata=e(this.fire,this,"load"),t){for(var n=i.getElementsByTagName("source"),o=[],s=0;s<n.length;s++)o.push(n[s].src);return void(this._url=n.length>0?o:[i.src])}xi(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&i.style.hasOwnProperty("objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop;for(var a=0;a<this._url.length;a++){var h=G("source");h.src=this._url[a],i.appendChild(h)}}}),In=kn.extend({_initImage:function(){var t=this._image=this._url;Q(t,"leaflet-image-layer"),this._zoomAnimated&&Q(t,"leaflet-zoom-animated"),this.options.className&&Q(t,this.options.className),t.onselectstart=r,t.onmousemove=r}}),On=mn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,i){l(this,t),this._source=i},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&nt(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(nt(this._container,0),this._removeTimeout=setTimeout(e(K,void 0,this._container),200)):K(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=C(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&X(this._container),this},bringToBack:function(){return this._map&&J(this._container),this},_prepareOpen:function(t,i,e){if(i instanceof mn||(e=i,i=t),i instanceof vn)for(var n in t._layers){i=t._layers[n];break}if(!e)if(i.getCenter)e=i.getCenter();else{if(!i.getLatLng)throw new Error("Unable to get source layer LatLng.");e=i.getLatLng()}return this._source=i,this.update(),e},_updateContent:function(){if(this._content){var t=this._contentNode,i="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof i)t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=w(this.options.offset),e=this._getAnchor();this._zoomAnimated?at(this._container,t.add(e)):i=i.add(t).add(e);var n=this._containerBottom=-i.y,o=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=n+"px",this._container.style.left=o+"px"}},_getAnchor:function(){return[0,0]}}),Rn=On.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){On.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bn||this._source.on("preclick",yt))},onRemove:function(t){On.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bn||this._source.off("preclick",yt))},getEvents:function(){var t=On.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",i=this._container=G("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),e=this._wrapper=G("div",t+"-content-wrapper",i);if(this._contentNode=G("div",t+"-content",e),wt(e),xt(this._contentNode),mt(e,"contextmenu",yt),this._tipContainer=G("div",t+"-tip-container",i),this._tip=G("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=G("a",t+"-close-button",i);n.href="#close",n.innerHTML="&#215;",mt(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var e=t.offsetWidth;e=Math.min(e,this.options.maxWidth),e=Math.max(e,this.options.minWidth),i.width=e+1+"px",i.whiteSpace="",i.height="";var n=t.offsetHeight,o=this.options.maxHeight,s="leaflet-popup-scrolled";o&&n>o?(i.height=o+"px",Q(t,s)):tt(t,s),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),e=this._getAnchor();at(this._container,i.add(e))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,i=parseInt(q(this._container,"marginBottom"),10)||0,e=this._container.offsetHeight+i,n=this._containerWidth,o=new x(this._containerLeft,-e-this._containerBottom);o._add(ht(this._container));var s=t.layerPointToContainerPoint(o),r=w(this.options.autoPanPadding),a=w(this.options.autoPanPaddingTopLeft||r),h=w(this.options.autoPanPaddingBottomRight||r),u=t.getSize(),l=0,c=0;
s.x+n+h.x>u.x&&(l=s.x+n-u.x+h.x),s.x-l-a.x<0&&(l=s.x-a.x),s.y+e+h.y>u.y&&(c=s.y+e-u.y+h.y),s.y-c-a.y<0&&(c=s.y-a.y),(l||c)&&t.fire("autopanstart").panBy([l,c])}},_onCloseButtonClick:function(t){this._close(),Lt(t)},_getAnchor:function(){return w(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Nn=function(t,i){return new Rn(t,i)};He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(t,i,e){return t instanceof Rn||(t=new Rn(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),mn.include({bindPopup:function(t,i){return t instanceof Rn?(l(t,i),this._popup=t,t._source=this):(this._popup&&!i||(this._popup=new Rn(i,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,i){return this._popup&&this._map&&(i=this._popup._prepareOpen(this,t,i),this._map.openPopup(this._popup,i)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var i=t.layer||t.target;if(this._popup&&this._map)return Lt(t),i instanceof bn?void this.openPopup(t.layer||t.target,t.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===i?this.closePopup():this.openPopup(i,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Dn=On.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){On.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){On.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=On.prototype.getEvents.call(this);return ue&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=G("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i=this._map,e=this._container,n=i.latLngToContainerPoint(i.getCenter()),o=i.layerPointToContainerPoint(t),s=this.options.direction,r=e.offsetWidth,a=e.offsetHeight,h=w(this.options.offset),u=this._getAnchor();"top"===s?t=t.add(w(-r/2+h.x,-a+h.y+u.y,!0)):"bottom"===s?t=t.subtract(w(r/2-h.x,-h.y,!0)):"center"===s?t=t.subtract(w(r/2+h.x,a/2-u.y+h.y,!0)):"right"===s||"auto"===s&&o.x<n.x?(s="right",t=t.add(w(h.x+u.x,u.y-a/2+h.y,!0))):(s="left",t=t.subtract(w(r+u.x-h.x,a/2-u.y-h.y,!0))),tt(e,"leaflet-tooltip-right"),tt(e,"leaflet-tooltip-left"),tt(e,"leaflet-tooltip-top"),tt(e,"leaflet-tooltip-bottom"),Q(e,"leaflet-tooltip-"+s),at(e,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&nt(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return w(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),jn=function(t,i){return new Dn(t,i)};He.include({openTooltip:function(t,i,e){return t instanceof Dn||(t=new Dn(e).setContent(t)),i&&t.setLatLng(i),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),mn.include({bindTooltip:function(t,i){return t instanceof Dn?(l(t,i),this._tooltip=t,t._source=this):(this._tooltip&&!i||(this._tooltip=new Dn(i,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var i=t?"off":"on",e={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?e.add=this._openTooltip:(e.mouseover=this._openTooltip,e.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(e.mousemove=this._moveTooltip),ue&&(e.click=this._openTooltip)),this[i](e),this._tooltipHandlersAdded=!t}},openTooltip:function(t,i){return this._tooltip&&this._map&&(i=this._tooltip._prepareOpen(this,t,i),this._map.openTooltip(this._tooltip,i),this._tooltip.options.interactive&&this._tooltip._container&&(Q(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(tt(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var i=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(i,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var i,e,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(i=this._map.mouseEventToContainerPoint(t.originalEvent),e=this._map.containerPointToLayerPoint(i),n=this._map.layerPointToLatLng(e)),this._tooltip.setLatLng(n)}});var Wn=xn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:document.createElement("div"),e=this.options;if(e.html instanceof Element?(Y(i),i.appendChild(e.html)):i.innerHTML=e.html!==!1?e.html:"",e.bgPos){var n=w(e.bgPos);i.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});xn.Default=wn;var Hn=mn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){l(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),K(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(X(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(J(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=o(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof x?t:new x(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i,e=this.getPane().children,n=-t(-(1/0),1/0),o=0,s=e.length;o<s;o++)i=e[o].style.zIndex,e[o]!==this._container&&i&&(n=t(n,+i));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ji){nt(this._container,this.options.opacity);var t=+new Date,i=!1,e=!1;for(var n in this._tiles){var o=this._tiles[n];if(o.current&&o.loaded){var s=Math.min(1,(t-o.loaded)/200);nt(o.el,s),s<1?i=!0:(o.active?e=!0:this._onOpaqueTile(o),o.active=!0)}}e&&!this._noPrune&&this._pruneTiles(),i&&(g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this))}},_onOpaqueTile:r,_initContainer:function(){this._container||(this._container=G("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(void 0!==t){for(var e in this._levels)this._levels[e].el.children.length||e===t?(this._levels[e].el.style.zIndex=i-Math.abs(t-e),this._onUpdateLevel(e)):(K(this._levels[e].el),this._removeTilesAtZoom(e),this._onRemoveLevel(e),delete this._levels[e]);var n=this._levels[t],o=this._map;return n||(n=this._levels[t]={},n.el=G("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=i,n.origin=o.project(o.unproject(o.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,o.getCenter(),o.getZoom()),r(n.el.offsetWidth),this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:r,_onRemoveLevel:r,_onCreateLevel:r,_pruneTiles:function(){if(this._map){var t,i,e=this._map.getZoom();if(e>this.options.maxZoom||e<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var n=i.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)K(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,e,n){var o=Math.floor(t/2),s=Math.floor(i/2),r=e-1,a=new x((+o),(+s));a.z=+r;var h=this._tileCoordsToKey(a),u=this._tiles[h];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),r>n&&this._retainParent(o,s,r,n))},_retainChildren:function(t,i,e,n){for(var o=2*t;o<2*t+2;o++)for(var s=2*i;s<2*i+2;s++){var r=new x(o,s);r.z=e+1;var a=this._tileCoordsToKey(r),h=this._tiles[a];h&&h.active?h.retain=!0:(h&&h.loaded&&(h.retain=!0),e+1<n&&this._retainChildren(o,s,e+1,n))}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return void 0!==i.minNativeZoom&&t<i.minNativeZoom?i.minNativeZoom:void 0!==i.maxNativeZoom&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,e,n){var o=this._clampZoom(Math.round(i));(void 0!==this.options.maxZoom&&o>this.options.maxZoom||void 0!==this.options.minZoom&&o<this.options.minZoom)&&(o=void 0);var s=this.options.updateWhenZooming&&o!==this._tileZoom;n&&!s||(this._tileZoom=o,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==o&&this._update(t),e||this._pruneTiles(),this._noPrune=!!e),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var e in this._levels)this._setZoomTransform(this._levels[e],t,i)},_setZoomTransform:function(t,i,e){var n=this._map.getZoomScale(e,t.zoom),o=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(i,e)).round();ne?rt(t.el,o,n):at(t.el,o)},_resetGrid:function(){var t=this._map,i=t.options.crs,e=this._tileSize=this.getTileSize(),n=this._tileZoom,o=this._map.getPixelWorldBounds(this._tileZoom);o&&(this._globalTileRange=this._pxBoundsToTileRange(o)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],n).x/e.x),Math.ceil(t.project([0,i.wrapLng[1]],n).x/e.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],n).y/e.x),Math.ceil(t.project([i.wrapLat[1],0],n).y/e.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var i=this._map,e=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),n=i.getZoomScale(e,this._tileZoom),o=i.project(t,this._tileZoom).floor(),s=i.getSize().divideBy(2*n);return new P(o.subtract(s),o.add(s))},_update:function(t){var i=this._map;if(i){var e=this._clampZoom(i.getZoom());if(void 0===t&&(t=i.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),o=this._pxBoundsToTileRange(n),s=o.getCenter(),r=[],a=this.options.keepBuffer,h=new P(o.getBottomLeft().subtract([a,-a]),o.getTopRight().add([a,-a]));if(!(isFinite(o.min.x)&&isFinite(o.min.y)&&isFinite(o.max.x)&&isFinite(o.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var l=this._tiles[u].coords;l.z===this._tileZoom&&h.contains(new x(l.x,l.y))||(this._tiles[u].current=!1)}if(Math.abs(e-this._tileZoom)>1)return void this._setView(t,e);for(var c=o.min.y;c<=o.max.y;c++)for(var d=o.min.x;d<=o.max.x;d++){var _=new x(d,c);if(_.z=this._tileZoom,this._isValidTile(_)){var p=this._tiles[this._tileCoordsToKey(_)];p?p.current=!0:r.push(_)}}if(r.sort(function(t,i){return t.distanceTo(s)-i.distanceTo(s)}),0!==r.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<r.length;d++)this._addTile(r[d],m);this._level.el.appendChild(m)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var e=this._globalTileRange;if(!i.wrapLng&&(t.x<e.min.x||t.x>e.max.x)||!i.wrapLat&&(t.y<e.min.y||t.y>e.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,e=this.getTileSize(),n=t.scaleBy(e),o=n.add(e),s=i.unproject(n,t.z),r=i.unproject(o,t.z);return[s,r]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),e=new T(i[0],i[1]);return this.options.noWrap||(e=this._map.wrapLatLngBounds(e)),e},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),e=new x((+i[0]),(+i[1]));return e.z=+i[2],e},_removeTile:function(t){var i=this._tiles[t];i&&(K(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Q(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=r,t.onmousemove=r,ji&&this.options.opacity<1&&nt(t,this.options.opacity),Fi&&!Ui&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,i){var n=this._getTilePos(t),o=this._tileCoordsToKey(t),s=this.createTile(this._wrapCoords(t),e(this._tileReady,this,t));this._initTile(s),this.createTile.length<2&&f(e(this._tileReady,this,t,null,s)),at(s,n),this._tiles[o]={el:s,coords:t,current:!0},i.appendChild(s),this.fire("tileloadstart",{tile:s,coords:t})},_tileReady:function(t,i,n){i&&this.fire("tileerror",{error:i,tile:n,coords:t});var o=this._tileCoordsToKey(t);n=this._tiles[o],n&&(n.loaded=+new Date,this._map._fadeAnimated?(nt(n.el,0),g(this._fadeFrame),this._fadeFrame=f(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),i||(Q(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ji||!this._map._fadeAnimated?f(this._pruneTiles,this):setTimeout(e(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new x(this._wrapX?s(t.x,this._wrapX):t.x,this._wrapY?s(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new P(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Fn=Hn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,i){this._url=t,i=l(this,i),i.detectRetina&&de&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),"string"==typeof i.subdomains&&(i.subdomains=i.subdomains.split("")),Fi||this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&void 0===i&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var n=document.createElement("img");return mt(n,"load",e(this._tileOnLoad,this,i,n)),mt(n,"error",e(this._tileOnError,this,i,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:de?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var n=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=n),e["-y"]=n}return d(this._url,i(e,this.options))},_tileOnLoad:function(t,i){ji?setTimeout(e(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,e){var n=this.options.errorTileUrl;n&&i.getAttribute("src")!==n&&(i.src=n),t(e,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,e=this.options.zoomReverse,n=this.options.zoomOffset;return e&&(t=i-t),t+n},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=r,i.onerror=r,i.complete||(i.src=wi,K(i),delete this._tiles[t]))},_removeTile:function(t){var i=this._tiles[t];if(i)return qi||i.el.setAttribute("src",wi),Hn.prototype._removeTile.call(this,t)},_tileReady:function(t,i,e){if(this._map&&(!e||e.getAttribute("src")!==wi))return Hn.prototype._tileReady.call(this,t,i,e)}}),Un=Fn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var n=i({},this.defaultWmsParams);for(var o in e)o in this.options||(n[o]=e[o]);e=l(this,e);var s=e.detectRetina&&de?2:1,r=this.getTileSize();n.width=r.x*s,n.height=r.y*s,this.wmsParams=n},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,Fn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),e=this._crs,n=b(e.project(i[0]),e.project(i[1])),o=n.min,s=n.max,r=(this._wmsVersion>=1.3&&this._crs===_n?[o.y,o.x,s.y,s.x]:[o.x,o.y,s.x,s.y]).join(","),a=Fn.prototype.getTileUrl.call(this,t);return a+c(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+r},setParams:function(t,e){return i(this.wmsParams,t),e||this.redraw(),this}});Fn.WMS=Un,li.wms=ci;var Vn=mn.extend({options:{padding:.1,tolerance:0},initialize:function(t){l(this,t),n(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Q(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var e=this._map.getZoomScale(i,this._zoom),n=ht(this._container),o=this._map.getSize().multiplyBy(.5+this.options.padding),s=this._map.project(this._center,i),r=this._map.project(t,i),a=r.subtract(s),h=o.multiplyBy(-e).add(n).add(o).subtract(a);ne?rt(this._container,h,e):at(this._container,h)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),e=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new P(e,e.add(i.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),qn=Vn.extend({getEvents:function(){var t=Vn.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Vn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");mt(t,"mousemove",this._onMouseMove,this),mt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mt(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){g(this._redrawRequest),delete this._ctx,K(this._container),ft(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vn.prototype._update.call(this);var t=this._bounds,i=this._container,e=t.getSize(),n=de?2:1;at(i,t.min),i.width=n*e.x,i.height=n*e.y,i.style.width=e.x+"px",i.style.height=e.y+"px",de&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Vn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[n(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,e=i.next,o=i.prev;e?e.prev=o:this._drawLast=o,o?o.next=e:this._drawFirst=e,delete t._order,delete this._layers[n(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){var i,e,n=t.options.dashArray.split(/[, ]+/),o=[];for(e=0;e<n.length;e++){if(i=Number(n[e]),isNaN(i))return;o.push(i)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||f(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new P,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var e=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,e.x,e.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(this._drawing){var e,n,o,s,r=t._parts,a=r.length,h=this._ctx;if(a){for(h.beginPath(),e=0;e<a;e++){for(n=0,o=r[e].length;n<o;n++)s=r[e][n],h[n?"lineTo":"moveTo"](s.x,s.y);i&&h.closePath()}this._fillStroke(h,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var i=t._point,e=this._ctx,n=Math.max(Math.round(t._radius),1),o=(Math.max(Math.round(t._radiusY),1)||n)/n;1!==o&&(e.save(),e.scale(1,o)),e.beginPath(),e.arc(i.x,i.y/o,n,0,2*Math.PI,!1),1!==o&&e.restore(),this._fillStroke(e,t)}},_fillStroke:function(t,i){var e=i.options;e.fill&&(t.globalAlpha=e.fillOpacity,t.fillStyle=e.fillColor||e.color,t.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=e.opacity,t.lineWidth=e.weight,t.strokeStyle=e.color,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.stroke())},_onClick:function(t){for(var i,e,n=this._map.mouseEventToLayerPoint(t),o=this._drawFirst;o;o=o.next)i=o.layer,i.options.interactive&&i._containsPoint(n)&&!this._map._draggableMoved(i)&&(e=i);e&&(zt(t),this._fireEvent([e],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(tt(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var e,n,o=this._drawFirst;o;o=o.next)e=o.layer,e.options.interactive&&e._containsPoint(i)&&(n=e);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(Q(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(L.bind(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,e){this._map._fireDOMEvent(i,e||i.type,t)},_bringToFront:function(t){var i=t._order;if(i){var e=i.next,n=i.prev;e&&(e.prev=n,n?n.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t))}},_bringToBack:function(t){var i=t._order;if(i){var e=i.next,n=i.prev;n&&(n.next=e,e?e.prev=n:n&&(this._drawLast=n),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t))}}}),Gn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Kn={_initContainer:function(){this._container=G("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Vn.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=Gn("shape");Q(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=Gn("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;K(i),t.removeInteractiveTarget(i),delete this._layers[n(t)]},_updateStyle:function(t){var i=t._stroke,e=t._fill,n=t.options,o=t._container;o.stroked=!!n.stroke,o.filled=!!n.fill,n.stroke?(i||(i=t._stroke=Gn("stroke")),o.appendChild(i),i.weight=n.weight+"px",i.color=n.color,i.opacity=n.opacity,n.dashArray?i.dashStyle=xi(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=n.lineCap.replace("butt","flat"),i.joinstyle=n.lineJoin):i&&(o.removeChild(i),t._stroke=null),n.fill?(e||(e=t._fill=Gn("fill")),o.appendChild(e),e.color=n.fillColor||n.color,e.opacity=n.fillOpacity):e&&(o.removeChild(e),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),e=Math.round(t._radius),n=Math.round(t._radiusY||e);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+e+","+n+" 0,23592600")},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){X(t._container)},_bringToBack:function(t){J(t._container)}},Yn=fe?Gn:Z,Xn=Vn.extend({getEvents:function(){var t=Vn.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Yn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Yn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){K(this._container),ft(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Vn.prototype._update.call(this);var t=this._bounds,i=t.getSize(),e=this._container;this._svgSize&&this._svgSize.equals(i)||(this._svgSize=i,e.setAttribute("width",i.x),e.setAttribute("height",i.y)),at(e,t.min),e.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Yn("path");t.options.className&&Q(i,t.options.className),t.options.interactive&&Q(i,"leaflet-interactive"),this._updateStyle(t),this._layers[n(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){K(t._path),t.removeInteractiveTarget(t._path),delete this._layers[n(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,e=t.options;i&&(e.stroke?(i.setAttribute("stroke",e.color),i.setAttribute("stroke-opacity",e.opacity),i.setAttribute("stroke-width",e.weight),i.setAttribute("stroke-linecap",e.lineCap),i.setAttribute("stroke-linejoin",e.lineJoin),e.dashArray?i.setAttribute("stroke-dasharray",e.dashArray):i.removeAttribute("stroke-dasharray"),e.dashOffset?i.setAttribute("stroke-dashoffset",e.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),e.fill?(i.setAttribute("fill",e.fillColor||e.color),i.setAttribute("fill-opacity",e.fillOpacity),i.setAttribute("fill-rule",e.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,k(t._parts,i))},_updateCircle:function(t){var i=t._point,e=Math.max(Math.round(t._radius),1),n=Math.max(Math.round(t._radiusY),1)||e,o="a"+e+","+n+" 0 1,0 ",s=t._empty()?"M0 0":"M"+(i.x-e)+","+i.y+o+2*e+",0 "+o+2*-e+",0 ";this._setPath(t,s)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){X(t._path)},_bringToBack:function(t){J(t._path)}});fe&&Xn.include(Kn),He.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),
i},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var i=this._paneRenderers[t];return void 0===i&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&di(t)||_i(t)}});var Jn=Cn.extend({initialize:function(t,i){Cn.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=z(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});Xn.create=Yn,Xn.pointsToPath=k,Sn.geometryToLayer=Jt,Sn.coordsToLatLng=Qt,Sn.coordsToLatLngs=ti,Sn.latLngToCoords=ii,Sn.latLngsToCoords=ei,Sn.getFeature=ni,Sn.asFeature=oi,He.mergeOptions({boxZoom:!0});var $n=Qe.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ft(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){K(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){return!(!t.shiftKey||1!==t.which&&1!==t.button)&&(this._clearDeferredResetState(),this._resetState(),Bi(),ut(),this._startPoint=this._map.mouseEventToContainerPoint(t),void mt(document,{contextmenu:Lt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=G("div","leaflet-zoom-box",this._container),Q(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new P(this._point,this._startPoint),e=i.getSize();at(this._box,i.min),this._box.style.width=e.x+"px",this._box.style.height=e.y+"px"},_finish:function(){this._moved&&(K(this._box),tt(this._container,"leaflet-crosshair")),Ai(),lt(),ft(document,{contextmenu:Lt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(e(this._resetState,this),0);var i=new T(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});He.addInitHook("addHandler","boxZoom",$n),He.mergeOptions({doubleClickZoom:!0});var Qn=Qe.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,e=i.getZoom(),n=i.options.zoomDelta,o=t.originalEvent.shiftKey?e-n:e+n;"center"===i.options.doubleClickZoom?i.setZoom(o):i.setZoomAround(t.containerPoint,o)}});He.addInitHook("addHandler","doubleClickZoom",Qn),He.mergeOptions({dragging:!0,inertia:!Ui,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var to=Qe.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new rn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Q(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=z(this._map.options.maxBounds);this._offsetLimit=b(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,e=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(e),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),e=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-i+e)%t+i-e,s=(n+i+e)%t-i-e,r=Math.abs(o+e)<Math.abs(s+e)?o:s;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=r},_onDragEnd:function(t){var i=this._map,e=i.options,n=!e.inertia||this._times.length<2;if(i.fire("dragend",t),n)i.fire("moveend");else{this._prunePositions(+new Date);var o=this._lastPos.subtract(this._positions[0]),s=(this._lastTime-this._times[0])/1e3,r=e.easeLinearity,a=o.multiplyBy(r/s),h=a.distanceTo([0,0]),u=Math.min(e.inertiaMaxSpeed,h),l=a.multiplyBy(u/h),c=u/(e.inertiaDeceleration*r),d=l.multiplyBy(-c/2).round();d.x||d.y?(d=i._limitOffset(d,i.options.maxBounds),f(function(){i.panBy(d,{duration:c,easeLinearity:r,noMoveStart:!0,animate:!0})})):i.fire("moveend")}}});He.addInitHook("addHandler","dragging",to),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var io=Qe.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),mt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ft(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,e=t.scrollTop||i.scrollTop,n=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(n,e)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i,e,n=this._panKeys={},o=this.keyCodes;for(i=0,e=o.left.length;i<e;i++)n[o.left[i]]=[-1*t,0];for(i=0,e=o.right.length;i<e;i++)n[o.right[i]]=[t,0];for(i=0,e=o.down.length;i<e;i++)n[o.down[i]]=[0,t];for(i=0,e=o.up.length;i<e;i++)n[o.up[i]]=[0,-1*t]},_setZoomDelta:function(t){var i,e,n=this._zoomKeys={},o=this.keyCodes;for(i=0,e=o.zoomIn.length;i<e;i++)n[o.zoomIn[i]]=t;for(i=0,e=o.zoomOut.length;i<e;i++)n[o.zoomOut[i]]=-t},_addHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ft(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i,e=t.keyCode,n=this._map;if(e in this._panKeys)n._panAnim&&n._panAnim._inProgress||(i=this._panKeys[e],t.shiftKey&&(i=w(i).multiplyBy(3)),n.panBy(i),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds));else if(e in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else{if(27!==e||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}Lt(t)}}});He.addInitHook("addHandler","keyboard",io),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var eo=Qe.extend({addHooks:function(){mt(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ft(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=Tt(t),n=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var o=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(e(this._performZoom,this),o),Lt(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),e=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),o=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,s=e?Math.ceil(o/e)*e:o,r=t._limitZoom(i+(this._delta>0?s:-s))-i;this._delta=0,this._startTime=null,r&&("center"===t.options.scrollWheelZoom?t.setZoom(i+r):t.setZoomAround(this._lastMousePos,i+r))}});He.addInitHook("addHandler","scrollWheelZoom",eo),He.mergeOptions({tap:!0,tapTolerance:15});var no=Qe.extend({addHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ft(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Pt(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new x(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&Q(n,"leaflet-active"),this._holdTimeout=setTimeout(e(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),this._simulateEvent("mousedown",i),mt(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),ft(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],e=i.target;e&&e.tagName&&"a"===e.tagName.toLowerCase()&&tt(e,"leaflet-active"),this._simulateEvent("mouseup",i),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var i=t.touches[0];this._newPos=new x(i.clientX,i.clientY),this._simulateEvent("mousemove",i)},_simulateEvent:function(t,i){var e=document.createEvent("MouseEvents");e._simulated=!0,i.target._simulatedClick=!0,e.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),i.target.dispatchEvent(e)}});ue&&!he&&He.addInitHook("addHandler","tap",no),He.mergeOptions({touchZoom:ue&&!Ui,bounceAtZoomLimits:!0});var oo=Qe.extend({addHooks:function(){Q(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),ft(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(e.add(n)._divideBy(2))),this._startDist=e.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend",this._onTouchEnd,this),Pt(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var i=this._map,n=i.mouseEventToContainerPoint(t.touches[0]),o=i.mouseEventToContainerPoint(t.touches[1]),s=n.distanceTo(o)/this._startDist;if(this._zoom=i.getScaleZoom(s,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&s<1||this._zoom>i.getMaxZoom()&&s>1)&&(this._zoom=i._limitZoom(this._zoom)),"center"===i.options.touchZoom){if(this._center=this._startLatLng,1===s)return}else{var r=n._add(o)._divideBy(2)._subtract(this._centerPoint);if(1===s&&0===r.x&&0===r.y)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),g(this._animRequest);var a=e(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=f(a,this,!0),Pt(t)}},_onTouchEnd:function(){return this._moved&&this._zooming?(this._zooming=!1,g(this._animRequest),ft(document,"touchmove",this._onTouchMove),ft(document,"touchend",this._onTouchEnd),void(this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom)))):void(this._zooming=!1)}});He.addInitHook("addHandler","touchZoom",oo),He.BoxZoom=$n,He.DoubleClickZoom=Qn,He.Drag=to,He.Keyboard=io,He.ScrollWheelZoom=eo,He.Tap=no,He.TouchZoom=oo,Object.freeze=fi,t.version=mi,t.Control=Fe,t.control=Ue,t.Browser=ge,t.Evented=Mi,t.Mixin=en,t.Util=Ti,t.Class=v,t.Handler=Qe,t.extend=i,t.bind=e,t.stamp=n,t.setOptions=l,t.DomEvent=je,t.DomUtil=Oe,t.PosAnimation=We,t.Draggable=rn,t.LineUtil=an,t.PolyUtil=hn,t.Point=x,t.point=w,t.Bounds=P,t.bounds=b,t.Transformation=S,t.transformation=E,t.Projection=cn,t.LatLng=M,t.latLng=C,t.LatLngBounds=T,t.latLngBounds=z,t.CRS=Si,t.GeoJSON=Sn,t.geoJSON=si,t.geoJson=Zn,t.Layer=mn,t.LayerGroup=fn,t.layerGroup=gn,t.FeatureGroup=vn,t.featureGroup=yn,t.ImageOverlay=kn,t.imageOverlay=Bn,t.VideoOverlay=An,t.videoOverlay=ri,t.SVGOverlay=In,t.svgOverlay=ai,t.DivOverlay=On,t.Popup=Rn,t.popup=Nn,t.Tooltip=Dn,t.tooltip=jn,t.Icon=xn,t.icon=Vt,t.DivIcon=Wn,t.divIcon=hi,t.Marker=Ln,t.marker=qt,t.TileLayer=Fn,t.tileLayer=li,t.GridLayer=Hn,t.gridLayer=ui,t.SVG=Xn,t.svg=_i,t.Renderer=Vn,t.Canvas=qn,t.canvas=di,t.Path=bn,t.CircleMarker=Tn,t.circleMarker=Gt,t.Circle=zn,t.circle=Kt,t.Polyline=Mn,t.polyline=Yt,t.Polygon=Cn,t.polygon=Xt,t.Rectangle=Jn,t.rectangle=pi,t.Map=He,t.map=Et;var so=window.L;t.noConflict=function(){return window.L=so,this},window.L=t});
!function(){function t(t){try{var e=window[t],r="__storage_test__";return e.setItem(r,r),e.removeItem(r),!0}catch(o){return console.warn("Your browser blocks access to "+t),!1}}var e={restoreView:function(){if(!t("localStorage"))return!1;var e=window.localStorage;this.__initRestore||(this.on("moveend",function(t){if(this._loaded){var r={lat:this.getCenter().lat,lng:this.getCenter().lng,zoom:this.getZoom()};e.mapView=JSON.stringify(r)}},this),this.__initRestore=!0);var r=e.mapView;try{return r=JSON.parse(r||""),this.setView(L.latLng(r.lat,r.lng),r.zoom,!0),!0}catch(o){return!1}}};L.Map.include(e)}();
"use strict";function py2_round(e){return Math.floor(Math.abs(e)+.5)*Math.sign(e)}function encode(e,o,n){e=py2_round(e*n),o=py2_round(o*n);var r=e-o;r<<=1,e-o<0&&(r=~r);for(var t="";r>=32;)t+=String.fromCharCode((32|31&r)+63),r>>=5;return t+=String.fromCharCode(r+63)}function flipped(e){for(var o=[],n=0;n<e.length;n++)o.push(e[n].slice().reverse());return o}var polyline={};polyline.decode=function(e,o){for(var n,r,t=0,i=0,l=0,u=[],d=0,p=0,c=null,a=Math.pow(10,o||5);t<e.length;){c=null,d=0,p=0;do c=e.charCodeAt(t++)-63,p|=(31&c)<<d,d+=5;while(c>=32);n=1&p?~(p>>1):p>>1,d=p=0;do c=e.charCodeAt(t++)-63,p|=(31&c)<<d,d+=5;while(c>=32);r=1&p?~(p>>1):p>>1,i+=n,l+=r,u.push([i/a,l/a])}return u},polyline.encode=function(e,o){if(!e.length)return"";for(var n=Math.pow(10,o||5),r=encode(e[0][0],0,n)+encode(e[0][1],0,n),t=1;t<e.length;t++){var i=e[t],l=e[t-1];r+=encode(i[0],l[0],n),r+=encode(i[1],l[1],n)}return r},polyline.fromGeoJSON=function(e,o){if(e&&"Feature"===e.type&&(e=e.geometry),!e||"LineString"!==e.type)throw new Error("Input must be a GeoJSON LineString");return polyline.encode(flipped(e.coordinates),o)},polyline.toGeoJSON=function(e,o){var n=polyline.decode(e,o);return{type:"LineString",coordinates:flipped(n)}},"object"==typeof module&&module.exports&&(module.exports=polyline);
var toGeoJSON=function(){"use strict";function e(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function t(e,t){return e.getElementsByTagName(t)}function r(e,t){return e.getAttribute(t)}function n(e,t){return parseFloat(r(e,t))}function i(e,r){var n=t(e,r);return n.length?n[0]:null}function o(e){return e.normalize&&e.normalize(),e}function a(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function s(e){return e&&o(e),e&&e.textContent||""}function l(e,t){var r,n,o={};for(n=0;n<t.length;n++)r=i(e,t[n]),r&&(o[t[n]]=s(r));return o}function u(e,t){for(var r in t)e[r]=t[r]}function f(e){return a(e.replace(y,"").split(","))}function c(e){for(var t=e.replace(d,"").split(v),r=[],n=0;n<t.length;n++)r.push(f(t[n]));return r}function p(e){var t,r=[n(e,"lon"),n(e,"lat")],o=i(e,"ele"),a=i(e,"gpxtpx:hr")||i(e,"hr"),l=i(e,"time");return o&&(t=parseFloat(s(o)),isNaN(t)||r.push(t)),{coordinates:r,time:l?s(l):null,heartRate:a?parseFloat(s(a)):null}}function h(){return{type:"FeatureCollection",features:[]}}function g(e){return void 0!==e.xml?e.xml:m.serializeToString(e)}var m,y=/\s*/g,d=/^\s*|\s*$/g,v=/\s+/;"undefined"!=typeof XMLSerializer?m=new XMLSerializer:"object"!=typeof exports||"object"!=typeof process||process.browser||(m=new(require("xmldom").XMLSerializer));var k={kml:function(n){function o(e){var t,r;return e=e||"","#"===e.substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]}function l(e){return a(e.split(" "))}function u(e){var r=t(e,"coord","gx"),n=[],i=[];0===r.length&&(r=t(e,"gx:coord"));for(var o=0;o<r.length;o++)n.push(l(s(r[o])));for(var a=t(e,"when"),u=0;u<a.length;u++)i.push(s(a[u]));return{coords:n,times:i}}function p(e){var r,n,o,a,l,h=[],g=[];if(i(e,"MultiGeometry"))return p(i(e,"MultiGeometry"));if(i(e,"MultiTrack"))return p(i(e,"MultiTrack"));if(i(e,"gx:MultiTrack"))return p(i(e,"gx:MultiTrack"));for(o=0;o<S.length;o++)if(n=t(e,S[o]))for(a=0;a<n.length;a++)if(r=n[a],"Point"===S[o])h.push({type:"Point",coordinates:f(s(i(r,"coordinates")))});else if("LineString"===S[o])h.push({type:"LineString",coordinates:c(s(i(r,"coordinates")))});else if("Polygon"===S[o]){var m=t(r,"LinearRing"),y=[];for(l=0;l<m.length;l++)y.push(c(s(i(m[l],"coordinates"))));h.push({type:"Polygon",coordinates:y})}else if("Track"===S[o]||"gx:Track"===S[o]){var d=u(r);h.push({type:"LineString",coordinates:d.coords}),d.times.length&&g.push(d.times)}return{geoms:h,coordTimes:g}}function m(e){var n,a=p(e),l={},u=s(i(e,"name")),f=s(i(e,"address")),c=s(i(e,"styleUrl")),h=s(i(e,"description")),g=i(e,"TimeSpan"),m=i(e,"TimeStamp"),y=i(e,"ExtendedData"),S=i(e,"LineStyle"),x=i(e,"PolyStyle"),T=i(e,"visibility");if(!a.geoms.length)return[];if(u&&(l.name=u),f&&(l.address=f),c){"#"!==c[0]&&(c="#"+c),l.styleUrl=c,d[c]&&(l.styleHash=d[c]),k[c]&&(l.styleMapHash=k[c],l.styleHash=d[k[c].normal]);var N=v[l.styleHash];N&&(S||(S=i(N,"LineStyle")),x||(x=i(N,"PolyStyle")))}if(h&&(l.description=h),g){var b=s(i(g,"begin")),L=s(i(g,"end"));l.timespan={begin:b,end:L}}if(m&&(l.timestamp=s(i(m,"when"))),S){var F=o(s(i(S,"color"))),M=F[0],w=F[1],P=parseFloat(s(i(S,"width")));M&&(l.stroke=M),isNaN(w)||(l["stroke-opacity"]=w),isNaN(P)||(l["stroke-width"]=P)}if(x){var R=o(s(i(x,"color"))),z=R[0],G=R[1],A=s(i(x,"fill")),C=s(i(x,"outline"));z&&(l.fill=z),isNaN(G)||(l["fill-opacity"]=G),A&&(l["fill-opacity"]="1"===A?l["fill-opacity"]||1:0),C&&(l["stroke-opacity"]="1"===C?l["stroke-opacity"]||1:0)}if(y){var H=t(y,"Data"),D=t(y,"SimpleData");for(n=0;n<H.length;n++)l[H[n].getAttribute("name")]=s(i(H[n],"value"));for(n=0;n<D.length;n++)l[D[n].getAttribute("name")]=s(D[n])}T&&(l.visibility=s(T)),a.coordTimes.length&&(l.coordTimes=1===a.coordTimes.length?a.coordTimes[0]:a.coordTimes);var U={type:"Feature",geometry:1===a.geoms.length?a.geoms[0]:{type:"GeometryCollection",geometries:a.geoms},properties:l};return r(e,"id")&&(U.id=r(e,"id")),[U]}for(var y=h(),d={},v={},k={},S=["Polygon","LineString","Point","Track","gx:Track"],x=t(n,"Placemark"),T=t(n,"Style"),N=t(n,"StyleMap"),b=0;b<T.length;b++){var L=e(g(T[b])).toString(16);d["#"+r(T[b],"id")]=L,v[L]=T[b]}for(var F=0;F<N.length;F++){d["#"+r(N[F],"id")]=e(g(N[F])).toString(16);for(var M=t(N[F],"Pair"),w={},P=0;P<M.length;P++)w[s(i(M[P],"key"))]=s(i(M[P],"styleUrl"));k["#"+r(N[F],"id")]=w}for(var R=0;R<x.length;R++)y.features=y.features.concat(m(x[R]));return y},gpx:function(e){function n(e,r){var n=t(e,r),i=[],o=[],a=[],s=n.length;if(s<2)return{};for(var l=0;l<s;l++){var u=p(n[l]);i.push(u.coordinates),u.time&&o.push(u.time),u.heartRate&&a.push(u.heartRate)}return{line:i,times:o,heartRates:a}}function o(e){for(var r,o=t(e,"trkseg"),a=[],s=[],l=[],f=0;f<o.length;f++)r=n(o[f],"trkpt"),r&&(r.line&&a.push(r.line),r.times&&r.times.length&&s.push(r.times),r.heartRates&&r.heartRates.length&&l.push(r.heartRates));if(0!==a.length){var p=g(e);return u(p,c(i(e,"extensions"))),s.length&&(p.coordTimes=1===a.length?s[0]:s),l.length&&(p.heartRates=1===a.length?l[0]:l),{type:"Feature",properties:p,geometry:{type:1===a.length?"LineString":"MultiLineString",coordinates:1===a.length?a[0]:a}}}}function a(e){var t=n(e,"rtept");if(t.line){var r=g(e);u(r,c(i(e,"extensions")));var o={type:"Feature",properties:r,geometry:{type:"LineString",coordinates:t.line}};return o}}function f(e){var t=g(e);return u(t,l(e,["sym"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:p(e).coordinates}}}function c(e){var t={};if(e){var r=i(e,"line");if(r){var n=s(i(r,"color")),o=parseFloat(s(i(r,"opacity"))),a=parseFloat(s(i(r,"width")));n&&(t.stroke=n),isNaN(o)||(t["stroke-opacity"]=o),isNaN(a)||(t["stroke-width"]=96*a/25.4)}}return t}function g(e){var n=l(e,["name","cmt","desc","type","time","keywords"]),i=t(e,"link");i.length&&(n.links=[]);for(var o,a=0;a<i.length;a++)o={href:r(i[a],"href")},u(o,l(i[a],["text","type"])),n.links.push(o);return n}var m,y,d=t(e,"trk"),v=t(e,"rte"),k=t(e,"wpt"),S=h();for(m=0;m<d.length;m++)y=o(d[m]),y&&S.features.push(y);for(m=0;m<v.length;m++)y=a(v[m]),y&&S.features.push(y);for(m=0;m<k.length;m++)S.features.push(f(k[m]));return S}};return k}();"undefined"!=typeof module&&(module.exports=toGeoJSON);
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.turf={})}(this,function(t){"use strict";function e(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&N(r),i&&C(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function n(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i=n.bbox;if(!t)throw new Error("type is required");if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");i&&N(i);var s;switch(t){case"Point":s=r(e).geometry;break;case"LineString":s=a(e).geometry;break;case"Polygon":s=o(e).geometry;break;case"MultiPoint":s=h(e).geometry;break;case"MultiLineString":s=l(e).geometry;break;case"MultiPolygon":s=p(e).geometry;break;default:throw new Error(t+" is invalid")}return i&&(s.bbox=i),s}function r(t,n,r){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!b(t[0])||!b(t[1]))throw new Error("coordinates must contain numbers");return e({type:"Point",coordinates:t},n,r)}function i(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return r(t,e)}),n)}function o(t,n,r){if(!t)throw new Error("coordinates is required");for(var i=0;i<t.length;i++){var o=t[i];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<o[o.length-1].length;s++){if(0===i&&0===s&&!b(o[0][0])||!b(o[0][1]))throw new Error("coordinates must contain numbers");if(o[o.length-1][s]!==o[0][s])throw new Error("First and last Position are not equivalent.")}}return e({type:"Polygon",coordinates:t},n,r)}function s(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return o(t,e)}),n)}function a(t,n,r){if(!t)throw new Error("coordinates is required");if(t.length<2)throw new Error("coordinates must be an array of two or more positions");if(!b(t[0][1])||!b(t[0][1]))throw new Error("coordinates must contain numbers");return e({type:"LineString",coordinates:t},n,r)}function u(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");return c(t.map(function(t){return a(t,e)}),n)}function c(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&N(n),r&&C(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function l(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiLineString",coordinates:t},n,r)}function h(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPoint",coordinates:t},n,r)}function p(t,n,r){if(!t)throw new Error("coordinates is required");return e({type:"MultiPolygon",coordinates:t},n,r)}function f(t,n,r){if(!t)throw new Error("geometries is required");if(!Array.isArray(t))throw new Error("geometries must be an Array");return e({type:"GeometryCollection",geometries:t},n,r)}function g(t,e){if(void 0===t||null===t||isNaN(t))throw new Error("num is required");if(e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n}function d(t,e){if(void 0===t||null===t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=zc[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function y(t,e){if(void 0===t||null===t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=zc[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function v(t,e){return m(y(t,e))}function _(t){if(null===t||void 0===t)throw new Error("bearing is required");var e=t%360;return e<0&&(e+=360),e}function m(t){if(null===t||void 0===t)throw new Error("radians is required");var e=t%(2*Math.PI);return 180*e/Math.PI}function x(t){if(null===t||void 0===t)throw new Error("degrees is required");var e=t%360;return e*Math.PI/180}function E(t,e,n){if(null===t||void 0===t)throw new Error("length is required");if(!(t>=0))throw new Error("length must be a positive number");return d(y(t,e),n||"kilometers")}function w(t,e,n){if(null===t||void 0===t)throw new Error("area is required");if(!(t>=0))throw new Error("area must be a positive number");var r=Xc[e||"meters"];if(!r)throw new Error("invalid original units");var i=Xc[n||"kilometers"];if(!i)throw new Error("invalid final units");return t/r*i}function b(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function I(t){return!!t&&t.constructor===Object}function N(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!b(t))throw new Error("bbox must only contain numbers")})}function C(t){if(!t)throw new Error("id is required");if(["string","number"].indexOf(typeof t)===-1)throw new Error("id must be a number or a string")}function S(){throw new Error("method has been renamed to `radiansToDegrees`")}function M(){throw new Error("method has been renamed to `degreesToRadians`")}function L(){throw new Error("method has been renamed to `lengthToDegrees`")}function P(){throw new Error("method has been renamed to `lengthToRadians`")}function O(){throw new Error("method has been renamed to `radiansToLength`")}function R(){throw new Error("method has been renamed to `bearingToAzimuth`")}function T(){throw new Error("method has been renamed to `convertLength`")}function A(t,e,n){if(null!==t)for(var r,i,o,s,a,u,c,l,h=0,p=0,f=t.type,g="FeatureCollection"===f,d="Feature"===f,y=g?t.features.length:1,v=0;v<y;v++){c=g?t.features[v].geometry:d?t.geometry:t,l=!!c&&"GeometryCollection"===c.type,a=l?c.geometries.length:1;for(var _=0;_<a;_++){var m=0,x=0;if(s=l?c.geometries[_]:c,null!==s){u=s.coordinates;var E=s.type;switch(h=!n||"Polygon"!==E&&"MultiPolygon"!==E?0:1,E){case null:break;case"Point":e(u,p,v,m,x),p++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<u.length;r++)e(u[r],p,v,m,x),p++,"MultiPoint"===E&&m++;"LineString"===E&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<u.length;r++){for(i=0;i<u[r].length-h;i++)e(u[r][i],p,v,m,x),p++;"MultiLineString"===E&&m++,"Polygon"===E&&x++}"Polygon"===E&&m++;break;case"MultiPolygon":for(r=0;r<u.length;r++){for("MultiPolygon"===E&&(x=0),i=0;i<u[r].length;i++){for(o=0;o<u[r][i].length-h;o++)e(u[r][i][o],p,v,m,x),p++;x++}m++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)A(s.geometries[r],e,n);break;default:throw new Error("Unknown Geometry Type")}}}}}function D(t,e,n,r){var i=n;return A(t,function(t,r,o,s,a){i=0===r&&void 0===n?t:e(i,t,r,o,s,a)},r),i}function F(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length;n++)e(t.features[n].properties,n);break;case"Feature":e(t.properties,0)}}function q(t,e,n){var r=n;return F(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function G(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)e(t.features[n],n)}function B(t,e,n){var r=n;return G(t,function(t,i){r=0===i&&void 0===n?t:e(r,t,i)}),r}function k(t){var e=[];return A(t,function(t){e.push(t)}),e}function z(t,e){var n,r,i,o,s,a,u,c,l,h,p=0,f="FeatureCollection"===t.type,g="Feature"===t.type,d=f?t.features.length:1;for(n=0;n<d;n++){for(a=f?t.features[n].geometry:g?t.geometry:t,c=f?t.features[n].properties:g?t.properties:{},l=f?t.features[n].bbox:g?t.bbox:void 0,h=f?t.features[n].id:g?t.id:void 0,u=!!a&&"GeometryCollection"===a.type,s=u?a.geometries.length:1,i=0;i<s;i++)if(o=u?a.geometries[i]:a,null!==o)switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":e(o,p,c,l,h);break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)e(o.geometries[r],p,c,l,h);break;default:throw new Error("Unknown Geometry Type")}else e(null,p,c,l,h);p++}}function j(t,e,n){var r=n;return z(t,function(t,i,o,s,a){r=0===i&&void 0===n?t:e(r,t,i,o,s,a)}),r}function X(t,n){z(t,function(t,r,i,o,s){var a=null===t?null:t.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return void n(e(t,i,{bbox:o,id:s}),r,0)}var u;switch(a){case"MultiPoint":u="Point";break;case"MultiLineString":u="LineString";break;case"MultiPolygon":u="Polygon"}t.coordinates.forEach(function(t,o){var s={type:u,coordinates:t};n(e(s,i),r,o)})})}function U(t,e,n){var r=n;return X(t,function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)}),r}function Y(t,e){X(t,function(t,n,r){var i=0;if(t.geometry){var o=t.geometry.type;"Point"!==o&&"MultiPoint"!==o&&D(t,function(o,s,u,c,l,h){var p=a([o,s],t.properties);return e(p,n,r,h,i),i++,s})}})}function V(t,e,n){var r=n,i=!1;return Y(t,function(t,o,s,a,u){r=i===!1&&void 0===n?t:e(r,t,o,s,a,u),i=!0}),r}function H(t,e){if(!t)throw new Error("geojson is required");X(t,function(t,n,r){if(null!==t.geometry){var i=t.geometry.type,o=t.geometry.coordinates;switch(i){case"LineString":e(t,n,r,0,0);break;case"Polygon":for(var s=0;s<o.length;s++)e(a(o[s],t.properties),n,r,s)}}})}function W(t,e,n){var r=n;return H(t,function(t,i,o,s){r=0===i&&void 0===n?t:e(r,t,i,o,s)}),r}function J(t){var e=[1/0,1/0,-(1/0),-(1/0)];return A(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Z(t){if(!t)throw new Error("obj is required");var e=K(t);if(e.length>1&&b(e[0])&&b(e[1]))return e;throw new Error("Coordinate is not a valid Point")}function K(t){if(!t)throw new Error("obj is required");var e;if(t.length?e=t:t.coordinates?e=t.coordinates:t.geometry&&t.geometry.coordinates&&(e=t.geometry.coordinates),e)return Q(e),e;throw new Error("No valid coordinates")}function Q(t){if(t.length>1&&b(t[0])&&b(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return Q(t[0]);throw new Error("coordinates must only contain numbers")}function $(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)}function tt(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)}function et(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0;r<t.features.length;r++){var i=t.features[r];if(!i||"Feature"!==i.type||!i.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!i.geometry||i.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+i.geometry.type)}}function nt(t){if(!t)throw new Error("geojson is required");if(void 0!==t.geometry)return t.geometry;if(t.coordinates||t.geometries)return t;throw new Error("geojson must be a valid Feature or Geometry Object")}function rt(){throw new Error("invariant.getGeomType has been deprecated in v5.0 in favor of invariant.getType")}function it(t,e){if(!t)throw new Error((e||"geojson")+" is required");if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error((e||"geojson")+" is invalid")}function ot(t,e,n){n=n?n:{};for(var r=Object.keys(Hc),i=0;i<r.length;i++){var o=r[i],s=n[o];s="undefined"!=typeof s&&null!==s?s:Hc[o],Wc[o]=s}Wc.verbose&&console.log("MarchingSquaresJS-isoContours: computing isocontour for "+e);var a=pt(at(t,e));return"function"==typeof Wc.successCallback&&Wc.successCallback(a),a}function st(t,e,n){return(t-e)/(n-e)}function at(t,e){for(var n=t.length-1,r=t[0].length-1,i={rows:n,cols:r,cells:[]},o=0;o<n;++o){i.cells[o]=[];for(var s=0;s<r;++s){var a=0,u=t[o+1][s],c=t[o+1][s+1],l=t[o][s+1],h=t[o][s];if(!(isNaN(u)||isNaN(c)||isNaN(l)||isNaN(h))){a|=u>=e?8:0,a|=c>=e?4:0,a|=l>=e?2:0,a|=h>=e?1:0;var p=!1;if(5===a||10===a){var f=(u+c+l+h)/4;5===a&&f<e?(a=10,p=!0):10===a&&f<e&&(a=5,p=!0)}if(0!==a&&15!==a){var g,d,y,v;g=d=y=v=.5,1===a?(y=1-st(e,u,h),d=1-st(e,l,h)):2===a?(d=st(e,h,l),v=1-st(e,c,l)):3===a?(y=1-st(e,u,h),v=1-st(e,c,l)):4===a?(g=st(e,u,c),v=st(e,l,c)):5===a?(g=st(e,u,c),v=st(e,l,c),d=1-st(e,l,h),y=1-st(e,u,h)):6===a?(d=st(e,h,l),g=st(e,u,c)):7===a?(y=1-st(e,u,h),g=st(e,u,c)):8===a?(y=st(e,h,u),g=1-st(e,c,u)):9===a?(d=1-st(e,l,h),g=1-st(e,c,u)):10===a?(g=1-st(e,c,u),v=1-st(e,c,l),d=st(e,h,l),y=st(e,h,u)):11===a?(g=1-st(e,c,u),v=1-st(e,c,l)):12===a?(y=st(e,h,u),v=st(e,l,c)):13===a?(d=1-st(e,l,h),v=st(e,l,c)):14===a?(y=st(e,h,u),d=st(e,h,l)):console.log("MarchingSquaresJS-isoContours: Illegal cval detected: "+a),i.cells[o][s]={cval:a,flipped:p,top:g,right:v,bottom:d,left:y}}}}}return i}function ut(t){return 5===t.cval||10===t.cval}function ct(t){return 0===t.cval||15===t.cval}function lt(t){ct(t)||5===t.cval||10===t.cval||(t.cval=15)}function ht(t,e){return"top"===e?[t.top,1]:"bottom"===e?[t.bottom,0]:"right"===e?[1,t.right]:"left"===e?[0,t.left]:void 0}function pt(t){var e=[],n=0,r=(t.rows,t.cols,1e-7);return t.cells.forEach(function(i,o){i.forEach(function(i,s){if("undefined"!=typeof i&&!ut(i)&&!ct(i)){var a=ft(t.cells,o,s),u=!1;if("mergeable"===a.info)for(var c=a.path[a.path.length-1][0],l=a.path[a.path.length-1][1],h=n-1;h>=0;h--)if(Math.abs(e[h][0][0]-c)<=r&&Math.abs(e[h][0][1]-l)<=r){for(var p=a.path.length-2;p>=0;--p)e[h].unshift(a.path[p]);u=!0;break}u||(e[n++]=a.path)}})}),e}function ft(t,e,n){var r,i,o,s=t.length,a=[],u=[0,0,1,1,0,0,0,0,-1,0,1,1,-1,0,-1,0],c=[0,-1,0,0,1,1,1,1,0,-1,0,0,0,-1,0,0],l=["none","left","bottom","left","right","none","bottom","left","top","top","none","top","right","right","bottom","none"],h=["none","bottom","right","right","top","top","top","top","left","bottom","right","right","left","bottom","left","none"],p=(t[e][n],t[e][n]),f=p.cval,o=l[f],g=ht(p,o);a.push([n+g[0],e+g[1]]),o=h[f],g=ht(p,o),a.push([n+g[0],e+g[1]]),lt(p);for(var d=n+u[f],y=e+c[f],v=f;d>=0&&y>=0&&y<s&&(d!=n||y!=e)&&(p=t[y][d],"undefined"!=typeof p);){if(f=p.cval,0===f||15===f)return{path:a,info:"mergeable"};o=h[f],r=u[f],i=c[f],5!==f&&10!==f||(5===f?p.flipped?c[v]===-1?(o="left",r=-1,i=0):(o="right",r=1,i=0):u[v]===-1&&(o="bottom",r=0,i=-1):10===f&&(p.flipped?u[v]===-1?(o="top",r=0,i=1):(o="bottom",r=0,i=-1):1===c[v]&&(o="left",r=-1,i=0))),g=ht(p,o),a.push([d+g[0],y+g[1]]),lt(p),d+=r,y+=i,v=f}return{path:a,info:"closed"}}function gt(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;et(t,"Point","input must contain Points");for(var o=dt(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),i===!0&&(h.properties.matrixPosition=[a,l])}s.push(c)}return s}function dt(t,e){var n={};G(t,function(t){var e=K(t)[1];n[e]||(n[e]=[]),n[e].push(t)});var r=Object.keys(n).map(function(t){var e=n[t],r=e.sort(function(t,e){return K(t)[0]-K(e)[0]});return r}),i=r.sort(function(t,n){return e?K(t[0])[1]-K(n[0])[1]:K(n[0])[1]-K(t[0])[1]});return i}function yt(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(et(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks must be an Array");if(!I(i))throw new Error("commonProperties must be an Object");if(!Array.isArray(o))throw new Error("breaksProperties must be an Array");var s=gt(t,{zProperty:r,flip:!0}),a=vt(s,e,r,i,o),u=_t(a,s,t);return c(u)}function vt(t,e,n,r,i){for(var o=[],s=1;s<e.length;s++){var a=+e[s],u=Object.assign({},r,i[s]);u[n]=a;var c=l(ot(t,a),u);o.push(c)}return o}function _t(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,p=function(t){t[0]=t[0]*l+s,t[1]=t[1]*h+a};return t.forEach(function(t){A(t,p)}),t}function mt(t,e,n,r,i){for(n=n||0,r=r||t.length-1,i=i||Et;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1),l=Math.max(n,Math.floor(e-s*u/o+c)),h=Math.min(r,Math.floor(e+(o-s)*u/o+c));mt(t,e,l,h,i)}var p=t[e],f=n,g=r;for(xt(t,n,e),i(t[r],p)>0&&xt(t,n,r);f<g;){for(xt(t,f,g),f++,g--;i(t[f],p)<0;)f++;for(;i(t[g],p)>0;)g--}0===i(t[n],p)?xt(t,n,g):(g++,xt(t,g,r)),g<=e&&(n=g+1),e<=g&&(r=g-1)}}function xt(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function Et(t,e){return t<e?-1:t>e?1:0}function wt(t,e){return this instanceof wt?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new wt(t,e)}function bt(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function It(t,e){Nt(t,0,t.children.length,e,t)}function Nt(t,e,n,r,i){i||(i=Dt(null)),i.minX=1/0,i.minY=1/0,i.maxX=-(1/0),i.maxY=-(1/0);for(var o,s=e;s<n;s++)o=t.children[s],Ct(i,t.leaf?r(o):o);return i}function Ct(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function St(t,e){return t.minX-e.minX}function Mt(t,e){return t.minY-e.minY}function Lt(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function Pt(t){return t.maxX-t.minX+(t.maxY-t.minY)}function Ot(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function Rt(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function Tt(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function At(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function Dt(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function Ft(t,e,n,r,i){for(var o,s=[e,n];s.length;)n=s.pop(),e=s.pop(),n-e<=r||(o=e+Math.ceil((n-e)/r/2)*r,Jc(t,o,e,n,i),s.push(e,o,o,n))}function qt(t,e){return e={exports:{}},t(e,e.exports),e.exports}function Gt(t,e,n){var r=t*e,i=Qc*t,o=i-t,s=i-o,a=t-s,u=Qc*e,c=u-e,l=u-c,h=e-l,p=r-s*l,f=p-a*l,g=f-s*h,d=a*h-g;return n?(n[0]=d,n[1]=r,n):[d,r]}function Bt(t,e){var n=t+e,r=n-t,i=n-r,o=e-r,s=t-i,a=s+o;return a?[a,n]:[n]}function kt(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return Bt(t[0],e[0]);var i,o,s=n+r,a=new Array(s),u=0,c=0,l=0,h=Math.abs,p=t[c],f=h(p),g=e[l],d=h(g);f<d?(o=p,c+=1,c<n&&(p=t[c],f=h(p))):(o=g,l+=1,l<r&&(g=e[l],d=h(g))),c<n&&f<d||l>=r?(i=p,c+=1,c<n&&(p=t[c],f=h(p))):(i=g,l+=1,l<r&&(g=e[l],d=h(g)));for(var y,v,_,m,x,E=i+o,w=E-i,b=o-w,I=b,N=E;c<n&&l<r;)f<d?(i=p,c+=1,c<n&&(p=t[c],f=h(p))):(i=g,l+=1,l<r&&(g=e[l],d=h(g))),o=I,E=i+o,w=E-i,b=o-w,b&&(a[u++]=b),y=N+E,v=y-N,_=y-v,m=E-v,x=N-_,I=x+m,N=y;for(;c<n;)i=p,o=I,E=i+o,w=E-i,b=o-w,b&&(a[u++]=b),y=N+E,v=y-N,_=y-v,m=E-v,x=N-_,I=x+m,N=y,c+=1,c<n&&(p=t[c]);for(;l<r;)i=g,o=I,E=i+o,w=E-i,b=o-w,b&&(a[u++]=b),y=N+E,v=y-N,_=y-v,m=E-v,x=N-_,I=x+m,N=y,l+=1,l<r&&(g=e[l]);return I&&(a[u++]=I),N&&(a[u++]=N),u||(a[u++]=0),a.length=u,a}function zt(t,e,n){var r=t+e,i=r-t,o=r-i,s=e-i,a=t-o;return n?(n[0]=a+s,n[1]=r,n):[a+s,r]}function jt(t,e){var n=t.length;if(1===n){var r=Kc(t[0],e);return r[0]?r:[r[1]]}var i=new Array(2*n),o=[.1,.1],s=[.1,.1],a=0;Kc(t[0],e,o),o[0]&&(i[a++]=o[0]);for(var u=1;u<n;++u){Kc(t[u],e,s);var c=o[1];tl(c,s[0],o),o[0]&&(i[a++]=o[0]);var l=s[1],h=o[1],p=l+h,f=p-l,g=h-f;o[1]=p,g&&(i[a++]=g)}return o[1]&&(i[a++]=o[1]),0===a&&(i[a++]=0),i.length=a,i}function Xt(t,e){var n=t+e,r=n-t,i=n-r,o=e-r,s=t-i,a=s+o;return a?[a,n]:[n]}function Ut(t,e){var n=0|t.length,r=0|e.length;if(1===n&&1===r)return Xt(t[0],-e[0]);var i,o,s=n+r,a=new Array(s),u=0,c=0,l=0,h=Math.abs,p=t[c],f=h(p),g=-e[l],d=h(g);f<d?(o=p,c+=1,c<n&&(p=t[c],f=h(p))):(o=g,l+=1,l<r&&(g=-e[l],d=h(g))),c<n&&f<d||l>=r?(i=p,c+=1,c<n&&(p=t[c],f=h(p))):(i=g,l+=1,l<r&&(g=-e[l],d=h(g)));for(var y,v,_,m,x,E=i+o,w=E-i,b=o-w,I=b,N=E;c<n&&l<r;)f<d?(i=p,c+=1,c<n&&(p=t[c],f=h(p))):(i=g,l+=1,l<r&&(g=-e[l],d=h(g))),o=I,E=i+o,w=E-i,b=o-w,b&&(a[u++]=b),y=N+E,v=y-N,_=y-v,m=E-v,x=N-_,I=x+m,N=y;for(;c<n;)i=p,o=I,E=i+o,w=E-i,b=o-w,b&&(a[u++]=b),y=N+E,v=y-N,_=y-v,m=E-v,x=N-_,I=x+m,N=y,c+=1,c<n&&(p=t[c]);for(;l<r;)i=g,o=I,E=i+o,w=E-i,b=o-w,b&&(a[u++]=b),y=N+E,v=y-N,_=y-v,m=E-v,x=N-_,I=x+m,N=y,l+=1,l<r&&(g=-e[l]);return I&&(a[u++]=I),N&&(a[u++]=N),u||(a[u++]=0),a.length=u,a}function Yt(t){var e=t.length;if(e<3){for(var n=new Array(e),r=0;r<e;++r)n[r]=r;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:n}for(var i=new Array(e),r=0;r<e;++r)i[r]=r;i.sort(function(e,n){var r=t[e][0]-t[n][0];return r?r:t[e][1]-t[n][1]});for(var o=[i[0],i[1]],s=[i[0],i[1]],r=2;r<e;++r){for(var a=i[r],u=t[a],c=o.length;c>1&&ol(t[o[c-2]],t[o[c-1]],u)<=0;)c-=1,o.pop();for(o.push(a),c=s.length;c>1&&ol(t[s[c-2]],t[s[c-1]],u)>=0;)c-=1,s.pop();s.push(a)}for(var n=new Array(s.length+o.length-2),l=0,r=0,h=o.length;r<h;++r)n[l++]=o[r];for(var p=s.length-2;p>0;--p)n[l++]=s[p];return n}function Vt(t,e){if(!(this instanceof Vt))return new Vt(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||Ht,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function Ht(t,e){return t<e?-1:t>e?1:0}function Wt(t,e,n){e=Math.max(0,void 0===e?2:e),n=n||0;for(var r,i=ne(t),o=Zc(16,["[0]","[1]","[0]","[1]"]).load(t),s=[],a=0;a<i.length;a++){var u=i[a];o.remove(u),r=re(u,r),s.push(r)}var c=Zc(16);for(a=0;a<s.length;a++)c.insert(ee(s[a]));for(var l=e*e,h=n*n;s.length;){var p=s.shift(),f=p.p,g=p.next.p,d=ie(f,g);if(!(d<h)){var y=d/l;u=Jt(o,p.prev.p,f,g,p.next.next.p,y,c),u&&Math.min(ie(u,f),ie(u,g))<=y&&(s.push(p),s.push(re(u,p)),o.remove(u),c.remove(p),c.insert(ee(p)),c.insert(ee(p.next)))}}p=r;var v=[];do v.push(p.p),p=p.next;while(p!==r);return v.push(p.p),v}function Jt(t,e,n,r,i,o,s){for(var a=new sl(null,Zt),u=t.data;u;){for(var c=0;c<u.children.length;c++){var l=u.children[c],h=u.leaf?oe(l,n,r):Kt(n,r,l);h>o||a.push({node:l,dist:h})}for(;a.length&&!a.peek().node.children;){var p=a.pop(),f=p.node,g=oe(f,e,n),d=oe(f,r,i);if(p.dist<g&&p.dist<d&&$t(n,f,s)&&$t(r,f,s))return f}u=a.pop(),u&&(u=u.node)}return null}function Zt(t,e){return t.dist-e.dist}function Kt(t,e,n){if(Qt(t,n)||Qt(e,n))return 0;var r=se(t[0],t[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(0===r)return 0;var i=se(t[0],t[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(0===i)return 0;var o=se(t[0],t[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(0===o)return 0;var s=se(t[0],t[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return 0===s?0:Math.min(r,i,o,s)}function Qt(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY}function $t(t,e,n){for(var r=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),o=Math.max(t[0],e[0]),s=Math.max(t[1],e[1]),a=n.search({minX:r,minY:i,maxX:o,maxY:s}),u=0;u<a.length;u++)if(te(a[u].p,a[u].next.p,t,e))return!1;return!0}function te(t,e,n,r){return t!==r&&e!==n&&cl(t,e,n)>0!=cl(t,e,r)>0&&cl(n,r,t)>0!=cl(n,r,e)>0}function ee(t){var e=t.p,n=t.next.p;return t.minX=Math.min(e[0],n[0]),t.minY=Math.min(e[1],n[1]),t.maxX=Math.max(e[0],n[0]),t.maxY=Math.max(e[1],n[1]),t}function ne(t){for(var e=t[0],n=t[0],r=t[0],i=t[0],o=0;o<t.length;o++){var s=t[o];s[0]<e[0]&&(e=s),s[0]>r[0]&&(r=s),s[1]<n[1]&&(n=s),s[1]>i[1]&&(i=s)}var a=[e,n,r,i],u=a.slice();for(o=0;o<t.length;o++)ul(t[o],a)||u.push(t[o]);var c=il(u),l=[];for(o=0;o<c.length;o++)l.push(u[c[o]]);return l}function re(t,e){var n={p:t,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function ie(t,e){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function oe(t,e,n){var r=e[0],i=e[1],o=n[0]-r,s=n[1]-i;if(0!==o||0!==s){var a=((t[0]-r)*o+(t[1]-i)*s)/(o*o+s*s);a>1?(r=n[0],i=n[1]):a>0&&(r+=o*a,i+=s*a)}return o=t[0]-r,s=t[1]-i,o*o+s*s}function se(t,e,n,r,i,o,s,a){var u,c,l,h,p=n-t,f=r-e,g=s-i,d=a-o,y=t-i,v=e-o,_=p*p+f*f,m=p*g+f*d,x=g*g+d*d,E=p*y+f*v,w=g*y+d*v,b=_*x-m*m,I=b,N=b;0===b?(c=0,I=1,h=w,N=x):(c=m*w-x*E,h=_*w-m*E,c<0?(c=0,h=w,N=x):c>I&&(c=I,h=w+m,N=x)),h<0?(h=0,-E<0?c=0:-E>_?c=I:(c=-E,I=_)):h>N&&(h=N,-E+m<0?c=0:-E+m>_?c=I:(c=-E+m,I=_)),u=0===c?0:c/I,l=0===h?0:h/N;var C=(1-u)*t+u*n,S=(1-u)*e+u*r,M=(1-l)*i+l*s,L=(1-l)*o+l*a,P=M-C,O=L-S;return P*P+O*O}function ae(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.concavity||1/0,r=[];if(A(t,function(t){r.push([t[0],t[1]])}),!r.length)return null;var i=ll(r,n);return i.length>3?o([i]):null}function ue(t,e,n){if(n=n||{},"object"!=typeof n)throw new Error("options is invalid");var r=n.ignoreBoundary;if(!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var i=Z(t),o=K(e),s=e.geometry?e.geometry.type:e.type,a=e.bbox;if(a&&le(i,a)===!1)return!1;"Polygon"===s&&(o=[o]);for(var u=0,c=!1;u<o.length&&!c;u++)if(ce(i,o[u][0],r)){for(var l=!1,h=1;h<o[u].length&&!l;)ce(i,o[u][h],!r)&&(l=!0),h++;l||(c=!0)}return c}function ce(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,o=e.length-1;i<e.length;o=i++){var s=e[i][0],a=e[i][1],u=e[o][0],c=e[o][1],l=t[1]*(s-u)+a*(u-t[0])+c*(t[0]-s)===0&&(s-t[0])*(u-t[0])<=0&&(a-t[1])*(c-t[1])<=0;if(l)return!n;var h=a>t[1]!=c>t[1]&&t[0]<(u-s)*(t[1]-a)/(c-a)+s;h&&(r=!r)}return r}function le(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&e[2]>=t[0]&&e[3]>=t[1]}function he(t,e){var n=[];return z(e,function(e){G(t,function(t){ue(t,e)&&n.push(t)})}),c(n)}function pe(t,e){if("FeatureCollection"!==t.type)throw new Error("points must be a FeatureCollection");var n=!1;return c(ye(t.features.map(function(t){var r={x:t.geometry.coordinates[0],y:t.geometry.coordinates[1]};return e?r.z=t.properties[e]:3===t.geometry.coordinates.length&&(n=!0,r.z=t.geometry.coordinates[2]),r})).map(function(t){var e=[t.a.x,t.a.y],r=[t.b.x,t.b.y],i=[t.c.x,t.c.y],s={};return n?(e.push(t.a.z),r.push(t.b.z),i.push(t.c.z)):s={a:t.a.z,b:t.b.z,c:t.c.z},o([[e,r,i,e]],s)}))}function fe(t,e,n){this.a=t,this.b=e,this.c=n;var r,i,o=e.x-t.x,s=e.y-t.y,a=n.x-t.x,u=n.y-t.y,c=o*(t.x+e.x)+s*(t.y+e.y),l=a*(t.x+n.x)+u*(t.y+n.y),h=2*(o*(n.y-e.y)-s*(n.x-e.x));this.x=(u*c-s*l)/h,this.y=(o*l-a*c)/h,r=this.x-t.x,i=this.y-t.y,this.r=r*r+i*i}function ge(t,e){return e.x-t.x}function de(t){var e,n,r,i,o,s=t.length;t:for(;s;)for(n=t[--s],e=t[--s],r=s;r;)if(o=t[--r],i=t[--r],e===i&&n===o||e===o&&n===i){t.splice(s,2),t.splice(r,2),s-=2;continue t}}function ye(t){if(t.length<3)return[];t.sort(ge);for(var e,n,r,i,o,s,a=t.length-1,u=t[a].x,c=t[0].x,l=t[a].y,h=l,p=1e-12;a--;)t[a].y<l&&(l=t[a].y),t[a].y>h&&(h=t[a].y);var f,g=c-u,d=h-l,y=g>d?g:d,v=.5*(c+u),_=.5*(h+l),m=[new fe({x:v-20*y,y:_-y,__sentinel:!0},{x:v,y:_+20*y,__sentinel:!0},{x:v+20*y,y:_-y,__sentinel:!0})],x=[],E=[];for(a=t.length;a--;){for(E.length=0,f=m.length;f--;)g=t[a].x-m[f].x,g>0&&g*g>m[f].r?(x.push(m[f]),m.splice(f,1)):(d=t[a].y-m[f].y,g*g+d*d>m[f].r||(E.push(m[f].a,m[f].b,m[f].b,m[f].c,m[f].c,m[f].a),m.splice(f,1)));for(de(E),f=E.length;f;)n=E[--f],e=E[--f],r=t[a],i=n.x-e.x,o=n.y-e.y,s=2*(i*(r.y-n.y)-o*(r.x-n.x)),Math.abs(s)>p&&m.push(new fe(e,n,r))}for(Array.prototype.push.apply(x,m),a=x.length;a--;)(x[a].a.__sentinel||x[a].b.__sentinel||x[a].c.__sentinel)&&x.splice(a,1);return x}function ve(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units,i=Z(t),o=Z(e),s=x(o[1]-i[1]),a=x(o[0]-i[0]),u=x(i[1]),c=x(o[1]),l=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(u)*Math.cos(c);return d(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),r)}function _e(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return me(t);case"FeatureCollection":return Ee(t);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return we(t);default:throw new Error("unknown GeoJSON type")}}function me(t){var e={type:"Feature"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"properties":case"geometry":return;default:e[n]=t[n]}}),e.properties=xe(t.properties),e.geometry=we(t.geometry),e}function xe(t){var e={};return t?(Object.keys(t).forEach(function(n){var r=t[n];"object"==typeof r?null===r?e[n]=null:r.length?e[n]=r.map(function(t){return t}):e[n]=xe(r):e[n]=r}),e):e}function Ee(t){var e={type:"FeatureCollection"};return Object.keys(t).forEach(function(n){switch(n){case"type":case"features":return;default:e[n]=t[n]}}),e.features=t.features.map(function(t){return me(t)}),e}function we(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?(e.geometries=t.geometries.map(function(t){return we(t)}),e):(e.coordinates=be(t.coordinates),e)}function be(t){return"object"!=typeof t[0]?t.slice():t.map(function(t){return be(t)})}function Ie(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(u(n[r],r));t<0&&gl(e,i)}function r(t){return u(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function o(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function s(t){return t.map(o)}function a(t){var e,n=t.type;switch(n){case"GeometryCollection":return{type:n,geometries:t.geometries.map(a)};case"Point":e=r(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(r);break;case"LineString":e=i(t.arcs);break;case"MultiLineString":e=t.arcs.map(i);break;case"Polygon":e=s(t.arcs);break;case"MultiPolygon":e=t.arcs.map(s);break;default:return null}return{type:n,coordinates:e}}var u=fl(t.transform),c=t.arcs;return a(e)}function Ne(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return Math.abs(o)}function Ce(t,e){function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":r(t.arcs);break;case"MultiPolygon":t.arcs.forEach(r)}}function r(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),s.push(t)}function i(e){return Ne(Ie(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},s=[],a=[];return e.forEach(n),s.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,a.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:a.map(function(e){var n,r=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&r.push(t)})})}),r=dl(t,r),(n=r.length)>1)for(var s,a,u=1,c=i(r[0]);u<n;++u)(s=i(r[u]))>c&&(a=r[0],r[0]=r[u],r[u]=a,c=s);return r})}}function Se(t,e,n,r){Me(t,e,n),Me(t,e,e+r),Me(t,e+r,n)}function Me(t,e,n){for(var r,i=e+(n-- -e>>1);e<i;++e,--n)r=t[e],t[e]=t[n],t[n]=r}function Le(t){return null==t?{type:null}:("FeatureCollection"===t.type?Pe:"Feature"===t.type?Oe:Re)(t)}function Pe(t){var e={type:"GeometryCollection",geometries:t.features.map(Oe)};return null!=t.bbox&&(e.bbox=t.bbox),e}function Oe(t){var e,n=Re(t.geometry);null!=t.id&&(n.id=t.id),null!=t.bbox&&(n.bbox=t.bbox);for(e in t.properties){n.properties=t.properties;break}return n}function Re(t){if(null==t)return{type:null};var e="GeometryCollection"===t.type?{type:"GeometryCollection",geometries:t.geometries.map(Re)}:"Point"===t.type||"MultiPoint"===t.type?{type:t.type,coordinates:t.coordinates}:{type:t.type,arcs:t.coordinates};return null!=t.bbox&&(e.bbox=t.bbox),
e}function Te(t){var e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),n+31*r}function Ae(t,e){var n,r=t[0],i=t[1],o=e[0],s=e[1];return i<r&&(n=r,r=i,i=n),s<o&&(n=o,o=s,s=n),r===o&&i===s}function De(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");n!==!1&&void 0!==n||(t=_e(t));var r=[],i=W(t,function(t,e){var n=qe(t,e);return n?n:(r.push(t),e)});return i&&r.push(i),r.length?1===r.length?r[0]:l(r.map(function(t){return t.coordinates})):null}function Fe(t){return t[0].toString()+","+t[1].toString()}function qe(t,e){var n,r=t.geometry.coordinates,i=e.geometry.coordinates,o=Fe(r[0]),s=Fe(r[r.length-1]),u=Fe(i[0]),c=Fe(i[i.length-1]);if(o===c)n=i.concat(r.slice(1));else if(u===s)n=r.concat(i.slice(1));else if(o===u)n=r.slice(1).reverse().concat(i);else{if(s!==c)return null;n=r.concat(i.reverse().slice(1))}return a(n)}function Ge(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");n!==!1&&void 0!==n||(t=_e(t));var r=[];X(t,function(t){r.push(t.geometry)});var i=Rl({geoms:f(r).geometry});return yl(i,i.objects.geoms.geometries)}function Be(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if("FeatureCollection"!==it(t))throw new Error("geojson must be a FeatureCollection");if(!t.features.length)throw new Error("geojson is empty");n!==!1&&void 0!==n||(t=_e(t));var r=ke(t);if(!r)throw new Error("geojson must be homogenous");switch(r){case"LineString":return De(t,e);case"Polygon":return Ge(t,e);default:throw new Error(r+" is not supported")}}function ke(t){var e={};X(t,function(t){e[t.geometry.type]=!0});var n=Object.keys(e);return 1===n.length?n[0]:null}function ze(t,n){if(n=n||{},!I(n))throw new Error("options is invalid");if(!t)throw new Error("points is required");var r=n.maxEdge||1/0;if(!b(r))throw new Error("maxEdge is invalid");var i=je(t),o=pe(i);if(o.features=o.features.filter(function(t){var e=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],o=t.geometry.coordinates[0][2],s=ve(e,i,n),a=ve(i,o,n),u=ve(e,o,n);return s<=r&&a<=r&&u<=r}),o.features.length<1)return null;var s=Be(o,n);return 1===s.coordinates.length&&(s.coordinates=s.coordinates[0],s.type="Polygon"),e(s)}function je(t){var e=[],n={};return G(t,function(t){if(t.geometry){var r=t.geometry.coordinates.join("-");n.hasOwnProperty(r)||(e.push(t),n[r]=!0)}}),c(e)}function Xe(t,e,n,r){var i=Zc(6),o=e.features.map(function(t){return{minX:t.geometry.coordinates[0],minY:t.geometry.coordinates[1],maxX:t.geometry.coordinates[0],maxY:t.geometry.coordinates[1],property:t.properties[n]}});return i.load(o),t.features.forEach(function(t){t.properties||(t.properties={});var e=J(t),n=i.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}),o=[];n.forEach(function(e){ue([e.minX,e.minY],t)&&o.push(e.property)}),t.properties[r]=o}),t}function Ue(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.mutate;if(!t)throw new Error("geojson is required");return n!==!1&&void 0!==n||(t=_e(t)),A(t,function(t){var e=t[0],n=t[1];t[0]=n,t[1]=e}),t}function Ye(t,n){var r="object"==typeof n?n.mutate:n;if(!t)throw new Error("geojson is required");var i=it(t),o=[];switch(i){case"LineString":o=Ve(t);break;case"MultiLineString":case"Polygon":K(t).forEach(function(t){o.push(Ve(t))});break;case"MultiPolygon":K(t).forEach(function(t){var e=[];t.forEach(function(t){e.push(Ve(t))}),o.push(e)});break;case"Point":return t;case"MultiPoint":var s={};K(t).forEach(function(t){var e=t.join("-");s.hasOwnProperty(e)||(o.push(t),s[e]=!0)});break;default:throw new Error(i+" geometry not supported")}return t.coordinates?r===!0?(t.coordinates=o,t):{type:i,coordinates:o}:r===!0?(t.geometry.coordinates=o,t):e({type:i,coordinates:o},t.properties,t.bbox,t.id)}function Ve(t){var e=K(t);if(2===e.length&&!He(e[0],e[1]))return e;var n,r,i,o=[],s=e.length-1;o.push(e[0]);for(var a=1;a<s;a++)n=e[a-1],r=e[a],i=e[a+1],We(n,i,r)||o.push(r);return o.push(i),o}function He(t,e){return t[0]===e[0]&&t[1]===e[1]}function We(t,e,n){var r=n[0],i=n[1],o=t[0],s=t[1],a=e[0],u=e[1],c=r-o,l=i-s,h=a-o,p=u-s,f=c*p-l*h;return 0===f&&(Math.abs(h)>=Math.abs(p)?h>0?o<=r&&r<=a:a<=r&&r<=o:p>0?s<=i&&i<=u:u<=i&&i<=s)}function Je(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Ze(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return o=t.x-r,s=t.y-i,o*o+s*s}function Ke(t,e){for(var n,r=t[0],i=[r],o=1,s=t.length;o<s;o++)n=t[o],Je(n,r)>e&&(i.push(n),r=n);return r!==n&&i.push(n),i}function Qe(t,e,n,r,i){for(var o,s=r,a=e+1;a<n;a++){var u=Ze(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>r&&(o-e>1&&Qe(t,e,o,r,i),i.push(t[o]),n-o>1&&Qe(t,o,n,r,i))}function $e(t,e){var n=t.length-1,r=[t[0]];return Qe(t,0,n,e,r),r.push(t[n]),r}function tn(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return t=n?t:Ke(t,r),t=$e(t,r)}function en(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=void 0!==e.tolerance?e.tolerance:1,r=e.highQuality||!1,i=e.mutate||!1;if(!t)throw new Error("geojson is required");if(n&&n<0)throw new Error("invalid tolerance");return i!==!0&&(t=_e(t)),z(t,function(t){nn(t,n,r)}),t}function nn(t,e,n){var r=t.type;if("Point"===r||"MultiPoint"===r)return t;Ye(t,!0);var i=t.coordinates;switch(r){case"LineString":t.coordinates=rn(i,e,n);break;case"MultiLineString":t.coordinates=i.map(function(t){return rn(t,e,n)});break;case"Polygon":t.coordinates=on(i,e,n);break;case"MultiPolygon":t.coordinates=i.map(function(t){return on(t,e,n)})}return t}function rn(t,e,n){return tn(t.map(function(t){return{x:t[0],y:t[1],z:t[2]}}),e,n).map(function(t){return t.z?[t.x,t.y,t.z]:[t.x,t.y]})}function on(t,e,n){return t.map(function(t){var r=t.map(function(t){return{x:t[0],y:t[1]}});if(r.length<4)throw new Error("invalid polygon");for(var i=tn(r,e,n).map(function(t){return[t.x,t.y]});!sn(i);)e-=.01*e,i=tn(r,e,n).map(function(t){return[t.x,t.y]});return i[i.length-1][0]===i[0][0]&&i[i.length-1][1]===i[0][1]||i.push(i[0]),i})}function sn(t){return!(t.length<3)&&!(3===t.length&&t[2][0]===t[0][0]&&t[2][1]===t[0][1])}function an(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.resolution||1e4,r=e.sharpness||.85;if(!t)throw new Error("line is required");if(!b(n))throw new Error("resolution must be an number");if(!b(r))throw new Error("sharpness must be an number");for(var i=[],o=new Tl({points:nt(t).coordinates.map(function(t){return{x:t[0],y:t[1]}}),duration:n,sharpness:r}),s=0;s<o.duration;s+=10){var u=o.pos(s);Math.floor(s/100)%2===0&&i.push([u.x,u.y])}return a(i,t.properties)}function un(t,e,n,r){return t=_e(t),e=_e(e),G(t,function(t){t.properties||(t.properties={}),G(e,function(e){void 0===t.properties[r]&&ue(t,e)&&(t.properties[r]=e.properties[n])})}),t}function cn(t,e){if(!t)throw new Error("featurecollection is required");if(null===e||void 0===e)throw new Error("num is required");if("number"!=typeof e)throw new Error("num must be a number");var n=c(ln(t.features,e));return n}function ln(t,e){for(var n,r,i=t.slice(0),o=t.length,s=o-e;o-- >s;)r=Math.floor((o+1)*Math.random()),n=i[r],i[r]=i[o],i[o]=n;return i.slice(s)}function hn(t){N(t);var e=Number(t[0]),n=Number(t[1]),r=Number(t[2]),i=Number(t[3]);if(6===t.length)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var s=[e,n],a=[e,i],u=[r,i],c=[r,n];return o([[s,c,u,a,s]])}function pn(t){return hn(J(t))}function fn(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=ve(t.slice(0,2),[r,n]),s=ve(t.slice(0,2),[e,i]);if(o>=s){var a=(n+i)/2;return[e,a-(r-e)/2,r,a+(r-e)/2]}var u=(e+r)/2;return[u-(i-n)/2,n,u+(i-n)/2,i]}function gn(t,e,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.units,s=i.properties,a=Z(t),u=x(a[0]),c=x(a[1]),l=x(n),h=y(e,o),p=Math.asin(Math.sin(c)*Math.cos(h)+Math.cos(c)*Math.sin(h)*Math.cos(l)),f=u+Math.atan2(Math.sin(l)*Math.sin(h)*Math.cos(c),Math.cos(h)-Math.sin(c)*Math.sin(p)),g=m(f),d=m(p);return r([g,d],s)}function dn(t,e,n){n=n||{};var r=n.steps||64,i=n.properties;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof r)throw new Error("steps must be a number");r=r||64,i=i||t.properties||{};for(var s=[],a=0;a<r;a++)s.push(gn(t,e,a*-360/r,n).geometry.coordinates);return s.push(s[0]),o([s],i)}function yn(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n["final"];if(r===!0)return vn(t,e);var i=Z(t),o=Z(e),s=x(i[0]),a=x(o[0]),u=x(i[1]),c=x(o[1]),l=Math.sin(a-s)*Math.cos(c),h=Math.cos(u)*Math.sin(c)-Math.sin(u)*Math.cos(c)*Math.cos(a-s);return m(Math.atan2(l,h))}function vn(t,e){var n=yn(e,t);return n=(n+180)%360}function _n(t,e){var n=ve(t,e),r=yn(t,e),i=gn(t,n/2,r);return i}function mn(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var i=J(t),o=(i[0]+i[2])/2,s=(i[1]+i[3])/2;return r([o,s],n)}function xn(t,e){var n=0,i=0,o=0;return A(t,function(t){n+=t[0],i+=t[1],o++},!0),r([n/o,i/o],e)}function En(t,e){switch(it(t)){case"Point":return t;case"Polygon":var n=[];A(t,function(t){n.push(t)});var i,o,s,a,u,c,l,h,p=xn(t,e),f=p.geometry.coordinates,g=0,d=0,y=0,v=n.map(function(t){return[t[0]-f[0],t[1]-f[1]]});for(i=0;i<n.length-1;i++)o=v[i],a=o[0],c=o[1],s=v[i+1],u=s[0],l=s[1],h=a*l-u*c,y+=h,g+=(a+u)*h,d+=(c+l)*h;if(0===y)return p;var _=.5*y,m=1/(6*_);return r([f[0]+m*g,f[1]+m*d],e);default:var x=ae(t);return x?En(x,e):xn(t,e)}}function wn(t){function n(t,e,n){n?r[e].coordinates=r[e].coordinates.concat(t.geometry.coordinates):r[e].coordinates.push(t.geometry.coordinates),r[e].properties.push(t.properties)}var r={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},i=Object.keys(r).reduce(function(t,e){return t[e.replace("Multi","")]=e,t},{});return G(t,function(t){t.geometry&&(r[t.geometry.type]?n(t,t.geometry.type,!0):i[t.geometry.type]&&n(t,i[t.geometry.type],!1))}),c(Object.keys(r).filter(function(t){return r[t].coordinates.length}).sort().map(function(t){var n={type:t,coordinates:r[t].coordinates},i={collectedProperties:r[t].properties};return e(n,i)}))}function bn(t){var e=[];return"FeatureCollection"===t.type?G(t,function(t){A(t,function(n){e.push(r(n,t.properties))})}):A(t,function(n){e.push(r(n,t.properties))}),c(e)}function In(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=Nn(t,0,i,n,!0),s=[];if(!o)return s;var a,u,c,l,h,p,f;if(r&&(o=Rn(t,e,o,n)),t.length>80*n){a=c=t[0],u=l=t[1];for(var g=n;g<i;g+=n)h=t[g],p=t[g+1],h<a&&(a=h),p<u&&(u=p),h>c&&(c=h),p>l&&(l=p);f=Math.max(c-a,l-u),f=0!==f?1/f:0}return Sn(o,s,n,a,u,f),s}function Nn(t,e,n,r,i){var o,s;if(i===Qn(t,e,n,r)>0)for(o=e;o<n;o+=r)s=Jn(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=Jn(o,t[o],t[o+1],s);return s&&Xn(s,s.next)&&(Zn(s),s=s.next),s}function Cn(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!Xn(r,r.next)&&0!==jn(r.prev,r,r.next))r=r.next;else{if(Zn(r),r=e=r.prev,r===r.next)break;n=!0}while(n||r!==e);return e}function Sn(t,e,n,r,i,o,s){if(t){!s&&o&&Fn(t,r,i,o);for(var a,u,c=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?Ln(t,r,i,o):Mn(t))e.push(a.i/n),e.push(t.i/n),e.push(u.i/n),Zn(t),t=u.next,c=u.next;else if(t=u,t===c){s?1===s?(t=Pn(t,e,n),Sn(t,e,n,r,i,o,2)):2===s&&On(t,e,n,r,i,o):Sn(Cn(t),e,n,r,i,o,1);break}}}function Mn(t){var e=t.prev,n=t,r=t.next;if(jn(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(kn(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&jn(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ln(t,e,n,r){var i=t.prev,o=t,s=t.next;if(jn(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,l=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,h=Gn(a,u,e,n,r),p=Gn(c,l,e,n,r),f=t.nextZ;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&kn(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&jn(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=t.prevZ;f&&f.z>=h;){if(f!==t.prev&&f!==t.next&&kn(i.x,i.y,o.x,o.y,s.x,s.y,f.x,f.y)&&jn(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function Pn(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Xn(i,o)&&Un(i,r,r.next,o)&&Vn(i,o)&&Vn(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Zn(r),Zn(r.next),r=t=o),r=r.next}while(r!==t);return r}function On(t,e,n,r,i,o){var s=t;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&zn(s,a)){var u=Wn(s,a);return s=Cn(s,s.next),u=Cn(u,u.next),Sn(s,e,n,r,i,o),void Sn(u,e,n,r,i,o)}a=a.next}s=s.next}while(s!==t)}function Rn(t,e,n,r){var i,o,s,a,u,c=[];for(i=0,o=e.length;i<o;i++)s=e[i]*r,a=i<o-1?e[i+1]*r:t.length,u=Nn(t,s,a,r,!1),u===u.next&&(u.steiner=!0),c.push(Bn(u));for(c.sort(Tn),i=0;i<c.length;i++)An(c[i],n),n=Cn(n,n.next);return n}function Tn(t,e){return t.x-e.x}function An(t,e){if(e=Dn(t,e)){var n=Wn(e,t);Cn(n,n.next)}}function Dn(t,e){var n,r=e,i=t.x,o=t.y,s=-(1/0);do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n.prev;var u,c=n,l=n.x,h=n.y,p=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&kn(o<h?i:s,o,l,h,o<h?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<p||u===p&&r.x>n.x)&&Vn(r,t)&&(n=r,p=u)),r=r.next;return n}function Fn(t,e,n,r){var i=t;do null===i.z&&(i.z=Gn(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,qn(i)}function qn(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,r);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1);return t}function Gn(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Bn(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function kn(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function zn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Yn(t,e)&&Vn(t,e)&&Vn(e,t)&&Hn(t,e)}function jn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Xn(t,e){return t.x===e.x&&t.y===e.y}function Un(t,e,n,r){return!!(Xn(t,e)&&Xn(n,r)||Xn(t,r)&&Xn(n,e))||jn(t,e,n)>0!=jn(t,e,r)>0&&jn(n,r,t)>0!=jn(n,r,e)>0}function Yn(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Un(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Vn(t,e){return jn(t.prev,t,t.next)<0?jn(t,e,t.next)>=0&&jn(t,t.prev,e)>=0:jn(t,e,t.prev)<0||jn(t,t.next,e)<0}function Hn(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function Wn(t,e){var n=new Kn(t.i,t.x,t.y),r=new Kn(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Jn(t,e,n,r){var i=new Kn(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Zn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Kn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Qn(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}function $n(t){if(!t.geometry||"Polygon"!==t.geometry.type&&"MultiPolygon"!==t.geometry.type)throw new Error("input must be a Polygon or MultiPolygon");var e={type:"FeatureCollection",features:[]};return"Polygon"===t.geometry.type?e.features=tr(t.geometry.coordinates):t.geometry.coordinates.forEach(function(t){e.features=e.features.concat(tr(t))}),e}function tr(t){var e=er(t),n=2,r=Al(e.vertices,e.holes,n),i=[],s=[];r.forEach(function(t,i){var o=r[i];s.push([e.vertices[o*n],e.vertices[o*n+1]])});for(var a=0;a<s.length;a+=3){var u=s.slice(a,a+3);u.push(s[a]),i.push(o([u]))}return i}function er(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}function nr(t,e){if(!t)throw new Error("targetPoint is required");if(!e)throw new Error("points is required");var n,r=1/0;return G(e,function(e,i){var o=ve(t,e);o<r&&(n=_e(e),n.properties.featureIndex=i,n.properties.distanceToPoint=o,r=o)}),n}function rr(t,e,n,r,i){ir(t,e,n||0,r||t.length-1,i||sr)}function ir(t,e,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,s=e-n+1,a=Math.log(o),u=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*u*(o-u)/o)*(s-o/2<0?-1:1),l=Math.max(n,Math.floor(e-s*u/o+c)),h=Math.min(r,Math.floor(e+(o-s)*u/o+c));ir(t,e,l,h,i)}var p=t[e],f=n,g=r;for(or(t,n,e),i(t[r],p)>0&&or(t,n,r);f<g;){for(or(t,f,g),f++,g--;i(t[f],p)<0;)f++;for(;i(t[g],p)>0;)g--}0===i(t[n],p)?or(t,n,g):(g++,or(t,g,r)),g<=e&&(n=g+1),e<=g&&(r=g-1)}}function or(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function sr(t,e){return t<e?-1:t>e?1:0}function ar(t,e){return this instanceof ar?(this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),void this.clear()):new ar(t,e)}function ur(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function cr(t,e){lr(t,0,t.children.length,e,t)}function lr(t,e,n,r,i){i||(i=xr(null)),i.minX=1/0,i.minY=1/0,i.maxX=-(1/0),i.maxY=-(1/0);for(var o,s=e;s<n;s++)o=t.children[s],hr(i,t.leaf?r(o):o);return i}function hr(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function pr(t,e){return t.minX-e.minX}function fr(t,e){return t.minY-e.minY}function gr(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function dr(t){return t.maxX-t.minX+(t.maxY-t.minY)}function yr(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function vr(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function _r(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function mr(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function xr(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function Er(t,e,n,r,i){for(var o,s=[e,n];s.length;)n=s.pop(),e=s.pop(),n-e<=r||(o=e+Math.ceil((n-e)/r/2)*r,rr(t,o,e,n,i),s.push(e,o,o,n))}function wr(t){var e=ar(t);return e.insert=function(t){if(Array.isArray(t)){var e=t;t=br(e),t.bbox=e}else t.bbox=t.bbox?t.bbox:Ir(t);return ar.prototype.insert.call(this,t)},e.load=function(t){var e=[];return Array.isArray(t)?t.forEach(function(t){var n=br(t);n.bbox=t,e.push(n)}):G(t,function(t){t.bbox=t.bbox?t.bbox:Ir(t),e.push(t)}),ar.prototype.load.call(this,e)},e.remove=function(t){if(Array.isArray(t)){var e=t;t=br(e),t.bbox=e}return ar.prototype.remove.call(this,t)},e.clear=function(){return ar.prototype.clear.call(this)},e.search=function(t){var e=ar.prototype.search.call(this,this.toBBox(t));return{type:"FeatureCollection",features:e}},e.collides=function(t){return ar.prototype.collides.call(this,this.toBBox(t))},e.all=function(){var t=ar.prototype.all.call(this);return{type:"FeatureCollection",features:t}},e.toJSON=function(){return ar.prototype.toJSON.call(this)},e.fromJSON=function(t){return ar.prototype.fromJSON.call(this,t)},e.toBBox=function(t){var e;return e=t.bbox?t.bbox:Array.isArray(t)&&4===t.length?t:Ir(t),{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}},e}function br(t){var e=[t[0],t[1]],n=[t[0],t[3]],r=[t[2],t[3]],i=[t[2],t[1]],o=[[e,i,r,n,e]];return{type:"Feature",bbox:t,properties:{},geometry:{type:"Polygon",coordinates:o}}}function Ir(t){var e=[1/0,1/0,-(1/0),-(1/0)];return A(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e}function Nr(t){if(!t)throw new Error("geojson is required");var e=[];return X(t,function(t){Cr(t,e)}),c(e)}function Cr(t,e){var n=[],r=t.geometry;switch(r.type){case"Polygon":n=K(r);break;case"LineString":n=[K(r)]}n.forEach(function(n){var r=Sr(n,t.properties);r.forEach(function(t){t.id=e.length,e.push(t)})})}function Sr(t,e){var n=[];return t.reduce(function(t,r){var i=a([t,r],e);return i.bbox=Mr(t,r),n.push(i),r}),n}function Mr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=n<i?n:i,a=r<o?r:o,u=n>i?n:i,c=r>o?r:o;return[s,a,u,c]}function Lr(t,n){var r={},i=[];if("LineString"===t.type&&(t=e(t)),"LineString"===n.type&&(n=e(n)),"Feature"===t.type&&"Feature"===n.type&&"LineString"===t.geometry.type&&"LineString"===n.geometry.type&&2===t.geometry.coordinates.length&&2===n.geometry.coordinates.length){var o=Pr(t,n);return o&&i.push(o),c(i)}var s=wr();return s.load(Nr(n)),G(Nr(t),function(t){G(s.search(t),function(e){var n=Pr(t,e);if(n){var o=K(n).join(",");r[o]||(r[o]=!0,i.push(n))}})}),c(i)}function Pr(t,e){var n=K(t),i=K(e);if(2!==n.length)throw new Error("<intersects> line1 must only contain 2 coordinates");if(2!==i.length)throw new Error("<intersects> line2 must only contain 2 coordinates");var o=n[0][0],s=n[0][1],a=n[1][0],u=n[1][1],c=i[0][0],l=i[0][1],h=i[1][0],p=i[1][1],f=(p-l)*(a-o)-(h-c)*(u-s),g=(h-c)*(s-l)-(p-l)*(o-c),d=(a-o)*(s-l)-(u-s)*(o-c);if(0===f)return null;var y=g/f,v=d/f;if(y>=0&&y<=1&&v>=0&&v<=1){var _=o+y*(a-o),m=s+y*(u-s);return r([_,m])}return null}function Or(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i=t.geometry?t.geometry.type:t.type;if("LineString"!==i&&"MultiLineString"!==i)throw new Error("lines must be LineString or MultiLineString");var o=r([1/0,1/0],{dist:1/0}),s=0;return X(t,function(t){for(var i=K(t),u=0;u<i.length-1;u++){var c=r(i[u]);c.properties.dist=ve(e,c,n);var l=r(i[u+1]);l.properties.dist=ve(e,l,n);var h=ve(c,l,n),p=Math.max(c.properties.dist,l.properties.dist),f=yn(c,l),g=gn(e,p,f+90,n),d=gn(e,p,f-90,n),y=Lr(a([g.geometry.coordinates,d.geometry.coordinates]),a([c.geometry.coordinates,l.geometry.coordinates])),v=null;y.features.length>0&&(v=y.features[0],v.properties.dist=ve(e,v,n),v.properties.location=s+ve(c,v,n)),c.properties.dist<o.properties.dist&&(o=c,o.properties.index=u,o.properties.location=s),l.properties.dist<o.properties.dist&&(o=l,o.properties.index=u+1,o.properties.location=s+h),v&&v.properties.dist<o.properties.dist&&(o=v,o.properties.index=u),s+=h}}),o}function Rr(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n["final"];if(!t)throw new Error("start point is required");if(!e)throw new Error("end point is required");var i;i=r?Tr(Z(e),Z(t)):Tr(Z(t),Z(e));var o=i>180?-(360-i):i;return o}function Tr(t,e){var n=x(t[1]),r=x(e[1]),i=x(e[0]-t[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var o=Math.log(Math.tan(r/2+Math.PI/4)/Math.tan(n/2+Math.PI/4)),s=Math.atan2(i,o);return(m(s)+360)%360}function Ar(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("from point is required");if(!e)throw new Error("to point is required");var i=Z(t),o=Z(e);o[0]+=o[0]-i[0]>180?-360:i[0]-o[0]>180?360:0;var s=Dr(i,o),a=E(s,"meters",r);return a}function Dr(t,e,n){n=void 0===n?kc:Number(n);var r=n,i=t[1]*Math.PI/180,o=e[1]*Math.PI/180,s=o-i,a=Math.abs(e[0]-t[0])*Math.PI/180;a>Math.PI&&(a-=2*Math.PI);var u=Math.log(Math.tan(o/2+Math.PI/4)/Math.tan(i/2+Math.PI/4)),c=Math.abs(u)>1e-11?s/u:Math.cos(i),l=Math.sqrt(s*s+c*c*a*a),h=l*r;return h}function Fr(t,e){return Gr(t,"mercator",e)}function qr(t,e){return Gr(t,"wgs84",e)}function Gr(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&b(t[0])?t="mercator"===e?Br(t):kr(t):(r!==!0&&(t=_e(t)),A(t,function(t){var n="mercator"===e?Br(t):kr(t);t[0]=n[0],t[1]=n[1]})),t}function Br(t){var e=Math.PI/180,n=6378137,r=20037508.342789244,i=Math.abs(t[0])<=180?t[0]:t[0]-360*zr(t[0]),o=[n*i*e,n*Math.log(Math.tan(.25*Math.PI+.5*t[1]*e))];return o[0]>r&&(o[0]=r),o[0]<-r&&(o[0]=-r),o[1]>r&&(o[1]=r),o[1]<-r&&(o[1]=-r),o}function kr(t){var e=180/Math.PI,n=6378137;return[t[0]*e/n,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/n)))*e]}function zr(t){return t<0?-1:t>0?1:0}function jr(t,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");if(!t)throw new Error("pt is required");if(Array.isArray(t)?t=r(t):"Point"===t.type?t=e(t):tt(t,"Point","point"),!n)throw new Error("line is required");Array.isArray(n)?n=a(n):"LineString"===n.type?n=e(n):tt(n,"LineString","line");var o=1/0,s=t.geometry.coordinates;return Y(n,function(t){var e=t.geometry.coordinates[0],n=t.geometry.coordinates[1],r=Xr(s,e,n,i);o>r&&(o=r)}),o}function Xr(t,e,n,r){var i=r.mercator,o=i!==!0?ve(e,t,r):Vr(e,t,r),s=_(i!==!0?yn(e,t):Rr(e,t)),a=_(i!==!0?yn(e,n):Rr(e,n)),u=Math.abs(s-a);if(u>90)return o;var c=(a+180)%360,l=_(i!==!0?yn(n,t):Rr(n,t)),h=Math.abs(l-c);return h>180&&(h=Math.abs(h-360)),h>90?i!==!0?ve(t,n,r):Vr(t,n,r):i!==!0?o*Math.sin(x(u)):Ur(e,n,t,r)}function Ur(t,e,n,i){var o=0;(Math.abs(t[0])>=180||Math.abs(e[0])>=180||Math.abs(n[0])>=180)&&(o=t[0]>0||e[0]>0||n[0]>0?-180:180);var s=r(n),a=Fr([t[0]+o,t[1]]),u=Fr([e[0]+o,e[1]]),c=Fr([n[0]+o,n[1]]),l=qr(Yr(a,u,c));0!==o&&(l[0]-=o);var h=Ar(s,l,i);return h}function Yr(t,e,n){var r=t[0],i=t[1],o=e[0],s=e[1],a=n[0],u=n[1],c=o-r,l=s-i,h=c*c+l*l,p=((a-r)*c+(u-i)*l)/h,f=r+p*c,g=i+p*l;return[f,g]}function Vr(t,e,n){var r=n.units,i=0;Math.abs(t[0])>=180&&(i=t[0]>0?-180:180),Math.abs(e[0])>=180&&(i=e[0]>0?-180:180);var o=Fr([t[0]+i,t[1]]),s=Fr([e[0]+i,e[1]]),a=function(t){return t*t},u=a(o[0]-s[0])+a(o[1]-s[1]),c=Math.sqrt(u);return E(c,"meters",r)}function Hr(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units,i=n.properties||{};if(!t)throw new Error("points is required");if(t=Wr(t),!t.features.length)throw new Error("points must contain features");if(!e)throw new Error("line is required");if("LineString"!==it(e))throw new Error("line must be a LineString");var o=1/0,s=null;return G(t,function(t){var n=jr(t,e,{units:r});n<o&&(o=n,s=t)}),s&&(s.properties=Object.assign({dist:o},s.properties,i)),s}function Wr(t){var e=[],n=t.geometry?t.geometry.type:t.type;switch(n){case"GeometryCollection":return z(t,function(t){"Point"===t.type&&e.push({type:"Feature",properties:{},geometry:t})}),{type:"FeatureCollection",features:e};case"FeatureCollection":return t.features=t.features.filter(function(t){return"Point"===t.geometry.type}),t;default:throw new Error("points must be a Point Collection")}}function Jr(t,e){var n=Z(t),r=nt(e),i=r.coordinates,o=i[0];if(o.length<4)throw new Error("OuterRing of a Polygon must have 4 or more Positions.");var s=e.properties||{},a=s.a,u=s.b,c=s.c,l=n[0],h=n[1],p=o[0][0],f=o[0][1],g=void 0!==a?a:o[0][2],d=o[1][0],y=o[1][1],v=void 0!==u?u:o[1][2],_=o[2][0],m=o[2][1],x=void 0!==c?c:o[2][2],E=(x*(l-p)*(h-y)+g*(l-d)*(h-m)+v*(l-_)*(h-f)-v*(l-p)*(h-m)-x*(l-d)*(h-f)-g*(l-_)*(h-y))/((l-p)*(h-y)+(l-d)*(h-m)+(l-_)*(h-f)-(l-p)*(h-m)-(l-d)*(h-f)-(l-_)*(h-y));return E}function Zr(t){var e,n,i={type:"FeatureCollection",features:[]};if(n="Feature"===t.type?t.geometry:t,"LineString"===n.type)e=[n.coordinates];else if("MultiLineString"===n.type)e=n.coordinates;else if("MultiPolygon"===n.type)e=[].concat.apply([],n.coordinates);else{if("Polygon"!==n.type)throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(t){e.forEach(function(e){for(var n=0;n<t.length-1;n++)for(var o=n;o<e.length-1;o++){if(t===e){if(1===Math.abs(n-o))continue;if(0===n&&o===t.length-2&&t[n][0]===t[t.length-1][0]&&t[n][1]===t[t.length-1][1])continue}var s=Kr(t[n][0],t[n][1],t[n+1][0],t[n+1][1],e[o][0],e[o][1],e[o+1][0],e[o+1][1]);s&&i.features.push(r([s[0],s[1]]))}})}),i}function Kr(t,e,n,r,i,o,s,a){var u,c,l,h,p,f={x:null,y:null,onLine1:!1,onLine2:!1};return u=(a-o)*(n-t)-(s-i)*(r-e),0===u?null!==f.x&&null!==f.y&&f:(c=e-o,l=t-i,h=(s-i)*c-(a-o)*l,p=(n-t)*c-(r-e)*l,c=h/u,l=p/u,f.x=t+c*(n-t),f.y=e+c*(r-e),c>=0&&c<=1&&(f.onLine1=!0),l>=0&&l<=1&&(f.onLine2=!0),!(!f.onLine1||!f.onLine2)&&[f.x,f.y])}function Qr(t){for(var e=$r(t),n=mn(e),i=!1,o=0;!i&&o<e.features.length;){var s,a,u,l,h,p,f,g=e.features[o].geometry,d=!1;if("Point"===g.type)n.geometry.coordinates[0]===g.coordinates[0]&&n.geometry.coordinates[1]===g.coordinates[1]&&(i=!0);else if("MultiPoint"===g.type){var y=!1;for(f=0;!y&&f<g.coordinates.length;)n.geometry.coordinates[0]===g.coordinates[f][0]&&n.geometry.coordinates[1]===g.coordinates[f][1]&&(i=!0,y=!0),f++}else if("LineString"===g.type)for(f=0;!d&&f<g.coordinates.length-1;)s=n.geometry.coordinates[0],a=n.geometry.coordinates[1],u=g.coordinates[f][0],l=g.coordinates[f][1],h=g.coordinates[f+1][0],p=g.coordinates[f+1][1],ti(s,a,u,l,h,p)&&(d=!0,i=!0),f++;else if("MultiLineString"===g.type)for(var v=0;v<g.coordinates.length;){d=!1,f=0;for(var _=g.coordinates[v];!d&&f<_.length-1;)s=n.geometry.coordinates[0],a=n.geometry.coordinates[1],u=_[f][0],l=_[f][1],h=_[f+1][0],p=_[f+1][1],ti(s,a,u,l,h,p)&&(d=!0,i=!0),f++;v++}else"Polygon"!==g.type&&"MultiPolygon"!==g.type||ue(n,g)&&(i=!0);o++}if(i)return n;var m=c([]);for(o=0;o<e.features.length;o++)m.features=m.features.concat(bn(e.features[o]).features);return r(nr(n,m).geometry.coordinates)}function $r(t){return"FeatureCollection"!==t.type?c("Feature"!==t.type?[e(t)]:[t]):t}function ti(t,e,n,r,i,o){var s=Math.sqrt((i-n)*(i-n)+(o-r)*(o-r)),a=Math.sqrt((t-n)*(t-n)+(e-r)*(e-r)),u=Math.sqrt((i-t)*(i-t)+(o-e)*(o-e));return s===a+u}function ei(t){return j(t,function(t,e){return t+ni(e)},0)}function ni(t){var e,n=0;switch(t.type){case"Polygon":return ri(t.coordinates);case"MultiPolygon":for(e=0;e<t.coordinates.length;e++)n+=ri(t.coordinates[e]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(e=0;e<t.geometries.length;e++)n+=ni(t.geometries[e]);return n}}function ri(t){var e=0;if(t&&t.length>0){e+=Math.abs(ii(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(ii(t[n]))}return e}function ii(t){var e,n,r,i,o,s,a,u=0,c=t.length;if(c>2){for(a=0;a<c;a++)a===c-2?(i=c-2,o=c-1,s=0):a===c-1?(i=c-1,o=0,s=1):(i=a,o=a+1,s=a+2),e=t[i],n=t[o],r=t[s],u+=(oi(r[0])-oi(e[0]))*Math.sin(oi(n[1]));u=u*ql*ql/2}return u}function oi(t){return t*Math.PI/180}function si(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i;if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");i=t.coordinates}if(!b(e))throw new Error("distance must be a number");for(var o=0,s=0;s<i.length&&!(e>=o&&s===i.length-1);s++){if(o>=e){var a=e-o;if(a){var u=yn(i[s],i[s-1])-180,c=gn(i[s],a,u,n);return c}return r(i[s])}o+=ve(i[s],i[s+1],n)}return r(i[i.length-1])}function ai(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");if(!t)throw new Error("geojson is required");return V(t,function(t,n){var r=n.geometry.coordinates;return t+ve(r[0],r[1],e)},0)}function ui(t,e,n){var r=K(n);if("LineString"!==it(n))throw new Error("line must be a LineString");var i,o=Or(n,t),s=Or(n,e);i=o.properties.index<=s.properties.index?[o,s]:[s,o];for(var u=[i[0].geometry.coordinates],c=i[0].properties.index+1;c<i[1].properties.index+1;c++)u.push(r[c]);return u.push(i[1].geometry.coordinates),a(u,n.properties)}function ci(t,e,n,r){if(r=r||{},!I(r))throw new Error("options is invalid");var i,o=[];if("Feature"===t.type)i=t.geometry.coordinates;else{if("LineString"!==t.type)throw new Error("input must be a LineString Feature or Geometry");
i=t.coordinates}for(var s,u,c,l=0,h=0;h<i.length&&!(e>=l&&h===i.length-1);h++){if(l>e&&0===o.length){if(s=e-l,!s)return o.push(i[h]),a(o);u=yn(i[h],i[h-1])-180,c=gn(i[h],s,u,r),o.push(c.geometry.coordinates)}if(l>=n)return(s=n-l)?(u=yn(i[h],i[h-1])-180,c=gn(i[h],s,u,r),o.push(c.geometry.coordinates),a(o)):(o.push(i[h]),a(o));if(l>=e&&o.push(i[h]),h===i.length-1)return a(o);l+=ve(i[h],i[h+1],r)}return a(i[i.length-1])}function li(t,e,n){n=n||{};var r=n.ignoreEndVertices;if(!I(n))throw new Error("invalid options");if(!t)throw new Error("pt is required");if(!e)throw new Error("line is required");for(var i=Z(t),o=K(e),s=0;s<o.length-1;s++){var a=!1;if(r&&(0===s&&(a="start"),s===o.length-2&&(a="end"),0===s&&s+1===o.length-1&&(a="both")),hi(o[s],o[s+1],i,a))return!0}return!1}function hi(t,e,n,r){var i=n[0],o=n[1],s=t[0],a=t[1],u=e[0],c=e[1],l=n[0]-s,h=n[1]-a,p=u-s,f=c-a,g=l*f-h*p;return 0===g&&(r?"start"===r?Math.abs(p)>=Math.abs(f)?p>0?s<i&&i<=u:u<=i&&i<s:f>0?a<o&&o<=c:c<=o&&o<a:"end"===r?Math.abs(p)>=Math.abs(f)?p>0?s<=i&&i<u:u<i&&i<=s:f>0?a<=o&&o<c:c<o&&o<=a:"both"===r?Math.abs(p)>=Math.abs(f)?p>0?s<i&&i<u:u<i&&i<s:f>0?a<o&&o<c:c<o&&o<a:void 0:Math.abs(p)>=Math.abs(f)?p>0?s<=i&&i<=u:u<=i&&i<=s:f>0?a<=o&&o<=c:c<=o&&o<=a)}function pi(t,e){var n=it(t),r=it(e),i=nt(t),o=nt(e);switch(n){case"Point":switch(r){case"MultiPoint":return fi(i,o);case"LineString":return li(i,o,{ignoreEndVertices:!0});case"Polygon":return ue(i,o,{ignoreBoundary:!0});default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"MultiPoint":return gi(i,o);case"LineString":return di(i,o);case"Polygon":return yi(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"LineString":return vi(i,o);case"Polygon":return _i(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Polygon":return mi(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function fi(t,e){var n,r=!1;for(n=0;n<e.coordinates.length;n++)if(Ei(e.coordinates[n],t.coordinates)){r=!0;break}return r}function gi(t,e){for(var n=0;n<t.coordinates.length;n++){for(var r=!1,i=0;i<e.coordinates.length;i++)Ei(t.coordinates[n],e.coordinates[i])&&(r=!0);if(!r)return!1}return!0}function di(t,e){for(var n=!1,r=0;r<t.coordinates.length;r++){if(!li(t.coordinates[r],e))return!1;n||(n=li(t.coordinates[r],e,{ignoreEndVertices:!0}))}return n}function yi(t,e){for(var n=!0,r=!1,i=0;i<t.coordinates.length;i++){var o=ue(t.coordinates[1],e);if(!o){n=!1;break}r||(o=ue(t.coordinates[1],e,{ignoreBoundary:!0}))}return n&&o}function vi(t,e){for(var n=0;n<t.coordinates.length;n++)if(!li(t.coordinates[n],e))return!1;return!0}function _i(t,e){var n=J(e),r=J(t);if(!xi(n,r))return!1;for(var i=!1,o=0;o<t.coordinates.length-1;o++){if(!ue(t.coordinates[o],e))return!1;if(i||(i=ue(t.coordinates[o],e,{ignoreBoundary:!0})),!i){var s=wi(t.coordinates[o],t.coordinates[o+1]);i=ue(s,e,{ignoreBoundary:!0})}}return i}function mi(t,e){var n=J(t),r=J(e);if(!xi(r,n))return!1;for(var i=0;i<t.coordinates[0].length;i++)if(!ue(t.coordinates[0][i],e))return!1;return!0}function xi(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function Ei(t,e){return t[0]===e[0]&&t[1]===e[1]}function wi(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function bi(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var i=n.mask,o=n.properties,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&["Polygon","MultiPolygon"].indexOf(it(i))===-1)throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],l=t[2],h=t[3],p=e/ve([a,u],[l,u],n),f=p*(l-a),g=e/ve([a,u],[a,h],n),d=g*(h-u),y=l-a,v=h-u,_=Math.floor(y/f),m=Math.floor(v/d),x=(y-_*f)/2,E=(v-m*d)/2,w=a+x;w<=l;){for(var N=u+E;N<=h;){var C=r([w,N],o);i?pi(C,i)&&s.push(C):s.push(C),N+=d}w+=f}return c(s)}function Ii(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.precision,r=e.coordinates,i=e.mutate;if(n=void 0===n||null===n||isNaN(n)?6:n,r=void 0===r||null===r||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if("number"!=typeof n)throw new Error("<precision> must be a number");if("number"!=typeof r)throw new Error("<coordinates> must be a number");i!==!1&&void 0!==i||(t=JSON.parse(JSON.stringify(t)));var o=Math.pow(10,n);return A(t,function(t){Ni(t,o,r)}),t}function Ni(t,e,n){t.length>n&&t.splice(n,t.length);for(var r=0;r<t.length;r++)t[r]=Math.round(t[r]*e)/e;return t}function Ci(t){if(!t)throw new Error("geojson is required");var e=[];return X(t,function(t){e.push(t)}),c(e)}function Si(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units,i=n.reverse;if(!t)throw new Error("geojson is required");if(e<=0)throw new Error("segmentLength must be greater than 0");var o=[];return X(t,function(t){i&&(t.geometry.coordinates=t.geometry.coordinates.reverse()),Mi(t,e,r,function(t){o.push(t)})}),c(o)}function Mi(t,e,n,r){var i=ai(t,{units:n});if(i<=e)return r(t);var o=i/e;Number.isInteger(o)||(o=Math.floor(o)+1);for(var s=0;s<o;s++){var a=ci(t,e*s,e*(s+1),{units:n});r(a,s)}}function Li(t,e,n,r){if(Pi(t,n)||Pi(t,r)||Pi(e,n)||Pi(r,n))return null;var i=t[0],o=t[1],s=e[0],a=e[1],u=n[0],c=n[1],l=r[0],h=r[1],p=(i-s)*(c-h)-(o-a)*(u-l);if(0===p)return null;var f=((i*a-o*s)*(u-l)-(i-s)*(u*h-c*l))/p,g=((i*a-o*s)*(c-h)-(o-a)*(u*h-c*l))/p;return[f,g]}function Pi(t,e){if(!t||!e)return!1;if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Pi(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}function Oi(t,e){if("undefined"==typeof e&&(e=!0),3!=t.length)throw new Error("This function requires an array of three points [x,y]");var n=(t[1][0]-t[0][0])*(t[2][1]-t[0][1])-(t[1][1]-t[0][1])*(t[2][0]-t[0][0]);return n>=0==e}function Ri(t){for(var e=0,n=0;n<t.length-1;n++)t[n][0]<t[e][0]&&(e=n);if(Oi([t[(e-1).modulo(t.length-1)],t[e],t[(e+1).modulo(t.length-1)]],!0))var r=1;else var r=-1;return r}function Ti(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!Ti(t[n],e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}function Ai(t){for(var e={},n=1,r=0,i=t.length;r<i;++r){if(e.hasOwnProperty(t[r])){n=0;break}e[t[r]]=1}return n}function Di(t){var e=[];return X(t,function(t){"Polygon"===t.geometry.type&&G(Bl(t),function(n){e.push(o(n.geometry.coordinates,t.properties))})}),c(e)}function Fi(t,e,n){if(n=n||{},"object"!=typeof n)throw new Error("options is invalid");var r=n.properties,i=n.npoints,o=n.offset;t=Z(t),e=Z(e),r=r||{},i=i||100,o=o||10;var s=new Hl({x:t[0],y:t[1]},{x:e[0],y:e[1]},r),a=s.Arc(i,{offset:o});return a.json()}function qi(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=it(t),r=it(e);if("LineString"!==n)throw new Error("line must be LineString");if("FeatureCollection"===r)throw new Error("splitter cannot be a FeatureCollection");if("GeometryCollection"===r)throw new Error("splitter cannot be a GeometryCollection");var i=Ii(e,{precision:7});switch(r){case"Point":return Bi(t,i);case"MultiPoint":return Gi(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Gi(t,Lr(t,i))}}function Gi(t,e){var n=[],r=wr();return X(e,function(e){if(n.forEach(function(t,e){t.id=e}),n.length){var i=r.search(e);if(i.features.length){var o=ki(e,i);n=n.filter(function(t){return t.id!==o.id}),r.remove(o),G(Bi(o,e),function(t){n.push(t),r.insert(t)})}}else n=Bi(t,e).features,n.forEach(function(t){t.bbox||(t.bbox=fn(J(t)))}),r.load(c(n))}),c(n)}function Bi(t,e){var n=[],r=K(t)[0],i=K(t)[t.geometry.coordinates.length-1];if(zi(r,Z(e))||zi(i,Z(e)))return c([t]);var o=wr(),s=Nr(t);o.load(s);var u=o.search(e);if(!u.features.length)return c([t]);var l=ki(e,u),h=[r],p=B(s,function(t,r,i){var o=K(r)[1],s=Z(e);return i===l.id?(t.push(s),n.push(a(t)),zi(s,o)?[s]:[s,o]):(t.push(o),t)},h);return p.length>1&&n.push(a(p)),c(n)}function ki(t,e){if(!e.features.length)throw new Error("lines must contain features");if(1===e.features.length)return e.features[0];var n,r=1/0;return G(e,function(e){var i=Or(e,t),o=i.properties.dist;o<r&&(n=e,r=o)}),n}function zi(t,e){return t[0]===e[0]&&t[1]===e[1]}function ji(t,e,n,r,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.steps,s=i.units;if(!t)throw new Error("center is required");if(!e)throw new Error("radius is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if("object"!=typeof i)throw new Error("options must be an object");o=o||64;var u=Xi(n),c=Xi(r),l=t.properties;if(u===c)return a(dn(t,e,i).geometry.coordinates[0],l);for(var h=u,p=u<c?c:c+360,f=h,g=[],d=0;f<p;)g.push(gn(t,e,f,s).geometry.coordinates),d++,f=h+360*d/o;return f>p&&g.push(gn(t,e,p,s).geometry.coordinates),a(g,l)}function Xi(t){var e=t%360;return e<0&&(e+=360),e}function Ui(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties,r=it(t),i=K(t);if(n=n||t.properties||{},!i.length)throw new Error("polygon must contain coordinates");switch(r){case"Polygon":return Yi(i,n);case"MultiPolygon":var o=[];return i.forEach(function(t){o.push(Yi(t,n))}),c(o);default:throw new Error("geom "+r+" not supported")}}function Yi(t,e){return t.length>1?l(t,e):a(t[0],e)}function Vi(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties,r=e.autoComplete,i=e.orderCoords;if(!t)throw new Error("lines is required");r=void 0===r||r,i=void 0===i||i;var o=it(t);switch(o){case"FeatureCollection":case"GeometryCollection":var s=[],a=t.features?t.features:t.geometries;return a.forEach(function(t){s.push(K(Hi(t,{},r,i)))}),p(s,n)}return Hi(t,n,r,i)}function Hi(t,e,n,r){e=e||t.properties||{};var i=K(t),s=it(t);if(!i.length)throw new Error("line must contain coordinates");switch(s){case"LineString":return n&&(i=Wi(i)),o([i],e);case"MultiLineString":var u=[],c=0;return i.forEach(function(t){if(n&&(t=Wi(t)),r){var e=Ji(J(a(t)));e>c?(u.unshift(t),c=e):u.push(t)}else u.push(t)}),o(u,e);default:throw new Error("geometry type "+s+" is not supported")}}function Wi(t){var e=t[0],n=e[0],r=e[1],i=t[t.length-1],o=i[0],s=i[1];return n===o&&r===s||t.push(e),t}function Ji(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.abs(e-r)*Math.abs(n-i)}function Zi(t,e,n){var r,i,o,s,a,u=t.length,c=$i(t[0],e),l=[];for(n||(n=[]),r=1;r<u;r++){for(i=t[r-1],o=t[r],s=a=$i(o,e);;){if(!(c|s)){l.push(i),s!==a?(l.push(o),r<u-1&&(n.push(l),l=[])):r===u-1&&l.push(o);break}if(c&s)break;c?(i=Qi(i,o,c,e),c=$i(i,e)):(o=Qi(i,o,s,e),s=$i(o,e))}c=a}return l.length&&n.push(l),n}function Ki(t,e){var n,r,i,o,s,a,u;for(r=1;r<=8;r*=2){for(n=[],i=t[t.length-1],o=!($i(i,e)&r),s=0;s<t.length;s++)a=t[s],u=!($i(a,e)&r),u!==o&&n.push(Qi(i,a,r,e)),u&&n.push(a),i=a,o=u;if(t=n,!t.length)break}return n}function Qi(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function $i(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function to(t,e){var n=no(t),r=K(t),i=t.properties;switch(n){case"LineString":case"MultiLineString":var s=[];return"LineString"===n&&(r=[r]),r.forEach(function(t){Wl(t,e,s)}),1===s.length?a(s[0],i):l(s,i);case"Polygon":return o(eo(r,e),i);case"MultiPolygon":return p(r.map(function(t){return eo(t,e)}),i);default:throw new Error("geometry "+n+" not supported")}}function eo(t,e){for(var n=[],r=0;r<t.length;r++){var i=Wl.polygon(t[r],e);i.length>0&&(i[0][0]===i[i.length-1][0]&&i[0][1]===i[i.length-1][1]||i.push(i[0]),i.length>=4&&n.push(i))}return n}function no(t){return t.geometry?t.geometry.type:t.type}function ro(t){return"[object Arguments]"===Object.prototype.toString.call(t)}function io(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t===e:ao(t,e,n))}function oo(t){return null===t||void 0===t}function so(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function ao(t,e,n){var r,i;if(oo(t)||oo(e))return!1;if(t.prototype!==e.prototype)return!1;if(ro(t))return!!ro(e)&&(t=Jl.call(t),e=Jl.call(e),io(t,e,n));if(so(t)){if(!so(e))return!1;if(t.length!==e.length)return!1;for(r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}try{var o=Object.keys(t),s=Object.keys(e)}catch(a){return!1}if(o.length!==s.length)return!1;for(o.sort(),s.sort(),r=o.length-1;r>=0;r--)if(o[r]!==s[r])return!1;for(r=o.length-1;r>=0;r--)if(i=o[r],!io(t[i],e[i],n))return!1;return typeof t==typeof e}function uo(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.tolerance||0,i=[],o=wr();o.load(Nr(t));var s;return Y(e,function(t){var e=!1;G(o.search(t),function(n){if(e===!1){var i=K(t).sort(),o=K(n).sort();io(i,o)?(e=!0,s=s?co(s,t):t):(0===r?li(i[0],n)&&li(i[1],n):Or(n,i[0]).properties.dist<=r&&Or(n,i[1]).properties.dist<=r)?(e=!0,s=s?co(s,t):t):(0===r?li(o[0],t)&&li(o[1],t):Or(t,o[0]).properties.dist<=r&&Or(t,o[1]).properties.dist<=r)&&(s=s?co(s,n):n)}}),e===!1&&s&&(i.push(s),s=void 0)}),s&&i.push(s),c(i)}function co(t,e){var n=K(e),r=K(t),i=r[0],o=r[r.length-1],s=t.geometry.coordinates;return io(n[0],i)?s.unshift(n[1]):io(n[0],o)?s.push(n[1]):io(n[1],i)?s.unshift(n[0]):io(n[1],o)&&s.push(n[0]),t}function lo(t,e,n,r,i){if(i=i||{},!I(i))throw new Error("options is invalid");if(!t)throw new Error("center is required");if(void 0===n||null===n)throw new Error("bearing1 is required");if(void 0===r||null===r)throw new Error("bearing2 is required");if(!e)throw new Error("radius is required");if("object"!=typeof i)throw new Error("options must be an object");if(ho(n)===ho(r))return dn(t,e,i);var s=K(t),a=ji(t,e,n,r,i),u=[[s]];return A(a,function(t){u[0].push(t)}),u[0].push(s),o(u)}function ho(t){var e=t%360;return e<0&&(e+=360),e}function po(t,e,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.units,s=i.properties;if(!t)throw new Error("origin is required");if(void 0===e||null===e)throw new Error("distance is required");if(void 0===n||null===n)throw new Error("bearing is required");if(!(e>=0))throw new Error("distance must be greater than 0");var a=E(e,o,"meters"),u=Z(t),c=fo(u,a,n);return c[0]+=c[0]-u[0]>180?-360:u[0]-c[0]>180?360:0,r(c,s)}function fo(t,e,n,r){r=void 0===r?kc:Number(r);var i=e/r,o=t[0]*Math.PI/180,s=x(t[1]),a=x(n),u=i*Math.cos(a),c=s+u;Math.abs(c)>Math.PI/2&&(c=c>0?Math.PI-c:-Math.PI-c);var l=Math.log(Math.tan(c/2+Math.PI/4)/Math.tan(s/2+Math.PI/4)),h=Math.abs(l)>1e-11?u/l:Math.cos(s),p=i*Math.sin(a)/h,f=o+p;return[(180*f/Math.PI+540)%360-180,180*c/Math.PI]}function go(t,e){var n,i,o,s,a=K(t),u=K(e),l=it(e);switch(l){case"Polygon":n=u[0][0],i=u[0][0],s=mo(u[0][0],u[0][u[0].length-1],a);var h=yo(u[0],a,s,o,n,i);n=h[0],i=h[1];break;case"MultiPolygon":n=u[0][0][0],i=u[0][0][0],s=mo(u[0][0][0],u[0][0][u[0][0].length-1],a),u.forEach(function(t){var e=yo(t[0],a,s,o,n,i);n=e[0],i=e[1]})}return c([r(n),r(i)])}function yo(t,e,n,r,i,o){for(var s=0;s<t.length;s++){var a=t[s],u=t[s+1];s===t.length-1&&(u=t[0]),r=mo(a,u,e),n<=0&&r>0?_o(e,a,i)||(i=a):n>0&&r<=0&&(vo(e,a,o)||(o=a)),n=r}return[i,o]}function vo(t,e,n){return mo(t,e,n)>0}function _o(t,e,n){return mo(t,e,n)<0}function mo(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function xo(t){if(!t)throw new Error("line is required");var e=t.geometry?t.geometry.type:t.type;if(!Array.isArray(t)&&"LineString"!==e)throw new Error("geometry must be a LineString");for(var n,r,i=K(t),o=0,s=1;s<i.length;)n=r||i[0],r=i[s],o+=(r[0]-n[0])*(r[1]+n[1]),s++;return o>0}function Eo(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.reverse||!1,r=e.mutate||!1;if(!t)throw new Error("<geojson> is required");if("boolean"!=typeof n)throw new Error("<reverse> must be a boolean");if("boolean"!=typeof r)throw new Error("<mutate> must be a boolean");r===!1&&(t=_e(t));var i=[];switch(t.type){case"GeometryCollection":return z(t,function(t){wo(t,n)}),t;case"FeatureCollection":return G(t,function(t){G(wo(t,n),function(t){i.push(t)})}),c(i)}return wo(t,n)}function wo(t,e){var n="Feature"===t.type?t.geometry.type:t.type;switch(n){case"GeometryCollection":return z(t,function(t){wo(t,e)}),t;case"LineString":return bo(K(t),e),t;case"Polygon":return Io(K(t),e),t;case"MultiLineString":return K(t).forEach(function(t){bo(t,e)}),t;case"MultiPolygon":return K(t).forEach(function(t){Io(t,e)}),t;case"Point":case"MultiPoint":return t}}function bo(t,e){xo(t)===e&&t.reverse()}function Io(t,e){xo(t[0])!==e&&t[0].reverse();for(var n=1;n<t.length;n++)xo(t[n])===e&&t[n].reverse()}function No(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.zProperty||"elevation",r=e.flip,i=e.flags;et(t,"Point","input must contain Points");for(var o=Co(t,r),s=[],a=0;a<o.length;a++){for(var u=o[a],c=[],l=0;l<u.length;l++){var h=u[l];h.properties[n]?c.push(h.properties[n]):c.push(0),i===!0&&(h.properties.matrixPosition=[a,l])}s.push(c)}return s}function Co(t,e){var n={};G(t,function(t){var e=K(t)[1];n[e]||(n[e]=[]),n[e].push(t)});var r=Object.keys(n).map(function(t){var e=n[t],r=e.sort(function(t,e){return K(t)[0]-K(e)[0]});return r}),i=r.sort(function(t,n){return e?K(t[0])[1]-K(n[0])[1]:K(n[0])[1]-K(t[0])[1]});return i}function So(t,e,n,r){r=r?r:{};for(var i=Object.keys(Zl),o=0;o<i.length;o++){var s=i[o],a=r[s];a="undefined"!=typeof a&&null!==a?a:Zl[s],Kl[s]=a}Kl.verbose&&console.log("MarchingSquaresJS-isoBands: computing isobands for ["+e+":"+(e+n)+"]");var u,c=Po(t,e,n);return Kl.polygons?(Kl.verbose&&console.log("MarchingSquaresJS-isoBands: returning single polygons for each grid cell"),u=Fo(c)):(Kl.verbose&&console.log("MarchingSquaresJS-isoBands: returning polygon paths for entire data grid"),u=Oo(c)),"function"==typeof Kl.successCallback&&Kl.successCallback(u),u}function Mo(t,e,n){return(t-e)/(n-e)}function Lo(t){return t.constructor.toString().indexOf("Array")>-1}function Po(t,e,n){for(var r=t.length-1,i=t[0].length-1,o={rows:r,cols:i,cells:[]},s=e+Math.abs(n),a=0;a<r;++a){o.cells[a]=[];for(var u=0;u<i;++u){var c=0,l=t[a+1][u],h=t[a+1][u+1],p=t[a][u+1],f=t[a][u];if(!(isNaN(l)||isNaN(h)||isNaN(p)||isNaN(f))){c|=l<e?0:l>s?128:64,c|=h<e?0:h>s?32:16,c|=p<e?0:p>s?8:4,c|=f<e?0:f>s?2:1;var g=+c,d=0;if(17===c||18===c||33===c||34===c||38===c||68===c||72===c||98===c||102===c||132===c||136===c||137===c||152===c||153===c){var y=(l+h+p+f)/4;d=y>s?2:y<e?0:1,34===c?1===d?c=35:0===d&&(c=136):136===c?1===d?(c=35,d=4):0===d&&(c=34):17===c?1===d?(c=155,d=4):0===d&&(c=153):68===c?1===d?(c=103,d=4):0===d&&(c=102):153===c?1===d&&(c=155):102===c?1===d&&(c=103):152===c?d<2&&(c=156,d=1):137===c?d<2&&(c=139,d=1):98===c?d<2&&(c=99,d=1):38===c?d<2&&(c=39,d=1):18===c?d>0?(c=156,d=4):c=152:33===c?d>0?(c=139,d=4):c=137:72===c?d>0?(c=99,d=4):c=98:132===c&&(d>0?(c=39,d=4):c=38)}if(0!=c&&170!=c){var v,_,m,x,E,w,b,I;v=_=m=x=E=w=b=I=.5;var N=[];1===c?(m=1-Mo(e,p,f),I=1-Mo(e,l,f),N.push(dp[c])):169===c?(m=Mo(s,f,p),I=Mo(s,f,l),N.push(dp[c])):4===c?(w=1-Mo(e,h,p),x=Mo(e,f,p),N.push(fp[c])):166===c?(w=Mo(s,p,h),x=1-Mo(s,p,f),N.push(fp[c])):16===c?(E=Mo(e,p,h),_=Mo(e,l,h),N.push(pp[c])):154===c?(E=1-Mo(s,h,p),_=1-Mo(s,h,l),N.push(pp[c])):64===c?(b=Mo(e,f,l),v=1-Mo(e,h,l),N.push(vp[c])):106===c?(b=1-Mo(s,l,f),v=Mo(s,l,h),N.push(vp[c])):168===c?(x=Mo(s,f,p),m=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),N.push(gp[c]),N.push(dp[c])):2===c?(x=1-Mo(e,p,f),m=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),N.push(gp[c]),N.push(dp[c])):162===c?(E=Mo(s,p,h),w=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),N.push(gp[c]),N.push(dp[c])):8===c?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),N.push(pp[c]),N.push(fp[c])):138===c?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),v=1-Mo(s,h,l),_=1-Mo(e,h,l),N.push(pp[c]),N.push(fp[c])):32===c?(E=Mo(s,p,h),w=Mo(e,p,h),v=Mo(e,l,h),_=Mo(s,l,h),N.push(pp[c]),N.push(fp[c])):42===c?(I=1-Mo(s,l,f),b=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h),N.push(yp[c]),N.push(vp[c])):128===c&&(I=Mo(e,f,l),b=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l),N.push(yp[c]),N.push(vp[c])),5===c?(w=1-Mo(e,h,p),I=1-Mo(e,l,f),N.push(fp[c])):165===c?(w=Mo(s,p,h),I=Mo(s,f,l),N.push(fp[c])):20===c?(x=Mo(e,f,p),_=Mo(e,l,h),N.push(gp[c])):150===c?(x=1-Mo(s,p,f),_=1-Mo(s,h,l),N.push(gp[c])):80===c?(E=Mo(e,p,h),b=Mo(e,f,l),N.push(pp[c])):90===c?(E=1-Mo(s,h,p),b=1-Mo(s,l,f),N.push(pp[c])):65===c?(m=1-Mo(e,p,f),v=1-Mo(e,h,l),N.push(dp[c])):105===c?(m=Mo(s,f,p),v=Mo(s,l,h),N.push(dp[c])):160===c?(E=Mo(s,p,h),w=Mo(e,p,h),I=Mo(e,f,l),b=Mo(s,f,l),N.push(pp[c]),N.push(fp[c])):10===c?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),I=1-Mo(s,l,f),b=1-Mo(e,l,f),N.push(pp[c]),N.push(fp[c])):130===c?(x=1-Mo(e,p,f),m=1-Mo(s,p,f),v=1-Mo(s,h,l),_=1-Mo(e,h,l),N.push(gp[c]),N.push(dp[c])):40===c?(x=Mo(s,f,p),m=Mo(e,f,p),v=Mo(e,l,h),_=Mo(s,l,h),N.push(gp[c]),N.push(dp[c])):101===c?(w=Mo(s,p,h),v=Mo(s,l,h),N.push(fp[c])):69===c?(w=1-Mo(e,h,p),v=1-Mo(e,h,l),N.push(fp[c])):149===c?(I=Mo(s,f,l),_=1-Mo(s,h,l),N.push(yp[c])):21===c?(I=1-Mo(e,l,f),_=Mo(e,l,h),N.push(yp[c])):86===c?(x=1-Mo(s,p,f),b=1-Mo(s,l,f),N.push(gp[c])):84===c?(x=Mo(e,f,p),b=Mo(e,f,l),N.push(gp[c])):89===c?(E=1-Mo(s,h,p),m=Mo(s,f,p),N.push(dp[c])):81===c?(E=Mo(e,p,h),m=1-Mo(e,p,f),N.push(dp[c])):96===c?(E=Mo(s,p,h),w=Mo(e,p,h),b=Mo(e,f,l),v=Mo(s,l,h),N.push(pp[c]),N.push(fp[c])):74===c?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),b=1-Mo(s,l,f),v=1-Mo(e,h,l),N.push(pp[c]),N.push(fp[c])):24===c?(E=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),_=Mo(e,l,h),N.push(pp[c]),N.push(dp[c])):146===c?(E=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),_=1-Mo(s,h,l),N.push(pp[c]),N.push(dp[c])):6===c?(w=1-Mo(e,h,p),x=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),N.push(fp[c]),N.push(gp[c])):164===c?(w=Mo(s,p,h),x=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),N.push(fp[c]),N.push(gp[c])):129===c?(m=1-Mo(e,p,f),I=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l),N.push(dp[c]),N.push(yp[c])):41===c?(m=Mo(s,f,p),I=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h),N.push(dp[c]),N.push(yp[c])):66===c?(x=1-Mo(e,p,f),m=1-Mo(s,p,f),b=1-Mo(s,l,f),v=1-Mo(e,h,l),N.push(gp[c]),N.push(dp[c])):104===c?(x=Mo(s,f,p),m=Mo(e,f,p),b=Mo(e,f,l),v=Mo(s,l,h),N.push(dp[c]),N.push(_p[c])):144===c?(E=Mo(e,p,h),I=Mo(e,f,l),b=Mo(s,f,l),_=1-Mo(s,h,l),N.push(pp[c]),N.push(vp[c])):26===c?(E=1-Mo(s,h,p),I=1-Mo(s,l,f),b=1-Mo(e,l,f),_=Mo(e,l,h),N.push(pp[c]),N.push(vp[c])):36===c?(w=Mo(s,p,h),x=Mo(e,f,p),v=Mo(e,l,h),_=Mo(s,l,h),N.push(fp[c]),N.push(gp[c])):134===c?(w=1-Mo(e,h,p),x=1-Mo(s,p,f),v=1-Mo(s,h,l),_=1-Mo(e,h,l),N.push(fp[c]),N.push(gp[c])):9===c?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),m=Mo(s,f,p),I=1-Mo(e,l,f),N.push(pp[c]),N.push(fp[c])):161===c?(E=Mo(s,p,h),w=Mo(e,p,h),m=1-Mo(e,p,f),I=Mo(s,f,l),N.push(pp[c]),N.push(fp[c])):37===c?(w=Mo(s,p,h),I=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h),N.push(fp[c]),N.push(yp[c])):133===c?(w=1-Mo(e,h,p),I=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l),N.push(fp[c]),N.push(yp[c])):148===c?(x=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),_=1-Mo(s,h,l),N.push(gp[c]),N.push(vp[c])):22===c?(x=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),_=Mo(e,l,h),N.push(gp[c]),N.push(vp[c])):82===c?(E=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),b=1-Mo(s,l,f),N.push(pp[c]),N.push(dp[c])):88===c?(E=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),b=Mo(e,f,l),N.push(pp[c]),N.push(dp[c])):73===c?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),m=Mo(s,f,p),v=1-Mo(e,h,l),N.push(pp[c]),N.push(fp[c])):97===c?(E=Mo(s,p,h),w=Mo(e,p,h),m=1-Mo(e,p,f),v=Mo(s,l,h),N.push(pp[c]),N.push(fp[c])):145===c?(E=Mo(e,p,h),m=1-Mo(e,p,f),I=Mo(s,f,l),_=1-Mo(s,h,l),N.push(pp[c]),N.push(yp[c])):25===c?(E=1-Mo(s,h,p),m=Mo(s,f,p),I=1-Mo(e,l,f),_=Mo(e,l,h),N.push(pp[c]),N.push(yp[c])):70===c?(w=1-Mo(e,h,p),x=1-Mo(s,p,f),b=1-Mo(s,l,f),v=1-Mo(e,h,l),N.push(fp[c]),N.push(gp[c])):100===c?(w=Mo(s,p,h),x=Mo(e,f,p),b=Mo(e,f,l),v=Mo(s,l,h),N.push(fp[c]),N.push(gp[c])):34===c?(0===d?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)):(E=Mo(s,p,h),w=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)),N.push(pp[c]),N.push(fp[c]),N.push(yp[c]),N.push(vp[c])):35===c?(4===d?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)):(E=Mo(s,p,h),w=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)),N.push(pp[c]),N.push(fp[c]),N.push(dp[c]),N.push(vp[c])):136===c?(0===d?(E=Mo(s,p,h),w=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)):(E=1-Mo(e,h,p),w=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)),N.push(pp[c]),N.push(fp[c]),N.push(yp[c]),N.push(vp[c])):153===c?(0===d?(E=Mo(e,p,h),m=1-Mo(e,p,f),I=1-Mo(e,l,f),_=Mo(e,l,h)):(E=1-Mo(s,h,p),m=Mo(s,f,p),I=Mo(s,f,l),_=1-Mo(s,h,l)),N.push(pp[c]),N.push(dp[c])):102===c?(0===d?(w=1-Mo(e,h,p),x=Mo(e,f,p),b=Mo(e,f,l),v=1-Mo(e,h,l)):(w=Mo(s,p,h),x=1-Mo(s,p,f),b=1-Mo(s,l,f),v=Mo(s,l,h)),N.push(fp[c]),N.push(vp[c])):155===c?(4===d?(E=Mo(e,p,h),m=1-Mo(e,p,f),I=1-Mo(e,l,f),_=Mo(e,l,h)):(E=1-Mo(s,h,p),m=Mo(s,f,p),I=Mo(s,f,l),_=1-Mo(s,h,l)),N.push(pp[c]),N.push(yp[c])):103===c?(4===d?(w=1-Mo(e,h,p),x=Mo(e,f,p),b=Mo(e,f,l),v=1-Mo(e,h,l)):(w=Mo(s,p,h),x=1-Mo(s,p,f),b=1-Mo(s,l,f),v=Mo(s,l,h)),N.push(fp[c]),N.push(gp[c])):152===c?(0===d?(E=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),_=Mo(e,l,h)):(E=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),_=1-Mo(s,h,l)),N.push(pp[c]),N.push(gp[c]),N.push(dp[c])):156===c?(4===d?(E=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),_=Mo(e,l,h)):(E=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),_=1-Mo(s,h,l)),N.push(pp[c]),N.push(dp[c]),N.push(vp[c])):137===c?(0===d?(E=Mo(s,p,h),w=Mo(e,p,h),m=1-Mo(e,p,f),I=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)):(E=1-Mo(e,h,p),w=1-Mo(s,h,p),m=Mo(s,f,p),I=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)),N.push(pp[c]),N.push(fp[c]),N.push(dp[c])):139===c?(4===d?(E=Mo(s,p,h),w=Mo(e,p,h),m=1-Mo(e,p,f),I=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)):(E=1-Mo(e,h,p),w=1-Mo(s,h,p),m=Mo(s,f,p),I=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)),N.push(pp[c]),N.push(fp[c]),N.push(yp[c])):98===c?(0===d?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),b=Mo(e,f,l),v=1-Mo(e,h,l)):(E=Mo(s,p,h),w=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),b=1-Mo(s,l,f),v=Mo(s,l,h)),N.push(pp[c]),N.push(fp[c]),N.push(vp[c])):99===c?(4===d?(E=1-Mo(e,h,p),w=1-Mo(s,h,p),x=Mo(s,f,p),m=Mo(e,f,p),b=Mo(e,f,l),v=1-Mo(e,h,l)):(E=Mo(s,p,h),w=Mo(e,p,h),x=1-Mo(e,p,f),m=1-Mo(s,p,f),b=1-Mo(s,l,f),v=Mo(s,l,h)),N.push(pp[c]),N.push(fp[c]),N.push(dp[c])):38===c?(0===d?(w=1-Mo(e,h,p),x=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)):(w=Mo(s,p,h),x=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)),N.push(fp[c]),N.push(yp[c]),N.push(vp[c])):39===c?(4===d?(w=1-Mo(e,h,p),x=Mo(e,f,p),I=Mo(e,f,l),b=Mo(s,f,l),v=1-Mo(s,h,l),_=1-Mo(e,h,l)):(w=Mo(s,p,h),x=1-Mo(s,p,f),I=1-Mo(s,l,f),b=1-Mo(e,l,f),v=Mo(e,l,h),_=Mo(s,l,h)),N.push(fp[c]),N.push(gp[c]),N.push(vp[c])):85===c&&(E=1,w=0,x=1,m=0,I=0,b=1,v=0,_=1),(v<0||v>1||_<0||_>1||E<0||E>1||x<0||x>1||I<0||I>1||b<0||b>1)&&console.log("MarchingSquaresJS-isoBands: "+c+" "+g+" "+l+","+h+","+p+","+f+" "+d+" "+v+" "+_+" "+E+" "+w+" "+x+" "+m+" "+I+" "+b),o.cells[a][u]={cval:c,cval_real:g,flipped:d,topleft:v,topright:_,righttop:E,rightbottom:w,bottomright:x,bottomleft:m,leftbottom:I,lefttop:b,edges:N}}}}}return o}function Oo(t){for(var e=[],n=t.rows,r=t.cols,i=[],o=0;o<n;o++)for(var s=0;s<r;s++)if("undefined"!=typeof t.cells[o][s]&&t.cells[o][s].edges.length>0){var a=t.cells[o][s],u=Ao(a),c=null,l=s,h=o;null!==u&&i.push([u.p[0]+l,u.p[1]+h]);do{if(c=Do(t.cells[h][l],u.x,u.y,u.o),null===c)break;if(i.push([c.p[0]+l,c.p[1]+h]),l+=c.x,h+=c.y,u=c,h<0||h>=n||l<0||l>=r||"undefined"==typeof t.cells[h][l]){l-=c.x,h-=c.y;var p=Ro(t,l,h,c.x,c.y,c.o);if(null===p)break;p.path.forEach(function(t){i.push(t)}),l=p.i,h=p.j,u=p}}while("undefined"!=typeof t.cells[h][l]&&t.cells[h][l].edges.length>0);e.push(i),i=[],t.cells[o][s].edges.length>0&&s--}return e}function Ro(t,e,n,r,i,o){for(var s=t.cells[n][e],a=s.cval_real,u=e+r,c=n+i,l=[],h=!1;!h;){if("undefined"==typeof t.cells[c]||"undefined"==typeof t.cells[c][u])if(c-=i,u-=r,s=t.cells[c][u],a=s.cval_real,i===-1)if(0===o)if(a&eh)l.push([u,c]),r=-1,i=0,o=0;else{if(!(a&th)){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+1,c]),r=1,i=0,o=0}else{if(!(a&eh)){if(a&th){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u+s.bottomleft,c]),r=0,i=1,o=0,h=!0;break}l.push([u,c]),r=-1,i=0,o=0}else if(1===i)if(0===o){if(!(a&$l)){if(a&Ql){l.push([u+s.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+s.topright,c+1]),r=0,i=-1,o=1,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}else a&$l?(l.push([u+1,c+1]),r=1,i=0,o=1):(l.push([u+1,c+1]),r=1,i=0,o=1);else if(r===-1)if(0===o){if(!(a&Ql)){if(a&eh){l.push([u,c+s.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+s.lefttop]),r=1,i=0,o=1,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}else{if(!(a&Ql)){console.log("MarchingSquaresJS-isoBands: wtf");break}l.push([u,c+1]),r=0,i=1,o=0}else{if(1!==r){console.log("MarchingSquaresJS-isoBands: we came from nowhere!");break}if(0===o){if(!(a&th)){l.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}else{if(!(a&th)){if(a&$l){l.push([u+1,c+s.righttop]),r=-1,i=0,o=1;break}l.push([u+1,c+s.rightbottom]),r=-1,i=0,o=0,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else if(s=t.cells[c][u],a=s.cval_real,r===-1)if(0===o)if("undefined"!=typeof t.cells[c-1]&&"undefined"!=typeof t.cells[c-1][u])r=0,i=-1,o=1;else{if(!(a&eh)){l.push([u+s.bottomright,c]),r=0,i=1,o=1,h=!0;break}l.push([u,c])}else{if(!(a&Ql)){console.log("MarchingSquaresJS-isoBands: found entry from top at "+u+","+c);break}console.log("MarchingSquaresJS-isoBands: proceeding in x-direction!")}else if(1===r){if(0===o){console.log("MarchingSquaresJS-isoBands: wtf");break}if("undefined"!=typeof t.cells[c+1]&&"undefined"!=typeof t.cells[c+1][u])r=0,i=1,o=0;else{if(!(a&$l)){l.push([u+s.topleft,c+1]),r=0,i=-1,o=0,h=!0;break}l.push([u+1,c+1]),r=1,i=0,o=1}}else if(i===-1){if(1!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if("undefined"!=typeof t.cells[c][u+1])r=1,i=0,o=1;else{if(!(a&th)){l.push([u+1,c+s.righttop]),r=-1,i=0,o=1,h=!0;break}l.push([u+1,c]),r=0,i=-1,o=1}}else{if(1!==i){console.log("MarchingSquaresJS-isoBands: where did we came from???");break}if(0!==o){console.log("MarchingSquaresJS-isoBands: wtf");break}if("undefined"!=typeof t.cells[c][u-1])r=-1,i=0,o=0;else{if(!(a&Ql)){l.push([u,c+s.leftbottom]),r=1,i=0,o=0,h=!0;break}l.push([u,c+1]),r=0,i=1,o=0}}if(u+=r,c+=i,u===e&&c===n)break}return{path:l,i:u,j:c,x:r,y:i,o:o}}function To(t,e){delete t.edges[e];for(var n=e+1;n<t.edges.length;n++)t.edges[n-1]=t.edges[n];t.edges.pop()}function Ao(t){if(t.edges.length>0){var e=t.edges[t.edges.length-1],n=t.cval_real;switch(e){case 0:return n&$l?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 1:return n&th?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 2:return n&th?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topleft,1],x:0,y:-1,o:0};case 3:return n&eh?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 4:return n&$l?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 5:return n&th?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 6:return n&th?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};case 7:return n&eh?{p:[t.topright,1],x:0,y:-1,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 8:return n&th?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.righttop],x:-1,y:0,o:1};case 9:return n&eh?{p:[1,t.righttop],
x:-1,y:0,o:1}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 10:return n&eh?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.righttop],x:-1,y:0,o:1};case 11:return n&Ql?{p:[1,t.righttop],x:-1,y:0,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 12:return n&th?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 13:return n&eh?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 14:return n&eh?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[1,t.rightbottom],x:-1,y:0,o:0};case 15:return n&Ql?{p:[1,t.rightbottom],x:-1,y:0,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 16:return n&th?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 17:return n&Ql?{p:[t.bottomright,0],x:0,y:1,o:1}:{p:[0,t.lefttop],x:1,y:0,o:1};case 18:return n&eh?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.bottomleft,0],x:0,y:1,o:0};case 19:return n&Ql?{p:[t.bottomleft,0],x:0,y:1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 20:return n&Ql?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.leftbottom],x:1,y:0,o:0};case 21:return n&$l?{p:[0,t.leftbottom],x:1,y:0,o:0}:{p:[t.topright,1],x:0,y:-1,o:1};case 22:return n&Ql?{p:[t.topleft,1],x:0,y:-1,o:0}:{p:[0,t.lefttop],x:1,y:0,o:1};case 23:return n&$l?{p:[0,t.lefttop],x:1,y:0,o:1}:{p:[t.topright,1],x:0,y:-1,o:1};default:console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t)}}return null}function Do(t,e,n,r){var i,o,s,a,u,c=t.cval;switch(e){case-1:switch(r){case 0:i=fp[c],s=hh[c],a=ph[c],u=fh[c];break;default:i=pp[c],s=uh[c],a=ch[c],u=lh[c]}break;case 1:switch(r){case 0:i=yp[c],s=bh[c],a=Ih[c],u=Nh[c];break;default:i=vp[c],s=xh[c],a=Eh[c],u=wh[c]}break;default:switch(n){case-1:switch(r){case 0:i=_p[c],s=nh[c],a=rh[c],u=ih[c];break;default:i=mp[c],s=oh[c],a=sh[c],u=ah[c]}break;case 1:switch(r){case 0:i=dp[c],s=gh[c],a=dh[c],u=yh[c];break;default:i=gp[c],s=vh[c],a=_h[c],u=mh[c]}}}if(o=t.edges.indexOf(i),"undefined"==typeof t.edges[o])return null;switch(To(t,o),c=t.cval_real,i){case 0:c&$l?(e=t.topleft,n=1):(e=1,n=t.righttop);break;case 1:c&th?(e=1,n=t.rightbottom):(e=t.topleft,n=1);break;case 2:c&th?(e=t.topleft,n=1):(e=t.bottomright,n=0);break;case 3:c&eh?(e=t.bottomleft,n=0):(e=t.topleft,n=1);break;case 4:c&$l?(e=t.topright,n=1):(e=1,n=t.righttop);break;case 5:c&th?(e=1,n=t.rightbottom):(e=t.topright,n=1);break;case 6:c&th?(e=t.topright,n=1):(e=t.bottomright,n=0);break;case 7:c&eh?(e=t.bottomleft,n=0):(e=t.topright,n=1);break;case 8:c&th?(e=1,n=t.righttop):(e=t.bottomright,n=0);break;case 9:c&eh?(e=t.bottomleft,n=0):(e=1,n=t.righttop);break;case 10:c&eh?(e=1,n=t.righttop):(e=0,n=t.leftbottom);break;case 11:c&Ql?(e=0,n=t.lefttop):(e=1,n=t.righttop);break;case 12:c&th?(e=1,n=t.rightbottom):(e=t.bottomright,n=0);break;case 13:c&eh?(e=t.bottomleft,n=0):(e=1,n=t.rightbottom);break;case 14:c&eh?(e=1,n=t.rightbottom):(e=0,n=t.leftbottom);break;case 15:c&Ql?(e=0,n=t.lefttop):(e=1,n=t.rightbottom);break;case 16:c&th?(e=0,n=t.leftbottom):(e=t.bottomright,n=0);break;case 17:c&Ql?(e=0,n=t.lefttop):(e=t.bottomright,n=0);break;case 18:c&eh?(e=t.bottomleft,n=0):(e=0,n=t.leftbottom);break;case 19:c&Ql?(e=0,n=t.lefttop):(e=t.bottomleft,n=0);break;case 20:c&Ql?(e=0,n=t.leftbottom):(e=t.topleft,n=1);break;case 21:c&$l?(e=t.topright,n=1):(e=0,n=t.leftbottom);break;case 22:c&Ql?(e=0,n=t.lefttop):(e=t.topleft,n=1);break;case 23:c&$l?(e=t.topright,n=1):(e=0,n=t.lefttop);break;default:return console.log("MarchingSquaresJS-isoBands: edge index out of range!"),console.log(t),null}return"undefined"!=typeof e&&"undefined"!=typeof n&&"undefined"!=typeof s&&"undefined"!=typeof a&&"undefined"!=typeof u||(console.log("MarchingSquaresJS-isoBands: undefined value!"),console.log(t),console.log(e+" "+n+" "+s+" "+a+" "+u)),{p:[e,n],x:s,y:a,o:u}}function Fo(t){var e=[],n=0;return t.cells.forEach(function(t,r){t.forEach(function(t,i){if("undefined"!=typeof t){var o=xp[t.cval](t);"object"==typeof o&&Lo(o)?"object"==typeof o[0]&&Lo(o[0])?"object"==typeof o[0][0]&&Lo(o[0][0])?o.forEach(function(t){t.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=t}):(o.forEach(function(t){t[0]+=i,t[1]+=r}),e[n++]=o):console.log("MarchingSquaresJS-isoBands: bandcell polygon with malformed coordinates"):console.log("MarchingSquaresJS-isoBands: bandcell polygon with null coordinates")}})}),e}function qo(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.zProperty||"elevation",i=n.commonProperties||{},o=n.breaksProperties||[];if(et(t,"Point","Input must contain Points"),!e)throw new Error("breaks is required");if(!Array.isArray(e))throw new Error("breaks is not an Array");if(!I(i))throw new Error("commonProperties is not an Object");if(!Array.isArray(o))throw new Error("breaksProperties is not an Array");var s=No(t,{zProperty:r,flip:!0}),a=Go(s,e,r);a=Bo(a,s,t);var u=a.map(function(t,e){if(o[e]&&!I(o[e]))throw new Error("Each mappedProperty is required to be an Object");var n=Object.assign({},i,o[e]);n[r]=t[r];var s=p(t.groupedRings,n);return s});return c(u)}function Go(t,e,n){for(var r=[],i=1;i<e.length;i++){var o=+e[i-1],s=+e[i],a=So(t,o,s-o),u=ko(a),c=zo(u),l={};l.groupedRings=c,l[n]=o+"-"+s,r.push(l)}return r}function Bo(t,e,n){var r=J(n),i=r[2]-r[0],o=r[3]-r[1],s=r[0],a=r[1],u=e[0].length-1,c=e.length-1,l=i/u,h=o/c,p=function(t){t[0]=t[0]*l+s,t[1]=t[1]*h+a};return t.forEach(function(t){t.groupedRings.forEach(function(t){t.forEach(function(t){t.forEach(p)})})}),t}function ko(t){var e=[],n=[];t.forEach(function(t){var r=ei(o([t]));n.push(r),e.push({ring:t,area:r})}),n.sort(function(t,e){return e-t});var r=[];return n.forEach(function(t){for(var n=0;n<e.length;n++)if(e[n].area===t){r.push(e[n].ring),e.splice(n,1);break}}),r}function zo(t){for(var e=t.map(function(t){return{lrCoordinates:t,grouped:!1}}),n=[];!Xo(e);)for(var r=0;r<e.length;r++)if(!e[r].grouped){var i=[];i.push(e[r].lrCoordinates),e[r].grouped=!0;for(var s=o([e[r].lrCoordinates]),a=r+1;a<e.length;a++)if(!e[a].grouped){var u=o([e[a].lrCoordinates]);jo(u,s)&&(i.push(e[a].lrCoordinates),e[a].grouped=!0)}n.push(i)}return n}function jo(t,e){for(var n=bn(t),r=0;r<n.features.length;r++)if(!ue(n.features[r],e))return!1;return!0}function Xo(t){for(var e=0;e<t.length;e++)if(t[e].grouped===!1)return!1;return!0}function Uo(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.pivot,i=n.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("angle is required");return 0===e?t:(r||(r=xn(t)),i!==!1&&void 0!==i||(t=_e(t)),A(t,function(t){var n=Rr(r,t),i=n+e,o=Ar(r,t),s=K(po(r,o,i));t[0]=s[0],t[1]=s[1]}),t)}function Yo(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.origin,i=n.mutate;if(!t)throw new Error("geojson required");if("number"!=typeof e||0===e)throw new Error("invalid factor");var o=Array.isArray(r)||"object"==typeof r;return i!==!0&&(t=_e(t)),"FeatureCollection"!==t.type||o?Vo(t,e,r):(G(t,function(n,i){t.features[i]=Vo(n,e,r)}),t)}function Vo(t,e,n){var r="Point"===it(t);return n=Ho(t,n),1===e||r?t:(A(t,function(t){var r=Ar(n,t),i=Rr(n,t),o=r*e,s=K(po(n,o,i));t[0]=s[0],t[1]=s[1],3===t.length&&(t[2]*=e)}),t)}function Ho(t,e){if(void 0!==e&&null!==e||(e="centroid"),Array.isArray(e)||"object"==typeof e)return Z(e);var n=t.bbox?t.bbox:J(t),i=n[0],o=n[1],s=n[2],a=n[3];switch(e){case"sw":case"southwest":case"westsouth":case"bottomleft":return r([i,o]);case"se":case"southeast":case"eastsouth":case"bottomright":return r([s,o]);case"nw":case"northwest":case"westnorth":case"topleft":return r([i,a]);case"ne":case"northeast":case"eastnorth":case"topright":return r([s,a]);case"center":return mn(t);case void 0:case null:case"centroid":return xn(t);default:throw new Error("invalid origin")}}function Wo(t,e,n,r){if(r=r||{},!I(r))throw new Error("options is invalid");var i=r.units,o=r.zTranslation,s=r.mutate;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");if(o&&"number"!=typeof o&&isNaN(o))throw new Error("zTranslation is not a number");if(o=void 0!==o?o:0,0===e&&0===o)return t;if(void 0===n||null===n||isNaN(n))throw new Error("direction is required");return e<0&&(e=-e,n=-n),s!==!1&&void 0!==s||(t=_e(t)),A(t,function(t){var r=K(po(t,e,n,{units:i}));t[0]=r[0],t[1]=r[1],o&&3===t.length&&(t[2]+=o)}),t}function Jo(t){var e=t[0],n=t[1];return[n[0]-e[0],n[1]-e[1]]}function Zo(t,e){return t[0]*e[1]-e[0]*t[1]}function Ko(t,e){return[t[0]+e[0],t[1]+e[1]]}function Qo(t,e){return[t[0]-e[0],t[1]-e[1]]}function $o(t,e){return[t*e[0],t*e[1]]}function ts(t,e){var n=t[0],r=Jo(t),i=e[0],o=Jo(e),s=Zo(r,o),a=Qo(i,n),u=Zo(a,o),c=u/s,l=Ko(n,$o(c,r));return l}function es(t,e){var n=Jo(t),r=Jo(e);return 0===Zo(n,r)}function ns(t,e){return!es(t,e)&&ts(t,e)}function rs(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.units;if(!t)throw new Error("geojson is required");if(void 0===e||null===e||isNaN(e))throw new Error("distance is required");var i=it(t),o=t.properties;switch(i){case"LineString":return is(t,e,r);case"MultiLineString":var s=[];return X(t,function(t){s.push(is(t,e,r).geometry.coordinates)}),l(s,o);default:throw new Error("geometry "+i+" is not supported")}}function is(t,e,n){var r=[],i=v(e,n),o=K(t),s=[];return o.forEach(function(t,e){if(e!==o.length-1){var n=os(t,o[e+1],i);if(r.push(n),e>0){var a=r[e-1],u=ns(n,a);u!==!1&&(a[1]=u,n[0]=u),s.push(a[0]),e===o.length-2&&(s.push(n[0]),s.push(n[1]))}2===o.length&&(s.push(n[0]),s.push(n[1]))}}),a(s,t.properties)}function os(t,e,n){var r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),i=t[0]+n*(e[1]-t[1])/r,o=e[0]+n*(e[1]-t[1])/r,s=t[1]+n*(t[0]-e[0])/r,a=e[1]+n*(t[0]-e[0])/r;return[[i,s],[o,a]]}function ss(t,e,n){var r=e[0]-t[0],i=e[1]-t[1],o=n[0]-e[0],s=n[1]-e[1];return Math.sign(r*s-o*i)}function as(t,e){var n=t.geometry.coordinates.map(function(t){return t[0]}),r=t.geometry.coordinates.map(function(t){return t[1]}),i=e.geometry.coordinates.map(function(t){return t[0]}),o=e.geometry.coordinates.map(function(t){return t[1]});return Math.max(null,n)===Math.max(null,i)&&Math.max(null,r)===Math.max(null,o)&&Math.min(null,n)===Math.min(null,i)&&Math.min(null,r)===Math.min(null,o)}function us(t,e){return e.geometry.coordinates[0].every(function(e){return ue(r(e),t)})}function cs(t,e){return t[0]===e[0]&&t[1]===e[1]}function ls(t){if(!t)throw new Error("No geojson passed");if("FeatureCollection"!==t.type&&"GeometryCollection"!==t.type&&"MultiLineString"!==t.type&&"LineString"!==t.type&&"Feature"!==t.type)throw new Error("Invalid input type '"+t.type+"'. Geojson must be FeatureCollection, GeometryCollection, LineString, MultiLineString or Feature")}function hs(t){var e=Np.fromGeoJson(t);e.deleteDangles(),e.deleteCutEdges();var n=[],r=[];return e.getEdgeRings().filter(function(t){return t.isValid()}).forEach(function(t){t.isHole()?n.push(t):r.push(t)}),n.forEach(function(t){bp.findEdgeRingContaining(t,r)&&r.push(t)}),c(r.map(function(t){return t.toPolygon()}))}function ps(t,e){var n;return X(t,function(t){X(e,function(e){return n!==!1&&void(n=fs(t.geometry,e.geometry))})}),n}function fs(t,e){switch(t.type){case"Point":switch(e.type){case"Point":return!ms(t.coordinates,e.coordinates);case"LineString":return!gs(e,t);case"Polygon":return!ue(t,e)}break;case"LineString":switch(e.type){case"Point":return!gs(t,e);case"LineString":return!ds(t,e);case"Polygon":return!ys(e,t)}break;case"Polygon":switch(e.type){case"Point":return!ue(e,t);case"LineString":return!ys(t,e);case"Polygon":return!vs(e,t)}}}function gs(t,e){for(var n=0;n<t.coordinates.length-1;n++)if(_s(t.coordinates[n],t.coordinates[n+1],e.coordinates))return!0;return!1}function ds(t,e){var n=Lr(t,e);return n.features.length>0}function ys(t,e){var n=Lr(e,Ui(t));return n.features.length>0}function vs(t,e){for(var n=0;n<t.coordinates[0].length;n++)if(ue(t.coordinates[0][n],e))return!0;for(var r=0;r<e.coordinates[0].length;r++)if(ue(e.coordinates[0][r],t))return!0;return!1}function _s(t,e,n){var r=n[0]-t[0],i=n[1]-t[1],o=e[0]-t[0],s=e[1]-t[1],a=r*s-i*o;return 0===a&&(Math.abs(o)>=Math.abs(s)?o>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:s>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1])}function ms(t,e){return t[0]===e[0]&&t[1]===e[1]}function xs(t,e){var n=it(t),r=it(e),i=nt(t),o=nt(e),s=K(t),a=K(e);switch(n){case"Point":switch(r){case"Point":return Ls(s,a);default:throw new Error("feature2 "+r+" geometry not supported")}case"MultiPoint":switch(r){case"Point":return Es(i,o);case"MultiPoint":return ws(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"Point":return li(o,i,{ignoreEndVertices:!0});case"LineString":return Ns(i,o);case"MultiPoint":return bs(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"Point":return ue(o,i,{ignoreBoundary:!0});case"LineString":return Cs(i,o);case"Polygon":return Ss(i,o);case"MultiPoint":return Is(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Es(t,e){var n,r=!1;for(n=0;n<t.coordinates.length;n++)if(Ls(t.coordinates[n],e.coordinates)){r=!0;break}return r}function ws(t,e){for(var n=0;n<e.coordinates.length;n++){for(var r=!1,i=0;i<t.coordinates.length;i++)if(Ls(e.coordinates[n],t.coordinates[i])){r=!0;break}if(!r)return!1}return!0}function bs(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(li(e.coordinates[r],t,{ignoreEndVertices:!0})&&(n=!0),!li(e.coordinates[r],t))return!1;return!!n}function Is(t,e){for(var n=0;n<e.coordinates.length;n++)if(!ue(e.coordinates[n],t,{ignoreBoundary:!0}))return!1;return!0}function Ns(t,e){for(var n=!1,r=0;r<e.coordinates.length;r++)if(li({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!0})&&(n=!0),!li({type:"Point",coordinates:e.coordinates[r]},t,{ignoreEndVertices:!1}))return!1;return n}function Cs(t,e){var n=!1,r=0,i=J(t),o=J(e);if(!Ms(i,o))return!1;for(r;r<e.coordinates.length-1;r++){var s=Ps(e.coordinates[r],e.coordinates[r+1]);if(ue({type:"Point",coordinates:s},t,{ignoreBoundary:!0})){n=!0;break}}return n}function Ss(t,e){var n=J(t),r=J(e);if(!Ms(n,r))return!1;for(var i=0;i<e.coordinates[0].length;i++)if(!ue(e.coordinates[0][i],t))return!1;return!0}function Ms(t,e){return!(t[0]>e[0])&&(!(t[2]<e[2])&&(!(t[1]>e[1])&&!(t[3]<e[3])))}function Ls(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ps(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Os(t,e){var n=it(t),r=it(e),i=nt(t),o=nt(e);switch(n){case"MultiPoint":switch(r){case"LineString":return Rs(i,o);case"Polygon":return Ds(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"LineString":switch(r){case"MultiPoint":return Rs(o,i);case"LineString":return Ts(i,o);case"Polygon":return As(i,o);default:throw new Error("feature2 "+r+" geometry not supported")}case"Polygon":switch(r){case"MultiPoint":return Ds(o,i);case"LineString":return As(o,i);default:throw new Error("feature2 "+r+" geometry not supported")}default:throw new Error("feature1 "+n+" geometry not supported")}}function Rs(t,e){for(var n=!1,r=!1,i=t.coordinates.length,o=0;o<i&&!n&&!r;){for(var s=0;s<e.coordinates.length-1;s++){var a=!0;0!==s&&s!==e.coordinates.length-2||(a=!1),Fs(e.coordinates[s],e.coordinates[s+1],t.coordinates[o],a)?n=!0:r=!0}o++}return n&&r}function Ts(t,e){var n=Lr(t,e);if(n.features.length>0)for(var r=0;r<t.coordinates.length-1;r++)for(var i=0;i<e.coordinates.length-1;i++){var o=!0;if(0!==i&&i!==e.coordinates.length-2||(o=!1),Fs(t.coordinates[r],t.coordinates[r+1],e.coordinates[i],o))return!0}return!1}function As(t,e){var n=Lr(t,Ui(e));return n.features.length>0}function Ds(t,e){for(var n=!1,i=!1,o=t.coordinates[0].length,s=0;s<o&&n&&i;)ue(r(t.coordinates[0][s]),e)?n=!0:i=!0,s++;return i&&i}function Fs(t,e,n,r){var i=n[0]-t[0],o=n[1]-t[1],s=e[0]-t[0],a=e[1]-t[1],u=i*a-o*s;return 0===u&&(r?Math.abs(s)>=Math.abs(a)?s>0?t[0]<=n[0]&&n[0]<=e[0]:e[0]<=n[0]&&n[0]<=t[0]:a>0?t[1]<=n[1]&&n[1]<=e[1]:e[1]<=n[1]&&n[1]<=t[1]:Math.abs(s)>=Math.abs(a)?s>0?t[0]<n[0]&&n[0]<e[0]:e[0]<n[0]&&n[0]<t[0]:a>0?t[1]<n[1]&&n[1]<e[1]:e[1]<n[1]&&n[1]<t[1])}function qs(t){return t.coordinates.map(function(e){return{type:t.type.replace("Multi",""),coordinates:e}})}function Gs(t,e){return t.hasOwnProperty("coordinates")?t.coordinates.length===e.coordinates.length:t.length===e.length}function Bs(t,e){return Mp(t,e,{strict:!0})}function ks(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=it(t),r=it(e);if(n!==r)throw new Error("features must be of the same type");if("Point"===n)throw new Error("Point geometry not supported");var i=new Pp({precision:6});if(i.compare(t,e))return!1;var o=0;switch(n){case"MultiPoint":var s=k(t),a=k(e);s.forEach(function(t){a.forEach(function(e){t[0]===e[0]&&t[1]===e[1]&&o++})});break;case"LineString":case"MultiLineString":Y(t,function(t){Y(e,function(e){uo(t,e).features.length&&o++})});break;case"Polygon":case"MultiPolygon":Y(t,function(t){Y(e,function(e){Lr(t,e).features.length&&o++})})}return o>0}function zs(t,e){if(!t)throw new Error("feature1 is required");if(!e)throw new Error("feature2 is required");var n=it(t),r=it(e);if(n!==r)return!1;var i=new Pp({precision:6});return i.compare(Ye(t),Ye(e))}function js(t,e,n){if(n=n||{},"object"!=typeof n)throw new Error("options is invalid");var r=n.minPoints,i=n.units;if(et(t,"Point","Input must contain Points"),null===e||void 0===e)throw new Error("maxDistance is required");if(!(Math.sign(e)>0))throw new Error("Invalid maxDistance");if(!(void 0===r||null===r||Math.sign(r)>0))throw new Error("Invalid minPoints");t=_e(t,!0),r=r||3;var o=new Dp.DBSCAN,s=o.run(k(t),E(e,i),r,ve),a=-1;return s.forEach(function(e){a++,e.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster=a,n.properties.dbscan="core"})}),o.noise.forEach(function(e){var n=t.features[e];n.properties||(n.properties={}),n.properties.cluster?n.properties.dbscan="edge":n.properties.dbscan="noise"}),t}function Xs(t,e,n){n=n||[];for(var r=0;r<t;r++)n[r]=e;return n}function Us(t,e,n,r){var i=[],o=[],s=[],a=[],u=!1,c=r||Xp,l=t.length,h=t[0].length,p=h>0,f=[];if(n)i="kmrand"==n?zp(t,e):"kmpp"==n?jp(t,e):n;else for(var g={};i.length<e;){var d=Math.floor(Math.random()*l);g[d]||(g[d]=!0,i.push(t[d]))}do{Xs(e,0,f);for(var y=0;y<l;y++){for(var v=1/0,_=0,m=0;m<e;m++){var a=p?kp(t[y],i[m]):Math.abs(t[y]-i[m]);a<=v&&(v=a,_=m)}s[y]=_,f[_]++}for(var x=[],o=[],E=0;E<e;E++)x[E]=p?Xs(h,0,x[E]):0,o[E]=i[E];if(p){for(var w=0;w<e;w++)i[w]=[];for(var b=0;b<l;b++)for(var I=s[b],N=x[I],C=t[b],S=0;S<h;S++)N[S]+=C[S];u=!0;for(var M=0;M<e;M++){for(var L=i[M],P=x[M],O=o[M],R=f[M],T=0;T<h;T++)L[T]=P[T]/R||0;if(u)for(var A=0;A<h;A++)if(O[A]!=L[A]){u=!1;break}}}else{for(var D=0;D<l;D++){var F=s[D];x[F]+=t[D]}for(var q=0;q<e;q++)i[q]=x[q]/f[q]||0;u=!0;for(var G=0;G<e;G++)if(o[G]!=i[G]){u=!1;break}}u=u||--c<=0}while(!u);return{it:Xp-c,k:e,idxs:s,centroids:i}}function Ys(t,e){if(e=e||{},"object"!=typeof e)throw new Error("options is invalid");var n=e.numberOfClusters,r=e.mutate;et(t,"Point","Input must contain Points");var i=t.features.length;n=n||Math.round(Math.sqrt(i/2)),n>i&&(n=i),r!==!1&&void 0!==r||(t=_e(t,!0));var o=k(t),s=o.slice(0,n),a=Up(o,n,s),u={};return a.centroids.forEach(function(t,e){u[e]=t}),G(t,function(t,e){var n=a.idxs[e];t.properties.cluster=n,t.properties.centroid=u[n]}),t}function Vs(t,e){if(!t)throw new Error("line1 is required");if(!e)throw new Error("line2 is required");var n=Ws(t,"line1");if("LineString"!==n)throw new Error("line1 must be a LineString");var r=Ws(e,"line2");if("LineString"!==r)throw new Error("line2 must be a LineString");for(var i=Nr(Ye(t)).features,o=Nr(Ye(e)).features,s=0;s<i.length;s++){var a=i[s].geometry.coordinates;if(!o[s])break;var u=o[s].geometry.coordinates;if(!Hs(a,u))return!1}return!0}function Hs(t,e){var n=_(Rr(t[0],t[1])),r=_(Rr(e[0],e[1]));return n===r}function Ws(t,e){if(t.geometry&&t.geometry.type)return t.geometry.type;if(t.type)return t.type;throw new Error("Invalid GeoJSON object for "+e)}function Js(t){for(var e=t,n=[];e.parent;)n.unshift(e),e=e.parent;return n}function Zs(){return new $s(function(t){return t.f})}function Ks(t,e){e=e||{},this.nodes=[],this.diagonal=!!e.diagonal,this.grid=[];for(var n=0;n<t.length;n++){this.grid[n]=[];for(var r=0,i=t[n];r<i.length;r++){var o=new Qs(n,r,i[r]);this.grid[n][r]=o,this.nodes.push(o)}}this.init()}function Qs(t,e,n){this.x=t,this.y=e,this.weight=n}function $s(t){this.content=[],this.scoreFunction=t}function ta(t,n,i){if(i=i||{},!I(i))throw new Error("options is invalid");var o=i.resolution,s=i.minDistance,u=i.obstacles||c([]);if(!t)throw new Error("start is required");if(!n)throw new Error("end is required");if(o&&!b(o)||o<=0)throw new Error("options.resolution must be a number, greater than 0");if(s)throw new Error("options.minDistance is not yet implemented");var l=Z(t),h=Z(n);switch(t=r(l),n=r(h),it(u)){case"FeatureCollection":if(0===u.features.length)return a([l,h]);break;case"Polygon":u=c([e(nt(u))]);break;default:throw new Error("invalid obstacles")}var p=u;p.features.push(t),p.features.push(n);var f=J(Yo(hn(J(p)),1.15));if(!o){var g=ve([f[0],f[1]],[f[2],f[1]],i);o=g/100}p.features.pop(),p.features.pop();for(var d=f[0],y=f[1],v=f[2],_=f[3],m=o/ve([d,y],[v,y],i),x=m*(v-d),E=o/ve([d,y],[d,_],i),w=E*(_-y),N=v-d,C=_-y,S=Math.floor(N/x),M=Math.floor(C/w),L=(N-S*x)/2,P=(C-M*w)/2,O=[],R=[],T=[],A=[],D=1/0,F=1/0,q=_-P,G=0;q>=y;){for(var B=[],k=[],z=d+L,j=0;z<=v;){var X=r([z,q]),U=ea(X,u);B.push(U?0:1),k.push(z+"|"+q);var Y=ve(X,t);!U&&Y<D&&(D=Y,T={x:j,y:G});var V=ve(X,n);!U&&V<F&&(F=V,A={x:j,y:G}),z+=x,j++}R.push(B),O.push(k),q-=w,G++}var H=new Ks(R,{diagonal:!0}),W=H.grid[T.y][T.x],K=H.grid[A.y][A.x],Q=Yp.search(H,W,K),$=[l];return Q.forEach(function(t){var e=O[t.x][t.y].split("|");$.push([+e[0],+e[1]])}),$.push(h),Ye(a($))}function ea(t,e){for(var n=0;n<e.features.length;n++)if(ue(t,e.features[n]))return!0;return!1}function na(t){return t[0]}function ra(t){return t[1]}function ia(){this._=null}function oa(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function sa(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function aa(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ua(t){for(;t.L;)t=t.L;return t}function ca(t,e,n,r){var i=[null,null],o=Kp.push(i)-1;return i.left=t,i.right=e,n&&ha(i,t,e,n),r&&ha(i,e,t,r),Jp[t.index].halfedges.push(o),Jp[e.index].halfedges.push(o),i}function la(t,e,n){var r=[e,n];return r.left=t,r}function ha(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function pa(t,e,n,r,i){var o,s=t[0],a=t[1],u=s[0],c=s[1],l=a[0],h=a[1],p=0,f=1,g=l-u,d=h-c;if(o=e-u,g||!(o>0)){if(o/=g,g<0){if(o<p)return;o<f&&(f=o)}else if(g>0){if(o>f)return;o>p&&(p=o)}if(o=r-u,g||!(o<0)){if(o/=g,g<0){if(o>f)return;o>p&&(p=o)}else if(g>0){if(o<p)return;o<f&&(f=o)}if(o=n-c,d||!(o>0)){if(o/=d,d<0){if(o<p)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>p&&(p=o)}if(o=i-c,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>p&&(p=o)}else if(d>0){if(o<p)return;o<f&&(f=o)}return!(p>0||f<1)||(p>0&&(t[0]=[u+p*g,c+p*d]),f<1&&(t[1]=[u+f*g,c+f*d]),!0)}}}}}function fa(t,e,n,r,i){var o=t[1];if(o)return!0;var s,a,u=t[0],c=t.left,l=t.right,h=c[0],p=c[1],f=l[0],g=l[1],d=(h+f)/2,y=(p+g)/2;if(g===p){if(d<e||d>=r)return;if(h>f){if(u){if(u[1]>=i)return}else u=[d,n];o=[d,i]}else{if(u){if(u[1]<n)return}else u=[d,i];o=[d,n]}}else if(s=(h-f)/(g-p),a=y-s*d,s<-1||s>1)if(h>f){if(u){if(u[1]>=i)return}else u=[(n-a)/s,n];o=[(i-a)/s,i]}else{if(u){if(u[1]<n)return}else u=[(i-a)/s,i];o=[(n-a)/s,n]}else if(p<g){if(u){if(u[0]>=r)return}else u=[e,s*e+a];o=[r,s*r+a]}else{if(u){if(u[0]<e)return}else u=[r,s*r+a];o=[e,s*e+a]}return t[0]=u,t[1]=o,!0}function ga(t,e,n,r){for(var i,o=Kp.length;o--;)fa(i=Kp[o],t,e,n,r)&&pa(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>tf||Math.abs(i[0][1]-i[1][1])>tf)||delete Kp[o]}function da(t){return Jp[t.index]={site:t,halfedges:[]}}function ya(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function va(t,e){return e[+(e.left!==t.site)]}function _a(t,e){return e[+(e.left===t.site)]}function ma(){for(var t,e,n,r,i=0,o=Jp.length;i<o;++i)if((t=Jp[i])&&(r=(e=t.halfedges).length)){var s=new Array(r),a=new Array(r);for(n=0;n<r;++n)s[n]=n,a[n]=ya(t,Kp[e[n]]);for(s.sort(function(t,e){return a[e]-a[t]}),n=0;n<r;++n)a[n]=e[s[n]];for(n=0;n<r;++n)e[n]=a[n]}}function xa(t,e,n,r){var i,o,s,a,u,c,l,h,p,f,g,d,y=Jp.length,v=!0;for(i=0;i<y;++i)if(o=Jp[i]){for(s=o.site,u=o.halfedges,a=u.length;a--;)Kp[u[a]]||u.splice(a,1);for(a=0,c=u.length;a<c;)f=_a(o,Kp[u[a]]),g=f[0],d=f[1],l=va(o,Kp[u[++a%c]]),h=l[0],p=l[1],(Math.abs(g-h)>tf||Math.abs(d-p)>tf)&&(u.splice(a,0,Kp.push(la(s,f,Math.abs(g-t)<tf&&r-d>tf?[t,Math.abs(h-t)<tf?p:r]:Math.abs(d-r)<tf&&n-g>tf?[Math.abs(p-r)<tf?h:n,r]:Math.abs(g-n)<tf&&d-e>tf?[n,Math.abs(h-n)<tf?p:e]:Math.abs(d-e)<tf&&g-t>tf?[Math.abs(p-e)<tf?h:t,e]:null))-1),++c);c&&(v=!1)}if(v){var _,m,x,E=1/0;for(i=0,v=null;i<y;++i)(o=Jp[i])&&(s=o.site,_=s[0]-t,m=s[1]-e,x=_*_+m*m,x<E&&(E=x,v=o));if(v){var w=[t,e],b=[t,r],I=[n,r],N=[n,e];v.halfedges.push(Kp.push(la(s=v.site,w,b))-1,Kp.push(la(s,b,I))-1,Kp.push(la(s,I,N))-1,Kp.push(la(s,N,w))-1)}}for(i=0;i<y;++i)(o=Jp[i])&&(o.halfedges.length||delete Jp[i])}function Ea(){oa(this),this.x=this.y=this.arc=this.site=this.cy=null}function wa(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var s=i[0],a=i[1],u=r[0]-s,c=r[1]-a,l=o[0]-s,h=o[1]-a,p=2*(u*h-c*l);if(!(p>=-ef)){var f=u*u+c*c,g=l*l+h*h,d=(h*f-c*g)/p,y=(u*g-l*f)/p,v=Qp.pop()||new Ea;v.arc=t,v.site=i,v.x=d+s,v.y=(v.cy=y+a)+Math.sqrt(d*d+y*y),t.circle=v;for(var _=null,m=Zp._;m;)if(v.y<m.y||v.y===m.y&&v.x<=m.x){if(!m.L){_=m.P;break}m=m.L}else{if(!m.R){_=m;break}m=m.R}Zp.insert(_,v),_||(Hp=v)}}}}function ba(t){var e=t.circle;e&&(e.P||(Hp=e.N),Zp.remove(e),Qp.push(e),oa(e),t.circle=null)}function Ia(){oa(this),this.edge=this.site=this.circle=null}function Na(t){var e=$p.pop()||new Ia;return e.site=t,e}function Ca(t){ba(t),Wp.remove(t),$p.push(t),oa(t)}function Sa(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,s=t.N,a=[t];Ca(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<tf&&Math.abs(r-u.circle.cy)<tf;)o=u.P,a.unshift(u),Ca(u),u=o;a.unshift(u),ba(u);for(var c=s;c.circle&&Math.abs(n-c.circle.x)<tf&&Math.abs(r-c.circle.cy)<tf;)s=c.N,a.push(c),Ca(c),c=s;a.push(c),ba(c);var l,h=a.length;for(l=1;l<h;++l)c=a[l],u=a[l-1],ha(c.edge,u.site,c.site,i);u=a[0],c=a[h-1],c.edge=ca(u.site,c.site,null,i),wa(u),wa(c)}function Ma(t){for(var e,n,r,i,o=t[0],s=t[1],a=Wp._;a;)if(r=La(a,s)-o,r>tf)a=a.L;else{if(i=o-Pa(a,s),!(i>tf)){r>-tf?(e=a.P,n=a):i>-tf?(e=a,n=a.N):e=n=a;break}if(!a.R){e=a;break}a=a.R}da(t);var u=Na(t);if(Wp.insert(e,u),e||n){if(e===n)return ba(e),n=Na(e.site),Wp.insert(u,n),u.edge=n.edge=ca(e.site,u.site),wa(e),void wa(n);if(!n)return void(u.edge=ca(e.site,u.site));ba(e),ba(n);var c=e.site,l=c[0],h=c[1],p=t[0]-l,f=t[1]-h,g=n.site,d=g[0]-l,y=g[1]-h,v=2*(p*y-f*d),_=p*p+f*f,m=d*d+y*y,x=[(y*_-f*m)/v+l,(p*m-d*_)/v+h];ha(n.edge,c,g,x),u.edge=ca(c,t,null,x),n.edge=ca(t,g,null,x),wa(e),wa(n)}}function La(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var s=t.P;if(!s)return-(1/0);n=s.site;var a=n[0],u=n[1],c=u-e;if(!c)return a;var l=a-r,h=1/o-1/c,p=l/c;return h?(-p+Math.sqrt(p*p-2*h*(l*l/(-2*c)-u+c/2+i-o/2)))/h+r:(r+a)/2}function Pa(t,e){var n=t.N;if(n)return La(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function Oa(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function Ra(t,e){return e[1]-t[1]||e[0]-t[0]}function Ta(t,e){var n,r,i,o=t.sort(Ra).pop();for(Kp=[],Jp=new Array(t.length),Wp=new ia,Zp=new ia;;)if(i=Hp,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(Ma(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;Sa(i.arc)}if(ma(),e){var s=+e[0][0],a=+e[0][1],u=+e[1][0],c=+e[1][1];ga(s,a,u,c),xa(s,a,u,c)}this.edges=Kp,this.cells=Jp,Wp=Zp=Kp=Jp=null}function Aa(t){return t=t.slice(),t.push(t[0]),o([t])}function Da(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox||[-180,-85,180,85];if(!t)throw new Error("points is required");if(!Array.isArray(n))throw new Error("bbox is invalid");return et(t,"Point","points"),c(nf().x(function(t){return t.geometry.coordinates[0]}).y(function(t){return t.geometry.coordinates[1]}).extent([[n[0],n[1]],[n[2],n[3]]]).polygons(t.features).map(Aa))}function Fa(t,e,n,r){r=r||{};var i=r.steps||64,s=r.units||"kilometers",a=r.angle||0,u=r.pivot||t,c=r.properties||t.properties||{};if(!t)throw new Error("center is required");if(!e)throw new Error("xSemiAxis is required");if(!n)throw new Error("ySemiAxis is required");if(!I(r))throw new Error("options must be an object");if(!b(i))throw new Error("steps must be a number");if(!b(a))throw new Error("angle must be a number");var l=Z(t);if("degrees"===s)var h=x(a);else e=po(t,e,90,{units:s}),n=po(t,n,0,{units:s}),e=Z(e)[0]-l[0],n=Z(n)[1]-l[1];for(var p=[],f=0;f<i;f+=1){var g=f*-360/i,d=e*n/Math.sqrt(Math.pow(n,2)+Math.pow(e,2)*Math.pow(qa(g),2)),y=e*n/Math.sqrt(Math.pow(e,2)+Math.pow(n,2)/Math.pow(qa(g),2));if(g<-90&&g>=-270&&(d=-d),g<-180&&g>=-360&&(y=-y),"degrees"===s){var v=d*Math.cos(h)+y*Math.sin(h),_=y*Math.cos(h)-d*Math.sin(h);d=v,y=_}p.push([d+l[0],y+l[1]])}return p.push(p[0]),"degrees"===s?o([p],c):Uo(o([p],c),a,{pivot:u})}function qa(t){var e=t*Math.PI/180;return Math.tan(e)}function Ga(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.properties,i=e.weight;if(!t)throw new Error("geojson is required");var o=0,s=0,a=0;return z(t,function(t,e,n){var r=n[i];if(r=void 0===r||null===r?1:r,!b(r))throw new Error("weight value must be a number for feature index "+e);r=Number(r),r>0&&A(t,function(t){o+=t[0]*r,s+=t[1]*r,a+=r})}),r([o/a,s/a],n)}function Ba(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.counter||10;if(!b(n))throw new Error("counter must be a number");var r=e.weight,i=Ga(t,{weight:e.weight}),o=c([]);return G(t,function(t){o.features.push(xn(t,{weight:t.properties[r]}))}),o.properties={tolerance:e.tolerance,medianCandidates:[]},ka(i.geometry.coordinates,[0,0],o,n)}function ka(t,e,n,i){var o=n.properties.tolerance||.001,s=0,a=0,u=0,c=0;if(G(n,function(e){var n=e.properties.weight,r=void 0===n||null===n?1:n;if(r=Number(r),!b(r))throw new Error("weight value must be a number");if(r>0){c+=1;var i=r*ve(e,t);0===i&&(i=1);var o=r/i;s+=e.geometry.coordinates[0]*o,a+=e.geometry.coordinates[1]*o,u+=o}}),c<1)throw new Error("no features to measure");var l=s/u,h=a/u;return 1===c||0===i||Math.abs(l-e[0])<o&&Math.abs(h-e[1])<o?r([l,h],{medianCandidates:n.properties.medianCandidates}):(n.properties.medianCandidates.push([l,h]),ka([l,h],t,n,i-1))}function za(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.steps||64,r=e.weight,i=e.properties||{};if(!b(n))throw new Error("steps must be a number");if(!I(i))throw new Error("properties must be a number");var o=k(t).length,s=Ga(t,{weight:r}),a=0,u=0,l=0;G(t,function(t){var e=t.properties[r]||1,n=ja(K(t),K(s));a+=Math.pow(n.x,2)*e,u+=Math.pow(n.y,2)*e,l+=n.x*n.y*e});var h=a-u,p=Math.sqrt(Math.pow(h,2)+4*Math.pow(l,2)),f=2*l,g=Math.atan((h+p)/f),d=180*g/Math.PI,y=0,v=0,_=0;G(t,function(t){var e=t.properties[r]||1,n=ja(K(t),K(s));y+=Math.pow(n.x*Math.cos(g)-n.y*Math.sin(g),2)*e,v+=Math.pow(n.x*Math.sin(g)+n.y*Math.cos(g),2)*e,_+=e});var m=Math.sqrt(2*y/_),x=Math.sqrt(2*v/_),E=Fa(s,m,x,{units:"degrees",angle:d,steps:n,properties:i}),w=he(t,c([E])),N={meanCenterCoordinates:K(s),semiMajorAxis:m,semiMinorAxis:x,numberOfFeatures:o,angle:d,percentageWithinEllipse:100*k(w).length/o};return E.properties.standardDeviationalEllipse=N,E}function ja(t,e){return{x:t[0]-e[0],y:t[1]-e[1]}}function Xa(t){if(I(t)&&(t=t.bbox),t&&!Array.isArray(t))throw new Error("bbox is invalid");return t?Ka(t):[Ja(),Za()]}function Ua(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox;void 0!==t&&null!==t||(t=1);for(var i=[],o=0;o<t;o++)i.push(r(Xa(n)));
return c(i)}function Ya(t,e){function n(t,e,n){n[e]=e>0?t+n[e-1]:t}function r(t){t=2*t*Math.PI/p[p.length-1];var e=Math.random();h.push([e*a*Math.sin(t),e*a*Math.cos(t)])}if(e=e||{},!I(e))throw new Error("options is invalid");var i=e.bbox,s=e.num_vertices,a=e.max_radial_length;void 0!==t&&null!==t||(t=1),b(s)||(s=10),b(a)||(a=10);for(var u=[],l=0;l<t;l++){var h=[],p=Array.apply(null,new Array(s+1)).map(Math.random);p.forEach(n),p.forEach(r),h[h.length-1]=h[0],h=h.map(Ha(Xa(i))),u.push(o([h]))}return c(u)}function Va(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.bbox,r=e.num_vertices,i=e.max_length,o=e.max_rotation;void 0!==t&&null!==t||(t=1),(!b(r)||r<2)&&(r=10),b(i)||(i=1e-4),b(o)||(o=Math.PI/8);for(var s=[],u=0;u<t;u++){for(var l=Xa(n),h=[l],p=0;p<r-1;p++){var f=0===p?2*Math.random()*Math.PI:Math.tan((h[p][1]-h[p-1][1])/(h[p][0]-h[p-1][0])),g=f+(Math.random()-.5)*o*2,d=Math.random()*i;h.push([h[p][0]+d*Math.cos(g),h[p][1]+d*Math.sin(g)])}s.push(a(h))}return c(s)}function Ha(t){return function(e){return[e[0]+t[0],e[1]+t[1]]}}function Wa(){return Math.random()-.5}function Ja(){return 360*Wa()}function Za(){return 180*Wa()}function Ka(t){return[Math.random()*(t[2]-t[0])+t[0],Math.random()*(t[3]-t[1])+t[1]]}function Qa(t,e){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("filter is required");var n=[];return G(t,function(t){nu(t.properties,e)&&n.push(t)}),c(n)}function $a(t,e,n){if(!t)throw new Error("geojson is required");if("FeatureCollection"!==t.type)throw new Error("geojson must be a FeatureCollection");if(void 0===e||null===e)throw new Error("property is required");for(var r=eu(t,e),i=Object.keys(r),o=0;o<i.length;o++){for(var s=i[o],a=r[s],u=[],l=0;l<a.length;l++)u.push(t.features[a[l]]);n(c(u),s,o)}}function tu(t,e,n,r){var i=r;return $a(t,e,function(t,e,o){i=0===o&&void 0===r?t:n(i,t,e,o)}),i}function eu(t,e){var n={};return G(t,function(t,r){var i=t.properties||{};if(i.hasOwnProperty(e)){var o=i[e];n.hasOwnProperty(o)?n[o].push(r):n[o]=[r]}}),n}function nu(t,e){if(void 0===t)return!1;var n=typeof e;if("number"===n||"string"===n)return t.hasOwnProperty(e);if(Array.isArray(e)){for(var r=0;r<e.length;r++)if(!nu(t,e[r]))return!1;return!0}return ru(t,e)}function ru(t,e){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(t[i]!==e[i])return!1}return!0}function iu(t,e){if(!e)return{};if(!e.length)return{};for(var n={},r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function ou(){}function su(t){this.message=t||""}function au(t){this.message=t||""}function uu(){}function cu(t){return null===t?Ig:t.color}function lu(t){return null===t?null:t.parent}function hu(t,e){null!==t&&(t.color=e)}function pu(t){return null===t?null:t.left}function fu(t){return null===t?null:t.right}function gu(){this.root_=null,this.size_=0}function du(){}function yu(){this.array_=[],arguments[0]instanceof cg&&this.addAll(arguments[0])}function vu(){}function _u(){}function mu(){}function xu(){}function Eu(){}function wu(t){this.message=t||""}function bu(){this.array_=[]}function Iu(t,n){var r=nt(t),i=nt(n),o=t.properties||{};if(r=Nu(r),i=Nu(i),!r)return null;if(!i)return e(r,o);var s=new dd,a=s.read(r),u=s.read(i),c=v_.difference(a,u);if(c.isEmpty())return null;var l=new yd,h=l.write(c);return e(h,o)}function Nu(t){switch(t.type){case"Polygon":return ei(t)>1?t:null;case"MultiPolygon":var e=[];if(X(t,function(t){ei(t)>1&&e.push(t.geometry.coordinates)}),e.length)return{type:"MultiPolygon",coordinates:e}}}function Cu(){this.reset()}function Su(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function Mu(t){return t>1?0:t<-1?P_:Math.acos(t)}function Lu(t){return t>1?O_:t<-1?-O_:Math.asin(t)}function Pu(){}function Ou(t,e){t&&V_.hasOwnProperty(t.type)&&V_[t.type](t,e)}function Ru(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Tu(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Ru(t[n],e,1);e.polygonEnd()}function Au(t){return[G_(t[1],t[0]),Lu(t[2])]}function Du(t){var e=t[0],n=t[1],r=B_(n);return[r*B_(e),r*j_(e),j_(n)]}function Fu(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function qu(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Gu(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bu(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ku(t){var e=X_(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zu(t,e){return[t>P_?t-T_:t<-P_?t+T_:t,e]}function ju(t,e,n){return(t%=T_)?e||n?W_(Uu(t),Yu(e,n)):Uu(t):e||n?Yu(e,n):zu}function Xu(t){return function(e,n){return e+=t,[e>P_?e-T_:e<-P_?e+T_:e,n]}}function Uu(t){var e=Xu(t);return e.invert=Xu(-t),e}function Yu(t,e){function n(t,e){var n=B_(e),a=B_(t)*n,u=j_(t)*n,c=j_(e),l=c*r+a*i;return[G_(u*o-l*s,a*r-c*i),Lu(l*o+u*s)]}var r=B_(t),i=j_(t),o=B_(e),s=j_(e);return n.invert=function(t,e){var n=B_(e),a=B_(t)*n,u=j_(t)*n,c=j_(e),l=c*o-u*s;return[G_(u*o+c*s,a*r+l*i),Lu(l*r-a*i)]},n}function Vu(t,e,n,r,i,o){if(n){var s=B_(e),a=j_(e),u=r*n;null==i?(i=e+r*T_,o=e-u/2):(i=Hu(s,i),o=Hu(s,o),(r>0?i<o:i>o)&&(i+=r*T_));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Au([s,-a*B_(l),-a*j_(l)]),t.point(c[0],c[1])}}function Hu(t,e){e=Du(e),e[0]-=t,ku(e);var n=Mu(-e[1]);return((-e[2]<0?-n:n)+T_-L_)%T_}function Wu(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ju(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Zu(t){return function(e,n){return tm(t(e),n)}}function Ku(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,a,c){var l=0,h=0;if(null==i||(l=s(i,a))!==(h=s(o,a))||u(i,o)<0^a>0){do c.point(0===l||3===l?t:n,l>1?r:e);while((l=(l+a+4)%4)!==h)}else c.point(o[0],o[1])}function s(r,i){return F_(r[0]-t)<L_?i>0?0:3:F_(r[0]-n)<L_?i>0?2:1:F_(r[1]-e)<L_?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function u(t,e){i(t,e)&&C.point(t,e)}function c(){for(var e=0,n=0,i=y.length;n<i;++n)for(var o,s,a=y[n],u=1,c=a.length,l=a[0],h=l[0],p=l[1];u<c;++u)o=h,s=p,l=a[u],h=l[0],p=l[1],s<=r?p>r&&(h-o)*(r-s)>(p-s)*(t-o)&&++e:p<=r&&(h-o)*(r-s)<(p-s)*(t-o)&&--e;return e}function l(){C=S,d=[],y=[],N=!0}function h(){var t=c(),e=N&&t,n=(d=nm(d)).length;(e||n)&&(s.polygonStart(),e&&(s.lineStart(),o(null,null,1,s),s.lineEnd()),n&&$_(d,a,t,o,s),s.polygonEnd()),C=s,d=y=v=null}function p(){M.point=g,y&&y.push(v=[]),I=!0,b=!1,E=w=NaN}function f(){d&&(g(_,m),x&&b&&S.rejoin(),d.push(S.result())),M.point=u,b&&C.lineEnd()}function g(o,s){var a=i(o,s);if(y&&v.push([o,s]),I)_=o,m=s,x=a,I=!1,a&&(C.lineStart(),C.point(o,s));else if(a&&b)C.point(o,s);else{var u=[E=Math.max(im,Math.min(rm,E)),w=Math.max(im,Math.min(rm,w))],c=[o=Math.max(im,Math.min(rm,o)),s=Math.max(im,Math.min(rm,s))];K_(u,c,t,e,n,r)?(b||(C.lineStart(),C.point(u[0],u[1])),C.point(c[0],c[1]),a||C.lineEnd(),N=!1):a&&(C.lineStart(),C.point(o,s),N=!1)}E=o,w=s,b=a}var d,y,v,_,m,x,E,w,b,I,N,C=s,S=Z_(),M={point:u,lineStart:p,lineEnd:f,polygonStart:l,polygonEnd:h};return M}}function Qu(t,e){t<um&&(um=t),t>lm&&(lm=t),e<cm&&(cm=e),e>hm&&(hm=e)}function $u(t){return t.length>1}function tc(t,e){return((t=t.x)[0]<0?t[1]-O_-L_:O_-t[1])-((e=e.x)[0]<0?e[1]-O_-L_:O_-e[1])}function ec(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var a=o>0?P_:-P_,u=F_(o-n);F_(u-P_)<L_?(t.point(n,r=(r+s)/2>0?O_:-O_),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),t.point(o,r),e=0):i!==a&&u>=P_&&(F_(n-i)<L_&&(n-=i*L_),F_(o-a)<L_&&(o-=a*L_),r=nc(n,r,o,s),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(a,r),e=0),t.point(n=o,r=s),i=a},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function nc(t,e,n,r){var i,o,s=j_(t-n);return F_(s)>L_?q_((j_(e)*(o=B_(r))*j_(n)-j_(r)*(i=B_(e))*j_(t))/(i*o*s)):(e+r)/2}function rc(t,e,n,r){var i;if(null==t)i=n*O_,r.point(-P_,i),r.point(0,i),r.point(P_,i),r.point(P_,0),r.point(P_,-i),r.point(0,-i),r.point(-P_,-i),r.point(-P_,0),r.point(-P_,i);else if(F_(t[0]-e[0])>L_){var o=t[0]<e[0]?P_:-P_;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function ic(t){return function(e){var n=new oc;for(var r in t)n[r]=t[r];return n.stream=e,n}}function oc(){}function sc(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),H_(n,t.stream(pm));var s=pm.result(),a=Math.min(r/(s[1][0]-s[0][0]),i/(s[1][1]-s[0][1])),u=+e[0][0]+(r-a*(s[1][0]+s[0][0]))/2,c=+e[0][1]+(i-a*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*a).translate([u,c])}function ac(t,e,n){return sc(t,[[0,0],e],n)}function uc(t){return ic({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function cc(t,e){function n(r,i,o,s,a,u,c,l,h,p,f,g,d,y){var v=c-r,_=l-i,m=v*v+_*_;if(m>4*e&&d--){var x=s+p,E=a+f,w=u+g,b=X_(x*x+E*E+w*w),I=Lu(w/=b),N=F_(F_(w)-1)<L_||F_(o-h)<L_?(o+h)/2:G_(E,x),C=t(N,I),S=C[0],M=C[1],L=S-r,P=M-i,O=_*L-v*P;(O*O/m>e||F_((v*L+_*P)/m-.5)>.3||s*p+a*f+u*g<vm)&&(n(r,i,o,s,a,u,S,M,N,x/=b,E/=b,w,d,y),y.point(S,M),n(S,M,N,x,E,w,c,l,h,p,f,g,d,y))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){v=NaN,w.point=o,e.lineStart()}function o(r,i){var o=Du([r,i]),s=t(r,i);n(v,_,y,m,x,E,v=s[0],_=s[1],y=r,m=o[0],x=o[1],E=o[2],ym,e),e.point(v,_)}function s(){w.point=r,e.lineEnd()}function a(){i(),w.point=u,w.lineEnd=c}function u(t,e){o(l=t,e),h=v,p=_,f=m,g=x,d=E,w.point=o}function c(){n(v,_,y,m,x,E,h,p,l,f,g,d,ym,e),w.lineEnd=s,s()}var l,h,p,f,g,d,y,v,_,m,x,E,w={point:r,lineStart:i,lineEnd:s,polygonStart:function(){e.polygonStart(),w.lineStart=a},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}function lc(t){return hc(function(){return t})()}function hc(t){function e(t){return t=l(t[0]*D_,t[1]*D_),[t[0]*y+a,u-t[1]*y]}function n(t){return t=l.invert((t[0]-a)/y,(u-t[1])/y),t&&[t[0]*A_,t[1]*A_]}function r(t,e){return t=s(t,e),[t[0]*y+a,u-t[1]*y]}function i(){l=W_(c=ju(E,w,b),s);var t=s(m,x);return a=v-t[0]*y,u=_+t[1]*y,o()}function o(){return g=d=null,e}var s,a,u,c,l,h,p,f,g,d,y=150,v=480,_=250,m=0,x=0,E=0,w=0,b=0,I=null,N=gm,C=null,S=am,M=.5,L=_m(r,M);return e.stream=function(t){return g&&d===t?g:g=mm(N(c,L(S(d=t))))},e.clipAngle=function(t){return arguments.length?(N=+t?dm(I=t*D_,6*D_):(I=null,gm),o()):I*A_},e.clipExtent=function(t){return arguments.length?(S=null==t?(C=h=p=f=null,am):Ku(C=+t[0][0],h=+t[0][1],p=+t[1][0],f=+t[1][1]),o()):null==C?null:[[C,h],[p,f]]},e.scale=function(t){return arguments.length?(y=+t,i()):y},e.translate=function(t){return arguments.length?(v=+t[0],_=+t[1],i()):[v,_]},e.center=function(t){return arguments.length?(m=t[0]%360*D_,x=t[1]%360*D_,i()):[m*A_,x*A_]},e.rotate=function(t){return arguments.length?(E=t[0]%360*D_,w=t[1]%360*D_,b=t.length>2?t[2]%360*D_:0,i()):[E*A_,w*A_,b*A_]},e.precision=function(t){return arguments.length?(L=_m(r,M=t*t),o()):X_(M)},e.fitExtent=function(t,n){return sc(e,t,n)},e.fitSize=function(t,n){return ac(e,t,n)},function(){return s=t.apply(this,arguments),e.invert=s.invert&&n,i()}}function pc(t,e){return[t,z_(U_((O_+e)/2))]}function fc(t){function e(){var e=P_*a(),s=o(J_(o.rotate()).invert([0,0]));return c(null==l?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===pc?[[Math.max(s[0]-e,l),n],[Math.min(s[0]+e,r),i]]:[[l,Math.max(s[1]-e,n)],[r,Math.min(s[1]+e,i)]])}var n,r,i,o=lc(t),s=o.center,a=o.scale,u=o.translate,c=o.clipExtent,l=null;return o.scale=function(t){return arguments.length?(a(t),e()):a()},o.translate=function(t){return arguments.length?(u(t),e()):u()},o.center=function(t){return arguments.length?(s(t),e()):s()},o.clipExtent=function(t){return arguments.length?(null==t?l=n=r=i=null:(l=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==l?null:[[l,n],[r,i]]},e()}function gc(t,e){return[z_(U_((O_+e)/2)),-t]}function dc(t,e,n){n=n||{};var r=n.units,i=n.steps||64;if(!t)throw new Error("geojson is required");if("object"!=typeof n)throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===e)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return z(t,function(t){var n=yc(t,e,r,i);n&&o.push(n)}),c(o);case"FeatureCollection":return G(t,function(t){var n=yc(t,e,r,i);n&&G(n,function(t){t&&o.push(t)})}),c(o)}return yc(t,e,r,i)}function yc(t,n,r,i){var o=t.properties||{},s="Feature"===t.type?t.geometry:t;if("GeometryCollection"===s.type){var a=[];return z(t,function(t){var e=yc(t,n,r,i);e&&a.push(e)}),c(a)}var u,l=J(t),h=l[1]>50&&l[3]>50;u=h?{type:s.type,coordinates:_c(s.coordinates,xc(s))}:Fr(s);var p=new dd,f=p.read(u),g=d(y(n,r),"meters"),v=sv.bufferOp(f,g),_=new yd;if(v=_.write(v),!vc(v.coordinates)){var m;return m=h?{type:v.type,coordinates:mc(v.coordinates,xc(s))}:qr(v),m.geometry?m:e(m,o)}}function vc(t){return Array.isArray(t[0])?vc(t[0]):isNaN(t[0])}function _c(t,e){return"object"!=typeof t[0]?e(t):t.map(function(t){return _c(t,e)})}function mc(t,e){return"object"!=typeof t[0]?e.invert(t):t.map(function(t){return mc(t,e)})}function xc(t){var e=mn(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return xm().center(e).rotate(n).scale(kc)}function Ec(){for(var t=new dd,e=t.read(JSON.stringify(arguments[0].geometry)),n=1;n<arguments.length;n++)e=C_.union(e,t.read(JSON.stringify(arguments[n].geometry)));var r=new yd;return e=r.write(e),{type:"Feature",geometry:e,properties:arguments[0].properties}}function wc(t,n){var r=nt(t),i=nt(n);if(Ye(Ii(i,{precision:4})).coordinates[0].length<4)return null;if(Ye(Ii(r,{precision:4})).coordinates[0].length<4)return null;var o=new dd,s=o.read(Ii(r)),a=o.read(Ii(i)),u=v_.intersection(s,a);if(u.isEmpty())return null;var c=new yd,l=c.write(u);return e(l)}function bc(t,e,n){var r,i;if(!Array.isArray(e))throw new Error("Get closest expects an array as second argument");return e.forEach(function(e,o){var s=n(e,t);s>=0&&("undefined"==typeof i||s<i)&&(i=s,r=o)}),r}function Ic(t,e){return bc(t,e,function(t,e){return t-e})}function Nc(t,e){if(e=e||{},!I(e))throw new Error("options is invalid");var n=e.propertyName;et(t,"Polygon","dissolve");var r=_e(t),i=r.features,o=[];i.forEach(function(t,e){t.properties.origIndexPosition=e});var s=wr();s.load(r);for(var a in i){var u=i[a],c=!1;if(s.search(u).features.forEach(function(t){u=i[a];var e=t.properties.origIndexPosition;if(o.length>0&&0!==e)if(e>o[o.length-1])e-=o.length;else{var r=Ic(e,o);0!==r&&(e-=r)}if(e!==+a){var l=i[e];l&&u&&(void 0!==n&&l.properties[n]!==u.properties[n]||ks(u,l)&&Cc(u,l)&&(i[a]=Ec(u,l),o.push(t.properties.origIndexPosition),o.sort(function(t,e){return t-e}),s.remove(t),i.splice(e,1),u.properties.origIndexPosition=a,s.remove(u,function(t,e){return t.properties.origIndexPosition===e.properties.origIndexPosition}),c=!0))}}),c){if(!u)continue;u.properties.origIndexPosition=a,s.insert(u),a--}}return i.forEach(function(t){delete t.properties.origIndexPosition,delete t.bbox}),r}function Cc(t,e){var n=a(k(t)),r=a(k(e)),i=Lr(n,r).features;return i.length>0}function Sc(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.properties||{},i=n.triangles,o=n.mask;if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(o&&["Polygon","MultiPolygon"].indexOf(it(o))===-1)throw new Error("options.mask must be a (Multi)Polygon");var s=t[0],a=t[1],u=t[2],l=t[3],h=(a+l)/2,p=(s+u)/2,f=2*e/ve([s,h],[u,h],n),g=f*(u-s),d=2*e/ve([p,a],[p,l],n),y=d*(l-a),v=g/2,_=2*v,m=Math.sqrt(3)/2*y,x=u-s,E=l-a,w=.75*_,N=m,C=(x-_)/(_-v/2),S=Math.floor(C),M=(S*w-v/2-x)/2-v/2+w/2,L=Math.floor((E-m)/m),P=(E-L*m)/2,O=L*m-E>m/2;O&&(P-=m/4);for(var R=[],T=[],A=0;A<6;A++){var D=2*Math.PI/6*A;R.push(Math.cos(D)),T.push(Math.sin(D))}for(var F=[],q=0;q<=S;q++)for(var G=0;G<=L;G++){var B=q%2===1;if(!(0===G&&B||0===G&&O)){var k=q*w+s-M,z=G*N+a+P;if(B&&(z-=m/2),i===!0)Lc([k,z],g/2,y/2,r,R,T).forEach(function(t){o?wc(o,t)&&F.push(t):F.push(t)});else{var j=Mc([k,z],g/2,y/2,r,R,T);o?wc(o,j)&&F.push(j):F.push(j)}}}return c(F)}function Mc(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=t[0]+e*i[u],l=t[1]+n*s[u];a.push([c,l])}return a.push(a[0].slice()),o([a],r)}function Lc(t,e,n,r,i,s){for(var a=[],u=0;u<6;u++){var c=[];c.push(t),c.push([t[0]+e*i[u],t[1]+n*s[u]]),c.push([t[0]+e*i[(u+1)%6],t[1]+n*s[(u+1)%6]]),c.push(t),a.push(o([c],r))}return a}function Pc(t,e){var n=Tc(e),r=Rc(t),i=r[0],o=r[1];i=Ac(i),o=Ac(o);var s=Oc(n,i,o);return s}function Oc(t,e,n){var r=[];return r.push(t.geometry.coordinates[0]),X(e,function(t){r.push(t.geometry.coordinates[0])}),X(n,function(t){r.push(t.geometry.coordinates[0])}),o(r)}function Rc(t){var e=[],n=[];return X(t,function(t){var r=t.geometry.coordinates,i=r[0],s=r.slice(1);e.push(o([i])),s.forEach(function(t){n.push(o([t]))})}),[c(e),c(n)]}function Tc(t){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],n=t&&t.geometry.coordinates||e;return o(n)}function Ac(t){if(t.features.length<=1)return t;var e=Fc(t),n=[],r={};return X(t,function(t,i){if(r[i])return!0;for(e.remove({index:i},Dc),r[i]=!0;;){var o=J(t),s=e.search({minX:o[0],minY:o[1],maxX:o[2],maxY:o[3]});if(s.length>0){var a=s.map(function(t){return r[t.index]=!0,e.remove({index:t.index},Dc),t.geojson});a.push(t),t=Ec.apply(this,a)}if(0===s.length)break}n.push(t)}),c(n)}function Dc(t,e){return t.index===e.index}function Fc(t){var e=Zc(),n=[];return X(t,function(t,e){var r=J(t);n.push({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],geojson:t,index:e})}),e.load(n),e}function qc(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&["Polygon","MultiPolygon"].indexOf(it(i))===-1)throw new Error("options.mask must be a (Multi)Polygon");for(var a=t[0],u=t[1],l=t[2],h=t[3],p=e/ve([a,u],[l,u],n),f=p*(l-a),g=e/ve([a,u],[a,h],n),d=g*(h-u),y=l-a,v=h-u,_=Math.floor(y/f),m=Math.floor(v/d),x=(y-_*f)/2,E=(v-m*d)/2,w=a+x,N=0;N<_;N++){for(var C=u+E,S=0;S<m;S++){var M=o([[[w,C],[w,C+d],[w+f,C+d],[w+f,C],[w,C]]],r);i?wc(i,M)&&s.push(M):s.push(M),C+=d}w+=f}return c(s)}function Gc(t,e,n){if(n=n||{},!I(n))throw new Error("options is invalid");var r=n.properties,i=n.mask,s=[];if(null===e||void 0===e)throw new Error("cellSide is required");if(!b(e))throw new Error("cellSide is invalid");if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be array");if(4!==t.length)throw new Error("bbox must contain 4 numbers");if(i&&["Polygon","MultiPolygon"].indexOf(it(i))===-1)throw new Error("options.mask must be a (Multi)Polygon");for(var a=e/ve([t[0],t[1]],[t[2],t[1]],n),u=a*(t[2]-t[0]),l=e/ve([t[0],t[1]],[t[0],t[3]],n),h=l*(t[3]-t[1]),p=0,f=t[0];f<=t[2];){for(var g=0,d=t[1];d<=t[3];){var y=null,v=null;p%2===0&&g%2===0?(y=o([[[f,d],[f,d+h],[f+u,d],[f,d]]],r),v=o([[[f,d+h],[f+u,d+h],[f+u,d],[f,d+h]]],r)):p%2===0&&g%2===1?(y=o([[[f,d],[f+u,d+h],[f+u,d],[f,d]]],r),v=o([[[f,d],[f,d+h],[f+u,d+h],[f,d]]],r)):g%2===0&&p%2===1?(y=o([[[f,d],[f,d+h],[f+u,d+h],[f,d]]],r),v=o([[[f,d],[f+u,d+h],[f+u,d],[f,d]]],r)):g%2===1&&p%2===1&&(y=o([[[f,d],[f,d+h],[f+u,d],[f,d]]],r),v=o([[[f,d+h],[f+u,d+h],[f+u,d],[f,d+h]]],r)),i?(wc(i,y)&&s.push(y),wc(i,v)&&s.push(v)):(s.push(y),s.push(v)),d+=h,g++}p++,f+=u}return c(s)}function Bc(t,e,n){if(n=n||{},"object"!=typeof n)throw new Error("options is invalid");var r=n.gridType,i=n.property,o=n.weight;if(!t)throw new Error("points is required");if(et(t,"Point","input must contain Points"),!e)throw new Error("cellSize is required");if(void 0!==o&&"number"!=typeof o)throw new Error("weight must be a number");i=i||"elevation",r=r||"square",o=o||1;var s,a=J(t);switch(r){case"point":case"points":s=bi(a,e,n);break;case"square":case"squares":s=qc(a,e,n);break;case"hex":case"hexes":s=Sc(a,e,n);break;case"triangle":case"triangles":s=Gc(a,e,n);break;default:throw new Error("invalid gridType")}var u=[];return G(s,function(e){var s=0,a=0;G(t,function(t){var u,c="point"===r?e:xn(e),l=ve(c,t,n);if(void 0!==i&&(u=t.properties[i]),void 0===u&&(u=t.geometry.coordinates[2]),void 0===u)throw new Error("zValue is missing");0===l&&(s=u);var h=1/Math.pow(l,o);a+=h,s+=h*u});var c=_e(e);c.properties[i]=s/a,u.push(c)}),c(u)}var kc=6371008.8,zc={meters:kc,metres:kc,millimeters:1e3*kc,millimetres:1e3*kc,centimeters:100*kc,centimetres:100*kc,kilometers:kc/1e3,kilometres:kc/1e3,miles:kc/1609.344,nauticalmiles:kc/1852,inches:39.37*kc,yards:kc/1.0936,feet:3.28084*kc,radians:1,degrees:kc/111325},jc={meters:1,metres:1,millimeters:1e3,millimetres:1e3,centimeters:100,centimetres:100,kilometers:.001,kilometres:.001,miles:1/1609.344,nauticalmiles:1/1852,inches:39.37,yards:1/1.0936,feet:3.28084,radians:1/kc,degrees:1/111325},Xc={meters:1,metres:1,millimeters:1e6,millimetres:1e6,centimeters:1e4,centimetres:1e4,kilometers:1e-6,kilometres:1e-6,acres:247105e-9,miles:3.86e-7,yards:1.195990046,feet:10.763910417,inches:1550.003100006},Uc=Object.freeze({earthRadius:kc,factors:zc,unitsFactors:jc,areaFactors:Xc,feature:e,geometry:n,point:r,points:i,polygon:o,polygons:s,lineString:a,lineStrings:u,featureCollection:c,multiLineString:l,multiPoint:h,multiPolygon:p,geometryCollection:f,round:g,radiansToLength:d,lengthToRadians:y,lengthToDegrees:v,bearingToAzimuth:_,radiansToDegrees:m,degreesToRadians:x,convertLength:E,convertArea:w,isNumber:b,isObject:I,validateBBox:N,validateId:C,radians2degrees:S,degrees2radians:M,distanceToDegrees:L,distanceToRadians:P,radiansToDistance:O,bearingToAngle:R,convertDistance:T}),Yc=Object.freeze({coordEach:A,coordReduce:D,propEach:F,propReduce:q,featureEach:G,featureReduce:B,coordAll:k,geomEach:z,geomReduce:j,flattenEach:X,flattenReduce:U,segmentEach:Y,segmentReduce:V,lineEach:H,lineReduce:W}),Vc=Object.freeze({getCoord:Z,getCoords:K,containsNumber:Q,geojsonType:$,featureOf:tt,collectionOf:et,getGeom:nt,getGeomType:rt,getType:it}),Hc={successCallback:null,verbose:!1},Wc={},Jc=mt,Zc=wt;wt.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!At(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],a=e.leaf?r(s):s,At(t,a)&&(e.leaf?n.push(s):Tt(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!At(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,At(t,s)){if(e.leaf||Tt(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=Dt([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&(i=bt(t,s.children,e),i!==-1))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!Tt(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:St,compareMinY:Mt,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return i=Dt(t.slice(e,n+1)),It(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),i=Dt([]),i.leaf=!1,i.height=r;var a,u,c,l,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(Ft(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(c=Math.min(a+p-1,n),Ft(t,a,c,h,this.compareMinY),u=a;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return It(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,h;;){if(r.push(e),e.leaf||r.length-1===n)break;for(l=h=1/0,i=0,o=e.children.length;i<o;i++)s=e.children[i],u=Lt(s),c=Ot(t,s)-u,c<h?(h=c,l=u<l?u:l,a=s):c===h&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),Ct(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=Dt(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,It(n,this.toBBox),It(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=Dt([t,e]),this.data.height=t.height+1,this.data.leaf=!1,It(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)i=Nt(t,0,r,this.toBBox),o=Nt(t,r,n,this.toBBox),s=Rt(i,o),a=Lt(i)+Lt(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:St,i=t.leaf?this.compareMinY:Mt,o=this._allDistMargin(t,e,n,r),s=this._allDistMargin(t,e,n,i);o<s&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=Nt(t,0,e,s),u=Nt(t,n-e,n,s),c=Pt(a)+Pt(u);for(i=e;i<n-e;i++)o=t.children[i],Ct(a,t.leaf?s(o):o),c+=Pt(a);for(i=n-e-1;i>=e;i--)o=t.children[i],Ct(u,t.leaf?s(o):o),c+=Pt(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)Ct(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():It(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Kc=Gt,Qc=+(Math.pow(2,27)+1),$c=kt,tl=zt,el=jt,nl=Ut,rl=qt(function(t){function e(t,e){for(var n=new Array(t.length-1),r=1;r<t.length;++r)for(var i=n[r-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(i[s++]=t[r][o]);return n}function n(t){for(var e=new Array(t),n=0;n<t;++n){e[n]=new Array(t);for(var r=0;r<t;++r)e[n][r]=["m",r,"[",t-n-1,"]"].join("")}return e}function r(t){return 1&t?"-":""}function i(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",i(t.slice(0,e)),",",i(t.slice(e)),")"].join("")}function o(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var n=[],s=0;s<t.length;++s)n.push(["scale(",i(o(e(t,s))),",",r(s),t[0][s],")"].join(""));return n}function s(t){for(var r=[],s=[],a=n(t),u=[],c=0;c<t;++c)0===(1&c)?r.push.apply(r,o(e(a,c))):s.push.apply(s,o(e(a,c))),u.push("m"+c);var l=i(r),h=i(s),p="orientation"+t+"Exact",f=["function ",p,"(",u.join(),"){var p=",l,",n=",h,",d=sub(p,n);return d[d.length-1];};return ",p].join(""),g=new Function("sum","prod","scale","sub",f);return g($c,Kc,el,nl)}function a(t){var e=d[t.length];return e||(e=d[t.length]=s(t.length)),e.apply(void 0,t)}function u(){for(;d.length<=c;)d.push(s(d.length));for(var e=[],n=["slow"],r=0;r<=c;++r)e.push("a"+r),n.push("o"+r);for(var i=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],r=2;r<=c;++r)i.push("case ",r,":return o",r,"(",e.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var o=Function.apply(void 0,n);t.exports=o.apply(void 0,[a].concat(d));for(var r=0;r<=c;++r)t.exports[r]=d[r]}var c=5,l=1.1102230246251565e-16,h=(3+16*l)*l,p=(7+56*l)*l,f=s(3),g=s(4),d=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,n){var r,i=(t[1]-n[1])*(e[0]-n[0]),o=(t[0]-n[0])*(e[1]-n[1]),s=i-o;if(i>0){if(o<=0)return s;r=i+o}else{if(!(i<0))return s;if(o>=0)return s;r=-(i+o)}var a=h*r;return s>=a||s<=-a?s:f(t,e,n)},function(t,e,n,r){var i=t[0]-r[0],o=e[0]-r[0],s=n[0]-r[0],a=t[1]-r[1],u=e[1]-r[1],c=n[1]-r[1],l=t[2]-r[2],h=e[2]-r[2],f=n[2]-r[2],d=o*c,y=s*u,v=s*a,_=i*c,m=i*u,x=o*a,E=l*(d-y)+h*(v-_)+f*(m-x),w=(Math.abs(d)+Math.abs(y))*Math.abs(l)+(Math.abs(v)+Math.abs(_))*Math.abs(h)+(Math.abs(m)+Math.abs(x))*Math.abs(f),b=p*w;return E>b||-E>b?E:g(t,e,n,r)}];u()}),il=Yt,ol=rl[3],sl=Vt,al=Vt;Vt.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},_down:function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=(t<<1)+1,s=o+1,a=e[o];if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i}},sl["default"]=al;var ul=function(t,e){for(var n=t[0],r=t[1],i=!1,o=0,s=e.length-1;o<e.length;s=o++){var a=e[o][0],u=e[o][1],c=e[s][0],l=e[s][1],h=u>r!=l>r&&n<(c-a)*(r-u)/(l-u)+a;h&&(i=!i)}return i},cl=rl[3],ll=Wt,hl=Wt;ll["default"]=hl;var pl=function(t){return t},fl=function(t){if(null==t)return pl;var e,n,r=t.scale[0],i=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,a){a||(e=n=0);var u=2,c=t.length,l=new Array(c);for(l[0]=(e+=t[0])*r+o,l[1]=(n+=t[1])*i+s;u<c;)l[u]=t[u],++u;return l}},gl=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n},dl=function(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),a.push(r)}}var i={},o={},s={},a=[],u=-1;return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++u],e[u]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),a=i[0],u=i[1];if(e=s[a])if(delete s[e.end],e.push(t),e.end=u,r=o[u]){delete o[r.start];var c=r===e?e:e.concat(r);o[c.start=e.start]=s[c.end=r.end]=c}else o[e.start]=s[e.end]=e;else if(e=o[u])if(delete o[e.start],e.unshift(t),e.start=a,r=s[a]){delete s[r.end];var l=r===e?e:r.concat(e);o[l.start=r.start]=s[l.end=e.end]=l}else o[e.start]=s[e.end]=e;else e=[t],o[e.start=a]=s[e.end=u]=e}),r(s,o),r(o,s),e.forEach(function(t){i[t<0?~t:t]||a.push([t])}),a},yl=function(t){return Ie(t,Ce.apply(this,arguments))},vl=function(t){function e(t){null!=t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){var e=t[0],n=t[1];e<o&&(o=e),e>a&&(a=e),n<s&&(s=n),n>u&&(u=n)}function r(t){t.forEach(n)}function i(t){t.forEach(r)}var o=1/0,s=1/0,a=-(1/0),u=-(1/0),c={GeometryCollection:function(t){t.geometries.forEach(e)},Point:function(t){n(t.coordinates)},MultiPoint:function(t){t.coordinates.forEach(n)},LineString:function(t){r(t.arcs)},MultiLineString:function(t){t.arcs.forEach(r)},Polygon:function(t){t.arcs.forEach(r)},MultiPolygon:function(t){
t.arcs.forEach(i)}};for(var l in t)e(t[l]);return a>=o&&u>=s?[o,s,a,u]:void 0},_l=function(t,e,n,r,i){function o(r){for(var o=e(r)&c,s=u[o],a=0;s!=i;){if(n(s,r))return!0;if(++a>=t)throw new Error("full hashset");s=u[o=o+1&c]}return u[o]=r,!0}function s(r){for(var o=e(r)&c,s=u[o],a=0;s!=i;){if(n(s,r))return!0;if(++a>=t)break;s=u[o=o+1&c]}return!1}function a(){for(var t=[],e=0,n=u.length;e<n;++e){var r=u[e];r!=i&&t.push(r)}return t}3===arguments.length&&(r=Array,i=null);for(var u=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),c=t-1,l=0;l<t;++l)u[l]=i;return{add:o,has:s,values:a}},ml=function(t,e,n,r,i,o){function s(r,o){for(var s=e(r)&p,a=l[s],u=0;a!=i;){if(n(a,r))return h[s]=o;if(++u>=t)throw new Error("full hashmap");a=l[s=s+1&p]}return l[s]=r,h[s]=o,o}function a(r,o){for(var s=e(r)&p,a=l[s],u=0;a!=i;){if(n(a,r))return h[s];if(++u>=t)throw new Error("full hashmap");a=l[s=s+1&p]}return l[s]=r,h[s]=o,o}function u(r,o){for(var s=e(r)&p,a=l[s],u=0;a!=i;){if(n(a,r))return h[s];if(++u>=t)break;a=l[s=s+1&p]}return o}function c(){for(var t=[],e=0,n=l.length;e<n;++e){var r=l[e];r!=i&&t.push(r)}return t}3===arguments.length&&(r=o=Array,i=null);for(var l=new r(t=1<<Math.max(4,Math.ceil(Math.log(t)/Math.LN2))),h=new o(t),p=t-1,f=0;f<t;++f)l[f]=i;return{set:s,maybeSet:a,get:u,keys:c}},xl=function(t,e){return t[0]===e[0]&&t[1]===e[1]},El=new ArrayBuffer(16),wl=new Float64Array(El),bl=new Uint32Array(El),Il=function(t){wl[0]=t[0],wl[1]=t[1];var e=bl[0]^bl[1];return e=e<<5^e>>7^bl[2]^bl[3],2147483647&e},Nl=function(t){function e(t,e,n,r){if(g[n]!==t){g[n]=t;var i=d[n];if(i>=0){var o=y[n];i===e&&o===r||i===r&&o===e||(++_,v[n]=1)}else d[n]=e,y[n]=r}}function n(){for(var t=ml(1.4*l.length,r,i,Int32Array,-1,Int32Array),e=new Int32Array(l.length),n=0,o=l.length;n<o;++n)e[n]=t.maybeSet(n,n);return e}function r(t){return Il(l[t])}function i(t,e){return xl(l[t],l[e])}var o,s,a,u,c,l=t.coordinates,h=t.lines,p=t.rings,f=n(),g=new Int32Array(l.length),d=new Int32Array(l.length),y=new Int32Array(l.length),v=new Int8Array(l.length),_=0;for(o=0,s=l.length;o<s;++o)g[o]=d[o]=y[o]=-1;for(o=0,s=h.length;o<s;++o){var m=h[o],x=m[0],E=m[1];for(u=f[x],c=f[++x],++_,v[u]=1;++x<=E;)e(o,a=u,u=c,c=f[x]);++_,v[c]=1}for(o=0,s=l.length;o<s;++o)g[o]=-1;for(o=0,s=p.length;o<s;++o){var w=p[o],b=w[0]+1,I=w[1];for(a=f[I-1],u=f[b-1],c=f[b],e(o,a,u,c);++b<=I;)e(o,a=u,u=c,c=f[b])}g=d=y=null;var N,C=_l(1.4*_,Il,xl);for(o=0,s=l.length;o<s;++o)v[N=f[o]]&&C.add(l[N]);return C},Cl=function(t){var e,n,r,i=Nl(t),o=t.coordinates,s=t.lines,a=t.rings;for(n=0,r=s.length;n<r;++n)for(var u=s[n],c=u[0],l=u[1];++c<l;)i.has(o[c])&&(e={0:c,1:u[1]},u[1]=c,u=u.next=e);for(n=0,r=a.length;n<r;++n)for(var h=a[n],p=h[0],f=p,g=h[1],d=i.has(o[p]);++f<g;)i.has(o[f])&&(d?(e={0:f,1:h[1]},h[1]=f,h=h.next=e):(Se(o,p,g,g-f),o[g]=o[p],d=!0,f=p));return t},Sl=function(t){function e(t){var e,n,o,s,a,u,c,l;if(o=y.get(e=p[t[0]]))for(c=0,l=o.length;c<l;++c)if(s=o[c],r(s,t))return t[0]=s[0],void(t[1]=s[1]);if(a=y.get(n=p[t[1]]))for(c=0,l=a.length;c<l;++c)if(u=a[c],i(u,t))return t[1]=u[0],void(t[0]=u[1]);o?o.push(t):y.set(e,[t]),a?a.push(t):y.set(n,[t]),v.push(t)}function n(t){var e,n,r,i,u;if(n=y.get(e=p[t[0]]))for(i=0,u=n.length;i<u;++i){if(r=n[i],o(r,t))return t[0]=r[0],void(t[1]=r[1]);if(s(r,t))return t[0]=r[1],void(t[1]=r[0])}if(n=y.get(e=p[t[0]+a(t)]))for(i=0,u=n.length;i<u;++i){if(r=n[i],o(r,t))return t[0]=r[0],void(t[1]=r[1]);if(s(r,t))return t[0]=r[1],void(t[1]=r[0])}n?n.push(t):y.set(e,[t]),v.push(t)}function r(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!==r-o)return!1;for(;n<=i;++n,++r)if(!xl(p[n],p[r]))return!1;return!0}function i(t,e){var n=t[0],r=e[0],i=t[1],o=e[1];if(n-i!==r-o)return!1;for(;n<=i;++n,--o)if(!xl(p[n],p[o]))return!1;return!0}function o(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],s=i-n;if(s!==o-r)return!1;for(var u=a(t),c=a(e),l=0;l<s;++l)if(!xl(p[n+(l+u)%s],p[r+(l+c)%s]))return!1;return!0}function s(t,e){var n=t[0],r=e[0],i=t[1],o=e[1],s=i-n;if(s!==o-r)return!1;for(var u=a(t),c=s-a(e),l=0;l<s;++l)if(!xl(p[n+(l+u)%s],p[o-(l+c)%s]))return!1;return!0}function a(t){for(var e=t[0],n=t[1],r=e,i=r,o=p[r];++r<n;){var s=p[r];(s[0]<o[0]||s[0]===o[0]&&s[1]<o[1])&&(i=r,o=s)}return i-e}var u,c,l,h,p=t.coordinates,f=t.lines,g=t.rings,d=f.length+g.length;for(delete t.lines,delete t.rings,l=0,h=f.length;l<h;++l)for(u=f[l];u=u.next;)++d;for(l=0,h=g.length;l<h;++l)for(c=g[l];c=c.next;)++d;var y=ml(2*d*1.4,Il,xl),v=t.arcs=[];for(l=0,h=f.length;l<h;++l){u=f[l];do e(u);while(u=u.next)}for(l=0,h=g.length;l<h;++l)if(c=g[l],c.next){do e(c);while(c=c.next)}else n(c);return t},Ml=function(t){for(var e=-1,n=t.length;++e<n;){for(var r,i,o=t[e],s=0,a=1,u=o.length,c=o[0],l=c[0],h=c[1];++s<u;)c=o[s],r=c[0],i=c[1],r===l&&i===h||(o[a++]=[r-l,i-h],l=r,h=i);1===a&&(o[a++]=[0,0]),o.length=a}return t},Ll=function(t){function e(t){t&&c.hasOwnProperty(t.type)&&c[t.type](t)}function n(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return s.push(r),r}function r(t){for(var e=0,n=t.length;e<n;++e)u[++o]=t[e];var r={0:o-n+1,1:o};return a.push(r),r}function i(t){return t.map(r)}var o=-1,s=[],a=[],u=[],c={GeometryCollection:function(t){t.geometries.forEach(e)},LineString:function(t){t.arcs=n(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(n)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var l in t)e(t[l]);return{type:"Topology",coordinates:u,lines:s,rings:a,objects:t}},Pl=function(t){var e,n={};for(e in t)n[e]=Le(t[e]);return n},Ol=function(t,e,n){function r(t){return[Math.round((t[0]-c)*f),Math.round((t[1]-l)*g)]}function i(t,e){for(var n,r,i,o,s,a=-1,u=0,h=t.length,p=new Array(h);++a<h;)n=t[a],o=Math.round((n[0]-c)*f),s=Math.round((n[1]-l)*g),o===r&&s===i||(p[u++]=[r=o,i=s]);for(p.length=u;u<e;)u=p.push([p[0][0],p[0][1]]);return p}function o(t){return i(t,2)}function s(t){return i(t,4)}function a(t){return t.map(s)}function u(t){null!=t&&d.hasOwnProperty(t.type)&&d[t.type](t)}var c=e[0],l=e[1],h=e[2],p=e[3],f=h-c?(n-1)/(h-c):1,g=p-l?(n-1)/(p-l):1,d={GeometryCollection:function(t){t.geometries.forEach(u)},Point:function(t){t.coordinates=r(t.coordinates)},MultiPoint:function(t){t.coordinates=t.coordinates.map(r)},LineString:function(t){t.arcs=o(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(o)},Polygon:function(t){t.arcs=a(t.arcs)},MultiPolygon:function(t){t.arcs=t.arcs.map(a)}};for(var y in t)u(t[y]);return{scale:[1/f,1/g],translate:[c,l]}},Rl=function(t,e){function n(t){t&&l.hasOwnProperty(t.type)&&l[t.type](t)}function r(t){var e=[];do{var n=c.get(t);e.push(t[0]<t[1]?n:~n)}while(t=t.next);return e}function i(t){return t.map(r)}var o=vl(t=Pl(t)),s=e>0&&o&&Ol(t,o,e),a=Sl(Cl(Ll(t))),u=a.coordinates,c=ml(1.4*a.arcs.length,Te,Ae);t=a.objects,a.bbox=o,a.arcs=a.arcs.map(function(t,e){return c.set(t,e),u.slice(t[0],t[1]+1)}),delete a.coordinates,u=null;var l={GeometryCollection:function(t){t.geometries.forEach(n)},LineString:function(t){t.arcs=r(t.arcs)},MultiLineString:function(t){t.arcs=t.arcs.map(r)},Polygon:function(t){t.arcs=t.arcs.map(r)},MultiPolygon:function(t){t.arcs=t.arcs.map(i)}};for(var h in t)n(t[h]);return s&&(a.transform=s,a.arcs=Ml(a.arcs)),a},Tl=function(t){this.points=t.points||[],this.duration=t.duration||1e4,this.sharpness=t.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=t.stepLength||60,this.length=this.points.length,this.delay=0;for(var e=0;e<this.length;e++)this.points[e].z=this.points[e].z||0;for(var e=0;e<this.length-1;e++){var n=this.points[e],r=this.points[e+1];this.centers.push({x:(n.x+r.x)/2,y:(n.y+r.y)/2,z:(n.z+r.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var e=0;e<this.centers.length-1;e++){var n=this.centers[e],r=this.centers[e+1],i=this.points[e+1].x-(this.centers[e].x+this.centers[e+1].x)/2,o=this.points[e+1].y-(this.centers[e].y+this.centers[e+1].y)/2,s=this.points[e+1].z-(this.centers[e].y+this.centers[e+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e].z+s)},{x:(1-this.sharpness)*this.points[e+1].x+this.sharpness*(this.centers[e+1].x+i),y:(1-this.sharpness)*this.points[e+1].y+this.sharpness*(this.centers[e+1].y+o),z:(1-this.sharpness)*this.points[e+1].z+this.sharpness*(this.centers[e+1].z+s)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};Tl.prototype.cacheSteps=function(t){var e=[],n=this.pos(0);e.push(0);for(var r=0;r<this.duration;r+=10){var i=this.pos(r),o=Math.sqrt((i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y)+(i.z-n.z)*(i.z-n.z));o>t&&(e.push(r),n=i)}return e},Tl.prototype.vector=function(t){var e=this.pos(t+10),n=this.pos(t-10);return{angle:180*Math.atan2(e.y-n.y,e.x-n.x)/3.14,speed:Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y)+(n.z-e.z)*(n.z-e.z))}},Tl.prototype.pos=function(t){function e(t,e,n,r,i){var o=function(t){var e=t*t,n=e*t;return[n,3*e*(1-t),3*t*(1-t)*(1-t),(1-t)*(1-t)*(1-t)]},s=o(t),a={x:i.x*s[0]+r.x*s[1]+n.x*s[2]+e.x*s[3],y:i.y*s[0]+r.y*s[1]+n.y*s[2]+e.y*s[3],z:i.z*s[0]+r.z*s[1]+n.z*s[2]+e.z*s[3]};return a}var n=t-this.delay;n<0&&(n=0),n>this.duration&&(n=this.duration-1);var r=n/this.duration;if(r>=1)return this.points[this.length-1];var i=Math.floor((this.points.length-1)*r),o=(this.length-1)*r-i;return e(o,this.points[i],this.controls[i][1],this.controls[i+1][0],this.points[i+1])};var Al=In,Dl=In;In.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(Qn(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,l=a<u-1?e[a+1]*n:t.length;s-=Math.abs(Qn(t,c,l,n))}var h=0;for(a=0;a<r.length;a+=3){var p=r[a]*n,f=r[a+1]*n,g=r[a+2]*n;h+=Math.abs((t[p]-t[g])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[g+1]-t[p+1]))}return 0===s&&0===h?0:Math.abs((h-s)/s)},In.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},Al["default"]=Dl,ar.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!mr(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],a=e.leaf?r(s):s,mr(t,a)&&(e.leaf?n.push(s):_r(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!mr(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],s=e.leaf?n(o):o,mr(t,s)){if(e.leaf||_r(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=xr([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,a=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],n=c.pop(),o=!0),s.leaf&&(i=ur(t,s.children,e),i!==-1))return s.children.splice(i,1),u.push(s),this._condense(u),this;o||s.leaf||!_r(s,a)?r?(n++,s=r.children[n],o=!1):s=null:(u.push(s),c.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:pr,compareMinY:fr,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return i=xr(t.slice(e,n+1)),cr(i,this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),i=xr([]),i.leaf=!1,i.height=r;var a,u,c,l,h=Math.ceil(o/s),p=h*Math.ceil(Math.sqrt(s));for(Er(t,e,n,p,this.compareMinX),a=e;a<=n;a+=p)for(c=Math.min(a+p-1,n),Er(t,a,c,h,this.compareMinY),u=a;u<=c;u+=h)l=Math.min(u+h-1,c),i.children.push(this._build(t,u,l,r-1));return cr(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,l,h;;){if(r.push(e),e.leaf||r.length-1===n)break;for(l=h=1/0,i=0,o=e.children.length;i<o;i++)s=e.children[i],u=gr(s),c=yr(t,s)-u,c<h?(h=c,l=u<l?u:l,a=s):c===h&&u<l&&(l=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),hr(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=xr(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,cr(n,this.toBBox),cr(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=xr([t,e]),this.data.height=t.height+1,this.data.leaf=!1,cr(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,c,l;for(u=c=1/0,r=e;r<=n-e;r++)i=lr(t,0,r,this.toBBox),o=lr(t,r,n,this.toBBox),s=vr(i,o),a=gr(i)+gr(o),s<u?(u=s,l=r,c=a<c?a:c):s===u&&a<c&&(c=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:pr,i=t.leaf?this.compareMinY:fr,o=this._allDistMargin(t,e,n,r),s=this._allDistMargin(t,e,n,i);o<s&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=lr(t,0,e,s),u=lr(t,n-e,n,s),c=dr(a)+dr(u);for(i=e;i<n-e;i++)o=t.children[i],hr(a,t.leaf?s(o):o),c+=dr(a);for(i=n-e-1;i>=e;i--)o=t.children[i],hr(u,t.leaf?s(o):o),c+=dr(u);return c},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)hr(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():cr(t[n],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};var Fl=Object.freeze({toMercator:Fr,toWgs84:qr}),ql=6378137,Gl=function(t,e,n){function r(t,n,r,i){var u=o[t][n],c=o[t][n+1],l=o[r][i],h=o[r][i+1],p=Li(u,c,l,h);if(null!==p){var f,g;if(f=c[0]!==u[0]?(p[0]-u[0])/(c[0]-u[0]):(p[1]-u[1])/(c[1]-u[1]),g=h[0]!==l[0]?(p[0]-l[0])/(h[0]-l[0]):(p[1]-l[1])/(h[1]-l[1]),!(f>=1||f<=0||g>=1||g<=0)){var d=p,y=!a[d];y&&(a[d]=!0),e?s.push(e(p,t,n,u,c,f,r,i,l,h,g,y)):s.push(p)}}}function i(t,e){var n,r,i,s,a=o[t][e],u=o[t][e+1];return a[0]<u[0]?(n=a[0],r=u[0]):(n=u[0],r=a[0]),a[1]<u[1]?(i=a[1],s=u[1]):(i=u[1],s=a[1]),{minX:n,minY:i,maxX:r,maxY:s,ring:t,edge:e}}if("Polygon"!==t.geometry.type)throw new Error("The input feature must be a Polygon");void 0===n&&(n=1);var o=t.geometry.coordinates,s=[],a={};if(n){for(var u=[],c=0;c<o.length;c++)for(var l=0;l<o[c].length-1;l++)u.push(i(c,l));var h=Zc();h.load(u)}for(var p=0;p<o.length;p++)for(var f=0;f<o[p].length-1;f++)if(n){var g=h.search(i(p,f));g.forEach(function(t){var e=t.ring,n=t.edge;r(p,f,e,n)})}else for(var d=0;d<o.length;d++)for(var y=0;y<o[d].length-1;y++)r(p,f,d,y);return e||(s={type:"Feature",geometry:{type:"MultiPoint",coordinates:s}}),s},Bl=function(t){function e(){for(var t=[],e=0;e<g.features.length;e++)g.features[e].properties.parent==-1&&t.push(e);if(t.length>1)for(var e=0;e<t.length;e++){for(var n=-1,r=1/0,i=0;i<g.features.length;i++)t[e]!=i&&ue(g.features[t[e]].geometry.coordinates[0][0],g.features[i],{ignoreBoundary:!0})&&ei(g.features[i])<r&&(n=i);g.features[t[e]].properties.parent=n}}function n(){for(var t=0;t<g.features.length;t++)if(g.features[t].properties.parent==-1){var e=g.features[t].properties.winding;g.features[t].properties.netWinding=e,r(t,e)}}function r(t,e){for(var n=0;n<g.features.length;n++)if(g.features[n].properties.parent==t){var i=e+g.features[n].properties.winding;g.features[n].properties.netWinding=i,r(n,i)}}if("Feature"!=t.type)throw new Error("The input must a geojson object of type Feature");if(void 0===t.geometry||null==t.geometry)throw new Error("The input must a geojson object with a non-empty geometry");if("Polygon"!=t.geometry.type)throw new Error("The input must be a geojson Polygon");for(var i=t.geometry.coordinates.length,s=[],a=0;a<i;a++){var u=t.geometry.coordinates[a];Ti(u[0],u[u.length-1])||u.push(u[0]),s.push.apply(s,u.slice(0,u.length-1))}if(!Ai(s))throw new Error("The input polygon may not have duplicate vertices (except for the first and last vertex of each ring)");var l=s.length,h=Gl(t,function(t,e,n,r,i,o,s,a,u,c,l,h){return[t,e,n,r,i,o,s,a,u,c,l,h]}),p=h.length;if(0==p){for(var f=[],a=0;a<i;a++)f.push(o([t.geometry.coordinates[a]],{parent:-1,winding:Ri(t.geometry.coordinates[a])}));var g=c(f);return e(),n(),g}for(var d=[],y=[],a=0;a<i;a++){d.push([]);for(var v=0;v<t.geometry.coordinates[a].length-1;v++)d[a].push([new kl(t.geometry.coordinates[a][(v+1).modulo(t.geometry.coordinates[a].length-1)],1,[a,v],[a,(v+1).modulo(t.geometry.coordinates[a].length-1)],(void 0))]),y.push(new zl(t.geometry.coordinates[a][v],[a,(v-1).modulo(t.geometry.coordinates[a].length-1)],[a,v],(void 0),(void 0),(!1),(!0)))}for(var a=0;a<p;a++)d[h[a][1]][h[a][2]].push(new kl(h[a][0],h[a][5],[h[a][1],h[a][2]],[h[a][6],h[a][7]],(void 0))),h[a][11]&&y.push(new zl(h[a][0],[h[a][1],h[a][2]],[h[a][6],h[a][7]],(void 0),(void 0),(!0),(!0)));for(var _=y.length,a=0;a<d.length;a++)for(var v=0;v<d[a].length;v++)d[a][v].sort(function(t,e){return t.param<e.param?-1:1});for(var m=[],a=0;a<_;a++)m.push({minX:y[a].coord[0],minY:y[a].coord[1],maxX:y[a].coord[0],maxY:y[a].coord[1],index:a});var x=Zc();x.load(m);for(var a=0;a<d.length;a++)for(var v=0;v<d[a].length;v++)for(var E=0;E<d[a][v].length;E++){var w;w=E==d[a][v].length-1?d[a][(v+1).modulo(t.geometry.coordinates[a].length-1)][0].coord:d[a][v][E+1].coord;var b=x.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0];d[a][v][E].nxtIsectAlongEdgeIn=b.index}for(var a=0;a<d.length;a++)for(var v=0;v<d[a].length;v++)for(var E=0;E<d[a][v].length;E++){var w=d[a][v][E].coord,b=x.search({minX:w[0],minY:w[1],maxX:w[0],maxY:w[1]})[0],I=b.index;I<l?y[I].nxtIsectAlongRingAndEdge2=d[a][v][E].nxtIsectAlongEdgeIn:Ti(y[I].ringAndEdge1,d[a][v][E].ringAndEdgeIn)?y[I].nxtIsectAlongRingAndEdge1=d[a][v][E].nxtIsectAlongEdgeIn:y[I].nxtIsectAlongRingAndEdge2=d[a][v][E].nxtIsectAlongEdgeIn}for(var N=[],a=0,v=0;v<i;v++){for(var C=a,E=0;E<t.geometry.coordinates[v].length-1;E++)y[a].coord[0]<y[C].coord[0]&&(C=a),a++;for(var S=y[C].nxtIsectAlongRingAndEdge2,E=0;E<y.length;E++)if(y[E].nxtIsectAlongRingAndEdge1==C||y[E].nxtIsectAlongRingAndEdge2==C){var M=E;break}var L=Oi([y[M].coord,y[C].coord,y[S].coord],!0)?1:-1;N.push({isect:C,parent:-1,winding:L})}N.sort(function(t,e){return y[t.isect].coord>y[e.isect].coord?-1:1});for(var f=[];N.length>0;){var P=N.pop(),O=P.isect,R=P.parent,T=P.winding,A=f.length,D=[y[O].coord],F=O;if(y[O].ringAndEdge1Walkable)var q=y[O].ringAndEdge1,G=y[O].nxtIsectAlongRingAndEdge1;else var q=y[O].ringAndEdge2,G=y[O].nxtIsectAlongRingAndEdge2;for(;!Ti(y[O].coord,y[G].coord);){D.push(y[G].coord);for(var B=void 0,a=0;a<N.length;a++)if(N[a].isect==G){B=a;break}if(void 0!=B&&N.splice(B,1),Ti(q,y[G].ringAndEdge1)){if(q=y[G].ringAndEdge2,y[G].ringAndEdge2Walkable=!1,y[G].ringAndEdge1Walkable){var k={isect:G};Oi([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge2].coord],1==T)?(k.parent=R,k.winding=-T):(k.parent=A,k.winding=T),N.push(k)}F=G,G=y[G].nxtIsectAlongRingAndEdge2}else{if(q=y[G].ringAndEdge1,y[G].ringAndEdge1Walkable=!1,y[G].ringAndEdge2Walkable){var k={isect:G};Oi([y[F].coord,y[G].coord,y[y[G].nxtIsectAlongRingAndEdge1].coord],1==T)?(k.parent=R,k.winding=-T):(k.parent=A,k.winding=T),N.push(k)}F=G,G=y[G].nxtIsectAlongRingAndEdge1}}D.push(y[G].coord),f.push(o([D],{index:A,parent:R,winding:T,netWinding:void 0}))}var g=c(f);return e(),n(),g},kl=function(t,e,n,r,i){this.coord=t,this.param=e,this.ringAndEdgeIn=n,this.ringAndEdgeOut=r,this.nxtIsectAlongEdgeIn=i},zl=function(t,e,n,r,i,o,s){this.coord=t,this.ringAndEdge1=e,this.ringAndEdge2=n,this.nxtIsectAlongRingAndEdge1=r,this.nxtIsectAlongRingAndEdge2=i,this.ringAndEdge1Walkable=o,this.ringAndEdge2Walkable=s};Number.prototype.modulo=function(t){return(this%t+t)%t};var jl=Math.PI/180,Xl=180/Math.PI,Ul=function(t,e){this.lon=t,this.lat=e,this.x=jl*t,this.y=jl*e};Ul.prototype.view=function(){return String(this.lon).slice(0,4)+","+String(this.lat).slice(0,4)},Ul.prototype.antipode=function(){var t=-1*this.lat,e=this.lon<0?180+this.lon:(180-this.lon)*-1;return new Ul(e,t)};var Yl=function(){this.coords=[],this.length=0};Yl.prototype.move_to=function(t){this.length++,this.coords.push(t)};var Vl=function(t){this.properties=t||{},this.geometries=[]};Vl.prototype.json=function(){if(this.geometries.length<=0)return{geometry:{type:"LineString",coordinates:null},type:"Feature",properties:this.properties};if(1===this.geometries.length)return{geometry:{type:"LineString",coordinates:this.geometries[0].coords},type:"Feature",properties:this.properties};for(var t=[],e=0;e<this.geometries.length;e++)t.push(this.geometries[e].coords);return{geometry:{type:"MultiLineString",coordinates:t},type:"Feature",properties:this.properties}},Vl.prototype.wkt=function(){for(var t="",e="LINESTRING(",n=function(t){e+=t[0]+" "+t[1]+","},r=0;r<this.geometries.length;r++){if(0===this.geometries[r].coords.length)return"LINESTRING(empty)";var i=this.geometries[r].coords;i.forEach(n),t+=e.substring(0,e.length-1)+")"}return t};var Hl=function(t,e,n){if(!t||void 0===t.x||void 0===t.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");if(!e||void 0===e.x||void 0===e.y)throw new Error("GreatCircle constructor expects two args: start and end objects with x and y properties");this.start=new Ul(t.x,t.y),this.end=new Ul(e.x,e.y),this.properties=n||{};var r=this.start.x-this.end.x,i=this.start.y-this.end.y,o=Math.pow(Math.sin(i/2),2)+Math.cos(this.start.y)*Math.cos(this.end.y)*Math.pow(Math.sin(r/2),2);if(this.g=2*Math.asin(Math.sqrt(o)),this.g===Math.PI)throw new Error("it appears "+t.view()+" and "+e.view()+" are 'antipodal', e.g diametrically opposite, thus there is no single route but rather infinite");if(isNaN(this.g))throw new Error("could not calculate great circle between "+t+" and "+e)};Hl.prototype.interpolate=function(t){var e=Math.sin((1-t)*this.g)/Math.sin(this.g),n=Math.sin(t*this.g)/Math.sin(this.g),r=e*Math.cos(this.start.y)*Math.cos(this.start.x)+n*Math.cos(this.end.y)*Math.cos(this.end.x),i=e*Math.cos(this.start.y)*Math.sin(this.start.x)+n*Math.cos(this.end.y)*Math.sin(this.end.x),o=e*Math.sin(this.start.y)+n*Math.sin(this.end.y),s=Xl*Math.atan2(o,Math.sqrt(Math.pow(r,2)+Math.pow(i,2))),a=Xl*Math.atan2(i,r);return[a,s]},Hl.prototype.Arc=function(t,e){var n=[];if(!t||t<=2)n.push([this.start.lon,this.start.lat]),n.push([this.end.lon,this.end.lat]);else for(var r=1/(t-1),i=0;i<t;++i){var o=r*i,s=this.interpolate(o);n.push(s)}for(var a=!1,u=0,c=e&&e.offset?e.offset:10,l=180-c,h=-180+c,p=360-c,f=1;f<n.length;++f){var g=n[f-1][0],d=n[f][0],y=Math.abs(d-g);y>p&&(d>l&&g<h||g>l&&d<h)?a=!0:y>u&&(u=y)}var v=[];if(a&&u<c){var _=[];v.push(_);for(var m=0;m<n.length;++m){var x=parseFloat(n[m][0]);if(m>0&&Math.abs(x-n[m-1][0])>p){var E=parseFloat(n[m-1][0]),w=parseFloat(n[m-1][1]),b=parseFloat(n[m][0]),I=parseFloat(n[m][1]);if(E>-180&&E<h&&180===b&&m+1<n.length&&n[m-1][0]>-180&&n[m-1][0]<h){_.push([-180,n[m][1]]),m++,_.push([n[m][0],n[m][1]]);continue}if(E>l&&E<180&&b===-180&&m+1<n.length&&n[m-1][0]>l&&n[m-1][0]<180){_.push([180,n[m][1]]),m++,_.push([n[m][0],n[m][1]]);continue}if(E<h&&b>l){var N=E;E=b,b=N;var C=w;w=I,I=C}if(E>l&&b<h&&(b+=360),E<=180&&b>=180&&E<b){var S=(180-E)/(b-E),M=S*I+(1-S)*w;_.push([n[m-1][0]>l?180:-180,M]),_=[],_.push([n[m-1][0]>l?-180:180,M]),v.push(_)}else _=[],v.push(_);_.push([x,n[m][1]])}else _.push([n[m][0],n[m][1]])}}else{var L=[];v.push(L);for(var P=0;P<n.length;++P)L.push([n[P][0],n[P][1]])}for(var O=new Vl(this.properties),R=0;R<v.length;++R){var T=new Yl;O.geometries.push(T);for(var A=v[R],D=0;D<A.length;++D)T.move_to(A[D])}return O};var Wl=Zi;Zi.polyline=Zi,Zi.polygon=Ki;var Jl=Array.prototype.slice,Zl={successCallback:null,verbose:!1,polygons:!1},Kl={},Ql=64,$l=16,th=4,eh=1,nh=[],rh=[],ih=[],oh=[],sh=[],ah=[],uh=[],ch=[],lh=[],hh=[],ph=[],fh=[],gh=[],dh=[],yh=[],vh=[],_h=[],mh=[],xh=[],Eh=[],wh=[],bh=[],Ih=[],Nh=[];uh[85]=hh[85]=-1,ch[85]=ph[85]=0,lh[85]=fh[85]=1,xh[85]=bh[85]=1,Eh[85]=Ih[85]=0,wh[85]=Nh[85]=1,nh[85]=oh[85]=0,rh[85]=sh[85]=-1,ih[85]=yh[85]=0,vh[85]=gh[85]=0,_h[85]=dh[85]=1,ah[85]=mh[85]=1,bh[1]=bh[169]=0,Ih[1]=Ih[169]=-1,Nh[1]=Nh[169]=0,gh[1]=gh[169]=-1,dh[1]=dh[169]=0,yh[1]=yh[169]=0,hh[4]=hh[166]=0,ph[4]=ph[166]=-1,fh[4]=fh[166]=1,vh[4]=vh[166]=1,_h[4]=_h[166]=0,mh[4]=mh[166]=0,uh[16]=uh[154]=0,ch[16]=ch[154]=1,lh[16]=lh[154]=1,oh[16]=oh[154]=1,sh[16]=sh[154]=0,ah[16]=ah[154]=1,xh[64]=xh[106]=0,Eh[64]=Eh[106]=1,wh[64]=wh[106]=0,nh[64]=nh[106]=-1,rh[64]=rh[106]=0,ih[64]=ih[106]=1,xh[2]=xh[168]=0,Eh[2]=Eh[168]=-1,wh[2]=wh[168]=1,bh[2]=bh[168]=0,Ih[2]=Ih[168]=-1,Nh[2]=Nh[168]=0,gh[2]=gh[168]=-1,dh[2]=dh[168]=0,yh[2]=yh[168]=0,vh[2]=vh[168]=-1,_h[2]=_h[168]=0,mh[2]=mh[168]=1,uh[8]=uh[162]=0,ch[8]=ch[162]=-1,lh[8]=lh[162]=0,hh[8]=hh[162]=0,ph[8]=ph[162]=-1,fh[8]=fh[162]=1,gh[8]=gh[162]=1,dh[8]=dh[162]=0,yh[8]=yh[162]=1,vh[8]=vh[162]=1,_h[8]=_h[162]=0,mh[8]=mh[162]=0,uh[32]=uh[138]=0,ch[32]=ch[138]=1,lh[32]=lh[138]=1,hh[32]=hh[138]=0,ph[32]=ph[138]=1,fh[32]=fh[138]=0,nh[32]=nh[138]=1,rh[32]=rh[138]=0,ih[32]=ih[138]=0,oh[32]=oh[138]=1,sh[32]=sh[138]=0,ah[32]=ah[138]=1,bh[128]=bh[42]=0,Ih[128]=Ih[42]=1,Nh[128]=Nh[42]=1,xh[128]=xh[42]=0,Eh[128]=Eh[42]=1,wh[128]=wh[42]=0,nh[128]=nh[42]=-1,rh[128]=rh[42]=0,ih[128]=ih[42]=1,oh[128]=oh[42]=-1,sh[128]=sh[42]=0,ah[128]=ah[42]=0,hh[5]=hh[165]=-1,ph[5]=ph[165]=0,fh[5]=fh[165]=0,bh[5]=bh[165]=1,Ih[5]=Ih[165]=0,Nh[5]=Nh[165]=0,vh[20]=vh[150]=0,_h[20]=_h[150]=1,mh[20]=mh[150]=1,oh[20]=oh[150]=0,sh[20]=sh[150]=-1,ah[20]=ah[150]=1,uh[80]=uh[90]=-1,ch[80]=ch[90]=0,lh[80]=lh[90]=1,xh[80]=xh[90]=1,Eh[80]=Eh[90]=0,wh[80]=wh[90]=1,gh[65]=gh[105]=0,dh[65]=dh[105]=1,yh[65]=yh[105]=0,nh[65]=nh[105]=0,rh[65]=rh[105]=-1,ih[65]=ih[105]=0,uh[160]=uh[10]=-1,ch[160]=ch[10]=0,lh[160]=lh[10]=1,hh[160]=hh[10]=-1,ph[160]=ph[10]=0,fh[160]=fh[10]=0,bh[160]=bh[10]=1,Ih[160]=Ih[10]=0,Nh[160]=Nh[10]=0,xh[160]=xh[10]=1,Eh[160]=Eh[10]=0,wh[160]=wh[10]=1,vh[130]=vh[40]=0,_h[130]=_h[40]=1,mh[130]=mh[40]=1,gh[130]=gh[40]=0,dh[130]=dh[40]=1,yh[130]=yh[40]=0,nh[130]=nh[40]=0,rh[130]=rh[40]=-1,ih[130]=ih[40]=0,oh[130]=oh[40]=0,sh[130]=sh[40]=-1,ah[130]=ah[40]=1,hh[37]=hh[133]=0,ph[37]=ph[133]=1,fh[37]=fh[133]=1,bh[37]=bh[133]=0,Ih[37]=Ih[133]=1,Nh[37]=Nh[133]=0,nh[37]=nh[133]=-1,rh[37]=rh[133]=0,ih[37]=ih[133]=0,oh[37]=oh[133]=1,sh[37]=sh[133]=0,ah[37]=ah[133]=0,vh[148]=vh[22]=-1,_h[148]=_h[22]=0,mh[148]=mh[22]=0,bh[148]=bh[22]=0,Ih[148]=Ih[22]=-1,Nh[148]=Nh[22]=1,xh[148]=xh[22]=0,Eh[148]=Eh[22]=1,wh[148]=wh[22]=1,oh[148]=oh[22]=-1,sh[148]=sh[22]=0,ah[148]=ah[22]=1,uh[82]=uh[88]=0,ch[82]=ch[88]=-1,lh[82]=lh[88]=1,vh[82]=vh[88]=1,_h[82]=_h[88]=0,mh[82]=mh[88]=1,gh[82]=gh[88]=-1,dh[82]=dh[88]=0,yh[82]=yh[88]=1,xh[82]=xh[88]=0,Eh[82]=Eh[88]=-1,wh[82]=wh[88]=0,uh[73]=uh[97]=0,ch[73]=ch[97]=1,lh[73]=lh[97]=0,hh[73]=hh[97]=0,ph[73]=ph[97]=-1,fh[73]=fh[97]=0,gh[73]=gh[97]=1,dh[73]=dh[97]=0,yh[73]=yh[97]=0,nh[73]=nh[97]=1,rh[73]=rh[97]=0,ih[73]=ih[97]=1,uh[145]=uh[25]=0,ch[145]=ch[25]=-1,lh[145]=lh[25]=0,gh[145]=gh[25]=1,dh[145]=dh[25]=0,yh[145]=yh[25]=1,bh[145]=bh[25]=0,Ih[145]=Ih[25]=1,Nh[145]=Nh[25]=1,oh[145]=oh[25]=-1,sh[145]=sh[25]=0,ah[145]=ah[25]=0,hh[70]=hh[100]=0,ph[70]=ph[100]=1,fh[70]=fh[100]=0,vh[70]=vh[100]=-1,_h[70]=_h[100]=0,mh[70]=mh[100]=1,xh[70]=xh[100]=0,Eh[70]=Eh[100]=-1,wh[70]=wh[100]=1,nh[70]=nh[100]=1,rh[70]=rh[100]=0,ih[70]=ih[100]=0,hh[101]=hh[69]=0,ph[101]=ph[69]=1,fh[101]=fh[69]=0,nh[101]=nh[69]=1,rh[101]=rh[69]=0,ih[101]=ih[69]=0,bh[149]=bh[21]=0,Ih[149]=Ih[21]=1,Nh[149]=Nh[21]=1,oh[149]=oh[21]=-1,sh[149]=sh[21]=0,ah[149]=ah[21]=0,vh[86]=vh[84]=-1,_h[86]=_h[84]=0,mh[86]=mh[84]=1,xh[86]=xh[84]=0,Eh[86]=Eh[84]=-1,wh[86]=wh[84]=1,uh[89]=uh[81]=0,ch[89]=ch[81]=-1,lh[89]=lh[81]=0,gh[89]=gh[81]=1,dh[89]=dh[81]=0,yh[89]=yh[81]=1,uh[96]=uh[74]=0,ch[96]=ch[74]=1,lh[96]=lh[74]=0,hh[96]=hh[74]=-1,ph[96]=ph[74]=0,fh[96]=fh[74]=1,xh[96]=xh[74]=1,Eh[96]=Eh[74]=0,wh[96]=wh[74]=0,nh[96]=nh[74]=1,rh[96]=rh[74]=0,ih[96]=ih[74]=1,uh[24]=uh[146]=0,ch[24]=ch[146]=-1,lh[24]=lh[146]=1,vh[24]=vh[146]=1,_h[24]=_h[146]=0,mh[24]=mh[146]=1,gh[24]=gh[146]=0,dh[24]=dh[146]=1,yh[24]=yh[146]=1,oh[24]=oh[146]=0,sh[24]=sh[146]=-1,ah[24]=ah[146]=0,hh[6]=hh[164]=-1,ph[6]=ph[164]=0,fh[6]=fh[164]=1,vh[6]=vh[164]=-1,_h[6]=_h[164]=0,mh[6]=mh[164]=0,bh[6]=bh[164]=0,Ih[6]=Ih[164]=-1,Nh[6]=Nh[164]=1,xh[6]=xh[164]=1,Eh[6]=Eh[164]=0,wh[6]=wh[164]=0,gh[129]=gh[41]=0,dh[129]=dh[41]=1,yh[129]=yh[41]=1,bh[129]=bh[41]=0,Ih[129]=Ih[41]=1,Nh[129]=Nh[41]=0,nh[129]=nh[41]=-1,rh[129]=rh[41]=0,ih[129]=ih[41]=0,oh[129]=oh[41]=0,sh[129]=sh[41]=-1,ah[129]=ah[41]=0,vh[66]=vh[104]=0,_h[66]=_h[104]=1,mh[66]=mh[104]=0,gh[66]=gh[104]=-1,dh[66]=dh[104]=0,yh[66]=yh[104]=1,xh[66]=xh[104]=0,Eh[66]=Eh[104]=-1,wh[66]=wh[104]=0,nh[66]=nh[104]=0,rh[66]=rh[104]=-1,ih[66]=ih[104]=1,uh[144]=uh[26]=-1,ch[144]=ch[26]=0,lh[144]=lh[26]=0,bh[144]=bh[26]=1,Ih[144]=Ih[26]=0,Nh[144]=Nh[26]=1,xh[144]=xh[26]=0,Eh[144]=Eh[26]=1,wh[144]=wh[26]=1,oh[144]=oh[26]=-1,sh[144]=sh[26]=0,ah[144]=ah[26]=1,hh[36]=hh[134]=0,ph[36]=ph[134]=1,fh[36]=fh[134]=1,vh[36]=vh[134]=0,_h[36]=_h[134]=1,mh[36]=mh[134]=0,nh[36]=nh[134]=0,rh[36]=rh[134]=-1,ih[36]=ih[134]=1,oh[36]=oh[134]=1,sh[36]=sh[134]=0,ah[36]=ah[134]=0,uh[9]=uh[161]=-1,ch[9]=ch[161]=0,lh[9]=lh[161]=0,hh[9]=hh[161]=0,ph[9]=ph[161]=-1,fh[9]=fh[161]=0,gh[9]=gh[161]=1,dh[9]=dh[161]=0,yh[9]=yh[161]=0,bh[9]=bh[161]=1,Ih[9]=Ih[161]=0,Nh[9]=Nh[161]=1,uh[136]=0,ch[136]=1,lh[136]=1,hh[136]=0,ph[136]=1,fh[136]=0,vh[136]=-1,_h[136]=0,mh[136]=1,gh[136]=-1,dh[136]=0,yh[136]=0,bh[136]=0,Ih[136]=-1,Nh[136]=0,xh[136]=0,Eh[136]=-1,wh[136]=1,nh[136]=1,rh[136]=0,ih[136]=0,oh[136]=1,sh[136]=0,ah[136]=1,uh[34]=0,ch[34]=-1,lh[34]=0,hh[34]=0,ph[34]=-1,fh[34]=1,vh[34]=1,_h[34]=0,mh[34]=0,gh[34]=1,dh[34]=0,yh[34]=1,bh[34]=0,Ih[34]=1,Nh[34]=1,xh[34]=0,Eh[34]=1,wh[34]=0,nh[34]=-1,rh[34]=0,ih[34]=1,oh[34]=-1,sh[34]=0,ah[34]=0,uh[35]=0,ch[35]=1,lh[35]=1,hh[35]=0,ph[35]=-1,fh[35]=1,vh[35]=1,_h[35]=0,mh[35]=0,gh[35]=-1,dh[35]=0,yh[35]=0,bh[35]=0,Ih[35]=-1,Nh[35]=0,xh[35]=0,Eh[35]=1,wh[35]=0,nh[35]=-1,rh[35]=0,ih[35]=1,oh[35]=1,sh[35]=0,ah[35]=1,uh[153]=0,ch[153]=1,lh[153]=1,gh[153]=-1,dh[153]=0,yh[153]=0,bh[153]=0,Ih[153]=-1,Nh[153]=0,oh[153]=1,sh[153]=0,ah[153]=1,hh[102]=0,ph[102]=-1,fh[102]=1,vh[102]=1,_h[102]=0,mh[102]=0,xh[102]=0,Eh[102]=1,wh[102]=0,nh[102]=-1,rh[102]=0,ih[102]=1,uh[155]=0,ch[155]=-1,lh[155]=0,gh[155]=1,dh[155]=0,yh[155]=1,bh[155]=0,Ih[155]=1,Nh[155]=1,oh[155]=-1,sh[155]=0,ah[155]=0,hh[103]=0,ph[103]=1,fh[103]=0,vh[103]=-1,_h[103]=0,mh[103]=1,xh[103]=0,Eh[103]=-1,wh[103]=1,nh[103]=1,rh[103]=0,ih[103]=0,uh[152]=0,ch[152]=1,lh[152]=1,vh[152]=-1,_h[152]=0,mh[152]=1,gh[152]=-1,dh[152]=0,yh[152]=0,bh[152]=0,Ih[152]=-1,Nh[152]=0,xh[152]=0,Eh[152]=-1,wh[152]=1,oh[152]=1,sh[152]=0,ah[152]=1,uh[156]=0,ch[156]=-1,lh[156]=1,vh[156]=1,_h[156]=0,mh[156]=1,gh[156]=-1,dh[156]=0,yh[156]=0,bh[156]=0,Ih[156]=-1,Nh[156]=0,xh[156]=0,Eh[156]=1,wh[156]=1,oh[156]=-1,sh[156]=0,ah[156]=1,uh[137]=0,ch[137]=1,lh[137]=1,hh[137]=0,ph[137]=1,fh[137]=0,gh[137]=-1,dh[137]=0,yh[137]=0,bh[137]=0,Ih[137]=-1,Nh[137]=0,nh[137]=1,rh[137]=0,ih[137]=0,oh[137]=1,sh[137]=0,ah[137]=1,uh[139]=0,ch[139]=1,lh[139]=1,hh[139]=0,ph[139]=-1,fh[139]=0,gh[139]=1,dh[139]=0,yh[139]=0,bh[139]=0,Ih[139]=1,
Nh[139]=0,nh[139]=-1,rh[139]=0,ih[139]=0,oh[139]=1,sh[139]=0,ah[139]=1,uh[98]=0,ch[98]=-1,lh[98]=0,hh[98]=0,ph[98]=-1,fh[98]=1,vh[98]=1,_h[98]=0,mh[98]=0,gh[98]=1,dh[98]=0,yh[98]=1,xh[98]=0,Eh[98]=1,wh[98]=0,nh[98]=-1,rh[98]=0,ih[98]=1,uh[99]=0,ch[99]=1,lh[99]=0,hh[99]=0,ph[99]=-1,fh[99]=1,vh[99]=1,_h[99]=0,mh[99]=0,gh[99]=-1,dh[99]=0,yh[99]=1,xh[99]=0,Eh[99]=-1,wh[99]=0,nh[99]=1,rh[99]=0,ih[99]=1,hh[38]=0,ph[38]=-1,fh[38]=1,vh[38]=1,_h[38]=0,mh[38]=0,bh[38]=0,Ih[38]=1,Nh[38]=1,xh[38]=0,Eh[38]=1,wh[38]=0,nh[38]=-1,rh[38]=0,ih[38]=1,oh[38]=-1,sh[38]=0,ah[38]=0,hh[39]=0,ph[39]=1,fh[39]=1,vh[39]=-1,_h[39]=0,mh[39]=0,bh[39]=0,Ih[39]=-1,Nh[39]=1,xh[39]=0,Eh[39]=1,wh[39]=0,nh[39]=-1,rh[39]=0,ih[39]=1,oh[39]=1,sh[39]=0,ah[39]=0;var Ch=function(t){return[[t.bottomleft,0],[0,0],[0,t.leftbottom]]},Sh=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0]]},Mh=function(t){return[[t.topright,1],[1,1],[1,t.righttop]]},Lh=function(t){return[[0,t.lefttop],[0,1],[t.topleft,1]]},Ph=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop]]},Oh=function(t){return[[t.bottomright,0],[t.bottomleft,0],[1,t.righttop],[1,t.rightbottom]]},Rh=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.topleft,1],[t.topright,1]]},Th=function(t){return[[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},Ah=function(t){return[[0,0],[0,t.leftbottom],[1,t.rightbottom],[1,0]]},Dh=function(t){return[[1,0],[t.bottomright,0],[t.topright,1],[1,1]]},Fh=function(t){return[[1,1],[1,t.righttop],[0,t.lefttop],[0,1]]},qh=function(t){return[[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},Gh=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.leftbottom],[0,t.lefttop]]},Bh=function(t){return[[t.topleft,1],[t.topright,1],[t.bottomright,0],[t.bottomleft,0]]},kh=function(){return[[0,0],[0,1],[1,1],[1,0]]},zh=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,1],[t.topleft,1]]},jh=function(t){return[[t.topright,1],[1,1],[1,0],[0,0],[0,t.leftbottom]]},Xh=function(t){return[[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[1,1]]},Uh=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,1]]},Yh=function(t){return[[1,t.righttop],[1,t.rightbottom],[0,t.lefttop],[0,1],[t.topleft,1]]},Vh=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[t.topright,1]]},Hh=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop]]},Wh=function(t){return[[t.topright,1],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1]]},Jh=function(t){return[[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},Zh=function(t){return[[1,1],[1,t.righttop],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},Kh=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[t.topleft,1],[t.topright,1]]},Qh=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom]]},$h=function(t){return[[1,t.rightbottom],[1,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},tp=function(t){return[[1,1],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},ep=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1]]},np=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,1],[t.topleft,1]]},rp=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ip=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},op=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},sp=function(t){return[[1,1],[1,t.righttop],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topright,1]]},ap=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.lefttop],[0,1],[t.topleft,1]]},up=function(t){return[[1,1],[1,t.righttop],[t.bottomright,0],[t.bottomleft,0],[0,t.leftbottom],[0,t.lefttop],[t.topright,1]]},cp=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomleft,0],[0,0],[0,t.leftbottom],[t.topleft,1],[t.topright,1]]},lp=function(t){return[[1,t.righttop],[1,t.rightbottom],[t.bottomright,0],[t.bottomleft,0],[0,t.lefttop],[0,1],[t.topleft,1]]},hp=function(t){return[[1,t.rightbottom],[1,0],[t.bottomright,0],[0,t.leftbottom],[0,t.lefttop],[t.topleft,1],[t.topright,1]]},pp=[],fp=[],gp=[],dp=[],yp=[],vp=[],_p=[],mp=[];dp[1]=yp[1]=18,dp[169]=yp[169]=18,gp[4]=fp[4]=12,gp[166]=fp[166]=12,pp[16]=mp[16]=4,pp[154]=mp[154]=4,vp[64]=_p[64]=22,vp[106]=_p[106]=22,gp[2]=vp[2]=17,dp[2]=yp[2]=18,gp[168]=vp[168]=17,dp[168]=yp[168]=18,pp[8]=dp[8]=9,fp[8]=gp[8]=12,pp[162]=dp[162]=9,fp[162]=gp[162]=12,pp[32]=mp[32]=4,fp[32]=_p[32]=1,pp[138]=mp[138]=4,fp[138]=_p[138]=1,yp[128]=mp[128]=21,vp[128]=_p[128]=22,yp[42]=mp[42]=21,vp[42]=_p[42]=22,fp[5]=yp[5]=14,fp[165]=yp[165]=14,gp[20]=mp[20]=6,gp[150]=mp[150]=6,pp[80]=vp[80]=11,pp[90]=vp[90]=11,dp[65]=_p[65]=3,dp[105]=_p[105]=3,pp[160]=vp[160]=11,fp[160]=yp[160]=14,pp[10]=vp[10]=11,fp[10]=yp[10]=14,gp[130]=mp[130]=6,dp[130]=_p[130]=3,gp[40]=mp[40]=6,dp[40]=_p[40]=3,fp[101]=_p[101]=1,fp[69]=_p[69]=1,yp[149]=mp[149]=21,yp[21]=mp[21]=21,gp[86]=vp[86]=17,gp[84]=vp[84]=17,pp[89]=dp[89]=9,pp[81]=dp[81]=9,pp[96]=_p[96]=0,fp[96]=vp[96]=15,pp[74]=_p[74]=0,fp[74]=vp[74]=15,pp[24]=gp[24]=8,dp[24]=mp[24]=7,pp[146]=gp[146]=8,dp[146]=mp[146]=7,fp[6]=vp[6]=15,gp[6]=yp[6]=16,fp[164]=vp[164]=15,gp[164]=yp[164]=16,dp[129]=mp[129]=7,yp[129]=_p[129]=20,dp[41]=mp[41]=7,yp[41]=_p[41]=20,gp[66]=_p[66]=2,dp[66]=vp[66]=19,gp[104]=_p[104]=2,dp[104]=vp[104]=19,pp[144]=yp[144]=10,vp[144]=mp[144]=23,pp[26]=yp[26]=10,vp[26]=mp[26]=23,fp[36]=mp[36]=5,gp[36]=_p[36]=2,fp[134]=mp[134]=5,gp[134]=_p[134]=2,pp[9]=yp[9]=10,fp[9]=dp[9]=13,pp[161]=yp[161]=10,fp[161]=dp[161]=13,fp[37]=mp[37]=5,yp[37]=_p[37]=20,fp[133]=mp[133]=5,yp[133]=_p[133]=20,gp[148]=yp[148]=16,vp[148]=mp[148]=23,gp[22]=yp[22]=16,vp[22]=mp[22]=23,pp[82]=gp[82]=8,dp[82]=vp[82]=19,pp[88]=gp[88]=8,dp[88]=vp[88]=19,pp[73]=_p[73]=0,fp[73]=dp[73]=13,pp[97]=_p[97]=0,fp[97]=dp[97]=13,pp[145]=dp[145]=9,yp[145]=mp[145]=21,pp[25]=dp[25]=9,yp[25]=mp[25]=21,fp[70]=_p[70]=1,gp[70]=vp[70]=17,fp[100]=_p[100]=1,gp[100]=vp[100]=17,pp[34]=dp[34]=9,fp[34]=gp[34]=12,yp[34]=mp[34]=21,vp[34]=_p[34]=22,pp[136]=mp[136]=4,fp[136]=_p[136]=1,gp[136]=vp[136]=17,dp[136]=yp[136]=18,pp[35]=mp[35]=4,fp[35]=gp[35]=12,dp[35]=yp[35]=18,vp[35]=_p[35]=22,pp[153]=mp[153]=4,dp[153]=yp[153]=18,fp[102]=gp[102]=12,vp[102]=_p[102]=22,pp[155]=dp[155]=9,yp[155]=mp[155]=23,fp[103]=_p[103]=1,gp[103]=vp[103]=17,pp[152]=mp[152]=4,gp[152]=vp[152]=17,dp[152]=yp[152]=18,pp[156]=gp[156]=8,dp[156]=yp[156]=18,vp[156]=mp[156]=23,pp[137]=mp[137]=4,fp[137]=_p[137]=1,dp[137]=yp[137]=18,pp[139]=mp[139]=4,fp[139]=dp[139]=13,yp[139]=_p[139]=20,pp[98]=dp[98]=9,fp[98]=gp[98]=12,vp[98]=_p[98]=22,pp[99]=_p[99]=0,fp[99]=gp[99]=12,dp[99]=vp[99]=19,fp[38]=gp[38]=12,yp[38]=mp[38]=21,vp[38]=_p[38]=22,fp[39]=mp[39]=5,gp[39]=yp[39]=16,vp[39]=_p[39]=22;var xp=[];xp[1]=xp[169]=Ch,xp[4]=xp[166]=Sh,xp[16]=xp[154]=Mh,xp[64]=xp[106]=Lh,xp[168]=xp[2]=Ph,xp[162]=xp[8]=Oh,xp[138]=xp[32]=Rh,xp[42]=xp[128]=Th,xp[5]=xp[165]=Ah,xp[20]=xp[150]=Dh,xp[80]=xp[90]=Fh,xp[65]=xp[105]=qh,xp[160]=xp[10]=Gh,xp[130]=xp[40]=Bh,xp[85]=kh,xp[101]=xp[69]=zh,xp[149]=xp[21]=jh,xp[86]=xp[84]=Xh,xp[89]=xp[81]=Uh,xp[96]=xp[74]=Yh,xp[24]=xp[146]=Vh,xp[6]=xp[164]=Hh,xp[129]=xp[41]=Wh,xp[66]=xp[104]=Jh,xp[144]=xp[26]=Zh,xp[36]=xp[134]=Kh,xp[9]=xp[161]=Qh,xp[37]=xp[133]=$h,xp[148]=xp[22]=tp,xp[82]=xp[88]=ep,xp[73]=xp[97]=np,xp[145]=xp[25]=rp,xp[70]=xp[100]=ip,xp[34]=function(t){return[Th(t),Oh(t)]},xp[35]=op,xp[136]=function(t){return[Rh(t),Ph(t)]},xp[153]=function(t){return[Mh(t),Ch(t)]},xp[102]=function(t){return[Sh(t),Lh(t)]},xp[155]=sp,xp[103]=ap,xp[152]=function(t){return[Mh(t),Ph(t)]},xp[156]=up,xp[137]=function(t){return[Rh(t),Ch(t)]},xp[139]=cp,xp[98]=function(t){return[Oh(t),Lh(t)]},xp[99]=lp,xp[38]=function(t){return[Sh(t),Th(t)]},xp[39]=hp;var Ep=function Em(t){this.id=Em.buildId(t),this.coordinates=t,this.innerEdges=[],this.outerEdges=[],this.outerEdgesSorted=!1};Ep.buildId=function(t){return t.join(",")},Ep.prototype.removeInnerEdge=function(t){this.innerEdges=this.innerEdges.filter(function(e){return e.from.id!==t.from.id})},Ep.prototype.removeOuterEdge=function(t){this.outerEdges=this.outerEdges.filter(function(e){return e.to.id!==t.to.id})},Ep.prototype.addOuterEdge=function(t){this.outerEdges.push(t),this.outerEdgesSorted=!1},Ep.prototype.sortOuterEdges=function(){var t=this;this.outerEdgesSorted||(this.outerEdges.sort(function(e,n){var r=e.to,i=n.to;if(r.coordinates[0]-t.coordinates[0]>=0&&i.coordinates[0]-t.coordinates[0]<0)return 1;if(r.coordinates[0]-t.coordinates[0]<0&&i.coordinates[0]-t.coordinates[0]>=0)return-1;if(r.coordinates[0]-t.coordinates[0]===0&&i.coordinates[0]-t.coordinates[0]===0)return r.coordinates[1]-t.coordinates[1]>=0||i.coordinates[1]-t.coordinates[1]>=0?r.coordinates[1]-i.coordinates[1]:i.coordinates[1]-r.coordinates[1];var o=ss(t.coordinates,r.coordinates,i.coordinates);if(o<0)return 1;if(o>0)return-1;var s=Math.pow(r.coordinates[0]-t.coordinates[0],2)+Math.pow(r.coordinates[1]-t.coordinates[1],2),a=Math.pow(i.coordinates[0]-t.coordinates[0],2)+Math.pow(i.coordinates[1]-t.coordinates[1],2);return s-a}),this.outerEdgesSorted=!0)},Ep.prototype.getOuterEdges=function(){return this.sortOuterEdges(),this.outerEdges},Ep.prototype.getOuterEdge=function(t){return this.sortOuterEdges(),this.outerEdges[t]},Ep.prototype.addInnerEdge=function(t){this.innerEdges.push(t)};var wp=function(t,e){this.from=t,this.to=e,this.next=void 0,this.label=void 0,this.symetric=void 0,this.ring=void 0,this.from.addOuterEdge(this),this.to.addInnerEdge(this)};wp.prototype.getSymetric=function(){return this.symetric||(this.symetric=new wp(this.to,this.from),this.symetric.symetric=this),this.symetric},wp.prototype.deleteEdge=function(){this.from.removeOuterEdge(this),this.to.removeInnerEdge(this)},wp.prototype.isEqual=function(t){return this.from.id===t.from.id&&this.to.id===t.to.id},wp.prototype.toString=function(){return"Edge { "+this.from.id+" -> "+this.to.id+" }"},wp.prototype.toLineString=function(){return a([this.from.coordinates,this.to.coordinates])},wp.prototype.compareTo=function(t){return ss(t.from.coordinates,t.to.coordinates,this.to.coordinates)};var bp=function(){this.edges=[],this.polygon=void 0,this.envelope=void 0},Ip={length:{configurable:!0}};bp.prototype.push=function(t){this[this.edges.length]=t,this.edges.push(t),this.polygon=this.envelope=void 0},bp.prototype.get=function(t){return this.edges[t]},Ip.length.get=function(){return this.edges.length},bp.prototype.forEach=function(t){this.edges.forEach(t)},bp.prototype.map=function(t){return this.edges.map(t)},bp.prototype.some=function(t){return this.edges.some(t)},bp.prototype.isValid=function(){return!0},bp.prototype.isHole=function(){var t=this,e=this.edges.reduce(function(e,n,r){return n.from.coordinates[1]>t.edges[e].from.coordinates[1]&&(e=r),e},0),n=(0===e?this.length:e)-1,r=(e+1)%this.length,i=ss(this.edges[n].from.coordinates,this.edges[e].from.coordinates,this.edges[r].from.coordinates);return 0===i?this.edges[n].from.coordinates[0]>this.edges[r].from.coordinates[0]:i>0},bp.prototype.toMultiPoint=function(){return h(this.edges.map(function(t){return t.from.coordinates}))},bp.prototype.toPolygon=function(){if(this.polygon)return this.polygon;var t=this.edges.map(function(t){return t.from.coordinates});return t.push(this.edges[0].from.coordinates),this.polygon=o([t])},bp.prototype.getEnvelope=function(){return this.envelope?this.envelope:this.envelope=pn(this.toPolygon())},bp.findEdgeRingContaining=function(t,e){var n,i,o=t.getEnvelope();return e.forEach(function(e){var s=e.getEnvelope();if(i&&(n=i.getEnvelope()),!as(s,o)&&us(s,o)){var a=t.map(function(t){return t.from.coordinates}).find(function(t){return!e.some(function(e){return cs(t,e.from.coordinates)})});a&&e.inside(r(a))&&(i&&!us(n,s)||(i=e))}}),i},bp.prototype.inside=function(t){return ue(t,this.toPolygon())},Object.defineProperties(bp.prototype,Ip);var Np=function(){this.edges=[],this.nodes={}};Np.fromGeoJson=function(t){ls(t);var e=new Np;return X(t,function(t){tt(t,"LineString","Graph::fromGeoJson"),D(t,function(t,n){if(t){var r=e.getNode(t),i=e.getNode(n);e.addEdge(r,i)}return n})}),e},Np.prototype.getNode=function(t){var e=Ep.buildId(t),n=this.nodes[e];return n||(n=this.nodes[e]=new Ep(t)),n},Np.prototype.addEdge=function(t,e){var n=new wp(t,e),r=n.getSymetric();this.edges.push(n),this.edges.push(r)},Np.prototype.deleteDangles=function(){var t=this;Object.keys(this.nodes).map(function(e){return t.nodes[e]}).forEach(function(e){return t._removeIfDangle(e)})},Np.prototype._removeIfDangle=function(t){var e=this;if(t.innerEdges.length<=1){var n=t.getOuterEdges().map(function(t){return t.to});this.removeNode(t),n.forEach(function(t){return e._removeIfDangle(t)})}},Np.prototype.deleteCutEdges=function(){var t=this;this._computeNextCWEdges(),this._findLabeledEdgeRings(),this.edges.forEach(function(e){e.label===e.symetric.label&&(t.removeEdge(e.symetric),t.removeEdge(e))})},Np.prototype._computeNextCWEdges=function(t){var e=this;"undefined"==typeof t?Object.keys(this.nodes).forEach(function(t){return e._computeNextCWEdges(e.nodes[t])}):t.getOuterEdges().forEach(function(e,n){t.getOuterEdge((0===n?t.getOuterEdges().length:n)-1).symetric.next=e})},Np.prototype._computeNextCCWEdges=function(t,e){for(var n,r,i=t.getOuterEdges(),o=i.length-1;o>=0;--o){var s=i[o],a=s.symetric,u=void 0,c=void 0;s.label===e&&(u=s),a.label===e&&(c=a),u&&c&&(c&&(r=c),u&&(r&&(r.next=u,r=void 0),n||(n=u)))}r&&(r.next=n)},Np.prototype._findLabeledEdgeRings=function(){var t=[],e=0;return this.edges.forEach(function(n){if(!(n.label>=0)){t.push(n);var r=n;do r.label=e,r=r.next;while(!n.isEqual(r));e++}}),t},Np.prototype.getEdgeRings=function(){var t=this;this._computeNextCWEdges(),this.edges.forEach(function(t){t.label=void 0}),this._findLabeledEdgeRings().forEach(function(e){t._findIntersectionNodes(e).forEach(function(n){t._computeNextCCWEdges(n,e.label)})});var e=[];return this.edges.forEach(function(n){n.ring||e.push(t._findEdgeRing(n))}),e},Np.prototype._findIntersectionNodes=function(t){var e=[],n=t,r=function(){var r=0;n.from.getOuterEdges().forEach(function(e){e.label===t.label&&++r}),r>1&&e.push(n.from),n=n.next};do r();while(!t.isEqual(n));return e},Np.prototype._findEdgeRing=function(t){var e=t,n=new bp;do n.push(e),e.ring=n,e=e.next;while(!t.isEqual(e));return n},Np.prototype.removeNode=function(t){var e=this;t.getOuterEdges().forEach(function(t){return e.removeEdge(t)}),t.innerEdges.forEach(function(t){return e.removeEdge(t)}),delete this.nodes[t.id]},Np.prototype.removeEdge=function(t){this.edges=this.edges.filter(function(e){return!e.isEqual(t)}),t.deleteEdge()};var Cp=qt(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}e=t.exports="function"==typeof Object.keys?Object.keys:n,e.shim=n}),Sp=(Cp.shim,qt(function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var i="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=i?n:r,e.supported=n,e.unsupported=r})),Mp=(Sp.supported,Sp.unsupported,qt(function(t){function e(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function r(t,r,s){var a,u;if(e(t)||e(r))return!1;if(t.prototype!==r.prototype)return!1;if(Sp(t))return!!Sp(r)&&(t=i.call(t),r=i.call(r),o(t,r,s));if(n(t)){if(!n(r))return!1;if(t.length!==r.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==r[a])return!1;return!0}try{var c=Cp(t),l=Cp(r)}catch(h){return!1}if(c.length!=l.length)return!1;for(c.sort(),l.sort(),a=c.length-1;a>=0;a--)if(c[a]!=l[a])return!1;for(a=c.length-1;a>=0;a--)if(u=c[a],!o(t[u],r[u],s))return!1;return typeof t==typeof r}var i=Array.prototype.slice,o=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:r(t,e,n))}})),Lp=function(t){this.precision=t&&t.precision?t.precision:17,this.direction=!(!t||!t.direction)&&t.direction,this.pseudoNode=!(!t||!t.pseudoNode)&&t.pseudoNode,this.objectComparator=t&&t.objectComparator?t.objectComparator:Bs};Lp.prototype.compare=function(t,e){if(t.type!==e.type||!Gs(t,e))return!1;switch(t.type){case"Point":return this.compareCoord(t.coordinates,e.coordinates);case"LineString":return this.compareLine(t.coordinates,e.coordinates,0,!1);case"Polygon":return this.comparePolygon(t,e);case"Feature":return this.compareFeature(t,e);default:if(0===t.type.indexOf("Multi")){var n=this,r=qs(t),i=qs(e);return r.every(function(t){return this.some(function(e){return n.compare(t,e)})},i)}}return!1},Lp.prototype.compareCoord=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n].toFixed(this.precision)!==e[n].toFixed(this.precision))return!1;return!0},Lp.prototype.compareLine=function(t,e,n,r){if(!Gs(t,e))return!1;var i=this.pseudoNode?t:this.removePseudo(t),o=this.pseudoNode?e:this.removePseudo(e);if(!r||this.compareCoord(i[0],o[0])||(o=this.fixStartIndex(o,i))){var s=this.compareCoord(i[n],o[n]);return this.direction||s?this.comparePath(i,o):!!this.compareCoord(i[n],o[o.length-(1+n)])&&this.comparePath(i.slice().reverse(),o)}},Lp.prototype.fixStartIndex=function(t,e){for(var n,r=-1,i=0;i<t.length;i++)if(this.compareCoord(t[i],e[0])){r=i;break}return r>=0&&(n=[].concat(t.slice(r,t.length),t.slice(1,r+1))),n},Lp.prototype.comparePath=function(t,e){var n=this;return t.every(function(t,e){return n.compareCoord(t,this[e])},e)},Lp.prototype.comparePolygon=function(t,e){if(this.compareLine(t.coordinates[0],e.coordinates[0],1,!0)){var n=t.coordinates.slice(1,t.coordinates.length),r=e.coordinates.slice(1,e.coordinates.length),i=this;return n.every(function(t){return this.some(function(e){return i.compareLine(t,e,1,!0)})},r)}return!1},Lp.prototype.compareFeature=function(t,e){return!(t.id!==e.id||!this.objectComparator(t.properties,e.properties)||!this.compareBBox(t,e))&&this.compare(t.geometry,e.geometry)},Lp.prototype.compareBBox=function(t,e){return!!(!t.bbox&&!e.bbox||t.bbox&&e.bbox&&this.compareCoord(t.bbox,e.bbox))},Lp.prototype.removePseudo=function(t){return t};var Pp=Lp,Op=qt(function(t){function e(t,e,n,r){this.dataset=[],this.epsilon=1,this.minPts=2,this.distance=this._euclideanDistance,this.clusters=[],this.noise=[],this._visited=[],this._assigned=[],this._datasetLength=0,this._init(t,e,n,r)}e.prototype.run=function(t,e,n,r){this._init(t,e,n,r);for(var i=0;i<this._datasetLength;i++)if(1!==this._visited[i]){this._visited[i]=1;var o=this._regionQuery(i);if(o.length<this.minPts)this.noise.push(i);else{var s=this.clusters.length;this.clusters.push([]),this._addToCluster(i,s),this._expandCluster(s,o)}}return this.clusters},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this.noise=[],this._datasetLength=t.length,this._visited=new Array(this._datasetLength),this._assigned=new Array(this._datasetLength)}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._expandCluster=function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(1!==this._visited[r]){this._visited[r]=1;var i=this._regionQuery(r);i.length>=this.minPts&&(e=this._mergeArrays(e,i))}1!==this._assigned[r]&&this._addToCluster(r,t)}},e.prototype._addToCluster=function(t,e){this.clusters[e].push(t),this._assigned[t]=1},e.prototype._regionQuery=function(t){for(var e=[],n=0;n<this._datasetLength;n++){var r=this.distance(this.dataset[t],this.dataset[n]);r<this.epsilon&&e.push(n)}return e},e.prototype._mergeArrays=function(t,e){for(var n=e.length,r=0;r<n;r++){var i=e[r];t.indexOf(i)<0&&t.push(i)}return t},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Rp=qt(function(t){function e(t,e,n){this.k=3,this.dataset=[],this.assignments=[],this.centroids=[],this.init(t,e,n)}e.prototype.init=function(t,e,n){this.assignments=[],this.centroids=[],"undefined"!=typeof t&&(this.dataset=t),"undefined"!=typeof e&&(this.k=e),"undefined"!=typeof n&&(this.distance=n)},e.prototype.run=function(t,e){this.init(t,e);for(var n=this.dataset.length,r=0;r<this.k;r++)this.centroids[r]=this.randomCentroid();for(var i=!0;i;){i=this.assign();for(var o=0;o<this.k;o++){for(var s=new Array(l),a=0,u=0;u<l;u++)s[u]=0;for(var c=0;c<n;c++){var l=this.dataset[c].length;if(o===this.assignments[c]){for(var u=0;u<l;u++)s[u]+=this.dataset[c][u];a++}}if(a>0){for(var u=0;u<l;u++)s[u]/=a;this.centroids[o]=s}else this.centroids[o]=this.randomCentroid(),i=!0}}return this.getClusters()},e.prototype.randomCentroid=function(){var t,e,n=this.dataset.length-1;do e=Math.round(Math.random()*n),t=this.dataset[e];while(this.centroids.indexOf(t)>=0);return t},e.prototype.assign=function(){for(var t,e=!1,n=this.dataset.length,r=0;r<n;r++)t=this.argmin(this.dataset[r],this.centroids,this.distance),t!=this.assignments[r]&&(this.assignments[r]=t,e=!0);return e},e.prototype.getClusters=function(){for(var t,e=new Array(this.k),n=0;n<this.assignments.length;n++)t=this.assignments[n],"undefined"==typeof e[t]&&(e[t]=[]),e[t].push(n);return e},e.prototype.argmin=function(t,e,n){for(var r,i=Number.MAX_VALUE,o=0,s=e.length,a=0;a<s;a++)r=n(t,e[a]),r<i&&(i=r,o=a);return o},e.prototype.distance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;){var i=t[r]-e[r];n+=i*i}return Math.sqrt(n)},t.exports&&(t.exports=e)}),Tp=qt(function(t){function e(t,e,n){this._queue=[],this._priorities=[],this._sorting="desc",this._init(t,e,n)}e.prototype.insert=function(t,e){for(var n=this._queue.length,r=n;r--;){var i=this._priorities[r];"desc"===this._sorting?e>i&&(n=r):e<i&&(n=r)}this._insertAt(t,e,n)},e.prototype.remove=function(t){for(var e=this._queue.length;e--;){var n=this._queue[e];if(t===n){this._queue.splice(e,1),this._priorities.splice(e,1);break}}},e.prototype.forEach=function(t){this._queue.forEach(t)},e.prototype.getElements=function(){return this._queue},e.prototype.getElementPriority=function(t){return this._priorities[t]},e.prototype.getPriorities=function(){return this._priorities},e.prototype.getElementsWithPriorities=function(){for(var t=[],e=0,n=this._queue.length;e<n;e++)t.push([this._queue[e],this._priorities[e]]);return t},e.prototype._init=function(t,e,n){if(t&&e){if(this._queue=[],this._priorities=[],t.length!==e.length)throw new Error("Arrays must have the same length");for(var r=0;r<t.length;r++)this.insert(t[r],e[r])}n&&(this._sorting=n)},e.prototype._insertAt=function(t,e,n){this._queue.length===n?(this._queue.push(t),this._priorities.push(e)):(this._queue.splice(n,0,t),this._priorities.splice(n,0,e))},t.exports&&(t.exports=e)}),Ap=qt(function(t){function e(t,e,n,r){this.epsilon=1,this.minPts=1,this.distance=this._euclideanDistance,this._reachability=[],this._processed=[],this._coreDistance=0,this._orderedList=[],this._init(t,e,n,r)}if(t.exports)var n=Tp;e.prototype.run=function(t,e,r,i){this._init(t,e,r,i);for(var o=0,s=this.dataset.length;o<s;o++)if(1!==this._processed[o]){this._processed[o]=1,this.clusters.push([o]);var a=this.clusters.length-1;this._orderedList.push(o);var u=new n(null,null,"asc"),c=this._regionQuery(o);void 0!==this._distanceToCore(o)&&(this._updateQueue(o,c,u),this._expandCluster(a,u))}return this.clusters},e.prototype.getReachabilityPlot=function(){for(var t=[],e=0,n=this._orderedList.length;e<n;e++){var r=this._orderedList[e],i=this._reachability[r];t.push([r,i])}return t},e.prototype._init=function(t,e,n,r){if(t){if(!(t instanceof Array))throw Error("Dataset must be of type array, "+typeof t+" given");this.dataset=t,this.clusters=[],this._reachability=new Array(this.dataset.length),this._processed=new Array(this.dataset.length),this._coreDistance=0,this._orderedList=[]}e&&(this.epsilon=e),n&&(this.minPts=n),r&&(this.distance=r)},e.prototype._updateQueue=function(t,e,n){var r=this;this._coreDistance=this._distanceToCore(t),e.forEach(function(e){if(void 0===r._processed[e]){var i=r.distance(r.dataset[t],r.dataset[e]),o=Math.max(r._coreDistance,i);void 0===r._reachability[e]?(r._reachability[e]=o,n.insert(e,o)):o<r._reachability[e]&&(r._reachability[e]=o,n.remove(e),n.insert(e,o))}})},e.prototype._expandCluster=function(t,e){for(var n=e.getElements(),r=0,i=n.length;r<i;r++){var o=n[r];if(void 0===this._processed[o]){var s=this._regionQuery(o);this._processed[o]=1,this.clusters[t].push(o),this._orderedList.push(o),void 0!==this._distanceToCore(o)&&(this._updateQueue(o,s,e),this._expandCluster(t,e))}}},e.prototype._distanceToCore=function(t){for(var e=this.epsilon,n=0;n<e;n++){var r=this._regionQuery(t,n);if(r.length>=this.minPts)return n}},e.prototype._regionQuery=function(t,e){e=e||this.epsilon;for(var n=[],r=0,i=this.dataset.length;r<i;r++)this.distance(this.dataset[t],this.dataset[r])<e&&n.push(r);return n},e.prototype._euclideanDistance=function(t,e){for(var n=0,r=Math.min(t.length,e.length);r--;)n+=(t[r]-e[r])*(t[r]-e[r]);return Math.sqrt(n)},t.exports&&(t.exports=e)}),Dp=qt(function(t){t.exports&&(t.exports={DBSCAN:Op,KMEANS:Rp,OPTICS:Ap,PriorityQueue:Tp})}),Fp=(Dp.DBSCAN,Dp.KMEANS,Dp.OPTICS,Dp.PriorityQueue,{eudist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++){var s=(t[o]||0)-(e[o]||0);i+=s*s}return n?Math.sqrt(i):i},mandist:function(t,e,n){for(var r=t.length,i=0,o=0;o<r;o++)i+=Math.abs((t[o]||0)-(e[o]||0));return n?Math.sqrt(i):i},dist:function(t,e,n){var r=Math.abs(t-e);return n?r:r*r}}),qp=Fp.eudist,Gp=Fp.dist,Bp={kmrand:function(t,e){for(var n={},r=[],i=e<<2,o=t.length,s=t[0].length>0;r.length<e&&i-- >0;){var a=t[Math.floor(Math.random()*o)],u=s?a.join("_"):""+a;n[u]||(n[u]=!0,r.push(a))}if(r.length<e)throw new Error("Error initializating clusters");return r},kmpp:function(t,e){var n=t[0].length?qp:Gp,r=[],i=t.length,o=t[0].length>0,s=t[Math.floor(Math.random()*i)];o?s.join("_"):""+s;for(r.push(s);r.length<e;){for(var a=[],u=r.length,c=0,l=[],h=0;h<i;h++){for(var p=1/0,f=0;f<u;f++){var g=n(t[h],r[f]);g<=p&&(p=g)}a[h]=p}for(var d=0;d<i;d++)c+=a[d];for(var y=0;y<i;y++)l[y]={i:y,v:t[y],pr:a[y]/c,cs:0};l.sort(function(t,e){return t.pr-e.pr}),l[0].cs=l[0].pr;for(var v=1;v<i;v++)l[v].cs=l[v-1].cs+l[v].pr;for(var _=Math.random(),m=0;m<i-1&&l[m++].cs<_;);r.push(l[m-1].v)}return r}},kp=Fp.eudist,zp=Bp.kmrand,jp=Bp.kmpp,Xp=1e4,Up=Us,Yp={search:function(t,e,n,r){t.cleanDirty(),r=r||{};var i=r.heuristic||Yp.heuristics.manhattan,o=r.closest||!1,s=Zs(),a=e;for(e.h=i(e,n),s.push(e);s.size()>0;){var u=s.pop();if(u===n)return Js(u);u.closed=!0;for(var c=t.neighbors(u),l=0,h=c.length;l<h;++l){var p=c[l];if(!p.closed&&!p.isWall()){var f=u.g+p.getCost(u),g=p.visited;(!g||f<p.g)&&(p.visited=!0,p.parent=u,p.h=p.h||i(p,n),p.g=f,p.f=p.g+p.h,t.markDirty(p),o&&(p.h<a.h||p.h===a.h&&p.g<a.g)&&(a=p),g?s.rescoreElement(p):s.push(p))}}}return o?Js(a):[]},heuristics:{manhattan:function(t,e){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n+r},diagonal:function(t,e){var n=1,r=Math.sqrt(2),i=Math.abs(e.x-t.x),o=Math.abs(e.y-t.y);return n*(i+o)+(r-2*n)*Math.min(i,o)}},cleanNode:function(t){t.f=0,t.g=0,t.h=0,t.visited=!1,t.closed=!1,t.parent=null}};Ks.prototype.init=function(){this.dirtyNodes=[];for(var t=0;t<this.nodes.length;t++)Yp.cleanNode(this.nodes[t])},Ks.prototype.cleanDirty=function(){for(var t=0;t<this.dirtyNodes.length;t++)Yp.cleanNode(this.dirtyNodes[t]);this.dirtyNodes=[]},Ks.prototype.markDirty=function(t){this.dirtyNodes.push(t)},Ks.prototype.neighbors=function(t){var e=[],n=t.x,r=t.y,i=this.grid;return i[n-1]&&i[n-1][r]&&e.push(i[n-1][r]),i[n+1]&&i[n+1][r]&&e.push(i[n+1][r]),i[n]&&i[n][r-1]&&e.push(i[n][r-1]),i[n]&&i[n][r+1]&&e.push(i[n][r+1]),this.diagonal&&(i[n-1]&&i[n-1][r-1]&&e.push(i[n-1][r-1]),i[n+1]&&i[n+1][r-1]&&e.push(i[n+1][r-1]),i[n-1]&&i[n-1][r+1]&&e.push(i[n-1][r+1]),i[n+1]&&i[n+1][r+1]&&e.push(i[n+1][r+1])),e},Ks.prototype.toString=function(){for(var t,e,n,r,i=[],o=this.grid,s=0,a=o.length;s<a;s++){for(t=[],e=o[s],n=0,r=e.length;n<r;n++)t.push(e[n].weight);i.push(t.join(" "))}return i.join("\n")},Qs.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},Qs.prototype.getCost=function(t){return t&&t.x!==this.x&&t.y!==this.y?1.41421*this.weight:this.weight},Qs.prototype.isWall=function(){return 0===this.weight},$s.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[n]=e,this.content[t]=r,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],r=this.scoreFunction(n);;){var i,o=t+1<<1,s=o-1,a=null;if(s<e){var u=this.content[s];i=this.scoreFunction(u),i<r&&(a=s)}if(o<e){var c=this.content[o],l=this.scoreFunction(c);l<(null===a?r:i)&&(a=o)}if(null===a)break;this.content[t]=this.content[a],this.content[a]=n,t=a}}};var Vp=function(t){return function(){return t}};ia.prototype={constructor:ia,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ua(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(sa(this,n),t=n,n=t.U),n.C=!1,r.C=!0,aa(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(aa(this,n),t=n,n=t.U),n.C=!1,r.C=!0,sa(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,s=t.R;if(n=o?s?ua(s):o:s,i?i.L===t?i.L=n:i.R=n:this._=n,o&&s?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==s?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=s,s.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,sa(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,aa(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,sa(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,aa(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,sa(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,aa(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var Hp,Wp,Jp,Zp,Kp,Qp=[],$p=[],tf=1e-6,ef=1e-12;Ta.prototype={constructor:Ta,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return va(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,s,a=n.site,u=-1,c=e[i[o-1]],l=c.left===a?c.right:c.left;++u<o;)s=l,c=e[i[u]],l=c.left===a?c.right:c.left,s&&l&&r<s.index&&r<l.index&&Oa(a,s,l)<0&&t.push([a.data,s.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,s=o._found||0,a=o.cells.length;!(i=o.cells[s]);)if(++s>=a)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do i=o.cells[r=s],s=null,i.halfedges.forEach(function(n){var r=o.edges[n],a=r.left;if(a!==i.site&&a||(a=r.right)){var u=t-a[0],c=e-a[1],h=u*u+c*c;
h<l&&(l=h,s=a.index)}});while(null!==s);return o._found=r,null==n||l<=n*n?i.site:null}};var nf=function(){function t(t){return new Ta(t.map(function(r,i){var o=[Math.round(e(r,i,t)/tf)*tf,Math.round(n(r,i,t)/tf)*tf];return o.index=i,o.data=r,o}),r)}var e=na,n=ra,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Vp(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Vp(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},rf=Object.freeze({randomPosition:Xa,randomPoint:Ua,randomPolygon:Ya,randomLineString:Va}),of=Object.freeze({getCluster:Qa,clusterEach:$a,clusterReduce:tu,createBins:eu,applyFilter:nu,propertiesContainsFilter:ru,filterProperties:iu});"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t){if(void 0===this||null===this)throw new TypeError(this+" is not an object");var e=Object(this),n=Math.max(Math.min(e.length,9007199254740991),0)||0,r=1 in arguments?parseInt(Number(arguments[1]),10)||0:0;r=r<0?Math.max(n+r,0):Math.min(r,n);var i=2 in arguments&&void 0!==arguments[2]?parseInt(Number(arguments[2]),10)||0:n;for(i=i<0?Math.max(n+arguments[2],0):Math.min(i,n);r<i;)e[r]=t,++r;return e},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};var sf=function(){};sf.prototype.interfaces_=function(){return[]},sf.prototype.getClass=function(){return sf},sf.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};var af=function(){},uf=function(){},cf={MAX_VALUE:{configurable:!0}};uf.isNaN=function(t){return Number.isNaN(t)},uf.doubleToLongBits=function(t){return t},uf.longBitsToDouble=function(t){return t},uf.isInfinite=function(t){return!Number.isFinite(t)},cf.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(uf,cf);var lf=function(){},hf=function(){},pf=function(){},ff=function wm(){if(this.x=null,this.y=null,this.z=null,0===arguments.length)this.x=0,this.y=0,this.z=wm.NULL_ORDINATE;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.z=t.z}else 2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=wm.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},gf={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};ff.prototype.setOrdinate=function(t,e){switch(t){case ff.X:this.x=e;break;case ff.Y:this.y=e;break;case ff.Z:this.z=e;break;default:throw new af("Invalid ordinate index: "+t)}},ff.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!sf.equalsWithTolerance(this.x,e.x,n)&&!!sf.equalsWithTolerance(this.y,e.y,n)}},ff.prototype.getOrdinate=function(t){switch(t){case ff.X:return this.x;case ff.Y:return this.y;case ff.Z:return this.z}throw new af("Invalid ordinate index: "+t)},ff.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||uf.isNaN(this.z))&&uf.isNaN(t.z)},ff.prototype.equals=function(t){return t instanceof ff&&this.equals2D(t)},ff.prototype.equalInZ=function(t,e){return sf.equalsWithTolerance(this.z,t.z,e)},ff.prototype.compareTo=function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},ff.prototype.clone=function(){},ff.prototype.copy=function(){return new ff(this)},ff.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},ff.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},ff.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},ff.prototype.hashCode=function(){var t=17;return t=37*t+ff.hashCode(this.x),t=37*t+ff.hashCode(this.y)},ff.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},ff.prototype.interfaces_=function(){return[lf,hf,ou]},ff.prototype.getClass=function(){return ff},ff.hashCode=function(){if(1===arguments.length){var t=arguments[0],e=uf.doubleToLongBits(t);return Math.trunc((e^e)>>>32)}},gf.DimensionalComparator.get=function(){return df},gf.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},gf.NULL_ORDINATE.get=function(){return uf.NaN},gf.X.get=function(){return 0},gf.Y.get=function(){return 1},gf.Z.get=function(){return 2},Object.defineProperties(ff,gf);var df=function(t){if(this._dimensionsToTest=2,0===arguments.length);else if(1===arguments.length){var e=arguments[0];if(2!==e&&3!==e)throw new af("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};df.prototype.compare=function(t,e){var n=t,r=e,i=df.compare(n.x,r.x);if(0!==i)return i;var o=df.compare(n.y,r.y);if(0!==o)return o;if(this._dimensionsToTest<=2)return 0;var s=df.compare(n.z,r.z);return s},df.prototype.interfaces_=function(){return[pf]},df.prototype.getClass=function(){return df},df.compare=function(t,e){return t<e?-1:t>e?1:uf.isNaN(t)?uf.isNaN(e)?0:-1:uf.isNaN(e)?1:0};var yf=function(){};yf.prototype.create=function(){},yf.prototype.interfaces_=function(){return[]},yf.prototype.getClass=function(){return yf};var vf=function(){},_f={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};vf.prototype.interfaces_=function(){return[]},vf.prototype.getClass=function(){return vf},vf.toLocationSymbol=function(t){switch(t){case vf.EXTERIOR:return"e";case vf.BOUNDARY:return"b";case vf.INTERIOR:return"i";case vf.NONE:return"-"}throw new af("Unknown location value: "+t)},_f.INTERIOR.get=function(){return 0},_f.BOUNDARY.get=function(){return 1},_f.EXTERIOR.get=function(){return 2},_f.NONE.get=function(){return-1},Object.defineProperties(vf,_f);var mf=function(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1},xf=function(){},Ef={LOG_10:{configurable:!0}};xf.prototype.interfaces_=function(){return[]},xf.prototype.getClass=function(){return xf},xf.log10=function(t){var e=Math.log(t);return uf.isInfinite(e)?e:uf.isNaN(e)?e:e/xf.LOG_10},xf.min=function bm(t,e,n,r){var bm=t;return e<bm&&(bm=e),n<bm&&(bm=n),r<bm&&(bm=r),bm},xf.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:r>o?o:r}},xf.wrap=function(t,e){return t<0?e- -t%e:t%e},xf.max=function Im(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],Im=t;return e>Im&&(Im=e),n>Im&&(Im=n),Im}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=r;return i>a&&(a=i),o>a&&(a=o),s>a&&(a=s),a}},xf.average=function(t,e){return(t+e)/2},Ef.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(xf,Ef);var wf=function(t){this.str=t};wf.prototype.append=function(t){this.str+=t},wf.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},wf.prototype.toString=function(t){return this.str};var bf=function(t){this.value=t};bf.prototype.intValue=function(){return this.value},bf.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},bf.isNaN=function(t){return Number.isNaN(t)};var If=function(){};If.isWhitespace=function(t){return t<=32&&t>=0||127===t},If.toUpperCase=function(t){return t.toUpperCase()};var Nf=function Nm(){if(this._hi=0,this._lo=0,0===arguments.length)this.init(0);else if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof Nm){var e=arguments[0];this.init(e)}else if("string"==typeof arguments[0]){var n=arguments[0];Nm.call(this,Nm.parse(n))}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.init(r,i)}},Cf={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};Nf.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},Nf.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=Nf.magnitude(n._hi),i=Nf.TEN.pow(r);n=n.divide(i),n.gt(Nf.TEN)?(n=n.divide(Nf.TEN),r+=1):n.lt(Nf.ONE)&&(n=n.multiply(Nf.TEN),r-=1);for(var o=r+1,s=new wf,a=Nf.MAX_PRINT_DIGITS-1,u=0;u<=a;u++){t&&u===o&&s.append(".");var c=Math.trunc(n._hi);if(c<0)break;var l=!1,h=0;c>9?(l=!0,h="9"):h="0"+c,s.append(h),n=n.subtract(Nf.valueOf(c)).multiply(Nf.TEN),l&&n.selfAdd(Nf.TEN);var p=!0,f=Nf.magnitude(n._hi);if(f<0&&Math.abs(f)>=a-u&&(p=!1),!p)break}return e[0]=r,s.toString()},Nf.prototype.sqr=function(){return this.multiply(this)},Nf.prototype.doubleValue=function(){return this._hi+this._lo},Nf.prototype.subtract=function(){if(arguments[0]instanceof Nf){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},Nf.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},Nf.prototype.isZero=function(){return 0===this._hi&&0===this._lo},Nf.prototype.selfSubtract=function(){if(arguments[0]instanceof Nf){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},Nf.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},Nf.prototype.min=function(t){return this.le(t)?this:t},Nf.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof Nf){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null,l=null,h=null;return u=this._hi/n,c=Nf.SPLIT*u,i=c-u,h=Nf.SPLIT*n,i=c-i,o=u-i,s=h-n,l=u*n,s=h-s,a=n-s,h=i*s-l+i*a+o*s+o*a,c=(this._hi-l-h+this._lo-u*r)/n,h=u+c,this._hi=h,this._lo=u-h+c,this}},Nf.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},Nf.prototype.divide=function(){if(arguments[0]instanceof Nf){var t=arguments[0],e=null,n=null,r=null,i=null,o=null,s=null,a=null,u=null;o=this._hi/t._hi,s=Nf.SPLIT*o,e=s-o,u=Nf.SPLIT*t._hi,e=s-e,n=o-e,r=u-t._hi,a=o*t._hi,r=u-r,i=t._hi-r,u=e*r-a+e*i+n*r+n*i,s=(this._hi-a-u+this._lo-o*t._lo)/t._hi,u=o+s;var c=u,l=o-u+s;return new Nf(c,l)}if("number"==typeof arguments[0]){var h=arguments[0];return uf.isNaN(h)?Nf.createNaN():Nf.copy(this).selfDivide(h,0)}},Nf.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},Nf.prototype.pow=function(t){if(0===t)return Nf.valueOf(1);var e=new Nf(this),n=Nf.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(e),r/=2,r>0&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},Nf.prototype.ceil=function(){if(this.isNaN())return Nf.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new Nf(t,e)},Nf.prototype.compareTo=function(t){var e=t;return this._hi<e._hi?-1:this._hi>e._hi?1:this._lo<e._lo?-1:this._lo>e._lo?1:0},Nf.prototype.rint=function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},Nf.prototype.setValue=function(){if(arguments[0]instanceof Nf){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},Nf.prototype.max=function(t){return this.ge(t)?this:t},Nf.prototype.sqrt=function(){if(this.isZero())return Nf.valueOf(0);if(this.isNegative())return Nf.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=Nf.valueOf(e),r=this.subtract(n.sqr()),i=r._hi*(.5*t);return n.add(i)},Nf.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof Nf){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0],n=null,r=null,i=null,o=null,s=null,a=null;return i=this._hi+e,s=i-this._hi,o=i-s,o=e-s+(this._hi-o),a=o+this._lo,n=i+a,r=a+(i-n),this._hi=n+r,this._lo=r+(n-this._hi),this}}else if(2===arguments.length){var u=arguments[0],c=arguments[1],l=null,h=null,p=null,f=null,g=null,d=null,y=null,v=null;g=this._hi+u,p=this._lo+c,y=g-this._hi,v=p-this._lo,d=g-y,f=p-v,d=u-y+(this._hi-d),f=c-v+(this._lo-f),y=d+p,l=g+y,h=y+(g-l),y=f+h;var _=l+y,m=y+(l-_);return this._hi=_,this._lo=m,this}},Nf.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof Nf){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=null,o=null,s=null,a=null,u=null,c=null;u=Nf.SPLIT*this._hi,i=u-this._hi,c=Nf.SPLIT*n,i=u-i,o=this._hi-i,s=c-n,u=this._hi*n,s=c-s,a=n-s,c=i*s-u+i*a+o*s+o*a+(this._hi*r+this._lo*n);var l=u+c;i=u-l;var h=c+i;return this._hi=l,this._lo=h,this}},Nf.prototype.selfSqr=function(){return this.selfMultiply(this)},Nf.prototype.floor=function(){if(this.isNaN())return Nf.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new Nf(t,e)},Nf.prototype.negate=function(){return this.isNaN()?this:new Nf((-this._hi),(-this._lo))},Nf.prototype.clone=function(){},Nf.prototype.multiply=function(){if(arguments[0]instanceof Nf){var t=arguments[0];return t.isNaN()?Nf.createNaN():Nf.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return uf.isNaN(e)?Nf.createNaN():Nf.copy(this).selfMultiply(e,0)}},Nf.prototype.isNaN=function(){return uf.isNaN(this._hi)},Nf.prototype.intValue=function(){return Math.trunc(this._hi)},Nf.prototype.toString=function(){var t=Nf.magnitude(this._hi);return t>=-3&&t<=20?this.toStandardNotation():this.toSciNotation()},Nf.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,i=n;if("."===n.charAt(0))i="0"+n;else if(r<0)i="0."+Nf.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,s=Nf.stringOfChar("0",o);i=n+s+".0"}return this.isNegative()?"-"+i:i},Nf.prototype.reciprocal=function(){var t=null,e=null,n=null,r=null,i=null,o=null,s=null,a=null;i=1/this._hi,o=Nf.SPLIT*i,t=o-i,a=Nf.SPLIT*this._hi,t=o-t,e=i-t,n=a-this._hi,s=i*this._hi,n=a-n,r=this._hi-n,a=t*n-s+t*r+e*n+e*r,o=(1-s-a-i*this._lo)/this._hi;var u=i+o,c=i-u+o;return new Nf(u,c)},Nf.prototype.toSciNotation=function(){if(this.isZero())return Nf.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=Nf.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";n.length>1&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},Nf.prototype.abs=function(){return this.isNaN()?Nf.NaN:this.isNegative()?this.negate():new Nf(this)},Nf.prototype.isPositive=function(){return(this._hi>0||0===this._hi)&&this._lo>0},Nf.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},Nf.prototype.add=function(){if(arguments[0]instanceof Nf){var t=arguments[0];return Nf.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return Nf.copy(this).selfAdd(e)}},Nf.prototype.init=function(){if(1===arguments.length){if("number"==typeof arguments[0]){var t=arguments[0];this._hi=t,this._lo=0}else if(arguments[0]instanceof Nf){var e=arguments[0];this._hi=e._hi,this._lo=e._lo}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._hi=n,this._lo=r}},Nf.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},Nf.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},Nf.prototype.trunc=function(){return this.isNaN()?Nf.NaN:this.isPositive()?this.floor():this.ceil()},Nf.prototype.signum=function(){return this._hi>0?1:this._hi<0?-1:this._lo>0?1:this._lo<0?-1:0},Nf.prototype.interfaces_=function(){return[ou,lf,hf]},Nf.prototype.getClass=function(){return Nf},Nf.sqr=function(t){return Nf.valueOf(t).selfMultiply(t)},Nf.valueOf=function(){if("string"==typeof arguments[0]){var t=arguments[0];return Nf.parse(t)}if("number"==typeof arguments[0]){var e=arguments[0];return new Nf(e)}},Nf.sqrt=function(t){return Nf.valueOf(t).sqrt()},Nf.parse=function(t){for(var e=0,n=t.length;If.isWhitespace(t.charAt(e));)e++;var r=!1;if(e<n){var i=t.charAt(e);"-"!==i&&"+"!==i||(e++,"-"===i&&(r=!0))}for(var o=new Nf,s=0,a=0,u=0;;){if(e>=n)break;var c=t.charAt(e);if(e++,If.isDigit(c)){var l=c-"0";o.selfMultiply(Nf.TEN),o.selfAdd(l),s++}else{if("."!==c){if("e"===c||"E"===c){var h=t.substring(e);try{u=bf.parseInt(h)}catch(p){throw p instanceof Error?new Error("Invalid exponent "+h+" in string "+t):p}finally{}break}throw new Error("Unexpected character '"+c+"' at position "+e+" in string "+t)}a=s}}var f=o,g=s-a-u;if(0===g)f=o;else if(g>0){var d=Nf.TEN.pow(g);f=o.divide(d)}else if(g<0){var y=Nf.TEN.pow(-g);f=o.multiply(y)}return r?f.negate():f},Nf.createNaN=function(){return new Nf(uf.NaN,uf.NaN)},Nf.copy=function(t){return new Nf(t)},Nf.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n)),i=Math.pow(10,r);return 10*i<=e&&(r+=1),r},Nf.stringOfChar=function(t,e){for(var n=new wf,r=0;r<e;r++)n.append(t);return n.toString()},Cf.PI.get=function(){return new Nf(3.141592653589793,1.2246467991473532e-16)},Cf.TWO_PI.get=function(){return new Nf(6.283185307179586,2.4492935982947064e-16)},Cf.PI_2.get=function(){return new Nf(1.5707963267948966,6.123233995736766e-17)},Cf.E.get=function(){return new Nf(2.718281828459045,1.4456468917292502e-16)},Cf.NaN.get=function(){return new Nf(uf.NaN,uf.NaN)},Cf.EPS.get=function(){return 1.23259516440783e-32},Cf.SPLIT.get=function(){return 134217729},Cf.MAX_PRINT_DIGITS.get=function(){return 32},Cf.TEN.get=function(){return Nf.valueOf(10)},Cf.ONE.get=function(){return Nf.valueOf(1)},Cf.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},Cf.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(Nf,Cf);var Sf=function(){},Mf={DP_SAFE_EPSILON:{configurable:!0}};Sf.prototype.interfaces_=function(){return[]},Sf.prototype.getClass=function(){return Sf},Sf.orientationIndex=function(t,e,n){var r=Sf.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=Nf.valueOf(e.x).selfAdd(-t.x),o=Nf.valueOf(e.y).selfAdd(-t.y),s=Nf.valueOf(n.x).selfAdd(-e.x),a=Nf.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(a).selfSubtract(o.selfMultiply(s)).signum()},Sf.signOfDet2x2=function(t,e,n,r){var i=t.multiply(r).selfSubtract(e.multiply(n));return i.signum()},Sf.intersection=function(t,e,n,r){var i=Nf.valueOf(r.y).selfSubtract(n.y).selfMultiply(Nf.valueOf(e.x).selfSubtract(t.x)),o=Nf.valueOf(r.x).selfSubtract(n.x).selfMultiply(Nf.valueOf(e.y).selfSubtract(t.y)),s=i.subtract(o),a=Nf.valueOf(r.x).selfSubtract(n.x).selfMultiply(Nf.valueOf(t.y).selfSubtract(n.y)),u=Nf.valueOf(r.y).selfSubtract(n.y).selfMultiply(Nf.valueOf(t.x).selfSubtract(n.x)),c=a.subtract(u),l=c.selfDivide(s).doubleValue(),h=Nf.valueOf(t.x).selfAdd(Nf.valueOf(e.x).selfSubtract(t.x).selfMultiply(l)).doubleValue(),p=Nf.valueOf(e.x).selfSubtract(t.x).selfMultiply(Nf.valueOf(t.y).selfSubtract(n.y)),f=Nf.valueOf(e.y).selfSubtract(t.y).selfMultiply(Nf.valueOf(t.x).selfSubtract(n.x)),g=p.subtract(f),d=g.selfDivide(s).doubleValue(),y=Nf.valueOf(n.y).selfAdd(Nf.valueOf(r.y).selfSubtract(n.y).selfMultiply(d)).doubleValue();return new ff(h,y)},Sf.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),s=i-o;if(i>0){if(o<=0)return Sf.signum(s);r=i+o}else{if(!(i<0))return Sf.signum(s);if(o>=0)return Sf.signum(s);r=-i-o}var a=Sf.DP_SAFE_EPSILON*r;return s>=a||-s>=a?Sf.signum(s):2},Sf.signum=function(t){return t>0?1:t<0?-1:0},Mf.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(Sf,Mf);var Lf=function(){},Pf={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};Pf.X.get=function(){return 0},Pf.Y.get=function(){return 1},Pf.Z.get=function(){return 2},Pf.M.get=function(){return 3},Lf.prototype.setOrdinate=function(t,e,n){},Lf.prototype.size=function(){},Lf.prototype.getOrdinate=function(t,e){},Lf.prototype.getCoordinate=function(){},Lf.prototype.getCoordinateCopy=function(t){},Lf.prototype.getDimension=function(){},Lf.prototype.getX=function(t){},Lf.prototype.clone=function(){},Lf.prototype.expandEnvelope=function(t){},Lf.prototype.copy=function(){},Lf.prototype.getY=function(t){},Lf.prototype.toCoordinateArray=function(){},Lf.prototype.interfaces_=function(){return[hf]},Lf.prototype.getClass=function(){return Lf},Object.defineProperties(Lf,Pf);var Of=function(){},Rf=function(t){function e(){t.call(this,"Projective point not representable on the Cartesian plane.")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Of),Tf=function(){};Tf.arraycopy=function(t,e,n,r,i){for(var o=0,s=e;s<e+i;s++)n[r+o]=t[s],o++},Tf.getProperty=function(t){return{"line.separator":"\n"}[t]};var Af=function Cm(){if(this.x=null,this.y=null,this.w=null,0===arguments.length)this.x=0,this.y=0,this.w=1;else if(1===arguments.length){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(2===arguments.length){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof Cm&&arguments[1]instanceof Cm){var r=arguments[0],i=arguments[1];this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y}else if(arguments[0]instanceof ff&&arguments[1]instanceof ff){var o=arguments[0],s=arguments[1];this.x=o.y-s.y,this.y=s.x-o.x,this.w=o.x*s.y-s.x*o.y}}else if(3===arguments.length){var a=arguments[0],u=arguments[1],c=arguments[2];this.x=a,this.y=u,this.w=c}else if(4===arguments.length){var l=arguments[0],h=arguments[1],p=arguments[2],f=arguments[3],g=l.y-h.y,d=h.x-l.x,y=l.x*h.y-h.x*l.y,v=p.y-f.y,_=f.x-p.x,m=p.x*f.y-f.x*p.y;this.x=d*m-_*y,this.y=v*y-g*m,this.w=g*_-v*d}};Af.prototype.getY=function(){var t=this.y/this.w;if(uf.isNaN(t)||uf.isInfinite(t))throw new Rf;return t},Af.prototype.getX=function(){var t=this.x/this.w;if(uf.isNaN(t)||uf.isInfinite(t))throw new Rf;return t},Af.prototype.getCoordinate=function(){var t=new ff;return t.x=this.getX(),t.y=this.getY(),t},Af.prototype.interfaces_=function(){return[]},Af.prototype.getClass=function(){return Af},Af.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,s=t.x*e.y-e.x*t.y,a=n.y-r.y,u=r.x-n.x,c=n.x*r.y-r.x*n.y,l=o*c-u*s,h=a*s-i*c,p=i*u-a*o,f=l/p,g=h/p;if(uf.isNaN(f)||uf.isInfinite(f)||uf.isNaN(g)||uf.isInfinite(g))throw new Rf;return new ff(f,g)};var Df=function Sm(){if(this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length)this.init();else if(1===arguments.length){if(arguments[0]instanceof ff){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Sm){var e=arguments[0];this.init(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];this.init(i,o,s,a)}},Ff={serialVersionUID:{configurable:!0}};Df.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Df.prototype.equals=function(t){if(!(t instanceof Df))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Df.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Df;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Df(e,r,n,i)},Df.prototype.isNull=function(){return this._maxx<this._minx},Df.prototype.getMaxX=function(){return this._maxx},Df.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof ff){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Df){var e=arguments[0];return!this.isNull()&&!e.isNull()&&(e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&(n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy)}},Df.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Df){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof ff){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Df.prototype.getMinY=function(){return this._miny},Df.prototype.getMinX=function(){return this._minx},Df.prototype.expandToInclude=function(){if(1===arguments.length){if(arguments[0]instanceof ff){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof Df){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this._minx=e.getMinX(),this._maxx=e.getMaxX(),this._miny=e.getMinY(),this._maxy=e.getMaxY()):(e._minx<this._minx&&(this._minx=e._minx),e._maxx>this._maxx&&(this._maxx=e._maxx),e._miny<this._miny&&(this._miny=e._miny),e._maxy>this._maxy&&(this._maxy=e._maxy))}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.isNull()?(this._minx=n,this._maxx=n,this._miny=r,this._maxy=r):(n<this._minx&&(this._minx=n),n>this._maxx&&(this._maxx=n),r<this._miny&&(this._miny=r),r>this._maxy&&(this._maxy=r))}},Df.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Df.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Df.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Df.prototype.translate=function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Df.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Df.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Df.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Df.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},Df.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Df.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Df){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof ff){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Df.prototype.centre=function(){return this.isNull()?null:new ff((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Df.prototype.init=function(){if(0===arguments.length)this.setToNull();else if(1===arguments.length){if(arguments[0]instanceof ff){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof Df){var e=arguments[0];this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(4===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3];i<o?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),s<a?(this._miny=s,this._maxy=a):(this._miny=a,this._maxy=s)}},Df.prototype.getMaxY=function(){return this._maxy},Df.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Df.prototype.hashCode=function(){var t=17;return t=37*t+ff.hashCode(this._minx),t=37*t+ff.hashCode(this._maxx),t=37*t+ff.hashCode(this._miny),t=37*t+ff.hashCode(this._maxy)},Df.prototype.interfaces_=function(){return[lf,ou]},Df.prototype.getClass=function(){return Df},Df.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=Math.min(o.x,s.x),u=Math.max(o.x,s.x),c=Math.min(r.x,i.x),l=Math.max(r.x,i.x);return!(c>u)&&(!(l<a)&&(a=Math.min(o.y,s.y),u=Math.max(o.y,s.y),c=Math.min(r.y,i.y),l=Math.max(r.y,i.y),!(c>u)&&!(l<a)))}},Ff.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Df,Ff);var qf={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},Gf=function(t){this.geometryFactory=t||new cd};Gf.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=qf.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(i=qf.emptyTypeStr.exec(t),i[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],kf[n]&&(e=kf[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},Gf.prototype.write=function(t){return this.extractGeometry(t)},Gf.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!Bf[e])return null;var n,r=e.toUpperCase();return n=t.isEmpty()?r+" EMPTY":r+"("+Bf[e].apply(this,[t])+")"};var Bf={coordinate:function(t){return t.x+" "+t.y},point:function(t){return Bf.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push("("+Bf.point.apply(e,[t._geometries[r]])+")");return n.join(",")},linestring:function(t){for(var e=this,n=[],r=0,i=t._points._coordinates.length;r<i;++r)n.push(Bf.coordinate.apply(e,[t._points._coordinates[r]]));return n.join(",")},linearring:function(t){for(var e=this,n=[],r=0,i=t._points._coordinates.length;r<i;++r)n.push(Bf.coordinate.apply(e,[t._points._coordinates[r]]));return n.join(",")},multilinestring:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push("("+Bf.linestring.apply(e,[t._geometries[r]])+")");return n.join(",")},polygon:function(t){var e=this,n=[];n.push("("+Bf.linestring.apply(this,[t._shell])+")");for(var r=0,i=t._holes.length;r<i;++r)n.push("("+Bf.linestring.apply(e,[t._holes[r]])+")");return n.join(",")},multipolygon:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push("("+Bf.polygon.apply(e,[t._geometries[r]])+")");
return n.join(",")},geometrycollection:function(t){for(var e=this,n=[],r=0,i=t._geometries.length;r<i;++r)n.push(e.extractGeometry(t._geometries[r]));return n.join(",")}},kf={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(qf.spaces);return this.geometryFactory.createPoint(new ff(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){var e=this;if(void 0===t)return this.geometryFactory.createMultiPoint();for(var n,r=t.trim().split(","),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(qf.trimParens,"$1"),i.push(kf.point.apply(e,[n]));return this.geometryFactory.createMultiPoint(i)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(qf.spaces),r.push(new ff(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(qf.spaces),r.push(new ff(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){var e=this;if(void 0===t)return this.geometryFactory.createMultiLineString();for(var n,r=t.trim().split(qf.parenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(qf.trimParens,"$1"),i.push(kf.linestring.apply(e,[n]));return this.geometryFactory.createMultiLineString(i)},polygon:function(t){var e=this;if(void 0===t)return this.geometryFactory.createPolygon();for(var n,r,i,o,s=t.trim().split(qf.parenComma),a=[],u=0,c=s.length;u<c;++u)n=s[u].replace(qf.trimParens,"$1"),r=kf.linestring.apply(e,[n]),i=e.geometryFactory.createLinearRing(r._points),0===u?o=i:a.push(i);return this.geometryFactory.createPolygon(o,a)},multipolygon:function(t){var e=this;if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var n,r=t.trim().split(qf.doubleParenComma),i=[],o=0,s=r.length;o<s;++o)n=r[o].replace(qf.trimParens,"$1"),i.push(kf.polygon.apply(e,[n]));return this.geometryFactory.createMultiPolygon(i)},geometrycollection:function(t){var e=this;if(void 0===t)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var n=t.trim().split("|"),r=[],i=0,o=n.length;i<o;++i)r.push(e.read(n[i]));return this.geometryFactory.createGeometryCollection(r)}},zf=function(t){this.parser=new Gf(t)};zf.prototype.write=function(t){return this.parser.write(t)},zf.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};var jf=function(t){function e(e){t.call(this,e),this.name="RuntimeException",this.message=e,this.stack=(new t).stack}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Xf=function(t){function e(){if(t.call(this),0===arguments.length)t.call(this);else if(1===arguments.length){var e=arguments[0];t.call(this,e)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(jf),Uf=function(){};Uf.prototype.interfaces_=function(){return[]},Uf.prototype.getClass=function(){return Uf},Uf.shouldNeverReachHere=function(){if(0===arguments.length)Uf.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new Xf("Should never reach here"+(null!==t?": "+t:""))}},Uf.isTrue=function(){var t,e;if(1===arguments.length)t=arguments[0],Uf.isTrue(t,null);else if(2===arguments.length&&(t=arguments[0],e=arguments[1],!t))throw null===e?new Xf:new Xf(e)},Uf.equals=function(){var t,e,n;if(2===arguments.length)t=arguments[0],e=arguments[1],Uf.equals(t,e,null);else if(3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],!e.equals(t)))throw new Xf("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};var Yf=function(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new ff,this._intPt[1]=new ff,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0},Vf={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};Yf.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},Yf.prototype.getTopologySummary=function(){var t=new wf;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},Yf.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},Yf.prototype.getIntersectionNum=function(){return this._result},Yf.prototype.computeIntLineIndex=function(){if(0===arguments.length)null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(1===arguments.length){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0)}},Yf.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},Yf.prototype.setPrecisionModel=function(t){this._precisionModel=t},Yf.prototype.isInteriorIntersection=function(){var t=this;if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var e=arguments[0],n=0;n<this._result;n++)if(!t._intPt[n].equals2D(t._inputLines[e][0])&&!t._intPt[n].equals2D(t._inputLines[e][1]))return!0;return!1}},Yf.prototype.getIntersection=function(t){return this._intPt[t]},Yf.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},Yf.prototype.hasIntersection=function(){return this._result!==Yf.NO_INTERSECTION},Yf.prototype.getEdgeDistance=function(t,e){var n=Yf.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1]);return n},Yf.prototype.isCollinear=function(){return this._result===Yf.COLLINEAR_INTERSECTION},Yf.prototype.toString=function(){return zf.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+zf.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},Yf.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},Yf.prototype.isIntersection=function(t){for(var e=this,n=0;n<this._result;n++)if(e._intPt[n].equals2D(t))return!0;return!1},Yf.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},Yf.prototype.interfaces_=function(){return[]},Yf.prototype.getClass=function(){return Yf},Yf.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),i=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>i?r:i;else{var s=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);o=r>i?s:a,0!==o||t.equals(e)||(o=Math.max(s,a))}return Uf.isTrue(!(0===o&&!t.equals(e)),"Bad distance calculation"),o},Yf.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return Uf.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},Vf.DONT_INTERSECT.get=function(){return 0},Vf.DO_INTERSECT.get=function(){return 1},Vf.COLLINEAR.get=function(){return 2},Vf.NO_INTERSECTION.get=function(){return 0},Vf.POINT_INTERSECTION.get=function(){return 1},Vf.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(Yf,Vf);var Hf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isInSegmentEnvelopes=function(t){var e=new Df(this._inputLines[0][0],this._inputLines[0][1]),n=new Df(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},e.prototype.computeIntersection=function(){if(3!==arguments.length)return t.prototype.computeIntersection.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2];return this._isProper=!1,Df.intersects(n,r,e)&&0===Zf.orientationIndex(n,r,e)&&0===Zf.orientationIndex(r,n,e)?(this._isProper=!0,(e.equals(n)||e.equals(r))&&(this._isProper=!1),this._result=t.POINT_INTERSECTION,null):void(this._result=t.NO_INTERSECTION)},e.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.safeHCoordinateIntersection=function(t,n,r,i){var o=null;try{o=Af.intersection(t,n,r,i)}catch(s){if(!(s instanceof Rf))throw s;o=e.nearestEndpoint(t,n,r,i)}finally{}return o},e.prototype.intersection=function(t,n,r,i){var o=this.intersectionWithNormalization(t,n,r,i);return this.isInSegmentEnvelopes(o)||(o=new ff(e.nearestEndpoint(t,n,r,i))),null!==this._precisionModel&&this._precisionModel.makePrecise(o),o},e.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},e.prototype.checkDD=function(t,e,n,r,i){var o=Sf.intersection(t,e,n,r),s=this.isInSegmentEnvelopes(o);Tf.out.println("DD in env = "+s+"  --------------------- "+o),i.distance(o)>1e-4&&Tf.out.println("Distance = "+i.distance(o))},e.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new ff(t),o=new ff(e),s=new ff(n),a=new ff(r),u=new ff;this.normalizeToEnvCentre(i,o,s,a,u);var c=this.safeHCoordinateIntersection(i,o,s,a);return c.x+=u.x,c.y+=u.y,c},e.prototype.computeCollinearIntersection=function(e,n,r,i){var o=Df.intersects(e,n,r),s=Df.intersects(e,n,i),a=Df.intersects(r,i,e),u=Df.intersects(r,i,n);return o&&s?(this._intPt[0]=r,this._intPt[1]=i,t.COLLINEAR_INTERSECTION):a&&u?(this._intPt[0]=e,this._intPt[1]=n,t.COLLINEAR_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||s||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):o&&u?(this._intPt[0]=r,this._intPt[1]=n,!r.equals(n)||s||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&a?(this._intPt[0]=i,this._intPt[1]=e,!i.equals(e)||o||u?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):s&&u?(this._intPt[0]=i,this._intPt[1]=n,!i.equals(n)||o||a?t.COLLINEAR_INTERSECTION:t.POINT_INTERSECTION):t.NO_INTERSECTION},e.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,s=t.y<e.y?t.y:e.y,a=t.x>e.x?t.x:e.x,u=t.y>e.y?t.y:e.y,c=n.x<r.x?n.x:r.x,l=n.y<r.y?n.y:r.y,h=n.x>r.x?n.x:r.x,p=n.y>r.y?n.y:r.y,f=o>c?o:c,g=a<h?a:h,d=s>l?s:l,y=u<p?u:p,v=(f+g)/2,_=(d+y)/2;i.x=v,i.y=_,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},e.prototype.computeIntersect=function(e,n,r,i){if(this._isProper=!1,!Df.intersects(e,n,r,i))return t.NO_INTERSECTION;var o=Zf.orientationIndex(e,n,r),s=Zf.orientationIndex(e,n,i);if(o>0&&s>0||o<0&&s<0)return t.NO_INTERSECTION;var a=Zf.orientationIndex(r,i,e),u=Zf.orientationIndex(r,i,n);if(a>0&&u>0||a<0&&u<0)return t.NO_INTERSECTION;var c=0===o&&0===s&&0===a&&0===u;return c?this.computeCollinearIntersection(e,n,r,i):(0===o||0===s||0===a||0===u?(this._isProper=!1,e.equals2D(r)||e.equals2D(i)?this._intPt[0]=e:n.equals2D(r)||n.equals2D(i)?this._intPt[0]=n:0===o?this._intPt[0]=new ff(r):0===s?this._intPt[0]=new ff(i):0===a?this._intPt[0]=new ff(e):0===u&&(this._intPt[0]=new ff(n))):(this._isProper=!0,this._intPt[0]=this.intersection(e,n,r,i)),t.POINT_INTERSECTION)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.nearestEndpoint=function(t,e,n,r){var i=t,o=Zf.distancePointLine(t,n,r),s=Zf.distancePointLine(e,n,r);return s<o&&(o=s,i=e),s=Zf.distancePointLine(n,t,e),s<o&&(o=s,i=n),s=Zf.distancePointLine(r,t,e),s<o&&(o=s,i=r),i},e}(Yf),Wf=function(){};Wf.prototype.interfaces_=function(){return[]},Wf.prototype.getClass=function(){return Wf},Wf.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,s=n.y-e.y;return Wf.signOfDet2x2(r,i,o,s)},Wf.signOfDet2x2=function(t,e,n,r){var i=null,o=null,s=null;if(i=1,0===t||0===r)return 0===e||0===n?0:e>0?n>0?-i:i:n>0?i:-i;if(0===e||0===n)return r>0?t>0?i:-i:t>0?-i:i;if(e>0?r>0?e<=r||(i=-i,o=t,t=n,n=o,o=e,e=r,r=o):e<=-r?(i=-i,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?-e<=r?(i=-i,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(i=-i,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0))return i;if(!(t<=n))return i}else{if(n>0)return-i;if(!(t>=n))return-i;i=-i,t=-t,n=-n}for(;;){if(s=Math.floor(n/t),n-=s*t,r-=s*e,r<0)return-i;if(r>e)return i;if(t>n+n){if(e<r+r)return i}else{if(e>r+r)return-i;n=t-n,r=e-r,i=-i}if(0===r)return 0===n?0:-i;if(0===n)return i;if(s=Math.floor(t/n),t-=s*n,e-=s*r,e<0)return i;if(e>r)return-i;if(n>t+t){if(r<e+e)return-i}else{if(r>e+e)return i;t=n-t,e=r-e,i=-i}if(0===e)return 0===t?0:i;if(0===t)return-i}};var Jf=function(){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1;var t=arguments[0];this._p=t};Jf.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,s=e.x-this._p.x,a=e.y-this._p.y,u=Wf.signOfDet2x2(i,o,s,a);if(0===u)return this._isPointOnSegment=!0,null;a<o&&(u=-u),u>0&&this._crossingCount++}},Jf.prototype.isPointInPolygon=function(){return this.getLocation()!==vf.EXTERIOR},Jf.prototype.getLocation=function(){return this._isPointOnSegment?vf.BOUNDARY:this._crossingCount%2===1?vf.INTERIOR:vf.EXTERIOR},Jf.prototype.isOnSegment=function(){return this._isPointOnSegment},Jf.prototype.interfaces_=function(){return[]},Jf.prototype.getClass=function(){return Jf},Jf.locatePointInRing=function(){if(arguments[0]instanceof ff&&mf(arguments[1],Lf)){for(var t=arguments[0],e=arguments[1],n=new Jf(t),r=new ff,i=new ff,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,i),n.countSegment(r,i),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof ff&&arguments[1]instanceof Array){for(var s=arguments[0],a=arguments[1],u=new Jf(s),c=1;c<a.length;c++){var l=a[c],h=a[c-1];if(u.countSegment(l,h),u.isOnSegment())return u.getLocation()}return u.getLocation()}};var Zf=function(){},Kf={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};Zf.prototype.interfaces_=function(){return[]},Zf.prototype.getClass=function(){return Zf},Zf.orientationIndex=function(t,e,n){return Sf.orientationIndex(t,e,n)},Zf.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y,s=t[r-1].y;e+=i*(s-o)}return e/2}if(mf(arguments[0],Lf)){var a=arguments[0],u=a.size();if(u<3)return 0;var c=new ff,l=new ff,h=new ff;a.getCoordinate(0,l),a.getCoordinate(1,h);var p=l.x;h.x-=p;for(var f=0,g=1;g<u-1;g++)c.y=l.y,l.x=h.x,l.y=h.y,a.getCoordinate(g+1,h),h.x-=p,f+=l.x*(c.y-h.y);return f/2}},Zf.distanceLineLine=function(t,e,n,r){if(t.equals(e))return Zf.distancePointLine(t,n,r);if(n.equals(r))return Zf.distancePointLine(r,t,e);var i=!1;if(Df.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(0===o)i=!0;else{var s=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),u=a/o,c=s/o;(c<0||c>1||u<0||u>1)&&(i=!0)}}else i=!0;return i?xf.min(Zf.distancePointLine(t,n,r),Zf.distancePointLine(e,n,r),Zf.distancePointLine(n,t,e),Zf.distancePointLine(r,t,e)):0},Zf.isPointInRing=function(t,e){return Zf.locatePointInRing(t,e)!==vf.EXTERIOR},Zf.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new ff;t.getCoordinate(0,r);for(var i=r.x,o=r.y,s=1;s<e;s++){t.getCoordinate(s,r);var a=r.x,u=r.y,c=a-i,l=u-o;n+=Math.sqrt(c*c+l*l),i=a,o=u}return n},Zf.isCCW=function Mm(t){var e=t.length-1;if(e<3)throw new af("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}var s=r;do s-=1,s<0&&(s=e);while(t[s].equals2D(n)&&s!==r);var a=r;do a=(a+1)%e;while(t[a].equals2D(n)&&a!==r);var u=t[s],c=t[a];if(u.equals2D(n)||c.equals2D(n)||u.equals2D(c))return!1;var l=Zf.computeOrientation(u,n,c),Mm=!1;return Mm=0===l?u.x>c.x:l>0},Zf.locatePointInRing=function(t,e){return Jf.locatePointInRing(t,e)},Zf.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},Zf.computeOrientation=function(t,e,n){return Zf.orientationIndex(t,e,n)},Zf.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new af("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=Zf.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];if(s.x===a.x&&s.y===a.y)return o.distance(s);var u=(a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y),c=((o.x-s.x)*(a.x-s.x)+(o.y-s.y)*(a.y-s.y))/u;if(c<=0)return o.distance(s);if(c>=1)return o.distance(a);var l=((s.y-o.y)*(a.x-s.x)-(s.x-o.x)*(a.y-s.y))/u;return Math.abs(l)*Math.sqrt(u)}},Zf.isOnLine=function(t,e){for(var n=new Hf,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},Kf.CLOCKWISE.get=function(){return-1},Kf.RIGHT.get=function(){return Zf.CLOCKWISE},Kf.COUNTERCLOCKWISE.get=function(){return 1},Kf.LEFT.get=function(){return Zf.COUNTERCLOCKWISE},Kf.COLLINEAR.get=function(){return 0},Kf.STRAIGHT.get=function(){return Zf.COLLINEAR},Object.defineProperties(Zf,Kf);var Qf=function(){};Qf.prototype.filter=function(t){},Qf.prototype.interfaces_=function(){return[]},Qf.prototype.getClass=function(){return Qf};var $f=function(){var t=arguments[0];this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=t,this._SRID=t.getSRID()},tg={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};$f.prototype.isGeometryCollection=function(){return this.getSortIndex()===$f.SORTINDEX_GEOMETRYCOLLECTION},$f.prototype.getFactory=function(){return this._factory},$f.prototype.getGeometryN=function(t){return this},$f.prototype.getArea=function(){return 0},$f.prototype.isRectangle=function(){return!1},$f.prototype.equals=function(){if(arguments[0]instanceof $f){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof $f))return!1;var n=e;return this.equalsExact(n)}},$f.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},$f.prototype.geometryChanged=function(){this.apply($f.geometryChangedFilter)},$f.prototype.geometryChangedAction=function(){this._envelope=null},$f.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},$f.prototype.getLength=function(){return 0},$f.prototype.getNumGeometries=function(){return 1},$f.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},$f.prototype.getUserData=function(){return this._userData},$f.prototype.getSRID=function(){return this._SRID},$f.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},$f.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===$f.SORTINDEX_GEOMETRYCOLLECTION)throw new af("This method does not support GeometryCollection arguments")},$f.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},$f.prototype.norm=function(){var t=this.copy();return t.normalize(),t},$f.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},$f.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Df(this._envelope)},$f.prototype.setSRID=function(t){this._SRID=t},$f.prototype.setUserData=function(t){this._userData=t},$f.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),s=i.compareTo(o);if(0!==s)return s}return n.hasNext()?1:r.hasNext()?-1:0},$f.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},$f.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===$f.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===$f.SORTINDEX_MULTIPOINT||this.getSortIndex()===$f.SORTINDEX_MULTILINESTRING||this.getSortIndex()===$f.SORTINDEX_MULTIPOLYGON},$f.prototype.interfaces_=function(){return[hf,lf,ou]},$f.prototype.getClass=function(){return $f},$f.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},$f.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},tg.serialVersionUID.get=function(){return 0x799ea46522854c00},tg.SORTINDEX_POINT.get=function(){return 0},tg.SORTINDEX_MULTIPOINT.get=function(){return 1},tg.SORTINDEX_LINESTRING.get=function(){return 2},tg.SORTINDEX_LINEARRING.get=function(){return 3},tg.SORTINDEX_MULTILINESTRING.get=function(){return 4},tg.SORTINDEX_POLYGON.get=function(){return 5},tg.SORTINDEX_MULTIPOLYGON.get=function(){return 6},tg.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},tg.geometryChangedFilter.get=function(){return eg},Object.defineProperties($f,tg);var eg=function(){};eg.interfaces_=function(){return[Qf]},eg.filter=function(t){t.geometryChangedAction()};var ng=function(){};ng.prototype.filter=function(t){},ng.prototype.interfaces_=function(){return[]},ng.prototype.getClass=function(){return ng};var rg=function(){},ig={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};rg.prototype.isInBoundary=function(t){},rg.prototype.interfaces_=function(){return[]},rg.prototype.getClass=function(){return rg},ig.Mod2BoundaryNodeRule.get=function(){return og},ig.EndPointBoundaryNodeRule.get=function(){return sg},ig.MultiValentEndPointBoundaryNodeRule.get=function(){return ag},ig.MonoValentEndPointBoundaryNodeRule.get=function(){return ug},ig.MOD2_BOUNDARY_RULE.get=function(){return new og},ig.ENDPOINT_BOUNDARY_RULE.get=function(){return new sg},ig.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ag},ig.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new ug},ig.OGC_SFS_BOUNDARY_RULE.get=function(){return rg.MOD2_BOUNDARY_RULE},Object.defineProperties(rg,ig);var og=function(){};og.prototype.isInBoundary=function(t){return t%2===1},og.prototype.interfaces_=function(){return[rg]},og.prototype.getClass=function(){return og};var sg=function(){};sg.prototype.isInBoundary=function(t){return t>0},sg.prototype.interfaces_=function(){return[rg]},sg.prototype.getClass=function(){return sg};var ag=function(){};ag.prototype.isInBoundary=function(t){return t>1},ag.prototype.interfaces_=function(){return[rg]},ag.prototype.getClass=function(){return ag};var ug=function(){};ug.prototype.isInBoundary=function(t){return 1===t},ug.prototype.interfaces_=function(){return[rg]},ug.prototype.getClass=function(){return ug};var cg=function(){};cg.prototype.add=function(){},cg.prototype.addAll=function(){},cg.prototype.isEmpty=function(){},cg.prototype.iterator=function(){},cg.prototype.size=function(){},cg.prototype.toArray=function(){},cg.prototype.remove=function(){};var lg=function(t){function e(e){t.call(this),this.message=e||""}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={name:{configurable:!0}};return n.name.get=function(){return"IndexOutOfBoundsException"},Object.defineProperties(e,n),e}(Error),hg=function(){};hg.prototype.hasNext=function(){},hg.prototype.next=function(){},hg.prototype.remove=function(){};var pg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(){},e.prototype.set=function(){},e.prototype.isEmpty=function(){},e}(cg);su.prototype=new Error,su.prototype.name="NoSuchElementException";var fg=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof cg&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.ensureCapacity=function(){},e.prototype.interfaces_=function(){return[t,cg]},e.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(arguments[0],arguments[1]),!0},e.prototype.clear=function(){this.array_=[]},e.prototype.addAll=function(t){for(var e=this,n=t.iterator();n.hasNext();)e.add(n.next());return!0},e.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},e.prototype.iterator=function(){return new gg(this)},e.prototype.get=function(t){if(t<0||t>=this.size())throw new lg;return this.array_[t]},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.size=function(){return this.array_.length},e.prototype.toArray=function(){for(var t=this,e=[],n=0,r=this.array_.length;n<r;n++)e.push(t.array_[n]);return e},e.prototype.remove=function(t){for(var e=this,n=!1,r=0,i=this.array_.length;r<i;r++)if(e.array_[r]===t){e.array_.splice(r,1),n=!0;break}return n},e}(pg),gg=function(t){function e(e){t.call(this),this.arrayList_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new su;return this.arrayList_.get(this.position_++)},e.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},e.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},e.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},e}(hg),dg=function(t){function e(){if(t.call(this),0===arguments.length);else if(1===arguments.length){var e=arguments[0];this.ensureCapacity(e.length),this.add(e,!0)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.ensureCapacity(n.length),this.add(n,r)}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={coordArrayType:{configurable:!0}};return n.coordArrayType.get=function(){return new Array(0).fill(null)},e.prototype.getCoordinate=function(t){return this.get(t)},e.prototype.addAll=function(){var e=this;if(2===arguments.length){for(var n=arguments[0],r=arguments[1],i=!1,o=n.iterator();o.hasNext();)e.add(o.next(),r),i=!0;return i}return t.prototype.addAll.apply(this,arguments)},e.prototype.clone=function r(){for(var e=this,r=t.prototype.clone.call(this),n=0;n<this.size();n++)r.add(n,e.get(n).copy());return r},e.prototype.toCoordinateArray=function(){return this.toArray(e.coordArrayType)},e.prototype.add=function(){var e=this;if(1===arguments.length){var n=arguments[0];t.prototype.add.call(this,n)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1];return this.add(r,i,!0),!0}if(arguments[0]instanceof ff&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(o))return null}t.prototype.add.call(this,o)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var u=arguments[0],c=arguments[1];return this.add(u,c),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var l=arguments[0],h=arguments[1],p=arguments[2];if(p)for(var f=0;f<l.length;f++)e.add(l[f],h);else for(var g=l.length-1;g>=0;g--)e.add(l[g],h);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof ff){var d=arguments[0],y=arguments[1],v=arguments[2];if(!v){var _=this.size();if(_>0){if(d>0){var m=this.get(d-1);if(m.equals2D(y))return null}if(d<_){var x=this.get(d);if(x.equals2D(y))return null}}}t.prototype.add.call(this,d,y)}}else if(4===arguments.length){var E=arguments[0],w=arguments[1],b=arguments[2],I=arguments[3],N=1;b>I&&(N=-1);for(var C=b;C!==I;C+=N)e.add(E[C],w);return!0}},e.prototype.closeRing=function(){this.size()>0&&this.add(new ff(this.get(0)),!1)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},Object.defineProperties(e,n),e}(fg),yg=function(){},vg={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};vg.ForwardComparator.get=function(){return _g},vg.BidirectionalComparator.get=function(){return mg},vg.coordArrayType.get=function(){return new Array(0).fill(null)},yg.prototype.interfaces_=function(){return[]},yg.prototype.getClass=function(){return yg},yg.isRing=function(t){return!(t.length<4)&&!!t[0].equals2D(t[t.length-1])},yg.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(yg.indexOf(r,e)<0)return r}return null},yg.scroll=function(t,e){var n=yg.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);Tf.arraycopy(t,n,r,0,t.length-n),Tf.arraycopy(t,0,r,t.length-n,n),Tf.arraycopy(r,0,t,0,t.length)},yg.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(0!==o.compare(r[s],i[s]))return!1;return!0}},yg.intersection=function(t,e){for(var n=new dg,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},yg.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},yg.removeRepeatedPoints=function(t){if(!yg.hasRepeatedPoints(t))return t;var e=new dg(t,(!1));return e.toCoordinateArray()},yg.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},yg.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},yg.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new ff(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],u=0;u<a;u++)o[s+u]=new ff(r[i+u]);
},yg.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},yg.envelope=function(t){for(var e=new Df,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},yg.toCoordinateArray=function(t){return t.toArray(yg.coordArrayType)},yg.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},yg.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},yg.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},yg.compare=function Lm(t,e){for(var n=0;n<t.length&&n<e.length;){var Lm=t[n].compareTo(e[n]);if(0!==Lm)return Lm;n++}return n<e.length?-1:n<t.length?1:0},yg.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||e.compareTo(t[n])>0)&&(e=t[n]);return e},yg.extract=function(t,e,n){e=xf.clamp(e,0,t.length),n=xf.clamp(n,-1,t.length);var r=n-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,s=e;s<=n;s++)i[o++]=t[s];return i},Object.defineProperties(yg,vg);var _g=function(){};_g.prototype.compare=function(t,e){var n=t,r=e;return yg.compare(n,r)},_g.prototype.interfaces_=function(){return[pf]},_g.prototype.getClass=function(){return _g};var mg=function(){};mg.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=yg.compare(n,r),o=yg.isEqualReversed(n,r);return o?0:i},mg.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=yg.increasingDirection(n),o=yg.increasingDirection(r),s=i>0?0:n.length-1,a=o>0?0:n.length-1,u=0;u<n.length;u++){var c=n[s].compareTo(r[a]);if(0!==c)return c;s+=i,a+=o}return 0},mg.prototype.interfaces_=function(){return[pf]},mg.prototype.getClass=function(){return mg};var xg=function(){};xg.prototype.get=function(){},xg.prototype.put=function(){},xg.prototype.size=function(){},xg.prototype.values=function(){},xg.prototype.entrySet=function(){};var Eg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(xg);au.prototype=new Error,au.prototype.name="OperationNotSupported",uu.prototype=new cg,uu.prototype.contains=function(){};var wg=function(t){function e(){t.call(this),this.array_=[],arguments[0]instanceof cg&&this.addAll(arguments[0])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.contains=function(t){for(var e=this,n=0,r=this.array_.length;n<r;n++){var i=e.array_[n];if(i===t)return!0}return!1},e.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},e.prototype.addAll=function(t){for(var e=this,n=t.iterator();n.hasNext();)e.add(n.next());return!0},e.prototype.remove=function(t){throw new Error},e.prototype.size=function(){return this.array_.length},e.prototype.isEmpty=function(){return 0===this.array_.length},e.prototype.toArray=function(){for(var t=this,e=[],n=0,r=this.array_.length;n<r;n++)e.push(t.array_[n]);return e},e.prototype.iterator=function(){return new bg(this)},e}(uu),bg=function(t){function e(e){t.call(this),this.hashSet_=e,this.position_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new su;return this.hashSet_.array_[this.position_++]},e.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},e.prototype.remove=function(){throw new au},e}(hg),Ig=0,Ng=1;gu.prototype=new Eg,gu.prototype.get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},gu.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:Ig,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do if(n=i,r=t.compareTo(i.key),r<0)i=i.left;else{if(!(r>0)){var o=i.value;return i.value=e,o}i=i.right}while(null!==i);var s={key:t,left:null,right:null,value:e,parent:n,color:Ig,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=s:n.right=s,this.fixAfterInsertion(s),this.size_++,null},gu.prototype.fixAfterInsertion=function(t){var e=this;for(t.color=Ng;null!=t&&t!==this.root_&&t.parent.color===Ng;)if(lu(t)===pu(lu(lu(t)))){var n=fu(lu(lu(t)));cu(n)===Ng?(hu(lu(t),Ig),hu(n,Ig),hu(lu(lu(t)),Ng),t=lu(lu(t))):(t===fu(lu(t))&&(t=lu(t),e.rotateLeft(t)),hu(lu(t),Ig),hu(lu(lu(t)),Ng),e.rotateRight(lu(lu(t))))}else{var r=pu(lu(lu(t)));cu(r)===Ng?(hu(lu(t),Ig),hu(r,Ig),hu(lu(lu(t)),Ng),t=lu(lu(t))):(t===pu(lu(t))&&(t=lu(t),e.rotateRight(t)),hu(lu(t),Ig),hu(lu(lu(t)),Ng),e.rotateLeft(lu(lu(t))))}this.root_.color=Ig},gu.prototype.values=function(){var t=new fg,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=gu.successor(e));)t.add(e.value);return t},gu.prototype.entrySet=function(){var t=new wg,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=gu.successor(e));)t.add(e);return t},gu.prototype.rotateLeft=function(t){if(null!=t){var e=t.right;t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},gu.prototype.rotateRight=function(t){if(null!=t){var e=t.left;t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},gu.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},gu.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)r=n,n=n.parent;return n},gu.prototype.size=function(){return this.size_};var Cg=function(){};Cg.prototype.interfaces_=function(){return[]},Cg.prototype.getClass=function(){return Cg},du.prototype=new uu,yu.prototype=new du,yu.prototype.contains=function(t){for(var e=this,n=0,r=this.array_.length;n<r;n++){var i=e.array_[n];if(0===i.compareTo(t))return!0}return!1},yu.prototype.add=function(t){var e=this;if(this.contains(t))return!1;for(var n=0,r=this.array_.length;n<r;n++){var i=e.array_[n];if(1===i.compareTo(t))return e.array_.splice(n,0,t),!0}return this.array_.push(t),!0},yu.prototype.addAll=function(t){for(var e=this,n=t.iterator();n.hasNext();)e.add(n.next());return!0},yu.prototype.remove=function(t){throw new au},yu.prototype.size=function(){return this.array_.length},yu.prototype.isEmpty=function(){return 0===this.array_.length},yu.prototype.toArray=function(){for(var t=this,e=[],n=0,r=this.array_.length;n<r;n++)e.push(t.array_[n]);return e},yu.prototype.iterator=function(){return new Sg(this)};var Sg=function(t){this.treeSet_=t,this.position_=0};Sg.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new su;return this.treeSet_.array_[this.position_++]},Sg.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Sg.prototype.remove=function(){throw new au};var Mg=function(){};Mg.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){e=i.slice(arguments[1],arguments[2]),e.sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},Mg.asList=function(t){for(var e=new fg,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};var Lg=function(){},Pg={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};Pg.P.get=function(){return 0},Pg.L.get=function(){return 1},Pg.A.get=function(){return 2},Pg.FALSE.get=function(){return-1},Pg.TRUE.get=function(){return-2},Pg.DONTCARE.get=function(){return-3},Pg.SYM_FALSE.get=function(){return"F"},Pg.SYM_TRUE.get=function(){return"T"},Pg.SYM_DONTCARE.get=function(){return"*"},Pg.SYM_P.get=function(){return"0"},Pg.SYM_L.get=function(){return"1"},Pg.SYM_A.get=function(){return"2"},Lg.prototype.interfaces_=function(){return[]},Lg.prototype.getClass=function(){return Lg},Lg.toDimensionSymbol=function(t){switch(t){case Lg.FALSE:return Lg.SYM_FALSE;case Lg.TRUE:return Lg.SYM_TRUE;case Lg.DONTCARE:return Lg.SYM_DONTCARE;case Lg.P:return Lg.SYM_P;case Lg.L:return Lg.SYM_L;case Lg.A:return Lg.SYM_A}throw new af("Unknown dimension value: "+t)},Lg.toDimensionValue=function(t){switch(If.toUpperCase(t)){case Lg.SYM_FALSE:return Lg.FALSE;case Lg.SYM_TRUE:return Lg.TRUE;case Lg.SYM_DONTCARE:return Lg.DONTCARE;case Lg.SYM_P:return Lg.P;case Lg.SYM_L:return Lg.L;case Lg.SYM_A:return Lg.A}throw new af("Unknown dimension symbol: "+t)},Object.defineProperties(Lg,Pg);var Og=function(){};Og.prototype.filter=function(t){},Og.prototype.interfaces_=function(){return[]},Og.prototype.getClass=function(){return Og};var Rg=function(){};Rg.prototype.filter=function(t,e){},Rg.prototype.isDone=function(){},Rg.prototype.isGeometryChanged=function(){},Rg.prototype.interfaces_=function(){return[]},Rg.prototype.getClass=function(){return Rg};var Tg=function(t){function e(e,n){if(t.call(this,n),this._geometries=e||[],t.hasNullElements(this._geometries))throw new af("geometries must not contain null elements")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){for(var t=this,e=new Df,n=0;n<this._geometries.length;n++)e.expandToInclude(t._geometries[n].getEnvelopeInternal());return e},e.prototype.getGeometryN=function(t){return this._geometries[t]},e.prototype.getSortIndex=function(){return t.SORTINDEX_GEOMETRYCOLLECTION},e.prototype.getCoordinates=function(){for(var t=this,e=new Array(this.getNumPoints()).fill(null),n=-1,r=0;r<this._geometries.length;r++)for(var i=t._geometries[r].getCoordinates(),o=0;o<i.length;o++)n++,e[n]=i[o];return e},e.prototype.getArea=function(){for(var t=this,e=0,n=0;n<this._geometries.length;n++)e+=t._geometries[n].getArea();return e},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._geometries.length!==i._geometries.length)return!1;for(var o=0;o<this._geometries.length;o++)if(!e._geometries[o].equalsExact(i._geometries[o],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<this._geometries.length;e++)t._geometries[e].normalize();Mg.sort(this._geometries)},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},e.prototype.getBoundaryDimension=function(){for(var t=this,e=Lg.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,t._geometries[n].getBoundaryDimension());return e},e.prototype.getDimension=function(){for(var t=this,e=Lg.FALSE,n=0;n<this._geometries.length;n++)e=Math.max(e,t._geometries[n].getDimension());return e},e.prototype.getLength=function(){for(var t=this,e=0,n=0;n<this._geometries.length;n++)e+=t._geometries[n].getLength();return e},e.prototype.getNumPoints=function(){for(var t=this,e=0,n=0;n<this._geometries.length;n++)e+=t._geometries[n].getNumPoints();return e},e.prototype.getNumGeometries=function(){return this._geometries.length},e.prototype.reverse=function(){for(var t=this,e=this._geometries.length,n=new Array(e).fill(null),r=0;r<this._geometries.length;r++)n[r]=t._geometries[r].reverse();return this.getFactory().createGeometryCollection(n)},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new yu(Mg.asList(this._geometries)),r=new yu(Mg.asList(e._geometries));return this.compare(n,r)}if(2===arguments.length){for(var i=arguments[0],o=arguments[1],s=i,a=this.getNumGeometries(),u=s.getNumGeometries(),c=0;c<a&&c<u;){var l=t.getGeometryN(c),h=s.getGeometryN(c),p=l.compareToSameClass(h,o);if(0!==p)return p;c++}return c<a?1:c<u?-1:0}},e.prototype.apply=function(){var t=this;if(mf(arguments[0],ng))for(var e=arguments[0],n=0;n<this._geometries.length;n++)t._geometries[n].apply(e);else if(mf(arguments[0],Rg)){var r=arguments[0];if(0===this._geometries.length)return null;for(var i=0;i<this._geometries.length&&(t._geometries[i].apply(r),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(mf(arguments[0],Og)){var o=arguments[0];o.filter(this);for(var s=0;s<this._geometries.length;s++)t._geometries[s].apply(o)}else if(mf(arguments[0],Qf)){var a=arguments[0];a.filter(this);for(var u=0;u<this._geometries.length;u++)t._geometries[u].apply(a)}},e.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),Uf.shouldNeverReachHere(),null},e.prototype.clone=function(){var e=this,n=t.prototype.clone.call(this);n._geometries=new Array(this._geometries.length).fill(null);for(var r=0;r<this._geometries.length;r++)n._geometries[r]=e._geometries[r].clone();return n},e.prototype.getGeometryType=function(){return"GeometryCollection"},e.prototype.copy=function(){for(var t=this,n=new Array(this._geometries.length).fill(null),r=0;r<n.length;r++)n[r]=t._geometries[r].copy();return new e(n,this._factory)},e.prototype.isEmpty=function(){for(var t=this,e=0;e<this._geometries.length;e++)if(!t._geometries[e].isEmpty())return!1;return!0},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(e,n),e}($f),Ag=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $f.SORTINDEX_MULTILINESTRING},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Lg.FALSE:0},e.prototype.isClosed=function(){var t=this;if(this.isEmpty())return!1;for(var e=0;e<this._geometries.length;e++)if(!t._geometries[e].isClosed())return!1;return!0},e.prototype.getDimension=function(){return 1},e.prototype.reverse=function(){for(var t=this,e=this._geometries.length,n=new Array(e).fill(null),r=0;r<this._geometries.length;r++)n[e-1-r]=t._geometries[r].reverse();return this.getFactory().createMultiLineString(n)},e.prototype.getBoundary=function(){return new Dg(this).getBoundary()},e.prototype.getGeometryType=function(){return"MultiLineString"},e.prototype.copy=function(){for(var t=this,n=new Array(this._geometries.length).fill(null),r=0;r<n.length;r++)n[r]=t._geometries[r].copy();return new e(n,this._factory)},e.prototype.interfaces_=function(){return[Cg]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(e,n),e}(Tg),Dg=function(){if(this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length){var t=arguments[0],e=rg.MOD2_BOUNDARY_RULE;this._geom=t,this._geomFact=t.getFactory(),this._bnRule=e}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r}};Dg.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},Dg.prototype.getBoundary=function(){return this._geom instanceof zg?this.boundaryLineString(this._geom):this._geom instanceof Ag?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},Dg.prototype.boundaryLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this._bnRule.isInBoundary(2);return e?t.getStartPoint():this._geomFact.createMultiPoint()}return this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},Dg.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},Dg.prototype.computeBoundaryCoordinates=function(t){var e=this,n=new fg;this._endpointMap=new gu;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);0!==i.getNumPoints()&&(e.addEndpoint(i.getCoordinateN(0)),e.addEndpoint(i.getCoordinateN(i.getNumPoints()-1)))}for(var o=this._endpointMap.entrySet().iterator();o.hasNext();){var s=o.next(),a=s.getValue(),u=a.count;e._bnRule.isInBoundary(u)&&n.add(s.getKey())}return yg.toCoordinateArray(n)},Dg.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new Fg,this._endpointMap.put(t,e)),e.count++},Dg.prototype.interfaces_=function(){return[]},Dg.prototype.getClass=function(){return Dg},Dg.getBoundary=function(){if(1===arguments.length){var t=arguments[0],e=new Dg(t);return e.getBoundary()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new Dg(n,r);return i.getBoundary()}};var Fg=function(){this.count=null};Fg.prototype.interfaces_=function(){return[]},Fg.prototype.getClass=function(){return Fg};var qg=function(){},Gg=function(){},Bg={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};Gg.prototype.interfaces_=function(){return[]},Gg.prototype.getClass=function(){return Gg},Gg.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},Gg.getStackTrace=function(){if(1===arguments.length){var t=arguments[0],e=new mu,n=new vu(e);return t.printStackTrace(n),e.toString()}if(2===arguments.length){for(var r=arguments[0],i=arguments[1],o="",s=new _u(Gg.getStackTrace(r)),a=new Eu(s),u=0;u<i;u++)try{o+=a.readLine()+Gg.NEWLINE}catch(c){if(!(c instanceof xu))throw c;Uf.shouldNeverReachHere()}finally{}return o}},Gg.split=function(t,e){for(var n=e.length,r=new fg,i=""+t,o=i.indexOf(e);o>=0;){var s=i.substring(0,o);r.add(s),i=i.substring(o+n),o=i.indexOf(e)}i.length>0&&r.add(i);for(var a=new Array(r.size()).fill(null),u=0;u<a.length;u++)a[u]=r.get(u);return a},Gg.toString=function(){if(1===arguments.length){var t=arguments[0];return Gg.SIMPLE_ORDINATE_FORMAT.format(t)}},Gg.spaces=function(t){return Gg.chars(" ",t)},Bg.NEWLINE.get=function(){return Tf.getProperty("line.separator")},Bg.SIMPLE_ORDINATE_FORMAT.get=function(){return new qg("0.#")},Object.defineProperties(Gg,Bg);var kg=function(){};kg.prototype.interfaces_=function(){return[]},kg.prototype.getClass=function(){return kg},kg.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},kg.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&(t.getOrdinate(0,Lf.X)===t.getOrdinate(e-1,Lf.X)&&t.getOrdinate(0,Lf.Y)===t.getOrdinate(e-1,Lf.Y))},kg.isEqual=function(t,e){var n=t.size(),r=e.size();if(n!==r)return!1;for(var i=Math.min(t.getDimension(),e.getDimension()),o=0;o<n;o++)for(var s=0;s<i;s++){var a=t.getOrdinate(o,s),u=e.getOrdinate(o,s);if(!(t.getOrdinate(o,s)===e.getOrdinate(o,s)||uf.isNaN(a)&&uf.isNaN(u)))return!1}return!0},kg.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(kg.copy(e,0,r,0,i),i>0)for(var o=i;o<n;o++)kg.copy(e,i-1,r,o,1);return r},kg.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)kg.swap(t,r,e-r)},kg.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},kg.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)kg.copyCoord(t,e+o,n,r+o)},kg.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new wf;r.append("(");for(var i=0;i<e;i++){i>0&&r.append(" ");for(var o=0;o<n;o++)o>0&&r.append(","),r.append(Gg.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},kg.ensureValidRing=function(t,e){var n=e.size();if(0===n)return e;if(n<=3)return kg.createClosedRing(t,e,4);var r=e.getOrdinate(0,Lf.X)===e.getOrdinate(n-1,Lf.X)&&e.getOrdinate(0,Lf.Y)===e.getOrdinate(n-1,Lf.Y);return r?e:kg.createClosedRing(t,e,n+1)},kg.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();kg.copy(e,0,r,0,i);for(var o=i;o<n;o++)kg.copy(e,0,r,o,1);return r};var zg=function(t){function e(e,n){t.call(this,n),this._points=null,this.init(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Df:this._points.expandEnvelope(new Df)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return t.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n;if(this._points.size()!==i._points.size())return!1;for(var o=0;o<this._points.size();o++)if(!e.equal(e._points.getCoordinate(o),i._points.getCoordinate(o),r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){for(var t=this,e=0;e<Math.trunc(this._points.size()/2);e++){var n=t._points.size()-1-e;if(!t._points.getCoordinate(e).equals(t._points.getCoordinate(n)))return t._points.getCoordinate(e).compareTo(t._points.getCoordinate(n))>0&&kg.reverse(t._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?Lg.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return Zf.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();kg.reverse(t);var e=this.getFactory().createLineString(t);return e},e.prototype.compareToSameClass=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=e,r=0,i=0;r<this._points.size()&&i<n._points.size();){var o=t._points.getCoordinate(r).compareTo(n._points.getCoordinate(i));if(0!==o)return o;r++,i++}return r<this._points.size()?1:i<n._points.size()?-1:0}if(2===arguments.length){var s=arguments[0],a=arguments[1],u=s;return a.compare(this._points,u._points)}},e.prototype.apply=function(){var t=this;if(mf(arguments[0],ng))for(var e=arguments[0],n=0;n<this._points.size();n++)e.filter(t._points.getCoordinate(n));else if(mf(arguments[0],Rg)){var r=arguments[0];if(0===this._points.size())return null;for(var i=0;i<this._points.size()&&(r.filter(t._points,i),!r.isDone());i++);r.isGeometryChanged()&&this.geometryChanged()}else if(mf(arguments[0],Og)){var o=arguments[0];o.filter(this)}else if(mf(arguments[0],Qf)){var s=arguments[0];s.filter(this)}},e.prototype.getBoundary=function(){return new Dg(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._points=this._points.clone(),e},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new af("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=this,n=0;n<this._points.size();n++)if(e._points.getCoordinate(n).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[Cg]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,n),e}($f),jg=function(){};jg.prototype.interfaces_=function(){return[]},jg.prototype.getClass=function(){return jg};var Xg=function(t){function e(e,n){t.call(this,n),this._coordinates=e||null,this.init(this._coordinates)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Df;var t=new Df;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},e.prototype.getSortIndex=function(){return t.SORTINDEX_POINT},e.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&(!(!this.isEmpty()||!e.isEmpty())||this.isEmpty()===e.isEmpty()&&this.equal(e.getCoordinate(),this.getCoordinate(),n))}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){},e.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},e.prototype.getBoundaryDimension=function(){return Lg.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getNumPoints=function(){return this.isEmpty()?0:1},e.prototype.reverse=function(){return this.copy()},e.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},e.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=n;return r.compare(this._coordinates,i._coordinates)}},e.prototype.apply=function(){if(mf(arguments[0],ng)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(mf(arguments[0],Rg)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(mf(arguments[0],Og)){var n=arguments[0];n.filter(this)}else if(mf(arguments[0],Qf)){var r=arguments[0];r.filter(this)}},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._coordinates=this._coordinates.clone(),e},e.prototype.getGeometryType=function(){return"Point"},e.prototype.copy=function(){return new e(this._coordinates.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._coordinates},e.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},e.prototype.isEmpty=function(){return 0===this._coordinates.size()},e.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),Uf.isTrue(t.size()<=1),this._coordinates=t},e.prototype.isSimple=function(){return!0},e.prototype.interfaces_=function(){return[jg]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(e,n),e}($f),Ug=function(){};Ug.prototype.interfaces_=function(){return[]},Ug.prototype.getClass=function(){return Ug};var Yg=function(t){function e(e,n,r){if(t.call(this,r),this._shell=null,this._holes=null,null===e&&(e=this.getFactory().createLinearRing()),null===n&&(n=[]),t.hasNullElements(n))throw new af("holes must not contain null elements");if(e.isEmpty()&&t.hasNonEmptyElements(n))throw new af("shell is empty but holes are not");this._shell=e,this._holes=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},e.prototype.getSortIndex=function(){return t.SORTINDEX_POLYGON},e.prototype.getCoordinates=function(){var t=this;if(this.isEmpty())return[];for(var e=new Array(this.getNumPoints()).fill(null),n=-1,r=this._shell.getCoordinates(),i=0;i<r.length;i++)n++,e[n]=r[i];for(var o=0;o<this._holes.length;o++)for(var s=t._holes[o].getCoordinates(),a=0;a<s.length;a++)n++,e[n]=s[a];return e},e.prototype.getArea=function(){var t=this,e=0;e+=Math.abs(Zf.signedArea(this._shell.getCoordinateSequence()));for(var n=0;n<this._holes.length;n++)e-=Math.abs(Zf.signedArea(t._holes[n].getCoordinateSequence()));return e},e.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),s=t.getY(0),a=1;a<=4;a++){var u=t.getX(a),c=t.getY(a),l=u!==o,h=c!==s;if(l===h)return!1;o=u,s=c}return!0},e.prototype.equalsExact=function(){var e=this;if(2===arguments.length){var n=arguments[0],r=arguments[1];if(!this.isEquivalentClass(n))return!1;var i=n,o=this._shell,s=i._shell;if(!o.equalsExact(s,r))return!1;if(this._holes.length!==i._holes.length)return!1;for(var a=0;a<this._holes.length;a++)if(!e._holes[a].equalsExact(i._holes[a],r))return!1;return!0}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.normalize=function(){var t=this;if(0===arguments.length){this.normalize(this._shell,!0);for(var e=0;e<this._holes.length;e++)t.normalize(t._holes[e],!1);Mg.sort(this._holes)}else if(2===arguments.length){var n=arguments[0],r=arguments[1];if(n.isEmpty())return null;var i=new Array(n.getCoordinates().length-1).fill(null);Tf.arraycopy(n.getCoordinates(),0,i,0,i.length);var o=yg.minCoordinate(n.getCoordinates());yg.scroll(i,o),Tf.arraycopy(i,0,n.getCoordinates(),0,i.length),n.getCoordinates()[i.length]=i[0],Zf.isCCW(n.getCoordinates())===r&&yg.reverse(n.getCoordinates())}},e.prototype.getCoordinate=function(){return this._shell.getCoordinate()},e.prototype.getNumInteriorRing=function(){return this._holes.length},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.getLength=function(){var t=this,e=0;e+=this._shell.getLength();for(var n=0;n<this._holes.length;n++)e+=t._holes[n].getLength();return e},e.prototype.getNumPoints=function(){for(var t=this,e=this._shell.getNumPoints(),n=0;n<this._holes.length;n++)e+=t._holes[n].getNumPoints();return e},e.prototype.reverse=function(){var t=this,e=this.copy();e._shell=this._shell.copy().reverse(),e._holes=new Array(this._holes.length).fill(null);for(var n=0;n<this._holes.length;n++)e._holes[n]=t._holes[n].copy().reverse();return e},e.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},e.prototype.compareToSameClass=function(){
var t=this;if(1===arguments.length){var e=arguments[0],n=this._shell,r=e._shell;return n.compareToSameClass(r)}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i,a=this._shell,u=s._shell,c=a.compareToSameClass(u,o);if(0!==c)return c;for(var l=this.getNumInteriorRing(),h=s.getNumInteriorRing(),p=0;p<l&&p<h;){var f=t.getInteriorRingN(p),g=s.getInteriorRingN(p),d=f.compareToSameClass(g,o);if(0!==d)return d;p++}return p<l?1:p<h?-1:0}},e.prototype.apply=function(t){var e=this;if(mf(t,ng)){this._shell.apply(t);for(var n=0;n<this._holes.length;n++)e._holes[n].apply(t)}else if(mf(t,Rg)){if(this._shell.apply(t),!t.isDone())for(var r=0;r<this._holes.length&&(e._holes[r].apply(t),!t.isDone());r++);t.isGeometryChanged()&&this.geometryChanged()}else if(mf(t,Og))t.filter(this);else if(mf(t,Qf)){t.filter(this),this._shell.apply(t);for(var i=0;i<this._holes.length;i++)e._holes[i].apply(t)}},e.prototype.getBoundary=function(){var t=this;if(this.isEmpty())return this.getFactory().createMultiLineString();var e=new Array(this._holes.length+1).fill(null);e[0]=this._shell;for(var n=0;n<this._holes.length;n++)e[n+1]=t._holes[n];return e.length<=1?this.getFactory().createLinearRing(e[0].getCoordinateSequence()):this.getFactory().createMultiLineString(e)},e.prototype.clone=function(){var e=this,n=t.prototype.clone.call(this);n._shell=this._shell.clone(),n._holes=new Array(this._holes.length).fill(null);for(var r=0;r<this._holes.length;r++)n._holes[r]=e._holes[r].clone();return n},e.prototype.getGeometryType=function(){return"Polygon"},e.prototype.copy=function(){for(var t=this,n=this._shell.copy(),r=new Array(this._holes.length).fill(null),i=0;i<r.length;i++)r[i]=t._holes[i].copy();return new e(n,r,this._factory)},e.prototype.getExteriorRing=function(){return this._shell},e.prototype.isEmpty=function(){return this._shell.isEmpty()},e.prototype.getInteriorRingN=function(t){return this._holes[t]},e.prototype.interfaces_=function(){return[Ug]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(e,n),e}($f),Vg=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $f.SORTINDEX_MULTIPOINT},e.prototype.isValid=function(){return!0},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getCoordinate=function(){if(1===arguments.length){var e=arguments[0];return this._geometries[e].getCoordinate()}return t.prototype.getCoordinate.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return Lg.FALSE},e.prototype.getDimension=function(){return 0},e.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},e.prototype.getGeometryType=function(){return"MultiPoint"},e.prototype.copy=function(){for(var t=this,n=new Array(this._geometries.length).fill(null),r=0;r<n.length;r++)n[r]=t._geometries[r].copy();return new e(n,this._factory)},e.prototype.interfaces_=function(){return[jg]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(e,n),e}(Tg),Hg=function(t){function e(e,n){e instanceof ff&&n instanceof cd&&(e=n.getCoordinateSequenceFactory().create(e)),t.call(this,e,n),this.validateConstruction()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $f.SORTINDEX_LINEARRING},e.prototype.getBoundaryDimension=function(){return Lg.FALSE},e.prototype.isClosed=function(){return!!this.isEmpty()||t.prototype.isClosed.call(this)},e.prototype.reverse=function(){var t=this._points.copy();kg.reverse(t);var e=this.getFactory().createLinearRing(t);return e},e.prototype.validateConstruction=function(){if(!this.isEmpty()&&!t.prototype.isClosed.call(this))throw new af("Points of LinearRing do not form a closed linestring");if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<e.MINIMUM_VALID_SIZE)throw new af("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},e.prototype.getGeometryType=function(){return"LinearRing"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.MINIMUM_VALID_SIZE.get=function(){return 4},n.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(e,n),e}(zg),Wg=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={serialVersionUID:{configurable:!0}};return e.prototype.getSortIndex=function(){return $f.SORTINDEX_MULTIPOLYGON},e.prototype.equalsExact=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!this.isEquivalentClass(e)&&t.prototype.equalsExact.call(this,e,n)}return t.prototype.equalsExact.apply(this,arguments)},e.prototype.getBoundaryDimension=function(){return 1},e.prototype.getDimension=function(){return 2},e.prototype.reverse=function(){for(var t=this,e=this._geometries.length,n=new Array(e).fill(null),r=0;r<this._geometries.length;r++)n[r]=t._geometries[r].reverse();return this.getFactory().createMultiPolygon(n)},e.prototype.getBoundary=function(){var t=this;if(this.isEmpty())return this.getFactory().createMultiLineString();for(var e=new fg,n=0;n<this._geometries.length;n++)for(var r=t._geometries[n],i=r.getBoundary(),o=0;o<i.getNumGeometries();o++)e.add(i.getGeometryN(o));var s=new Array(e.size()).fill(null);return this.getFactory().createMultiLineString(e.toArray(s))},e.prototype.getGeometryType=function(){return"MultiPolygon"},e.prototype.copy=function(){for(var t=this,n=new Array(this._geometries.length).fill(null),r=0;r<n.length;r++)n[r]=t._geometries[r].copy();return new e(n,this._factory)},e.prototype.interfaces_=function(){return[Ug]},e.prototype.getClass=function(){return e},n.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(e,n),e}(Tg),Jg=function(t){this._factory=t||null,this._isUserDataCopied=!1},Zg={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};Jg.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},Jg.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},Jg.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof Tg?this.editGeometryCollection(t,e):t instanceof Yg?this.editPolygon(t,e):t instanceof Xg?e.edit(t,this._factory):t instanceof zg?e.edit(t,this._factory):(Uf.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},Jg.prototype.editGeometryCollection=function(t,e){for(var n=this,r=e.edit(t,this._factory),i=new fg,o=0;o<r.getNumGeometries();o++){var s=n.edit(r.getGeometryN(o),e);null===s||s.isEmpty()||i.add(s)}return r.getClass()===Vg?this._factory.createMultiPoint(i.toArray([])):r.getClass()===Ag?this._factory.createMultiLineString(i.toArray([])):r.getClass()===Wg?this._factory.createMultiPolygon(i.toArray([])):this._factory.createGeometryCollection(i.toArray([]))},Jg.prototype.editPolygon=function(t,e){var n=this,r=e.edit(t,this._factory);if(null===r&&(r=this._factory.createPolygon(null)),r.isEmpty())return r;var i=this.edit(r.getExteriorRing(),e);if(null===i||i.isEmpty())return this._factory.createPolygon();for(var o=new fg,s=0;s<r.getNumInteriorRing();s++){var a=n.edit(r.getInteriorRingN(s),e);null===a||a.isEmpty()||o.add(a)}return this._factory.createPolygon(i,o.toArray([]))},Jg.prototype.interfaces_=function(){return[]},Jg.prototype.getClass=function(){return Jg},Jg.GeometryEditorOperation=function(){},Zg.NoOpGeometryOperation.get=function(){return Kg},Zg.CoordinateOperation.get=function(){return Qg},Zg.CoordinateSequenceOperation.get=function(){return $g},Object.defineProperties(Jg,Zg);var Kg=function(){};Kg.prototype.edit=function(t,e){return t},Kg.prototype.interfaces_=function(){return[Jg.GeometryEditorOperation]},Kg.prototype.getClass=function(){return Kg};var Qg=function(){};Qg.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Hg?e.createLinearRing(n):t instanceof zg?e.createLineString(n):t instanceof Xg?n.length>0?e.createPoint(n[0]):e.createPoint():t},Qg.prototype.interfaces_=function(){return[Jg.GeometryEditorOperation]},Qg.prototype.getClass=function(){return Qg};var $g=function(){};$g.prototype.edit=function(t,e){return t instanceof Hg?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof zg?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof Xg?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},$g.prototype.interfaces_=function(){return[Jg.GeometryEditorOperation]},$g.prototype.getClass=function(){return $g};var td=function(){var t=this;if(this._dimension=3,this._coordinates=null,1===arguments.length){if(arguments[0]instanceof Array)this._coordinates=arguments[0],this._dimension=3;else if(Number.isInteger(arguments[0])){var e=arguments[0];this._coordinates=new Array(e).fill(null);for(var n=0;n<e;n++)t._coordinates[n]=new ff}else if(mf(arguments[0],Lf)){var r=arguments[0];if(null===r)return this._coordinates=new Array(0).fill(null),null;this._dimension=r.getDimension(),this._coordinates=new Array(r.size()).fill(null);for(var i=0;i<this._coordinates.length;i++)t._coordinates[i]=r.getCoordinateCopy(i)}}else if(2===arguments.length)if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var o=arguments[0],s=arguments[1];this._coordinates=o,this._dimension=s,null===o&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var a=arguments[0],u=arguments[1];this._coordinates=new Array(a).fill(null),this._dimension=u;for(var c=0;c<a;c++)t._coordinates[c]=new ff}},ed={serialVersionUID:{configurable:!0}};td.prototype.setOrdinate=function(t,e,n){switch(e){case Lf.X:this._coordinates[t].x=n;break;case Lf.Y:this._coordinates[t].y=n;break;case Lf.Z:this._coordinates[t].z=n;break;default:throw new af("invalid ordinateIndex")}},td.prototype.size=function(){return this._coordinates.length},td.prototype.getOrdinate=function(t,e){switch(e){case Lf.X:return this._coordinates[t].x;case Lf.Y:return this._coordinates[t].y;case Lf.Z:return this._coordinates[t].z}return uf.NaN},td.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}if(2===arguments.length){var e=arguments[0],n=arguments[1];n.x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z}},td.prototype.getCoordinateCopy=function(t){return new ff(this._coordinates[t])},td.prototype.getDimension=function(){return this._dimension},td.prototype.getX=function(t){return this._coordinates[t].x},td.prototype.clone=function(){for(var t=this,e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=t._coordinates[n].clone();return new td(e,this._dimension)},td.prototype.expandEnvelope=function(t){for(var e=this,n=0;n<this._coordinates.length;n++)t.expandToInclude(e._coordinates[n]);return t},td.prototype.copy=function(){for(var t=this,e=new Array(this.size()).fill(null),n=0;n<this._coordinates.length;n++)e[n]=t._coordinates[n].copy();return new td(e,this._dimension)},td.prototype.toString=function(){var t=this;if(this._coordinates.length>0){var e=new wf(17*this._coordinates.length);e.append("("),e.append(this._coordinates[0]);for(var n=1;n<this._coordinates.length;n++)e.append(", "),e.append(t._coordinates[n]);return e.append(")"),e.toString()}return"()"},td.prototype.getY=function(t){return this._coordinates[t].y},td.prototype.toCoordinateArray=function(){return this._coordinates},td.prototype.interfaces_=function(){return[Lf,ou]},td.prototype.getClass=function(){return td},ed.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(td,ed);var nd=function(){},rd={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};nd.prototype.readResolve=function(){return nd.instance()},nd.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return new td(t)}if(mf(arguments[0],Lf)){var e=arguments[0];return new td(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return r>3&&(r=3),r<2?new td(n):new td(n,r)}},nd.prototype.interfaces_=function(){return[yf,ou]},nd.prototype.getClass=function(){return nd},nd.instance=function(){return nd.instanceObject},rd.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},rd.instanceObject.get=function(){return new nd},Object.defineProperties(nd,rd);var id=function(t){function e(){t.call(this),this.map_=new Map}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){return this.map_.get(t)||null},e.prototype.put=function(t,e){return this.map_.set(t,e),e},e.prototype.values=function(){for(var t=new fg,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},e.prototype.entrySet=function(){var t=new wg;return this.map_.entries().forEach(function(e){return t.add(e)}),t},e.prototype.size=function(){return this.map_.size()},e}(xg),od=function Pm(){if(this._modelType=null,this._scale=null,0===arguments.length)this._modelType=Pm.FLOATING;else if(1===arguments.length)if(arguments[0]instanceof ad){var t=arguments[0];this._modelType=t,t===Pm.FIXED&&this.setScale(1)}else if("number"==typeof arguments[0]){var e=arguments[0];this._modelType=Pm.FIXED,this.setScale(e)}else if(arguments[0]instanceof Pm){var n=arguments[0];this._modelType=n._modelType,this._scale=n._scale}},sd={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};od.prototype.equals=function(t){if(!(t instanceof od))return!1;var e=t;return this._modelType===e._modelType&&this._scale===e._scale},od.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new bf(n).compareTo(new bf(r))},od.prototype.getScale=function(){return this._scale},od.prototype.isFloating=function(){return this._modelType===od.FLOATING||this._modelType===od.FLOATING_SINGLE},od.prototype.getType=function(){return this._modelType},od.prototype.toString=function(){var t="UNKNOWN";return this._modelType===od.FLOATING?t="Floating":this._modelType===od.FLOATING_SINGLE?t="Floating-Single":this._modelType===od.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},od.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];if(uf.isNaN(t))return t;if(this._modelType===od.FLOATING_SINGLE){var e=t;return e}return this._modelType===od.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof ff){var n=arguments[0];if(this._modelType===od.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},od.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===od.FLOATING?t=16:this._modelType===od.FLOATING_SINGLE?t=6:this._modelType===od.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},od.prototype.setScale=function(t){this._scale=Math.abs(t)},od.prototype.interfaces_=function(){return[ou,lf]},od.prototype.getClass=function(){return od},od.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},sd.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},sd.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(od,sd);var ad=function Om(t){this._name=t||null,Om.nameToTypeMap.put(t,this)},ud={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};ad.prototype.readResolve=function(){return ad.nameToTypeMap.get(this._name)},ad.prototype.toString=function(){return this._name},ad.prototype.interfaces_=function(){return[ou]},ad.prototype.getClass=function(){return ad},ud.serialVersionUID.get=function(){return-552860263173159e4},ud.nameToTypeMap.get=function(){return new id},Object.defineProperties(ad,ud),od.Type=ad,od.FIXED=new ad("FIXED"),od.FLOATING=new ad("FLOATING"),od.FLOATING_SINGLE=new ad("FLOATING SINGLE");var cd=function Rm(){this._precisionModel=new od,this._SRID=0,this._coordinateSequenceFactory=Rm.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?mf(arguments[0],yf)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof od&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},ld={serialVersionUID:{configurable:!0}};cd.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new ff(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new ff(t.getMinX(),t.getMinY()),new ff(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new ff(t.getMinX(),t.getMinY()),new ff(t.getMinX(),t.getMaxY()),new ff(t.getMaxX(),t.getMaxY()),new ff(t.getMaxX(),t.getMinY()),new ff(t.getMinX(),t.getMinY())]),null)},cd.prototype.createLineString=function(t){return t?t instanceof Array?new zg(this.getCoordinateSequenceFactory().create(t),this):mf(t,Lf)?new zg(t,this):void 0:new zg(this.getCoordinateSequenceFactory().create([]),this)},cd.prototype.createMultiLineString=function(){if(0===arguments.length)return new Ag(null,this);if(1===arguments.length){var t=arguments[0];return new Ag(t,this)}},cd.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),s=o.getClass();null===e&&(e=s),s!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(cd.toGeometryArray(t));var a=t.iterator().next(),u=t.size()>1;if(u){if(a instanceof Yg)return this.createMultiPolygon(cd.toPolygonArray(t));if(a instanceof zg)return this.createMultiLineString(cd.toLineStringArray(t));if(a instanceof Xg)return this.createMultiPoint(cd.toPointArray(t));Uf.shouldNeverReachHere("Unhandled class: "+a.getClass().getName())}return a},cd.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},cd.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof ff){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(mf(arguments[0],Lf)){var e=arguments[0];return new Xg(e,this)}}},cd.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},cd.prototype.createPolygon=function(){if(0===arguments.length)return new Yg(null,null,this);if(1===arguments.length){if(mf(arguments[0],Lf)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Hg){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){var r=arguments[0],i=arguments[1];return new Yg(r,i,this)}},cd.prototype.getSRID=function(){return this._SRID},cd.prototype.createGeometryCollection=function(){if(0===arguments.length)return new Tg(null,this);if(1===arguments.length){var t=arguments[0];return new Tg(t,this)}},cd.prototype.createGeometry=function(t){var e=new Jg(this);return e.edit(t,{edit:function(){if(2===arguments.length){var t=arguments[0];return this._coordinateSequenceFactory.create(t)}}})},cd.prototype.getPrecisionModel=function(){return this._precisionModel},cd.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(mf(arguments[0],Lf)){var e=arguments[0];return new Hg(e,this)}}},cd.prototype.createMultiPolygon=function(){if(0===arguments.length)return new Wg(null,this);if(1===arguments.length){var t=arguments[0];return new Wg(t,this)}},cd.prototype.createMultiPoint=function(){var t=this;if(0===arguments.length)return new Vg(null,this);if(1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];return new Vg(e,this)}if(arguments[0]instanceof Array){var n=arguments[0];return this.createMultiPoint(null!==n?this.getCoordinateSequenceFactory().create(n):null)}if(mf(arguments[0],Lf)){var r=arguments[0];if(null===r)return this.createMultiPoint(new Array(0).fill(null));for(var i=new Array(r.size()).fill(null),o=0;o<r.size();o++){var s=t.getCoordinateSequenceFactory().create(1,r.getDimension());kg.copy(r,o,s,0,1),i[o]=t.createPoint(s)}return this.createMultiPoint(i)}}},cd.prototype.interfaces_=function(){return[ou]},cd.prototype.getClass=function(){return cd},cd.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.getDefaultCoordinateSequenceFactory=function(){return nd.instance()},cd.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},cd.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ld.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(cd,ld);var hd=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],pd=function(t){this.geometryFactory=t||new cd};pd.prototype.read=function(t){var e;e="string"==typeof t?JSON.parse(t):t;var n=e.type;if(!fd[n])throw new Error("Unknown GeoJSON type: "+e.type);return hd.indexOf(n)!==-1?fd[n].apply(this,[e.coordinates]):"GeometryCollection"===n?fd[n].apply(this,[e.geometries]):fd[n].apply(this,[e])},pd.prototype.write=function(t){var e=t.getGeometryType();if(!gd[e])throw new Error("Geometry is not supported");return gd[e].apply(this,[t])};var fd={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!fd[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=fd.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e=this,n={};if(t.features){n.features=[];for(var r=0;r<t.features.length;++r)n.features.push(e.read(t.features[r]))}return t.bbox&&(n.bbox=this.parse.bbox.apply(this,[t.bbox])),n},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new ff(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new ff(t[0],t[1]),new ff(t[2],t[1]),new ff(t[2],t[3]),new ff(t[0],t[3]),new ff(t[0],t[1])])},Point:function(t){var e=new ff(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=this,n=[],r=0;r<t.length;++r)n.push(fd.Point.apply(e,[t[r]]));return this.geometryFactory.createMultiPoint(n)},LineString:function(t){var e=fd.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=this,n=[],r=0;r<t.length;++r)n.push(fd.LineString.apply(e,[t[r]]));return this.geometryFactory.createMultiLineString(n)},Polygon:function(t){for(var e=this,n=fd.coordinates.apply(this,[t[0]]),r=this.geometryFactory.createLinearRing(n),i=[],o=1;o<t.length;++o){var s=t[o],a=fd.coordinates.apply(e,[s]),u=e.geometryFactory.createLinearRing(a);i.push(u)}return this.geometryFactory.createPolygon(r,i)},MultiPolygon:function(t){for(var e=this,n=[],r=0;r<t.length;++r){var i=t[r];n.push(fd.Polygon.apply(e,[i]))}return this.geometryFactory.createMultiPolygon(n)},GeometryCollection:function(t){for(var e=this,n=[],r=0;r<t.length;++r){var i=t[r];n.push(e.read(i))}return this.geometryFactory.createGeometryCollection(n)}},gd={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=gd.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=gd.Point.apply(e,[i]);n.push(o.coordinates)}return{type:"MultiPoint",coordinates:n}},LineString:function(t){for(var e=this,n=[],r=t.getCoordinates(),i=0;i<r.length;++i){var o=r[i];n.push(gd.coordinate.apply(e,[o]))}return{type:"LineString",coordinates:n}},MultiLineString:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=gd.LineString.apply(e,[i]);n.push(o.coordinates)}return{type:"MultiLineString",coordinates:n}},Polygon:function(t){var e=this,n=[],r=gd.LineString.apply(this,[t._shell]);n.push(r.coordinates);for(var i=0;i<t._holes.length;++i){var o=t._holes[i],s=gd.LineString.apply(e,[o]);n.push(s.coordinates)}return{type:"Polygon",coordinates:n}},MultiPolygon:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=gd.Polygon.apply(e,[i]);n.push(o.coordinates)}return{type:"MultiPolygon",coordinates:n}},GeometryCollection:function(t){for(var e=this,n=[],r=0;r<t._geometries.length;++r){var i=t._geometries[r],o=i.getGeometryType();n.push(gd[o].apply(e,[i]))}return{type:"GeometryCollection",geometries:n}}},dd=function(t){this.geometryFactory=t||new cd,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new pd(this.geometryFactory)};dd.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===od.FIXED&&this.reducePrecision(e),e},dd.prototype.reducePrecision=function(t){var e,n,r=this;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)r.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)r.reducePrecision(t.geometries[e])};var yd=function(){this.parser=new pd(this.geometryFactory)};yd.prototype.write=function(t){return this.parser.write(t)};var vd=function(){},_d={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};vd.prototype.interfaces_=function(){return[]},vd.prototype.getClass=function(){return vd},vd.opposite=function(t){return t===vd.LEFT?vd.RIGHT:t===vd.RIGHT?vd.LEFT:t},_d.ON.get=function(){return 0},_d.LEFT.get=function(){return 1},_d.RIGHT.get=function(){return 2},Object.defineProperties(vd,_d),wu.prototype=new Error,wu.prototype.name="EmptyStackException",bu.prototype=new pg,bu.prototype.add=function(t){return this.array_.push(t),!0},bu.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},bu.prototype.push=function(t){return this.array_.push(t),t},bu.prototype.pop=function(t){if(0===this.array_.length)throw new wu;return this.array_.pop()},bu.prototype.peek=function(){if(0===this.array_.length)throw new wu;return this.array_[this.array_.length-1]},bu.prototype.empty=function(){return 0===this.array_.length},bu.prototype.isEmpty=function(){return this.empty()},bu.prototype.search=function(t){return this.array_.indexOf(t)},bu.prototype.size=function(){return this.array_.length},bu.prototype.toArray=function(){for(var t=this,e=[],n=0,r=this.array_.length;n<r;n++)e.push(t.array_[n]);return e};var md=function(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null};md.prototype.getCoordinate=function(){return this._minCoord},md.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},md.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();Uf.isTrue(this._minIndex>0&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=Zf.computeOrientation(this._minCoord,n,e),i=!1;e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===Zf.COUNTERCLOCKWISE?i=!0:e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===Zf.CLOCKWISE&&(i=!0),i&&(this._minIndex=this._minIndex-1)},md.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(e<0||e+1>=r.length)return-1;if(r[e].y===r[e+1].y)return-1;var i=vd.LEFT;return r[e].y<r[e+1].y&&(i=vd.RIGHT),i},md.prototype.getEdge=function(){return this._orientedDe},md.prototype.checkForRightmostCoordinate=function(t){for(var e=this,n=t.getEdge().getCoordinates(),r=0;r<n.length-1;r++)(null===e._minCoord||n[r].x>e._minCoord.x)&&(e._minDe=t,e._minIndex=r,e._minCoord=n[r])},md.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode(),e=t.getEdges();this._minDe=e.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},md.prototype.findEdge=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();r.isForward()&&e.checkForRightmostCoordinate(r)}Uf.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe;var i=this.getRightmostSide(this._minDe,this._minIndex);i===vd.LEFT&&(this._orientedDe=this._minDe.getSym())},md.prototype.interfaces_=function(){return[]},md.prototype.getClass=function(){return md};var xd=function(t){function e(n,r){t.call(this,e.msgWithCoord(n,r)),this.pt=r?new ff(r):null,this.name="TopologyException"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCoordinate=function(){return this.pt},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},e}(jf),Ed=function(){this.array_=[]};Ed.prototype.addLast=function(t){this.array_.push(t)},Ed.prototype.removeFirst=function(){return this.array_.shift()},Ed.prototype.isEmpty=function(){return 0===this.array_.length};var wd=function(){this._finder=null,this._dirEdgeList=new fg,this._nodes=new fg,this._rightMostCoord=null,this._env=null,this._finder=new md};wd.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},wd.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},wd.prototype.computeNodeDepth=function(t){for(var e=this,n=null,r=t.getEdges().iterator();r.hasNext();){var i=r.next();if(i.isVisited()||i.getSym().isVisited()){n=i;break}}if(null===n)throw new xd("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(n);for(var o=t.getEdges().iterator();o.hasNext();){var s=o.next();s.setVisited(!0),e.copySymDepths(s)}},wd.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(vd.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},wd.prototype.create=function(t){this.addReachable(t),
this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},wd.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(vd.RIGHT)>=1&&e.getDepth(vd.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},wd.prototype.computeDepths=function(t){var e=this,n=new wg,r=new Ed,i=t.getNode();for(r.addLast(i),n.add(i),t.setVisited(!0);!r.isEmpty();){var o=r.removeFirst();n.add(o),e.computeNodeDepth(o);for(var s=o.getEdges().iterator();s.hasNext();){var a=s.next(),u=a.getSym();if(!u.isVisited()){var c=u.getNode();n.contains(c)||(r.addLast(c),n.add(c))}}}},wd.prototype.compareTo=function(t){var e=t;return this._rightMostCoord.x<e._rightMostCoord.x?-1:this._rightMostCoord.x>e._rightMostCoord.x?1:0},wd.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Df,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),i=0;i<r.length-1;i++)t.expandToInclude(r[i]);this._env=t}return this._env},wd.prototype.addReachable=function(t){var e=this,n=new bu;for(n.add(t);!n.empty();){var r=n.pop();e.add(r,n)}},wd.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(vd.LEFT,t.getDepth(vd.RIGHT)),e.setDepth(vd.RIGHT,t.getDepth(vd.LEFT))},wd.prototype.add=function(t,e){var n=this;t.setVisited(!0),this._nodes.add(t);for(var r=t.getEdges().iterator();r.hasNext();){var i=r.next();n._dirEdgeList.add(i);var o=i.getSym(),s=o.getNode();s.isVisited()||e.push(s)}},wd.prototype.getNodes=function(){return this._nodes},wd.prototype.getDirectedEdges=function(){return this._dirEdgeList},wd.prototype.interfaces_=function(){return[lf]},wd.prototype.getClass=function(){return wd};var bd=function Tm(){var t=this;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var e=arguments[0];this.init(e.length)}else if(Number.isInteger(arguments[0])){var n=arguments[0];this.init(1),this.location[vd.ON]=n}else if(arguments[0]instanceof Tm){var r=arguments[0];if(this.init(r.location.length),null!==r)for(var i=0;i<this.location.length;i++)t.location[i]=r.location[i]}}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];this.init(3),this.location[vd.ON]=o,this.location[vd.LEFT]=s,this.location[vd.RIGHT]=a}};bd.prototype.setAllLocations=function(t){for(var e=this,n=0;n<this.location.length;n++)e.location[n]=t},bd.prototype.isNull=function(){for(var t=this,e=0;e<this.location.length;e++)if(t.location[e]!==vf.NONE)return!1;return!0},bd.prototype.setAllLocationsIfNull=function(t){for(var e=this,n=0;n<this.location.length;n++)e.location[n]===vf.NONE&&(e.location[n]=t)},bd.prototype.isLine=function(){return 1===this.location.length},bd.prototype.merge=function(t){var e=this;if(t.location.length>this.location.length){var n=new Array(3).fill(null);n[vd.ON]=this.location[vd.ON],n[vd.LEFT]=vf.NONE,n[vd.RIGHT]=vf.NONE,this.location=n}for(var r=0;r<this.location.length;r++)e.location[r]===vf.NONE&&r<t.location.length&&(e.location[r]=t.location[r])},bd.prototype.getLocations=function(){return this.location},bd.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[vd.LEFT];this.location[vd.LEFT]=this.location[vd.RIGHT],this.location[vd.RIGHT]=t},bd.prototype.toString=function(){var t=new wf;return this.location.length>1&&t.append(vf.toLocationSymbol(this.location[vd.LEFT])),t.append(vf.toLocationSymbol(this.location[vd.ON])),this.location.length>1&&t.append(vf.toLocationSymbol(this.location[vd.RIGHT])),t.toString()},bd.prototype.setLocations=function(t,e,n){this.location[vd.ON]=t,this.location[vd.LEFT]=e,this.location[vd.RIGHT]=n},bd.prototype.get=function(t){return t<this.location.length?this.location[t]:vf.NONE},bd.prototype.isArea=function(){return this.location.length>1},bd.prototype.isAnyNull=function(){for(var t=this,e=0;e<this.location.length;e++)if(t.location[e]===vf.NONE)return!0;return!1},bd.prototype.setLocation=function(){if(1===arguments.length){var t=arguments[0];this.setLocation(vd.ON,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.location[e]=n}},bd.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(vf.NONE)},bd.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},bd.prototype.allPositionsEqual=function(t){for(var e=this,n=0;n<this.location.length;n++)if(e.location[n]!==t)return!1;return!0},bd.prototype.interfaces_=function(){return[]},bd.prototype.getClass=function(){return bd};var Id=function Am(){if(this.elt=new Array(2).fill(null),1===arguments.length){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new bd(t),this.elt[1]=new bd(t)}else if(arguments[0]instanceof Am){var e=arguments[0];this.elt[0]=new bd(e.elt[0]),this.elt[1]=new bd(e.elt[1])}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];this.elt[0]=new bd(vf.NONE),this.elt[1]=new bd(vf.NONE),this.elt[n].setLocation(r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this.elt[0]=new bd(i,o,s),this.elt[1]=new bd(i,o,s)}else if(4===arguments.length){var a=arguments[0],u=arguments[1],c=arguments[2],l=arguments[3];this.elt[0]=new bd(vf.NONE,vf.NONE,vf.NONE),this.elt[1]=new bd(vf.NONE,vf.NONE,vf.NONE),this.elt[a].setLocations(u,c,l)}};Id.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},Id.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},Id.prototype.isNull=function(t){return this.elt[t].isNull()},Id.prototype.setAllLocationsIfNull=function(){if(1===arguments.length){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},Id.prototype.isLine=function(t){return this.elt[t].isLine()},Id.prototype.merge=function(t){for(var e=this,n=0;n<2;n++)null===e.elt[n]&&null!==t.elt[n]?e.elt[n]=new bd(t.elt[n]):e.elt[n].merge(t.elt[n])},Id.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},Id.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(vd.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},Id.prototype.toString=function(){var t=new wf;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},Id.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},Id.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},Id.prototype.setLocation=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(vd.ON,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this.elt[n].setLocation(r,i)}},Id.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},Id.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},Id.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new bd(this.elt[t].location[0]))},Id.prototype.interfaces_=function(){return[]},Id.prototype.getClass=function(){return Id},Id.toLineLabel=function(t){for(var e=new Id(vf.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};var Nd=function(){this._startDe=null,this._maxNodeDegree=-1,this._edges=new fg,this._pts=new fg,this._label=new Id(vf.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new fg,this._geometryFactory=null;var t=arguments[0],e=arguments[1];this._geometryFactory=e,this.computePoints(t),this.computeRing()};Nd.prototype.computeRing=function(){var t=this;if(null!==this._ring)return null;for(var e=new Array(this._pts.size()).fill(null),n=0;n<this._pts.size();n++)e[n]=t._pts.get(n);this._ring=this._geometryFactory.createLinearRing(e),this._isHole=Zf.isCCW(this._ring.getCoordinates())},Nd.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},Nd.prototype.computePoints=function(t){var e=this;this._startDe=t;var n=t,r=!0;do{if(null===n)throw new xd("Found null DirectedEdge");if(n.getEdgeRing()===e)throw new xd("Directed Edge visited twice during ring-building at "+n.getCoordinate());e._edges.add(n);var i=n.getLabel();Uf.isTrue(i.isArea()),e.mergeLabel(i),e.addPoints(n.getEdge(),n.isForward(),r),r=!1,e.setEdgeRing(n,e),n=e.getNext(n)}while(n!==this._startDe)},Nd.prototype.getLinearRing=function(){return this._ring},Nd.prototype.getCoordinate=function(t){return this._pts.get(t)},Nd.prototype.computeMaxNodeDegree=function(){var t=this;this._maxNodeDegree=0;var e=this._startDe;do{var n=e.getNode(),r=n.getEdges().getOutgoingDegree(t);r>t._maxNodeDegree&&(t._maxNodeDegree=r),e=t.getNext(e)}while(e!==this._startDe);this._maxNodeDegree*=2},Nd.prototype.addPoints=function(t,e,n){var r=this,i=t.getCoordinates();if(e){var o=1;n&&(o=0);for(var s=o;s<i.length;s++)r._pts.add(i[s])}else{var a=i.length-2;n&&(a=i.length-1);for(var u=a;u>=0;u--)r._pts.add(i[u])}},Nd.prototype.isHole=function(){return this._isHole},Nd.prototype.setInResult=function(){var t=this._startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this._startDe)},Nd.prototype.containsPoint=function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t))return!1;if(!Zf.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this._holes.iterator();r.hasNext();){var i=r.next();if(i.containsPoint(t))return!1}return!0},Nd.prototype.addHole=function(t){this._holes.add(t)},Nd.prototype.isShell=function(){return null===this._shell},Nd.prototype.getLabel=function(){return this._label},Nd.prototype.getEdges=function(){return this._edges},Nd.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},Nd.prototype.getShell=function(){return this._shell},Nd.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=e.getLocation(n,vd.RIGHT);if(r===vf.NONE)return null;if(this._label.getLocation(n)===vf.NONE)return this._label.setLocation(n,r),null}},Nd.prototype.setShell=function(t){this._shell=t,null!==t&&t.addHole(this)},Nd.prototype.toPolygon=function(t){for(var e=this,n=new Array(this._holes.size()).fill(null),r=0;r<this._holes.size();r++)n[r]=e._holes.get(r).getLinearRing();var i=t.createPolygon(this.getLinearRing(),n);return i},Nd.prototype.interfaces_=function(){return[]},Nd.prototype.getClass=function(){return Nd};var Cd=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},e.prototype.getNext=function(t){return t.getNextMin()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nd),Sd=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildMinimalRings=function(){var t=this,e=new fg,n=this._startDe;do{if(null===n.getMinEdgeRing()){var r=new Cd(n,t._geometryFactory);e.add(r)}n=n.getNext()}while(n!==this._startDe);return e},e.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},e.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){var t=this,e=this._startDe;do{var n=e.getNode();n.getEdges().linkMinimalDirectedEdges(t),e=e.getNext()}while(e!==this._startDe)},e.prototype.getNext=function(t){return t.getNext()},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Nd),Md=function(){if(this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._label=t}};Md.prototype.setVisited=function(t){this._isVisited=t},Md.prototype.setInResult=function(t){this._isInResult=t},Md.prototype.isCovered=function(){return this._isCovered},Md.prototype.isCoveredSet=function(){return this._isCoveredSet},Md.prototype.setLabel=function(t){this._label=t},Md.prototype.getLabel=function(){return this._label},Md.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},Md.prototype.updateIM=function(t){Uf.isTrue(this._label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},Md.prototype.isInResult=function(){return this._isInResult},Md.prototype.isVisited=function(){return this._isVisited},Md.prototype.interfaces_=function(){return[]},Md.prototype.getClass=function(){return Md};var Ld=function(t){function e(){t.call(this),this._coord=null,this._edges=null;var e=arguments[0],n=arguments[1];this._coord=e,this._edges=n,this._label=new Id(0,vf.NONE)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},e.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},e.prototype.getCoordinate=function(){return this._coord},e.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},e.prototype.computeIM=function(t){},e.prototype.computeMergedLocation=function(t,e){var n=vf.NONE;if(n=this._label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==vf.BOUNDARY&&(n=r)}return n},e.prototype.setLabel=function(){if(2!==arguments.length)return t.prototype.setLabel.apply(this,arguments);var e=arguments[0],n=arguments[1];null===this._label?this._label=new Id(e,n):this._label.setLocation(e,n)},e.prototype.getEdges=function(){return this._edges},e.prototype.mergeLabel=function(){var t=this;if(arguments[0]instanceof e){var n=arguments[0];this.mergeLabel(n._label)}else if(arguments[0]instanceof Id)for(var r=arguments[0],i=0;i<2;i++){var o=t.computeMergedLocation(r,i),s=t._label.getLocation(i);s===vf.NONE&&t._label.setLocation(i,o)}},e.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},e.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=vf.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case vf.BOUNDARY:n=vf.INTERIOR;break;case vf.INTERIOR:n=vf.BOUNDARY;break;default:n=vf.BOUNDARY}this._label.setLocation(t,n)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Md),Pd=function(){this.nodeMap=new gu,this.nodeFact=null;var t=arguments[0];this.nodeFact=t};Pd.prototype.find=function(t){return this.nodeMap.get(t)},Pd.prototype.addNode=function(){if(arguments[0]instanceof ff){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof Ld){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},Pd.prototype.print=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},Pd.prototype.iterator=function(){return this.nodeMap.values().iterator()},Pd.prototype.values=function(){return this.nodeMap.values()},Pd.prototype.getBoundaryNodes=function(t){for(var e=new fg,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===vf.BOUNDARY&&e.add(r)}return e},Pd.prototype.add=function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},Pd.prototype.interfaces_=function(){return[]},Pd.prototype.getClass=function(){return Pd};var Od=function(){},Rd={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};Od.prototype.interfaces_=function(){return[]},Od.prototype.getClass=function(){return Od},Od.isNorthern=function(t){return t===Od.NE||t===Od.NW},Od.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return 2===n},Od.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(2===n)return-1;var r=t<e?t:e,i=t>e?t:e;return 0===r&&3===i?3:r},Od.isInHalfPlane=function(t,e){return e===Od.SE?t===Od.SE||t===Od.SW:t===e||t===e+1},Od.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new af("Cannot compute the quadrant for point ( "+t+", "+e+" )");return t>=0?e>=0?Od.NE:Od.SE:e>=0?Od.NW:Od.SW}if(arguments[0]instanceof ff&&arguments[1]instanceof ff){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new af("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?Od.NE:Od.SE:r.y>=n.y?Od.NW:Od.SW}},Rd.NE.get=function(){return 0},Rd.NW.get=function(){return 1},Rd.SW.get=function(){return 2},Rd.SE.get=function(){return 3},Object.defineProperties(Od,Rd);var Td=function(){if(this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length){var t=arguments[0];this._edge=t}else if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=null;this._edge=e,this.init(n,r),this._label=i}else if(4===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=arguments[3];this._edge=o,this.init(s,a),this._label=u}};Td.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:Zf.computeOrientation(t._p0,t._p1,this._p1)},Td.prototype.getDy=function(){return this._dy},Td.prototype.getCoordinate=function(){return this._p0},Td.prototype.setNode=function(t){this._node=t},Td.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},Td.prototype.compareTo=function(t){var e=t;return this.compareDirection(e)},Td.prototype.getDirectedCoordinate=function(){return this._p1},Td.prototype.getDx=function(){return this._dx},Td.prototype.getLabel=function(){return this._label},Td.prototype.getEdge=function(){return this._edge},Td.prototype.getQuadrant=function(){return this._quadrant},Td.prototype.getNode=function(){return this._node},Td.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);return"  "+r+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},Td.prototype.computeLabel=function(t){},Td.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=Od.quadrant(this._dx,this._dy),Uf.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},Td.prototype.interfaces_=function(){return[lf]},Td.prototype.getClass=function(){return Td};var Ad=function(t){function e(){var e=arguments[0],n=arguments[1];if(t.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],this._isForward=n,n)this.init(e.getCoordinate(0),e.getCoordinate(1));else{var r=e.getNumPoints()-1;this.init(e.getCoordinate(r),e.getCoordinate(r-1))}this.computeDirectedLabel()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getNextMin=function(){return this._nextMin},e.prototype.getDepth=function(t){return this._depth[t]},e.prototype.setVisited=function(t){this._isVisited=t},e.prototype.computeDirectedLabel=function(){this._label=new Id(this._edge.getLabel()),this._isForward||this._label.flip()},e.prototype.getNext=function(){return this._next},e.prototype.setDepth=function(t,e){if(this._depth[t]!==-999&&this._depth[t]!==e)throw new xd("assigned depths do not match",this.getCoordinate());this._depth[t]=e},e.prototype.isInteriorAreaEdge=function n(){for(var t=this,n=!0,e=0;e<2;e++)t._label.isArea(e)&&t._label.getLocation(e,vd.LEFT)===vf.INTERIOR&&t._label.getLocation(e,vd.RIGHT)===vf.INTERIOR||(n=!1);return n},e.prototype.setNextMin=function(t){this._nextMin=t},e.prototype.print=function(e){t.prototype.print.call(this,e),e.print(" "+this._depth[vd.LEFT]+"/"+this._depth[vd.RIGHT]),e.print(" ("+this.getDepthDelta()+")"),this._isInResult&&e.print(" inResult")},e.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},e.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,vf.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,vf.EXTERIOR);return t&&e&&n},e.prototype.setEdgeRing=function(t){this._edgeRing=t},e.prototype.getMinEdgeRing=function(){return this._minEdgeRing},e.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},e.prototype.setInResult=function(t){this._isInResult=t},e.prototype.getSym=function(){return this._sym},e.prototype.isForward=function(){return this._isForward},e.prototype.getEdge=function(){return this._edge},e.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},e.prototype.setSym=function(t){this._sym=t},e.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},e.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===vd.LEFT&&(r=-1);var i=vd.opposite(t),o=n*r,s=e+o;this.setDepth(t,e),this.setDepth(i,s)},e.prototype.getEdgeRing=function(){return this._edgeRing},e.prototype.isInResult=function(){return this._isInResult},e.prototype.setNext=function(t){this._next=t},e.prototype.isVisited=function(){return this._isVisited},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.depthFactor=function(t,e){return t===vf.EXTERIOR&&e===vf.INTERIOR?1:t===vf.INTERIOR&&e===vf.EXTERIOR?-1:0},e}(Td),Dd=function(){};Dd.prototype.createNode=function(t){return new Ld(t,null)},Dd.prototype.interfaces_=function(){return[]},Dd.prototype.getClass=function(){return Dd};var Fd=function(){if(this._edges=new fg,this._nodes=null,this._edgeEndList=new fg,0===arguments.length)this._nodes=new Pd(new Dd);else if(1===arguments.length){var t=arguments[0];this._nodes=new Pd(t)}};Fd.prototype.printEdges=function(t){var e=this;t.println("Edges:");for(var n=0;n<this._edges.size();n++){t.println("edge "+n+":");var r=e._edges.get(n);r.print(t),r.eiList.print(t)}},Fd.prototype.find=function(t){return this._nodes.find(t)},Fd.prototype.addNode=function(){if(arguments[0]instanceof Ld){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof ff){var e=arguments[0];return this._nodes.addNode(e)}},Fd.prototype.getNodeIterator=function(){return this._nodes.iterator()},Fd.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},Fd.prototype.debugPrintln=function(t){Tf.out.println(t)},Fd.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===vf.BOUNDARY},Fd.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},Fd.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&(Zf.computeOrientation(t,e,r)===Zf.COLLINEAR&&Od.quadrant(t,e)===Od.quadrant(n,r))},Fd.prototype.getEdgeEnds=function(){return this._edgeEndList},Fd.prototype.debugPrint=function(t){Tf.out.print(t)},Fd.prototype.getEdgeIterator=function(){return this._edges.iterator()},Fd.prototype.findEdgeInSameDirection=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(n.matchInSameDirection(t,e,o[0],o[1]))return i;if(n.matchInSameDirection(t,e,o[o.length-1],o[o.length-2]))return i}return null},Fd.prototype.insertEdge=function(t){this._edges.add(t)},Fd.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Fd.prototype.addEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e._edges.add(r);var i=new Ad(r,(!0)),o=new Ad(r,(!1));i.setSym(o),o.setSym(i),e.add(i),e.add(o)}},Fd.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Fd.prototype.getNodes=function(){return this._nodes.values()},Fd.prototype.findEdge=function(t,e){for(var n=this,r=0;r<this._edges.size();r++){var i=n._edges.get(r),o=i.getCoordinates();if(t.equals(o[0])&&e.equals(o[1]))return i}return null},Fd.prototype.interfaces_=function(){return[]},Fd.prototype.getClass=function(){return Fd},Fd.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}};var qd=function(){this._geometryFactory=null,this._shellList=new fg;var t=arguments[0];this._geometryFactory=t};qd.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},qd.prototype.computePolygons=function(t){for(var e=this,n=new fg,r=t.iterator();r.hasNext();){var i=r.next(),o=i.toPolygon(e._geometryFactory);n.add(o)}return n},qd.prototype.placeFreeHoles=function(t,e){for(var n=this,r=e.iterator();r.hasNext();){var i=r.next();if(null===i.getShell()){var o=n.findEdgeRingContaining(i,t);if(null===o)throw new xd("unable to assign hole to a shell",i.getCoordinate(0));i.setShell(o)}}},qd.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=this,i=new fg,o=t.iterator();o.hasNext();){var s=o.next();if(s.getMaxNodeDegree()>2){s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings(),u=r.findShell(a);null!==u?(r.placePolygonHoles(u,a),e.add(u)):n.addAll(a)}else i.add(s)}return i},qd.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},qd.prototype.buildMaximalEdgeRings=function(t){for(var e=this,n=new fg,r=t.iterator();r.hasNext();){var i=r.next();if(i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()){var o=new Sd(i,e._geometryFactory);n.add(o),o.setInResult()}}return n},qd.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},qd.prototype.getPolygons=function(){var t=this.computePolygons(this._shellList);return t},qd.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,s=null,a=e.iterator();a.hasNext();){var u=a.next(),c=u.getLinearRing(),l=c.getEnvelopeInternal();null!==o&&(s=o.getLinearRing().getEnvelopeInternal());var h=!1;l.contains(r)&&Zf.isPointInRing(i,c.getCoordinates())&&(h=!0),h&&(null===o||s.contains(l))&&(o=u)}return o},qd.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return Uf.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},qd.prototype.add=function(){if(1===arguments.length){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(2===arguments.length){var e=arguments[0],n=arguments[1];Fd.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),i=new fg,o=this.buildMinimalEdgeRings(r,this._shellList,i);this.sortShellsAndHoles(o,this._shellList,i),this.placeFreeHoles(this._shellList,i)}},qd.prototype.interfaces_=function(){return[]},qd.prototype.getClass=function(){return qd};var Gd=function(){};Gd.prototype.getBounds=function(){},Gd.prototype.interfaces_=function(){return[]},Gd.prototype.getClass=function(){return Gd};var Bd=function(){this._bounds=null,this._item=null;var t=arguments[0],e=arguments[1];this._bounds=t,this._item=e};Bd.prototype.getItem=function(){return this._item},Bd.prototype.getBounds=function(){return this._bounds},Bd.prototype.interfaces_=function(){return[Gd,ou]},Bd.prototype.getClass=function(){return Bd};var kd=function(){this._size=null,this._items=null,this._size=0,this._items=new fg,this._items.add(null)};kd.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),this._size-=1,this.reorder(1),t},kd.prototype.size=function(){return this._size},kd.prototype.reorder=function(t){for(var e=this,n=null,r=this._items.get(t);2*t<=this._size&&(n=2*t,n!==e._size&&e._items.get(n+1).compareTo(e._items.get(n))<0&&n++,e._items.get(n).compareTo(r)<0);t=n)e._items.set(t,e._items.get(n));this._items.set(t,r)},kd.prototype.clear=function(){this._size=0,this._items.clear()},kd.prototype.isEmpty=function(){return 0===this._size},kd.prototype.add=function(t){var e=this;this._items.add(null),this._size+=1;var n=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(n/2)))<0;n/=2)e._items.set(n,e._items.get(Math.trunc(n/2)));this._items.set(n,t)},kd.prototype.interfaces_=function(){return[]},kd.prototype.getClass=function(){return kd};var zd=function(){};zd.prototype.visitItem=function(t){},zd.prototype.interfaces_=function(){return[]},zd.prototype.getClass=function(){return zd};var jd=function(){};jd.prototype.insert=function(t,e){},jd.prototype.remove=function(t,e){},jd.prototype.query=function(){},jd.prototype.interfaces_=function(){return[]},jd.prototype.getClass=function(){return jd};var Xd=function(){if(this._childBoundables=new fg,this._bounds=null,this._level=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this._level=t}},Ud={serialVersionUID:{configurable:!0}};Xd.prototype.getLevel=function(){return this._level},Xd.prototype.size=function(){return this._childBoundables.size()},Xd.prototype.getChildBoundables=function(){return this._childBoundables},Xd.prototype.addChildBoundable=function(t){Uf.isTrue(null===this._bounds),this._childBoundables.add(t)},Xd.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Xd.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Xd.prototype.interfaces_=function(){return[Gd,ou]},Xd.prototype.getClass=function(){return Xd},Ud.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Xd,Ud);var Yd=function(){};Yd.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Yd.min=function(t){return Yd.sort(t),t.get(0)},Yd.sort=function(t,e){var n=t.toArray();e?Mg.sort(n,e):Mg.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Yd.singletonList=function(t){var e=new fg;return e.add(t),e};var Vd=function(){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundable1=t,this._boundable2=e,this._itemDistance=n,this._distance=this.distance()};Vd.prototype.expandToQueue=function(t,e){var n=Vd.isComposite(this._boundable1),r=Vd.isComposite(this._boundable2);if(n&&r)return Vd.area(this._boundable1)>Vd.area(this._boundable2)?(this.expand(this._boundable1,this._boundable2,t,e),null):(this.expand(this._boundable2,this._boundable1,t,e),null);if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new af("neither boundable is composite")},Vd.prototype.isLeaves=function(){return!(Vd.isComposite(this._boundable1)||Vd.isComposite(this._boundable2))},Vd.prototype.compareTo=function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},Vd.prototype.expand=function(t,e,n,r){for(var i=this,o=t.getChildBoundables(),s=o.iterator();s.hasNext();){var a=s.next(),u=new Vd(a,e,i._itemDistance);u.getDistance()<r&&n.add(u)}},Vd.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Vd.prototype.getDistance=function(){return this._distance},Vd.prototype.distance=function(){
return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Vd.prototype.interfaces_=function(){return[lf]},Vd.prototype.getClass=function(){return Vd},Vd.area=function(t){return t.getBounds().getArea()},Vd.isComposite=function(t){return t instanceof Xd};var Hd=function Dm(){if(this._root=null,this._built=!1,this._itemBoundables=new fg,this._nodeCapacity=null,0===arguments.length){var t=Dm.DEFAULT_NODE_CAPACITY;this._nodeCapacity=t}else if(1===arguments.length){var e=arguments[0];Uf.isTrue(e>1,"Node capacity must be greater than 1"),this._nodeCapacity=e}},Wd={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};Hd.prototype.getNodeCapacity=function(){return this._nodeCapacity},Hd.prototype.lastNode=function(t){return t.get(t.size()-1)},Hd.prototype.size=function Fm(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var e=arguments[0],Fm=0,n=e.getChildBoundables().iterator();n.hasNext();){var r=n.next();r instanceof Xd?Fm+=t.size(r):r instanceof Bd&&(Fm+=1)}return Fm}},Hd.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Bd&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},Hd.prototype.itemsTree=function(){var t=this;if(0===arguments.length){this.build();var e=this.itemsTree(this._root);return null===e?new fg:e}if(1===arguments.length){for(var n=arguments[0],r=new fg,i=n.getChildBoundables().iterator();i.hasNext();){var o=i.next();if(o instanceof Xd){var s=t.itemsTree(o);null!==s&&r.add(s)}else o instanceof Bd?r.add(o.getItem()):Uf.shouldNeverReachHere()}return r.size()<=0?null:r}},Hd.prototype.insert=function(t,e){Uf.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Bd(t,e))},Hd.prototype.boundablesAtLevel=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=new fg;return this.boundablesAtLevel(e,this._root,n),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(Uf.isTrue(r>-2),i.getLevel()===r)return o.add(i),null;for(var s=i.getChildBoundables().iterator();s.hasNext();){var a=s.next();a instanceof Xd?t.boundablesAtLevel(r,a,o):(Uf.isTrue(a instanceof Bd),r===-1&&o.add(a))}return null}},Hd.prototype.query=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.build();var n=new fg;return this.isEmpty()?n:(this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.query(e,this._root,n),n)}if(2===arguments.length){var r=arguments[0],i=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),r)&&this.query(r,this._root,i)}else if(3===arguments.length)if(mf(arguments[2],zd)&&arguments[0]instanceof Object&&arguments[1]instanceof Xd)for(var o=arguments[0],s=arguments[1],a=arguments[2],u=s.getChildBoundables(),c=0;c<u.size();c++){var l=u.get(c);t.getIntersectsOp().intersects(l.getBounds(),o)&&(l instanceof Xd?t.query(o,l,a):l instanceof Bd?a.visitItem(l.getItem()):Uf.shouldNeverReachHere())}else if(mf(arguments[2],pg)&&arguments[0]instanceof Object&&arguments[1]instanceof Xd)for(var h=arguments[0],p=arguments[1],f=arguments[2],g=p.getChildBoundables(),d=0;d<g.size();d++){var y=g.get(d);t.getIntersectsOp().intersects(y.getBounds(),h)&&(y instanceof Xd?t.query(h,y,f):y instanceof Bd?f.add(y.getItem()):Uf.shouldNeverReachHere())}},Hd.prototype.build=function(){return this._built?null:(this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,void(this._built=!0))},Hd.prototype.getRoot=function(){return this.build(),this._root},Hd.prototype.remove=function(){var t=this;if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),e)&&this.remove(e,this._root,n)}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=this.removeItem(i,o);if(s)return!0;for(var a=null,u=i.getChildBoundables().iterator();u.hasNext();){var c=u.next();if(t.getIntersectsOp().intersects(c.getBounds(),r)&&c instanceof Xd&&(s=t.remove(r,c,o))){a=c;break}}return null!==a&&a.getChildBoundables().isEmpty()&&i.getChildBoundables().remove(a),s}},Hd.prototype.createHigherLevels=function(t,e){Uf.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},Hd.prototype.depth=function(){var t=this;if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var i=r.next();if(i instanceof Xd){var o=t.depth(i);o>n&&(n=o)}}return n+1}},Hd.prototype.createParentBoundables=function(t,e){var n=this;Uf.isTrue(!t.isEmpty());var r=new fg;r.add(this.createNode(e));var i=new fg(t);Yd.sort(i,this.getComparator());for(var o=i.iterator();o.hasNext();){var s=o.next();n.lastNode(r).getChildBoundables().size()===n.getNodeCapacity()&&r.add(n.createNode(e)),n.lastNode(r).addChildBoundable(s)}return r},Hd.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},Hd.prototype.interfaces_=function(){return[ou]},Hd.prototype.getClass=function(){return Hd},Hd.compareDoubles=function(t,e){return t>e?1:t<e?-1:0},Wd.IntersectsOp.get=function(){return Jd},Wd.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},Wd.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(Hd,Wd);var Jd=function(){},Zd=function(){};Zd.prototype.distance=function(t,e){},Zd.prototype.interfaces_=function(){return[]},Zd.prototype.getClass=function(){return Zd};var Kd=function(t){function e(n){n=n||e.DEFAULT_NODE_CAPACITY,t.call(this,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return e.prototype.createParentBoundablesFromVerticalSlices=function(t,e){var n=this;Uf.isTrue(t.length>0);for(var r=new fg,i=0;i<t.length;i++)r.addAll(n.createParentBoundablesFromVerticalSlice(t[i],e));return r},e.prototype.createNode=function(t){return new Qd(t)},e.prototype.size=function(){return 0===arguments.length?t.prototype.size.call(this):t.prototype.size.apply(this,arguments)},e.prototype.insert=function(){if(2!==arguments.length)return t.prototype.insert.apply(this,arguments);var e=arguments[0],n=arguments[1];return e.isNull()?null:void t.prototype.insert.call(this,e,n)},e.prototype.getIntersectsOp=function(){return e.intersectsOp},e.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new fg;for(var s=0;i.hasNext()&&s<n;){var a=i.next();r[o].add(a),s++}}return r},e.prototype.query=function(){if(1===arguments.length){var e=arguments[0];return t.prototype.query.call(this,e)}if(2===arguments.length){var n=arguments[0],r=arguments[1];t.prototype.query.call(this,n,r)}else if(3===arguments.length)if(mf(arguments[2],zd)&&arguments[0]instanceof Object&&arguments[1]instanceof Xd){var i=arguments[0],o=arguments[1],s=arguments[2];t.prototype.query.call(this,i,o,s)}else if(mf(arguments[2],pg)&&arguments[0]instanceof Object&&arguments[1]instanceof Xd){var a=arguments[0],u=arguments[1],c=arguments[2];t.prototype.query.call(this,a,u,c)}},e.prototype.getComparator=function(){return e.yComparator},e.prototype.createParentBoundablesFromVerticalSlice=function(e,n){return t.prototype.createParentBoundables.call(this,e,n)},e.prototype.remove=function(){if(2===arguments.length){var e=arguments[0],n=arguments[1];return t.prototype.remove.call(this,e,n)}return t.prototype.remove.apply(this,arguments)},e.prototype.depth=function(){return 0===arguments.length?t.prototype.depth.call(this):t.prototype.depth.apply(this,arguments)},e.prototype.createParentBoundables=function(t,n){Uf.isTrue(!t.isEmpty());var r=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),i=new fg(t);Yd.sort(i,e.xComparator);var o=this.verticalSlices(i,Math.trunc(Math.ceil(Math.sqrt(r))));return this.createParentBoundablesFromVerticalSlices(o,n)},e.prototype.nearestNeighbour=function(){if(1===arguments.length){if(mf(arguments[0],Zd)){var t=arguments[0],n=new Vd(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(n)}if(arguments[0]instanceof Vd){var r=arguments[0];return this.nearestNeighbour(r,uf.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof e&&mf(arguments[1],Zd)){var i=arguments[0],o=arguments[1],s=new Vd(this.getRoot(),i.getRoot(),o);return this.nearestNeighbour(s)}if(arguments[0]instanceof Vd&&"number"==typeof arguments[1]){var a=arguments[0],u=arguments[1],c=u,l=null,h=new kd;for(h.add(a);!h.isEmpty()&&c>0;){var p=h.poll(),f=p.getDistance();if(f>=c)break;p.isLeaves()?(c=f,l=p):p.expandToQueue(h,c)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var g=arguments[0],d=arguments[1],y=arguments[2],v=new Bd(g,d),_=new Vd(this.getRoot(),v,y);return this.nearestNeighbour(_)[0]}},e.prototype.interfaces_=function(){return[jd,ou]},e.prototype.getClass=function(){return e},e.centreX=function(t){return e.avg(t.getMinX(),t.getMaxX())},e.avg=function(t,e){return(t+e)/2},e.centreY=function(t){return e.avg(t.getMinY(),t.getMaxY())},n.STRtreeNode.get=function(){return Qd},n.serialVersionUID.get=function(){return 0x39920f7d5f261e0},n.xComparator.get=function(){return{interfaces_:function(){return[pf]},compare:function(n,r){return t.compareDoubles(e.centreX(n.getBounds()),e.centreX(r.getBounds()))}}},n.yComparator.get=function(){return{interfaces_:function(){return[pf]},compare:function(n,r){return t.compareDoubles(e.centreY(n.getBounds()),e.centreY(r.getBounds()))}}},n.intersectsOp.get=function(){return{interfaces_:function(){return[t.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},n.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(e,n),e}(Hd),Qd=function(t){function e(){var e=arguments[0];t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Df(n.getBounds()):t.expandToInclude(n.getBounds())}return t},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Xd),$d=function(){};$d.prototype.interfaces_=function(){return[]},$d.prototype.getClass=function(){return $d},$d.relativeSign=function(t,e){return t<e?-1:t>e?1:0},$d.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=$d.relativeSign(e.x,n.x),i=$d.relativeSign(e.y,n.y);switch(t){case 0:return $d.compareValue(r,i);case 1:return $d.compareValue(i,r);case 2:return $d.compareValue(i,-r);case 3:return $d.compareValue(-r,i);case 4:return $d.compareValue(-r,-i);case 5:return $d.compareValue(-i,-r);case 6:return $d.compareValue(-i,r);case 7:return $d.compareValue(r,-i)}return Uf.shouldNeverReachHere("invalid octant value"),0},$d.compareValue=function(t,e){return t<0?-1:t>0?1:e<0?-1:e>0?1:0};var ty=function(){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._segString=t,this.coord=new ff(e),this.segmentIndex=n,this._segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))};ty.prototype.getCoordinate=function(){return this.coord},ty.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},ty.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:$d.compare(this._segmentOctant,this.coord,e.coord)},ty.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},ty.prototype.isInterior=function(){return this._isInterior},ty.prototype.interfaces_=function(){return[lf]},ty.prototype.getClass=function(){return ty};var ey=function(){this._nodeMap=new gu,this._edge=null;var t=arguments[0];this._edge=t};ey.prototype.getSplitCoordinates=function(){var t=this,e=new dg;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();t.addEdgeCoordinates(r,i,e),r=i}return e.toCoordinateArray()},ey.prototype.addCollapsedNodes=function(){var t=this,e=new fg;this.findCollapsesFromInsertedNodes(e),this.findCollapsesFromExistingVertices(e);for(var n=e.iterator();n.hasNext();){var r=n.next().intValue();t.add(t._edge.getCoordinate(r),r)}},ey.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},ey.prototype.findCollapsesFromExistingVertices=function(t){for(var e=this,n=0;n<this._edge.size()-2;n++){var r=e._edge.getCoordinate(n),i=e._edge.getCoordinate(n+2);r.equals2D(i)&&t.add(new bf(n+1))}},ey.prototype.addEdgeCoordinates=function(t,e,n){var r=this,i=this._edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(i);n.add(new ff(t.coord),!1);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)n.add(r._edge.getCoordinate(s));o&&n.add(new ff(e.coord))},ey.prototype.iterator=function(){return this._nodeMap.values().iterator()},ey.prototype.addSplitEdges=function(t){var e=this;this.addEndpoints(),this.addCollapsedNodes();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=e.createSplitEdge(r,i);t.add(o),r=i}},ey.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},ey.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=this,n=new Array(1).fill(null),r=this.iterator(),i=r.next();r.hasNext();){var o=r.next(),s=e.findCollapseIndex(i,o,n);s&&t.add(new bf(n[0])),i=o}},ey.prototype.getEdge=function(){return this._edge},ey.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},ey.prototype.createSplitEdge=function(t,e){var n=this,r=e.segmentIndex-t.segmentIndex+2,i=this._edge.getCoordinate(e.segmentIndex),o=e.isInterior()||!e.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new ff(t.coord);for(var u=t.segmentIndex+1;u<=e.segmentIndex;u++)s[a++]=n._edge.getCoordinate(u);return o&&(s[a]=new ff(e.coord)),new oy(s,this._edge.getData())},ey.prototype.add=function(t,e){var n=new ty(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(Uf.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},ey.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0),r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new jf("bad split edge start point at "+r);var i=t.get(t.size()-1),o=i.getCoordinates(),s=o[o.length-1];if(!s.equals2D(e[e.length-1]))throw new jf("bad split edge end point at "+s)},ey.prototype.interfaces_=function(){return[]},ey.prototype.getClass=function(){return ey};var ny=function(){};ny.prototype.interfaces_=function(){return[]},ny.prototype.getClass=function(){return ny},ny.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new af("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof ff&&arguments[1]instanceof ff){var i=arguments[0],o=arguments[1],s=o.x-i.x,a=o.y-i.y;if(0===s&&0===a)throw new af("Cannot compute the octant for two identical points "+i);return ny.octant(s,a)}};var ry=function(){};ry.prototype.getCoordinates=function(){},ry.prototype.size=function(){},ry.prototype.getCoordinate=function(t){},ry.prototype.isClosed=function(){},ry.prototype.setData=function(t){},ry.prototype.getData=function(){},ry.prototype.interfaces_=function(){return[]},ry.prototype.getClass=function(){return ry};var iy=function(){};iy.prototype.addIntersection=function(t,e){},iy.prototype.interfaces_=function(){return[ry]},iy.prototype.getClass=function(){return iy};var oy=function(){this._nodeList=new ey(this),this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};oy.prototype.getCoordinates=function(){return this._pts},oy.prototype.size=function(){return this._pts.length},oy.prototype.getCoordinate=function(t){return this._pts[t]},oy.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},oy.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},oy.prototype.setData=function(t){this._data=t},oy.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:ny.octant(t,e)},oy.prototype.getData=function(){return this._data},oy.prototype.addIntersection=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[3],o=new ff(n.getIntersection(i));this.addIntersection(o,r)}},oy.prototype.toString=function(){return zf.toLineString(new td(this._pts))},oy.prototype.getNodeList=function(){return this._nodeList},oy.prototype.addIntersectionNode=function(t,e){var n=e,r=n+1;if(r<this._pts.length){var i=this._pts[r];t.equals2D(i)&&(n=r)}var o=this._nodeList.add(t,n);return o},oy.prototype.addIntersections=function(t,e,n){for(var r=this,i=0;i<t.getIntersectionNum();i++)r.addIntersection(t,e,n,i)},oy.prototype.interfaces_=function(){return[iy]},oy.prototype.getClass=function(){return oy},oy.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new fg;return oy.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[0],r=arguments[1],i=n.iterator();i.hasNext();){var o=i.next();o.getNodeList().addSplitEdges(r)}};var sy=function(){if(this.p0=null,this.p1=null,0===arguments.length)this.p0=new ff,this.p1=new ff;else if(1===arguments.length){var t=arguments[0];this.p0=new ff(t.p0),this.p1=new ff(t.p1)}else if(2===arguments.length)this.p0=arguments[0],this.p1=arguments[1];else if(4===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3];this.p0=new ff(e,n),this.p1=new ff(r,i)}},ay={serialVersionUID:{configurable:!0}};sy.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},sy.prototype.orientationIndex=function(){if(arguments[0]instanceof sy){var t=arguments[0],e=Zf.orientationIndex(this.p0,this.p1,t.p0),n=Zf.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0?Math.max(e,n):e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof ff){var r=arguments[0];return Zf.orientationIndex(this.p0,this.p1,r)}},sy.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},sy.prototype.isVertical=function(){return this.p0.x===this.p1.x},sy.prototype.equals=function(t){if(!(t instanceof sy))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},sy.prototype.intersection=function(t){var e=new Hf;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},sy.prototype.project=function(){if(arguments[0]instanceof ff){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new ff(t);var e=this.projectionFactor(t),n=new ff;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof sy){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(i>=1&&o>=1)return null;if(i<=0&&o<=0)return null;var s=this.project(r.p0);i<0&&(s=this.p0),i>1&&(s=this.p1);var a=this.project(r.p1);return o<0&&(a=this.p0),o>1&&(a=this.p1),new sy(s,a)}},sy.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},sy.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},sy.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},sy.prototype.distancePerpendicular=function(t){return Zf.distancePointLinePerpendicular(t,this.p0,this.p1)},sy.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},sy.prototype.midPoint=function(){return sy.midPoint(this.p0,this.p1)},sy.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(r<=0)return uf.NaN;var i=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return i},sy.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=uf.MAX_VALUE,i=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var s=this.closestPoint(t.p1);i=s.distance(t.p1),i<r&&(r=i,n[0]=s,n[1]=t.p1);var a=t.closestPoint(this.p0);i=a.distance(this.p0),i<r&&(r=i,n[0]=this.p0,n[1]=a);var u=t.closestPoint(this.p1);return i=u.distance(this.p1),i<r&&(r=i,n[0]=this.p1,n[1]=u),n},sy.prototype.closestPoint=function(t){var e=this.projectionFactor(t);if(e>0&&e<1)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return n<r?this.p0:this.p1},sy.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},sy.prototype.getLength=function(){return this.p0.distance(this.p1)},sy.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},sy.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},sy.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},sy.prototype.lineIntersection=function(t){try{var e=Af.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof Rf))throw n}finally{}return null},sy.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},sy.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,s=Math.sqrt(i*i+o*o),a=0,u=0;if(0!==e){if(s<=0)throw new Error("Cannot compute offset from zero-length line segment");a=e*i/s,u=e*o/s}var c=n-u,l=r+a,h=new ff(c,l);return h},sy.prototype.setCoordinates=function(){if(1===arguments.length){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},sy.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(e>1||uf.isNaN(e))&&(e=1),e},sy.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},sy.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},sy.prototype.distance=function(){if(arguments[0]instanceof sy){var t=arguments[0];return Zf.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof ff){var e=arguments[0];return Zf.distancePointLine(e,this.p0,this.p1)}},sy.prototype.pointAlong=function(t){var e=new ff;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},sy.prototype.hashCode=function(){var t=uf.doubleToLongBits(this.p0.x);t^=31*uf.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=uf.doubleToLongBits(this.p1.x);n^=31*uf.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return e^r},sy.prototype.interfaces_=function(){return[lf,ou]},sy.prototype.getClass=function(){return sy},sy.midPoint=function(t,e){return new ff((t.x+e.x)/2,(t.y+e.y)/2)},ay.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(sy,ay);var uy=function(){this.tempEnv1=new Df,this.tempEnv2=new Df,this._overlapSeg1=new sy,this._overlapSeg2=new sy};uy.prototype.overlap=function(){if(2===arguments.length);else if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this._overlapSeg1),n.getLineSegment(r,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2)}},uy.prototype.interfaces_=function(){return[]},uy.prototype.getClass=function(){return uy};var cy=function(){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this._pts=t,this._start=e,this._end=n,this._context=r};cy.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},cy.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e===1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var s=Math.trunc((e+n)/2);e<s&&this.computeSelect(t,e,s,r),s<n&&this.computeSelect(t,s,n,r)},cy.prototype.getCoordinates=function(){for(var t=this,e=new Array(this._end-this._start+1).fill(null),n=0,r=this._start;r<=this._end;r++)e[n++]=t._pts[r];return e},cy.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},cy.prototype.setId=function(t){this._id=t},cy.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},cy.prototype.getEnvelope=function(){if(null===this._env){var t=this._pts[this._start],e=this._pts[this._end];this._env=new Df(t,e)}return this._env},cy.prototype.getEndIndex=function(){return this._end},cy.prototype.getStartIndex=function(){return this._start},cy.prototype.getContext=function(){return this._context},cy.prototype.getId=function(){return this._id},cy.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var s=this._pts[t],a=this._pts[e],u=n._pts[r],c=n._pts[i];if(e-t===1&&i-r===1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(s,a),o.tempEnv2.init(u,c),!o.tempEnv1.intersects(o.tempEnv2))return null;var l=Math.trunc((t+e)/2),h=Math.trunc((r+i)/2);t<l&&(r<h&&this.computeOverlapsInternal(t,l,n,r,h,o),h<i&&this.computeOverlapsInternal(t,l,n,h,i,o)),l<e&&(r<h&&this.computeOverlapsInternal(l,e,n,r,h,o),h<i&&this.computeOverlapsInternal(l,e,n,h,i,o))},cy.prototype.interfaces_=function(){return[]},cy.prototype.getClass=function(){return cy};var ly=function(){};ly.prototype.interfaces_=function(){return[]},ly.prototype.getClass=function(){return ly},ly.getChainStartIndices=function(t){var e=0,n=new fg;n.add(new bf(e));do{var r=ly.findChainEnd(t,e);n.add(new bf(r)),e=r}while(e<t.length-1);var i=ly.toIntArray(n);return i},ly.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=Od.quadrant(t[n],t[n+1]),i=e+1;i<t.length;){if(!t[i-1].equals2D(t[i])){var o=Od.quadrant(t[i-1],t[i]);if(o!==r)break}i++}return i-1},ly.getChains=function(){if(1===arguments.length){var t=arguments[0];return ly.getChains(t,null)}if(2===arguments.length){for(var e=arguments[0],n=arguments[1],r=new fg,i=ly.getChainStartIndices(e),o=0;o<i.length-1;o++){var s=new cy(e,i[o],i[o+1],n);r.add(s)}return r}},ly.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var hy=function(){};hy.prototype.computeNodes=function(t){},hy.prototype.getNodedSubstrings=function(){},hy.prototype.interfaces_=function(){return[]},hy.prototype.getClass=function(){return hy};var py=function(){if(this._segInt=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setSegmentIntersector(t)}};py.prototype.setSegmentIntersector=function(t){this._segInt=t},py.prototype.interfaces_=function(){return[hy]},py.prototype.getClass=function(){return py};var fy=function(t){function e(e){e?t.call(this,e):t.call(this),this._monoChains=new fg,this._index=new Kd,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={SegmentOverlapAction:{configurable:!0}};return e.prototype.getMonotoneChains=function(){return this._monoChains},e.prototype.getNodedSubstrings=function(){return oy.getNodedSubstrings(this._nodedSegStrings)},e.prototype.getIndex=function(){return this._index},e.prototype.add=function(t){for(var e=this,n=ly.getChains(t.getCoordinates(),t),r=n.iterator();r.hasNext();){var i=r.next();i.setId(e._idCounter++),e._index.insert(i.getEnvelope(),i),e._monoChains.add(i)}},e.prototype.computeNodes=function(t){var e=this;this._nodedSegStrings=t;for(var n=t.iterator();n.hasNext();)e.add(n.next());this.intersectChains()},e.prototype.intersectChains=function(){for(var t=this,e=new gy(this._segInt),n=this._monoChains.iterator();n.hasNext();)for(var r=n.next(),i=t._index.query(r.getEnvelope()),o=i.iterator();o.hasNext();){var s=o.next();if(s.getId()>r.getId()&&(r.computeOverlaps(s,e),t._nOverlaps++),t._segInt.isDone())return null}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},n.SegmentOverlapAction.get=function(){return gy},Object.defineProperties(e,n),e}(py),gy=function(t){function e(){t.call(this),this._si=null;var e=arguments[0];this._si=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.overlap=function(){if(4!==arguments.length)return t.prototype.overlap.apply(this,arguments);var e=arguments[0],n=arguments[1],r=arguments[2],i=arguments[3],o=e.getContext(),s=r.getContext();this._si.processIntersections(o,n,s,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(uy),dy=function qm(){if(this._quadrantSegments=qm.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=qm.CAP_ROUND,this._joinStyle=qm.JOIN_ROUND,this._mitreLimit=qm.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=qm.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length);else if(1===arguments.length){var t=arguments[0];this.setQuadrantSegments(t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(i),this.setJoinStyle(o),this.setMitreLimit(s)}},yy={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};dy.prototype.getEndCapStyle=function(){return this._endCapStyle},dy.prototype.isSingleSided=function(){return this._isSingleSided},dy.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=dy.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=dy.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==dy.JOIN_ROUND&&(this._quadrantSegments=dy.DEFAULT_QUADRANT_SEGMENTS)},dy.prototype.getJoinStyle=function(){return this._joinStyle},dy.prototype.setJoinStyle=function(t){this._joinStyle=t},dy.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},dy.prototype.getSimplifyFactor=function(){return this._simplifyFactor},dy.prototype.getQuadrantSegments=function(){return this._quadrantSegments},dy.prototype.setEndCapStyle=function(t){this._endCapStyle=t},dy.prototype.getMitreLimit=function(){return this._mitreLimit},dy.prototype.setMitreLimit=function(t){this._mitreLimit=t},dy.prototype.setSingleSided=function(t){this._isSingleSided=t},dy.prototype.interfaces_=function(){return[]},dy.prototype.getClass=function(){return dy},dy.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},yy.CAP_ROUND.get=function(){return 1},yy.CAP_FLAT.get=function(){return 2},yy.CAP_SQUARE.get=function(){return 3;
},yy.JOIN_ROUND.get=function(){return 1},yy.JOIN_MITRE.get=function(){return 2},yy.JOIN_BEVEL.get=function(){return 3},yy.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},yy.DEFAULT_MITRE_LIMIT.get=function(){return 5},yy.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(dy,yy);var vy=function(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=Zf.COUNTERCLOCKWISE,this._inputLine=t||null},_y={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};vy.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],s=this._inputLine[n];return!!this.isConcave(i,o,s)&&(!!this.isShallow(i,o,s,r)&&this.isShallowSampled(i,o,t,n,r))},vy.prototype.deleteShallowConcavities=function(){for(var t=this,e=1,n=this.findNextNonDeletedIndex(e),r=this.findNextNonDeletedIndex(n),i=!1;r<this._inputLine.length;){var o=!1;t.isDeletable(e,n,r,t._distanceTol)&&(t._isDeleted[n]=vy.DELETE,o=!0,i=!0),e=o?r:n,n=t.findNextNonDeletedIndex(e),r=t.findNextNonDeletedIndex(n)}return i},vy.prototype.isShallowConcavity=function(t,e,n,r){var i=Zf.computeOrientation(t,e,n),o=i===this._angleOrientation;if(!o)return!1;var s=Zf.distancePointLine(e,t,n);return s<r},vy.prototype.isShallowSampled=function(t,e,n,r,i){var o=this,s=Math.trunc((r-n)/vy.NUM_PTS_TO_CHECK);s<=0&&(s=1);for(var a=n;a<r;a+=s)if(!o.isShallow(t,e,o._inputLine[a],i))return!1;return!0},vy.prototype.isConcave=function Gm(t,e,n){var r=Zf.computeOrientation(t,e,n),Gm=r===this._angleOrientation;return Gm},vy.prototype.simplify=function(t){var e=this;this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=Zf.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);var n=!1;do n=e.deleteShallowConcavities();while(n);return this.collapseLine()},vy.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===vy.DELETE;)e++;return e},vy.prototype.isShallow=function(t,e,n,r){var i=Zf.distancePointLine(e,t,n);return i<r},vy.prototype.collapseLine=function(){for(var t=this,e=new dg,n=0;n<this._inputLine.length;n++)t._isDeleted[n]!==vy.DELETE&&e.add(t._inputLine[n]);return e.toCoordinateArray()},vy.prototype.interfaces_=function(){return[]},vy.prototype.getClass=function(){return vy},vy.simplify=function(t,e){var n=new vy(t);return n.simplify(e)},_y.INIT.get=function(){return 0},_y.DELETE.get=function(){return 1},_y.KEEP.get=function(){return 1},_y.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(vy,_y);var my=function(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new fg},xy={COORDINATE_ARRAY_TYPE:{configurable:!0}};my.prototype.getCoordinates=function(){var t=this._ptList.toArray(my.COORDINATE_ARRAY_TYPE);return t},my.prototype.setPrecisionModel=function(t){this._precisionModel=t},my.prototype.addPt=function(t){var e=new ff(t);return this._precisionModel.makePrecise(e),this.isRedundant(e)?null:void this._ptList.add(e)},my.prototype.revere=function(){},my.prototype.addPts=function(t,e){var n=this;if(e)for(var r=0;r<t.length;r++)n.addPt(t[r]);else for(var i=t.length-1;i>=0;i--)n.addPt(t[i])},my.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1),n=t.distance(e);return n<this._minimimVertexDistance},my.prototype.toString=function(){var t=new cd,e=t.createLineString(this.getCoordinates());return e.toString()},my.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new ff(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);return t.equals(e)?null:void this._ptList.add(t)},my.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},my.prototype.interfaces_=function(){return[]},my.prototype.getClass=function(){return my},xy.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(my,xy);var Ey=function(){},wy={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};Ey.prototype.interfaces_=function(){return[]},Ey.prototype.getClass=function(){return Ey},Ey.toDegrees=function(t){return 180*t/Math.PI},Ey.normalize=function(t){for(;t>Math.PI;)t-=Ey.PI_TIMES_2;for(;t<=-Math.PI;)t+=Ey.PI_TIMES_2;return t},Ey.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},Ey.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=r*o+i*s;return a>0},Ey.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,s=n.y-e.y,a=r*o+i*s;return a<0},Ey.interiorAngle=function(t,e,n){var r=Ey.angle(e,t),i=Ey.angle(e,n);return Math.abs(i-r)},Ey.normalizePositive=function(t){if(t<0){for(;t<0;)t+=Ey.PI_TIMES_2;t>=Ey.PI_TIMES_2&&(t=0)}else{for(;t>=Ey.PI_TIMES_2;)t-=Ey.PI_TIMES_2;t<0&&(t=0)}return t},Ey.angleBetween=function(t,e,n){var r=Ey.angle(e,t),i=Ey.angle(e,n);return Ey.diff(r,i)},Ey.diff=function(t,e){var n=null;return n=t<e?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},Ey.toRadians=function(t){return t*Math.PI/180},Ey.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?Ey.COUNTERCLOCKWISE:n<0?Ey.CLOCKWISE:Ey.NONE},Ey.angleBetweenOriented=function(t,e,n){var r=Ey.angle(e,t),i=Ey.angle(e,n),o=i-r;return o<=-Math.PI?o+Ey.PI_TIMES_2:o>Math.PI?o-Ey.PI_TIMES_2:o},wy.PI_TIMES_2.get=function(){return 2*Math.PI},wy.PI_OVER_2.get=function(){return Math.PI/2},wy.PI_OVER_4.get=function(){return Math.PI/4},wy.COUNTERCLOCKWISE.get=function(){return Zf.COUNTERCLOCKWISE},wy.CLOCKWISE.get=function(){return Zf.CLOCKWISE},wy.NONE.get=function(){return Zf.COLLINEAR},Object.defineProperties(Ey,wy);var by=function Bm(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new sy,this._seg1=new sy,this._offset0=new sy,this._offset1=new sy,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new Hf,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===dy.JOIN_ROUND&&(this._closingSegLengthFactor=Bm.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)},Iy={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};by.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=Zf.computeOrientation(this._s0,this._s1,this._s2),r=n===Zf.CLOCKWISE&&this._side===vd.LEFT||n===Zf.COUNTERCLOCKWISE&&this._side===vd.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},by.prototype.addLineEndCap=function(t,e){var n=new sy(t,e),r=new sy;this.computeOffsetSegment(n,vd.LEFT,this._distance,r);var i=new sy;this.computeOffsetSegment(n,vd.RIGHT,this._distance,i);var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o);switch(this._bufParams.getEndCapStyle()){case dy.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,a+Math.PI/2,a-Math.PI/2,Zf.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case dy.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case dy.CAP_SQUARE:var u=new ff;u.x=Math.abs(this._distance)*Math.cos(a),u.y=Math.abs(this._distance)*Math.sin(a);var c=new ff(r.p1.x+u.x,r.p1.y+u.y),l=new ff(i.p1.x+u.x,i.p1.y+u.y);this._segList.addPt(c),this._segList.addPt(l)}},by.prototype.getCoordinates=function(){var t=this._segList.getCoordinates();return t},by.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=Af.intersection(e.p0,e.p1,n.p0,n.p1);var s=r<=0?1:o.distance(t)/Math.abs(r);s>this._bufParams.getMitreLimit()&&(i=!1)}catch(a){if(!(a instanceof Rf))throw a;o=new ff(0,0),i=!1}finally{}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},by.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,s=e.y-t.y,a=Math.atan2(s,o),u=n.x-t.x,c=n.y-t.y,l=Math.atan2(c,u);r===Zf.CLOCKWISE?a<=l&&(a+=2*Math.PI):a>=l&&(a-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,a,l,r,i),this._segList.addPt(n)},by.prototype.addOutsideTurn=function(t,e){return this._offset0.p1.distance(this._offset1.p0)<this._distance*by.OFFSET_SEGMENT_SEPARATION_FACTOR?(this._segList.addPt(this._offset0.p1),null):void(this._bufParams.getJoinStyle()===dy.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===dy.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0)))},by.prototype.createSquare=function(t){this._segList.addPt(new ff(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new ff(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new ff(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new ff(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},by.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},by.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},by.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},by.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},by.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=Ey.angle(i,this._seg0.p0),s=Ey.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1),a=s/2,u=Ey.normalize(o+a),c=Ey.normalize(u+Math.PI),l=r*n,h=l*Math.abs(Math.sin(a)),p=n-h,f=i.x+l*Math.cos(c),g=i.y+l*Math.sin(c),d=new ff(f,g),y=new sy(i,d),v=y.pointAlongOffset(1,p),_=y.pointAlongOffset(1,-p);this._side===vd.LEFT?(this._segList.addPt(v),this._segList.addPt(_)):(this._segList.addPt(_),this._segList.addPt(v))},by.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===vd.LEFT?1:-1,o=t.p1.x-t.p0.x,s=t.p1.y-t.p0.y,a=Math.sqrt(o*o+s*s),u=i*n*o/a,c=i*n*s/a;r.p0.x=t.p0.x-c,r.p0.y=t.p0.y+u,r.p1.x=t.p1.x-c,r.p1.y=t.p1.y+u},by.prototype.addFilletArc=function(t,e,n,r,i){var o=this,s=r===Zf.CLOCKWISE?-1:1,a=Math.abs(e-n),u=Math.trunc(a/this._filletAngleQuantum+.5);if(u<1)return null;for(var c=0,l=a/u,h=c,p=new ff;h<a;){var f=e+s*h;p.x=t.x+i*Math.cos(f),p.y=t.y+i*Math.sin(f),o._segList.addPt(p),h+=l}},by.prototype.addInsideTurn=function(t,e){if(this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection())this._segList.addPt(this._li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*by.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this._segList.addPt(this._offset0.p1);else{if(this._segList.addPt(this._offset0.p1),this._closingSegLengthFactor>0){var n=new ff((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(n);var r=new ff((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1));this._segList.addPt(r)}else this._segList.addPt(this._s1);this._segList.addPt(this._offset1.p0)}},by.prototype.createCircle=function(t){var e=new ff(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},by.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},by.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new my,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*by.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},by.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2);var e=this._li.getIntersectionNum();e>=2&&(this._bufParams.getJoinStyle()===dy.JOIN_BEVEL||this._bufParams.getJoinStyle()===dy.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,Zf.CLOCKWISE,this._distance))},by.prototype.closeRing=function(){this._segList.closeRing()},by.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},by.prototype.interfaces_=function(){return[]},by.prototype.getClass=function(){return by},Iy.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},Iy.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},Iy.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},Iy.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(by,Iy);var Ny=function(){this._distance=0,this._precisionModel=null,this._bufParams=null;var t=arguments[0],e=arguments[1];this._precisionModel=t,this._bufParams=e};Ny.prototype.getOffsetCurve=function(t,e){if(this._distance=e,0===e)return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&yg.reverse(o),o},Ny.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=vy.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],vd.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{n.addSegments(t,!1);var a=vy.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],vd.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment(),n.closeRing()},Ny.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===vd.RIGHT&&(r=-r);var i=vy.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var s=1;s<=o;s++){var a=1!==s;n.addNextSegment(i[s],a)}n.closeRing()},Ny.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=vy.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],vd.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var s=vy.simplify(t,-n),a=s.length-1;e.initSideSegments(s[a],s[a-1],vd.LEFT);for(var u=a-2;u>=0;u--)e.addNextSegment(s[u],!0);e.addLastSegment(),e.addLineEndCap(s[1],s[0]),e.closeRing()},Ny.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case dy.CAP_ROUND:e.createCircle(t);break;case dy.CAP_SQUARE:e.createSquare(t)}},Ny.prototype.getLineCurve=function(t,e){if(this._distance=e,e<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this._bufParams.isSingleSided()){var i=e<0;this.computeSingleSidedBufferCurve(t,i,r)}else this.computeLineBufferCurve(t,r);var o=r.getCoordinates();return o},Ny.prototype.getBufferParameters=function(){return this._bufParams},Ny.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},Ny.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return Ny.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},Ny.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=vy.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],vd.LEFT),n.addFirstSegment();for(var s=o-2;s>=0;s--)n.addNextSegment(i[s],!0)}else{var a=vy.simplify(t,r),u=a.length-1;n.initSideSegments(a[0],a[1],vd.LEFT),n.addFirstSegment();for(var c=2;c<=u;c++)n.addNextSegment(a[c],!0)}n.addLastSegment()},Ny.prototype.getSegGen=function(t){return new by(this._precisionModel,this._bufParams,t)},Ny.prototype.interfaces_=function(){return[]},Ny.prototype.getClass=function(){return Ny},Ny.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new ff(t[n]);return e};var Cy=function(){this._subgraphs=null,this._seg=new sy,this._cga=new Zf;var t=arguments[0];this._subgraphs=t},Sy={DepthSegment:{configurable:!0}};Cy.prototype.findStabbedSegments=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=new fg,r=this._subgraphs.iterator();r.hasNext();){var i=r.next(),o=i.getEnvelope();e.y<o.getMinY()||e.y>o.getMaxY()||t.findStabbedSegments(e,i.getDirectedEdges(),n)}return n}if(3===arguments.length)if(mf(arguments[2],pg)&&arguments[0]instanceof ff&&arguments[1]instanceof Ad)for(var s=arguments[0],a=arguments[1],u=arguments[2],c=a.getEdge().getCoordinates(),l=0;l<c.length-1;l++){t._seg.p0=c[l],t._seg.p1=c[l+1],t._seg.p0.y>t._seg.p1.y&&t._seg.reverse();var h=Math.max(t._seg.p0.x,t._seg.p1.x);if(!(h<s.x||t._seg.isHorizontal()||s.y<t._seg.p0.y||s.y>t._seg.p1.y||Zf.computeOrientation(t._seg.p0,t._seg.p1,s)===Zf.RIGHT)){var p=a.getDepth(vd.LEFT);t._seg.p0.equals(c[l])||(p=a.getDepth(vd.RIGHT));var f=new My(t._seg,p);u.add(f)}}else if(mf(arguments[2],pg)&&arguments[0]instanceof ff&&mf(arguments[1],pg))for(var g=arguments[0],d=arguments[1],y=arguments[2],v=d.iterator();v.hasNext();){var _=v.next();_.isForward()&&t.findStabbedSegments(g,_,y)}},Cy.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);if(0===e.size())return 0;var n=Yd.min(e);return n._leftDepth},Cy.prototype.interfaces_=function(){return[]},Cy.prototype.getClass=function(){return Cy},Sy.DepthSegment.get=function(){return My},Object.defineProperties(Cy,Sy);var My=function(){this._upwardSeg=null,this._leftDepth=null;var t=arguments[0],e=arguments[1];this._upwardSeg=new sy(t),this._leftDepth=e};My.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n?n:(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg),0!==n?n:this._upwardSeg.compareTo(e._upwardSeg))},My.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},My.prototype.toString=function(){return this._upwardSeg.toString()},My.prototype.interfaces_=function(){return[lf]},My.prototype.getClass=function(){return My};var Ly=function(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null};Ly.prototype.area=function(){return Ly.area(this.p0,this.p1,this.p2)},Ly.prototype.signedArea=function(){return Ly.signedArea(this.p0,this.p1,this.p2)},Ly.prototype.interpolateZ=function(t){if(null===t)throw new af("Supplied point is null.");return Ly.interpolateZ(t,this.p0,this.p1,this.p2)},Ly.prototype.longestSideLength=function(){return Ly.longestSideLength(this.p0,this.p1,this.p2)},Ly.prototype.isAcute=function(){return Ly.isAcute(this.p0,this.p1,this.p2)},Ly.prototype.circumcentre=function(){return Ly.circumcentre(this.p0,this.p1,this.p2)},Ly.prototype.area3D=function(){return Ly.area3D(this.p0,this.p1,this.p2)},Ly.prototype.centroid=function(){return Ly.centroid(this.p0,this.p1,this.p2)},Ly.prototype.inCentre=function(){return Ly.inCentre(this.p0,this.p1,this.p2)},Ly.prototype.interfaces_=function(){return[]},Ly.prototype.getClass=function(){return Ly},Ly.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Ly.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Ly.det=function(t,e,n,r){return t*r-e*n},Ly.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,s=n.x-i,a=r.x-i,u=n.y-o,c=r.y-o,l=s*c-a*u,h=t.x-i,p=t.y-o,f=(c*h-a*p)/l,g=(-u*h+s*p)/l,d=e.z+f*(n.z-e.z)+g*(r.z-e.z);return d},Ly.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),s=r;return i>s&&(s=i),o>s&&(s=o),s},Ly.isAcute=function(t,e,n){return!!Ey.isAcute(t,e,n)&&(!!Ey.isAcute(e,n,t)&&!!Ey.isAcute(n,t,e))},Ly.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,s=t.y-i,a=e.x-r,u=e.y-i,c=2*Ly.det(o,s,a,u),l=Ly.det(s,o*o+s*s,u,a*a+u*u),h=Ly.det(o,o*o+s*s,a,a*a+u*u),p=r-l/c,f=i+h/c;return new ff(p,f)},Ly.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new Af(t.x+n/2,t.y+r/2,1),o=new Af(t.x-r+n/2,t.y+n+r/2,1);return new Af(i,o)},Ly.angleBisector=function(t,e,n){var r=e.distance(t),i=e.distance(n),o=r/(r+i),s=n.x-t.x,a=n.y-t.y,u=new ff(t.x+o*s,t.y+o*a);return u},Ly.area3D=function km(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,s=n.x-t.x,a=n.y-t.y,u=n.z-t.z,c=i*u-o*a,l=o*s-r*u,h=r*a-i*s,p=c*c+l*l+h*h,km=Math.sqrt(p)/2;return km},Ly.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new ff(r,i)},Ly.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),s=r+i+o,a=(r*t.x+i*e.x+o*n.x)/s,u=(r*t.y+i*e.y+o*n.y)/s;return new ff(a,u)};var Py=function(){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new fg;var t=arguments[0],e=arguments[1],n=arguments[2];this._inputGeom=t,this._distance=e,this._curveBuilder=n};Py.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,vf.EXTERIOR,vf.INTERIOR)},Py.prototype.addPolygon=function(t){var e=this,n=this._distance,r=vd.LEFT;this._distance<0&&(n=-this._distance,r=vd.RIGHT);var i=t.getExteriorRing(),o=yg.removeRepeatedPoints(i.getCoordinates());if(this._distance<0&&this.isErodedCompletely(i,this._distance))return null;if(this._distance<=0&&o.length<3)return null;this.addPolygonRing(o,n,r,vf.EXTERIOR,vf.INTERIOR);for(var s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),u=yg.removeRepeatedPoints(a.getCoordinates());e._distance>0&&e.isErodedCompletely(a,-e._distance)||e.addPolygonRing(u,n,vd.opposite(r),vf.INTERIOR,vf.EXTERIOR)}},Py.prototype.isTriangleErodedCompletely=function(t,e){var n=new Ly(t[0],t[1],t[2]),r=n.inCentre(),i=Zf.distancePointLine(r,n.p0,n.p1);return i<Math.abs(e)},Py.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=yg.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,vf.EXTERIOR,vf.INTERIOR)},Py.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new oy(t,new Id(0,vf.BOUNDARY,e,n));this._curveList.add(r)},Py.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Py.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<Hg.MINIMUM_VALID_SIZE)return null;var o=r,s=i;t.length>=Hg.MINIMUM_VALID_SIZE&&Zf.isCCW(t)&&(o=i,s=r,n=vd.opposite(n));var a=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(a,o,s)},Py.prototype.add=function(t){return t.isEmpty()?null:void(t instanceof Yg?this.addPolygon(t):t instanceof zg?this.addLineString(t):t instanceof Xg?this.addPoint(t):t instanceof Vg?this.addCollection(t):t instanceof Ag?this.addCollection(t):t instanceof Wg?this.addCollection(t):t instanceof Tg&&this.addCollection(t))},Py.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Py.prototype.addCollection=function(t){for(var e=this,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);e.add(r)}},Py.prototype.interfaces_=function(){return[]},Py.prototype.getClass=function(){return Py};var Oy=function(){};Oy.prototype.locate=function(t){},Oy.prototype.interfaces_=function(){return[]},Oy.prototype.getClass=function(){return Oy};var Ry=function(){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var t=arguments[0];this._parent=t,this._atStart=!0,this._index=0,this._max=t.getNumGeometries()};Ry.prototype.next=function(){if(this._atStart)return this._atStart=!1,Ry.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new su;var t=this._parent.getGeometryN(this._index++);return t instanceof Tg?(this._subcollectionIterator=new Ry(t),this._subcollectionIterator.next()):t},Ry.prototype.remove=function(){throw new Error(this.getClass().getName())},Ry.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Ry.prototype.interfaces_=function(){return[hg]},Ry.prototype.getClass=function(){return Ry},Ry.isAtomic=function(t){return!(t instanceof Tg)};var Ty=function(){this._geom=null;var t=arguments[0];this._geom=t};Ty.prototype.locate=function(t){return Ty.locate(t,this._geom)},Ty.prototype.interfaces_=function(){return[Oy]},Ty.prototype.getClass=function(){return Ty},Ty.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&Zf.isPointInRing(t,e.getCoordinates())},Ty.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Ty.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Ty.isPointInRing(t,i))return!1}return!0},Ty.containsPoint=function(t,e){if(e instanceof Yg)return Ty.containsPointInPolygon(t,e);if(e instanceof Tg)for(var n=new Ry(e);n.hasNext();){var r=n.next();if(r!==e&&Ty.containsPoint(t,r))return!0}return!1},Ty.locate=function(t,e){return e.isEmpty()?vf.EXTERIOR:Ty.containsPoint(t,e)?vf.INTERIOR:vf.EXTERIOR};var Ay=function(){this._edgeMap=new gu,this._edgeList=null,this._ptInAreaLocation=[vf.NONE,vf.NONE]};Ay.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Ay.prototype.propagateSideLabels=function(t){for(var e=vf.NONE,n=this.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea(t)&&i.getLocation(t,vd.LEFT)!==vf.NONE&&(e=i.getLocation(t,vd.LEFT))}if(e===vf.NONE)return null;for(var o=e,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();if(u.getLocation(t,vd.ON)===vf.NONE&&u.setLocation(t,vd.ON,o),u.isArea(t)){var c=u.getLocation(t,vd.LEFT),l=u.getLocation(t,vd.RIGHT);if(l!==vf.NONE){if(l!==o)throw new xd("side location conflict",a.getCoordinate());c===vf.NONE&&Uf.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),o=c}else Uf.isTrue(u.getLocation(t,vd.LEFT)===vf.NONE,"found single null side"),u.setLocation(t,vd.RIGHT,o),u.setLocation(t,vd.LEFT,o)}}},Ay.prototype.getCoordinate=function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},Ay.prototype.print=function(t){Tf.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},Ay.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Ay.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),i=r.getLocation(t,vd.LEFT);Uf.isTrue(i!==vf.NONE,"Found unlabelled area edge");for(var o=i,s=this.iterator();s.hasNext();){var a=s.next(),u=a.getLabel();Uf.isTrue(u.isArea(t),"Found non-area edge");var c=u.getLocation(t,vd.LEFT),l=u.getLocation(t,vd.RIGHT);if(c===l)return!1;if(l!==o)return!1;o=c}return!0},Ay.prototype.findIndex=function(t){var e=this;this.iterator();for(var n=0;n<this._edgeList.size();n++){var r=e._edgeList.get(n);if(r===t)return n}return-1},Ay.prototype.iterator=function(){return this.getEdges().iterator()},Ay.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new fg(this._edgeMap.values())),this._edgeList},Ay.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===vf.NONE&&(this._ptInAreaLocation[t]=Ty.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Ay.prototype.toString=function(){var t=new wf;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Ay.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},Ay.prototype.computeLabelling=function(t){var e=this;this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var n=[!1,!1],r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getLabel(),s=0;s<2;s++)o.isLine(s)&&o.getLocation(s)===vf.BOUNDARY&&(n[s]=!0);for(var a=this.iterator();a.hasNext();)for(var u=a.next(),c=u.getLabel(),l=0;l<2;l++)if(c.isAnyNull(l)){var h=vf.NONE;if(n[l])h=vf.EXTERIOR;else{var p=u.getCoordinate();h=e.getLocation(l,p,t)}c.setAllLocationsIfNull(l,h)}},Ay.prototype.getDegree=function(){return this._edgeMap.size()},Ay.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Ay.prototype.interfaces_=function(){return[]},Ay.prototype.getClass=function(){return Ay};var Dy=function(t){function e(){t.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linkResultDirectedEdges=function(){var t=this;this.getResultAreaEdges();for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=0;i<this._resultAreaEdgeList.size();i++){var o=t._resultAreaEdgeList.get(i),s=o.getSym();if(o.getLabel().isArea())switch(null===e&&o.isInResult()&&(e=o),r){case t._SCANNING_FOR_INCOMING:if(!s.isInResult())continue;n=s,r=t._LINKING_TO_OUTGOING;break;case t._LINKING_TO_OUTGOING:if(!o.isInResult())continue;n.setNext(o),r=t._SCANNING_FOR_INCOMING}}if(r===this._LINKING_TO_OUTGOING){if(null===e)throw new xd("no outgoing dirEdge found",this.getCoordinate());Uf.isTrue(e.isInResult(),"unable to link last incoming dirEdge"),n.setNext(e)}},e.prototype.insert=function(t){var e=t;this.insertEdgeEnd(e,e)},e.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return Od.isNorthern(i)&&Od.isNorthern(o)?n:Od.isNorthern(i)||Od.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(Uf.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},e.prototype.print=function(t){Tf.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},e.prototype.getResultAreaEdges=function(){var t=this;if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new fg;for(var e=this.iterator();e.hasNext();){var n=e.next();(n.isInResult()||n.getSym().isInResult())&&t._resultAreaEdgeList.add(n)}return this._resultAreaEdgeList},e.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},e.prototype.linkAllDirectedEdges=function(){var t=this;this.getEdges();for(var e=null,n=null,r=this._edgeList.size()-1;r>=0;r--){var i=t._edgeList.get(r),o=i.getSym();null===n&&(n=o),null!==e&&o.setNext(e),
e=i}n.setNext(e)},e.prototype.computeDepths=function(){var t=this;if(1===arguments.length){var e=arguments[0],n=this.findIndex(e),r=e.getDepth(vd.LEFT),i=e.getDepth(vd.RIGHT),o=this.computeDepths(n+1,this._edgeList.size(),r),s=this.computeDepths(0,n,o);if(s!==i)throw new xd("depth mismatch at "+e.getCoordinate())}else if(3===arguments.length){for(var a=arguments[0],u=arguments[1],c=arguments[2],l=c,h=a;h<u;h++){var p=t._edgeList.get(h);p.setEdgeDepths(vd.RIGHT,l),l=p.getDepth(vd.LEFT)}return l}},e.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},e.prototype.linkMinimalDirectedEdges=function(t){for(var e=this,n=null,r=null,i=this._SCANNING_FOR_INCOMING,o=this._resultAreaEdgeList.size()-1;o>=0;o--){var s=e._resultAreaEdgeList.get(o),a=s.getSym();switch(null===n&&s.getEdgeRing()===t&&(n=s),i){case e._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;r=a,i=e._LINKING_TO_OUTGOING;break;case e._LINKING_TO_OUTGOING:if(s.getEdgeRing()!==t)continue;r.setNextMin(s),i=e._SCANNING_FOR_INCOMING}}i===this._LINKING_TO_OUTGOING&&(Uf.isTrue(null!==n,"found null for first outgoing dirEdge"),Uf.isTrue(n.getEdgeRing()===t,"unable to link last incoming dirEdge"),r.setNextMin(n))},e.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(1===arguments.length){for(var r=arguments[0],i=0,o=this.iterator();o.hasNext();){var s=o.next();s.getEdgeRing()===r&&i++}return i}},e.prototype.getLabel=function(){return this._label},e.prototype.findCoveredLineEdges=function(){for(var t=vf.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=vf.INTERIOR;break}if(r.isInResult()){t=vf.EXTERIOR;break}}}if(t===vf.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var s=o.next(),a=s.getSym();s.isLineEdge()?s.getEdge().setCovered(i===vf.INTERIOR):(s.isInResult()&&(i=vf.EXTERIOR),a.isInResult()&&(i=vf.INTERIOR))}},e.prototype.computeLabelling=function(e){var n=this;t.prototype.computeLabelling.call(this,e),this._label=new Id(vf.NONE);for(var r=this.iterator();r.hasNext();)for(var i=r.next(),o=i.getEdge(),s=o.getLabel(),a=0;a<2;a++){var u=s.getLocation(a);u!==vf.INTERIOR&&u!==vf.BOUNDARY||n._label.setLocation(a,vf.INTERIOR)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Ay),Fy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createNode=function(t){return new Ld(t,new Dy)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Dd),qy=function zm(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=zm.orientation(t)};qy.prototype.compareTo=function(t){var e=t,n=qy.compareOriented(this._pts,this._orientation,e._pts,e._orientation);return n},qy.prototype.interfaces_=function(){return[lf]},qy.prototype.getClass=function(){return qy},qy.orientation=function(t){return 1===yg.increasingDirection(t)},qy.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,s=e?t.length:-1,a=r?n.length:-1,u=e?0:t.length-1,c=r?0:n.length-1;;){var l=t[u].compareTo(n[c]);if(0!==l)return l;u+=i,c+=o;var h=u===s,p=c===a;if(h&&!p)return-1;if(!h&&p)return 1;if(h&&p)return 0}};var Gy=function(){this._edges=new fg,this._ocaMap=new gu};Gy.prototype.print=function(t){var e=this;t.print("MULTILINESTRING ( ");for(var n=0;n<this._edges.size();n++){var r=e._edges.get(n);n>0&&t.print(","),t.print("(");for(var i=r.getCoordinates(),o=0;o<i.length;o++)o>0&&t.print(","),t.print(i[o].x+" "+i[o].y);t.println(")")}t.print(")  ")},Gy.prototype.addAll=function(t){for(var e=this,n=t.iterator();n.hasNext();)e.add(n.next())},Gy.prototype.findEdgeIndex=function(t){for(var e=this,n=0;n<this._edges.size();n++)if(e._edges.get(n).equals(t))return n;return-1},Gy.prototype.iterator=function(){return this._edges.iterator()},Gy.prototype.getEdges=function(){return this._edges},Gy.prototype.get=function(t){return this._edges.get(t)},Gy.prototype.findEqualEdge=function(t){var e=new qy(t.getCoordinates()),n=this._ocaMap.get(e);return n},Gy.prototype.add=function(t){this._edges.add(t);var e=new qy(t.getCoordinates());this._ocaMap.put(e,t)},Gy.prototype.interfaces_=function(){return[]},Gy.prototype.getClass=function(){return Gy};var By=function(){};By.prototype.processIntersections=function(t,e,n,r){},By.prototype.isDone=function(){},By.prototype.interfaces_=function(){return[]},By.prototype.getClass=function(){return By};var ky=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this._li=t};ky.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(ky.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},ky.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},ky.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},ky.prototype.getLineIntersector=function(){return this._li},ky.prototype.hasProperIntersection=function(){return this._hasProper},ky.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},ky.prototype.hasIntersection=function(){return this._hasIntersection},ky.prototype.isDone=function(){return!1},ky.prototype.hasInteriorIntersection=function(){return this._hasInterior},ky.prototype.interfaces_=function(){return[By]},ky.prototype.getClass=function(){return ky},ky.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var zy=function(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new ff(t),this.segmentIndex=e,this.dist=n};zy.prototype.getSegmentIndex=function(){return this.segmentIndex},zy.prototype.getCoordinate=function(){return this.coord},zy.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},zy.prototype.compareTo=function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},zy.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},zy.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},zy.prototype.getDistance=function(){return this.dist},zy.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},zy.prototype.interfaces_=function(){return[lf]},zy.prototype.getClass=function(){return zy};var jy=function(){this._nodeMap=new gu,this.edge=null;var t=arguments[0];this.edge=t};jy.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},jy.prototype.iterator=function(){return this._nodeMap.values().iterator()},jy.prototype.addSplitEdges=function(t){var e=this;this.addEndpoints();for(var n=this.iterator(),r=n.next();n.hasNext();){var i=n.next(),o=e.createSplitEdge(r,i);t.add(o),r=i}},jy.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},jy.prototype.createSplitEdge=function(t,e){var n=this,r=e.segmentIndex-t.segmentIndex+2,i=this.edge.pts[e.segmentIndex],o=e.dist>0||!e.coord.equals2D(i);o||r--;var s=new Array(r).fill(null),a=0;s[a++]=new ff(t.coord);for(var u=t.segmentIndex+1;u<=e.segmentIndex;u++)s[a++]=n.edge.pts[u];return o&&(s[a]=e.coord),new Hy(s,new Id(this.edge._label))},jy.prototype.add=function(t,e,n){var r=new zy(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},jy.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},jy.prototype.interfaces_=function(){return[]},jy.prototype.getClass=function(){return jy};var Xy=function(){};Xy.prototype.getChainStartIndices=function(t){var e=this,n=0,r=new fg;r.add(new bf(n));do{var i=e.findChainEnd(t,n);r.add(new bf(i)),n=i}while(n<t.length-1);var o=Xy.toIntArray(r);return o},Xy.prototype.findChainEnd=function(t,e){for(var n=Od.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var i=Od.quadrant(t[r-1],t[r]);if(i!==n)break;r++}return r-1},Xy.prototype.interfaces_=function(){return[]},Xy.prototype.getClass=function(){return Xy},Xy.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};var Uy=function(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Df,this.env2=new Df;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Xy;this.startIndex=e.getChainStartIndices(this.pts)};Uy.prototype.getCoordinates=function(){return this.pts},Uy.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},Uy.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},Uy.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2],a=arguments[3],u=arguments[4],c=arguments[5],l=this.pts[i],h=this.pts[o],p=s.pts[a],f=s.pts[u];if(o-i===1&&u-a===1)return c.addIntersections(this.e,i,s.e,a),null;if(this.env1.init(l,h),this.env2.init(p,f),!this.env1.intersects(this.env2))return null;var g=Math.trunc((i+o)/2),d=Math.trunc((a+u)/2);i<g&&(a<d&&this.computeIntersectsForChain(i,g,s,a,d,c),d<u&&this.computeIntersectsForChain(i,g,s,d,u,c)),g<o&&(a<d&&this.computeIntersectsForChain(g,o,s,a,d,c),d<u&&this.computeIntersectsForChain(g,o,s,d,u,c))}},Uy.prototype.getStartIndexes=function(){return this.startIndex},Uy.prototype.computeIntersects=function(t,e){for(var n=this,r=0;r<this.startIndex.length-1;r++)for(var i=0;i<t.startIndex.length-1;i++)n.computeIntersectsForChain(r,t,i,e)},Uy.prototype.interfaces_=function(){return[]},Uy.prototype.getClass=function(){return Uy};var Yy=function jm(){var t=this;this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)t._depth[e][n]=jm.NULL_VALUE},Vy={NULL_VALUE:{configurable:!0}};Yy.prototype.getDepth=function(t,e){return this._depth[t][e]},Yy.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Yy.prototype.isNull=function(){var t=this;if(0===arguments.length){for(var e=0;e<2;e++)for(var n=0;n<3;n++)if(t._depth[e][n]!==Yy.NULL_VALUE)return!1;return!0}if(1===arguments.length){var r=arguments[0];return this._depth[r][1]===Yy.NULL_VALUE}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._depth[i][o]===Yy.NULL_VALUE}},Yy.prototype.normalize=function(){for(var t=this,e=0;e<2;e++)if(!t.isNull(e)){var n=t._depth[e][1];t._depth[e][2]<n&&(n=t._depth[e][2]),n<0&&(n=0);for(var r=1;r<3;r++){var i=0;t._depth[e][r]>n&&(i=1),t._depth[e][r]=i}}},Yy.prototype.getDelta=function(t){return this._depth[t][vd.RIGHT]-this._depth[t][vd.LEFT]},Yy.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?vf.EXTERIOR:vf.INTERIOR},Yy.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Yy.prototype.add=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=0;n<2;n++)for(var r=1;r<3;r++){var i=e.getLocation(n,r);i!==vf.EXTERIOR&&i!==vf.INTERIOR||(t.isNull(n,r)?t._depth[n][r]=Yy.depthAtLocation(i):t._depth[n][r]+=Yy.depthAtLocation(i))}else if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2];a===vf.INTERIOR&&this._depth[o][s]++}},Yy.prototype.interfaces_=function(){return[]},Yy.prototype.getClass=function(){return Yy},Yy.depthAtLocation=function(t){return t===vf.EXTERIOR?0:t===vf.INTERIOR?1:Yy.NULL_VALUE},Vy.NULL_VALUE.get=function(){return-1},Object.defineProperties(Yy,Vy);var Hy=function(t){function e(){if(t.call(this),this.pts=null,this._env=null,this.eiList=new jy(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Yy,this._depthDelta=0,1===arguments.length){var n=arguments[0];e.call(this,n,null)}else if(2===arguments.length){var r=arguments[0],i=arguments[1];this.pts=r,this._label=i}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDepth=function(){return this._depth},e.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var n=new e(t,Id.toLineLabel(this._label));return n},e.prototype.isIsolated=function(){return this._isIsolated},e.prototype.getCoordinates=function(){return this.pts},e.prototype.setIsolated=function(t){this._isIsolated=t},e.prototype.setName=function(t){this._name=t},e.prototype.equals=function(t){var n=this;if(!(t instanceof e))return!1;var r=t;if(this.pts.length!==r.pts.length)return!1;for(var i=!0,o=!0,s=this.pts.length,a=0;a<this.pts.length;a++)if(n.pts[a].equals2D(r.pts[a])||(i=!1),n.pts[a].equals2D(r.pts[--s])||(o=!1),!i&&!o)return!1;return!0},e.prototype.getCoordinate=function(){if(0===arguments.length)return this.pts.length>0?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},e.prototype.print=function(t){var e=this;t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&t.print(","),t.print(e.pts[n].x+" "+e.pts[n].y);t.print(")  "+this._label+" "+this._depthDelta)},e.prototype.computeIM=function(t){e.updateIM(this._label,t)},e.prototype.isCollapsed=function(){return!!this._label.isArea()&&(3===this.pts.length&&!!this.pts[0].equals(this.pts[2]))},e.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},e.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},e.prototype.getDepthDelta=function(){return this._depthDelta},e.prototype.getNumPoints=function(){return this.pts.length},e.prototype.printReverse=function(t){var e=this;t.print("edge "+this._name+": ");for(var n=this.pts.length-1;n>=0;n--)t.print(e.pts[n]+" ");t.println("")},e.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new Uy(this)),this._mce},e.prototype.getEnvelope=function(){var t=this;if(null===this._env){this._env=new Df;for(var e=0;e<this.pts.length;e++)t._env.expandToInclude(t.pts[e])}return this._env},e.prototype.addIntersection=function(t,e,n,r){var i=new ff(t.getIntersection(r)),o=e,s=t.getEdgeDistance(n,r),a=o+1;if(a<this.pts.length){var u=this.pts[a];i.equals2D(u)&&(o=a,s=0)}this.eiList.add(i,o,s)},e.prototype.toString=function(){var t=this,e=new wf;e.append("edge "+this._name+": "),e.append("LINESTRING (");for(var n=0;n<this.pts.length;n++)n>0&&e.append(","),e.append(t.pts[n].x+" "+t.pts[n].y);return e.append(")  "+this._label+" "+this._depthDelta),e.toString()},e.prototype.isPointwiseEqual=function(t){var e=this;if(this.pts.length!==t.pts.length)return!1;for(var n=0;n<this.pts.length;n++)if(!e.pts[n].equals2D(t.pts[n]))return!1;return!0},e.prototype.setDepthDelta=function(t){this._depthDelta=t},e.prototype.getEdgeIntersectionList=function(){return this.eiList},e.prototype.addIntersections=function(t,e,n){for(var r=this,i=0;i<t.getIntersectionNum();i++)r.addIntersection(t,e,n,i)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.updateIM=function(){if(2!==arguments.length)return t.prototype.updateIM.apply(this,arguments);var e=arguments[0],n=arguments[1];n.setAtLeastIfValid(e.getLocation(0,vd.ON),e.getLocation(1,vd.ON),1),e.isArea()&&(n.setAtLeastIfValid(e.getLocation(0,vd.LEFT),e.getLocation(1,vd.LEFT),2),n.setAtLeastIfValid(e.getLocation(0,vd.RIGHT),e.getLocation(1,vd.RIGHT),2))},e}(Md),Wy=function(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Gy,this._bufParams=t||null};Wy.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Wy.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Id(t.getLabel()),r.flip()),n.merge(r);var i=Wy.depthDelta(r),o=e.getDepthDelta(),s=o+i;e.setDepthDelta(s)}else this._edgeList.add(t),t.setDepthDelta(Wy.depthDelta(t.getLabel()))},Wy.prototype.buildSubgraphs=function(t,e){for(var n=new fg,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),s=new Cy(n),a=s.getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Wy.prototype.createSubgraphs=function(t){for(var e=new fg,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var i=new wd;i.create(r),e.add(i)}}return Yd.sort(e,Yd.reverseOrder()),e},Wy.prototype.createEmptyResultGeometry=function(){var t=this._geomFact.createPolygon();return t},Wy.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new fy,n=new Hf;return n.setPrecisionModel(t),e.setSegmentIntersector(new ky(n)),e},Wy.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new Ny(n,this._bufParams),i=new Py(t,e,r),o=i.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this._graph=new Fd(new Fy),this._graph.addEdges(this._edgeList.getEdges());var s=this.createSubgraphs(this._graph),a=new qd(this._geomFact);this.buildSubgraphs(s,a);var u=a.getPolygons();if(u.size()<=0)return this.createEmptyResultGeometry();var c=this._geomFact.buildGeometry(u);return c},Wy.prototype.computeNodedEdges=function(t,e){var n=this,r=this.getNoder(e);r.computeNodes(t);for(var i=r.getNodedSubstrings(),o=i.iterator();o.hasNext();){var s=o.next(),a=s.getCoordinates();if(2!==a.length||!a[0].equals2D(a[1])){var u=s.getData(),c=new Hy(s.getCoordinates(),new Id(u));n.insertUniqueEdge(c)}}},Wy.prototype.setNoder=function(t){this._workingNoder=t},Wy.prototype.interfaces_=function(){return[]},Wy.prototype.getClass=function(){return Wy},Wy.depthDelta=function(t){var e=t.getLocation(0,vd.LEFT),n=t.getLocation(0,vd.RIGHT);return e===vf.INTERIOR&&n===vf.EXTERIOR?1:e===vf.EXTERIOR&&n===vf.INTERIOR?-1:0},Wy.convertSegStrings=function(t){for(var e=new cd,n=new fg;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};var Jy=function(){if(this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length){var t=arguments[0],e=arguments[1];this._noder=t,this._scaleFactor=e,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()}else if(4===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=arguments[3];this._noder=n,this._scaleFactor=r,this._offsetX=i,this._offsetY=o,this._isScaled=!this.isIntegerPrecision()}};Jy.prototype.rescale=function(){var t=this;if(mf(arguments[0],cg))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.rescale(r.getCoordinates())}else if(arguments[0]instanceof Array){for(var i=arguments[0],o=0;o<i.length;o++)i[o].x=i[o].x/t._scaleFactor+t._offsetX,i[o].y=i[o].y/t._scaleFactor+t._offsetY;2===i.length&&i[0].equals2D(i[1])&&Tf.out.println(i)}},Jy.prototype.scale=function(){var t=this;if(mf(arguments[0],cg)){for(var e=arguments[0],n=new fg,r=e.iterator();r.hasNext();){var i=r.next();n.add(new oy(t.scale(i.getCoordinates()),i.getData()))}return n}if(arguments[0]instanceof Array){for(var o=arguments[0],s=new Array(o.length).fill(null),a=0;a<o.length;a++)s[a]=new ff(Math.round((o[a].x-t._offsetX)*t._scaleFactor),Math.round((o[a].y-t._offsetY)*t._scaleFactor),o[a].z);var u=yg.removeRepeatedPoints(s);return u}},Jy.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Jy.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Jy.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Jy.prototype.interfaces_=function(){return[hy]},Jy.prototype.getClass=function(){return Jy};var Zy=function(){this._li=new Hf,this._segStrings=null;var t=arguments[0];this._segStrings=t},Ky={fact:{configurable:!0}};Zy.prototype.checkEndPtVertexIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next(),r=n.getCoordinates();t.checkEndPtVertexIntersections(r[0],t._segStrings),t.checkEndPtVertexIntersections(r[r.length-1],t._segStrings)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=o.iterator();s.hasNext();)for(var a=s.next(),u=a.getCoordinates(),c=1;c<u.length-1;c++)if(u[c].equals(i))throw new jf("found endpt/interior pt intersection at index "+c+" :pt "+i)},Zy.prototype.checkInteriorIntersections=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();)for(var n=e.next(),r=this._segStrings.iterator();r.hasNext();){var i=r.next();t.checkInteriorIntersections(n,i)}else if(2===arguments.length)for(var o=arguments[0],s=arguments[1],a=o.getCoordinates(),u=s.getCoordinates(),c=0;c<a.length-1;c++)for(var l=0;l<u.length-1;l++)t.checkInteriorIntersections(o,c,s,l);else if(4===arguments.length){var h=arguments[0],p=arguments[1],f=arguments[2],g=arguments[3];if(h===f&&p===g)return null;var d=h.getCoordinates()[p],y=h.getCoordinates()[p+1],v=f.getCoordinates()[g],_=f.getCoordinates()[g+1];if(this._li.computeIntersection(d,y,v,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,v,_)))throw new jf("found non-noded intersection at "+d+"-"+y+" and "+v+"-"+_)}},Zy.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Zy.prototype.checkCollapses=function(){var t=this;if(0===arguments.length)for(var e=this._segStrings.iterator();e.hasNext();){var n=e.next();t.checkCollapses(n)}else if(1===arguments.length)for(var r=arguments[0],i=r.getCoordinates(),o=0;o<i.length-2;o++)t.checkCollapse(i[o],i[o+1],i[o+2])},Zy.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Zy.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new jf("found non-noded collapse at "+Zy.fact.createLineString([t,e,n]))},Zy.prototype.interfaces_=function(){return[]},Zy.prototype.getClass=function(){return Zy},Ky.fact.get=function(){return new cd},Object.defineProperties(Zy,Ky);var Qy=function(){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this._originalPt=t,this._pt=t,this._scaleFactor=e,this._li=n,e<=0)throw new af("Scale factor must be non-zero");1!==e&&(this._pt=new ff(this.scale(t.x),this.scale(t.y)),this._p0Scaled=new ff,this._p1Scaled=new ff),this.initCorners(this._pt)},$y={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Qy.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),s=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(s)return!1;var a=this.intersectsToleranceSquare(t,e);return Uf.isTrue(!(s&&a),"Found bad envelope test"),a},Qy.prototype.initCorners=function(t){var e=.5;this._minx=t.x-e,this._maxx=t.x+e,this._miny=t.y-e,this._maxy=t.y+e,this._corner[0]=new ff(this._maxx,this._maxy),this._corner[1]=new ff(this._minx,this._maxy),this._corner[2]=new ff(this._minx,this._miny),this._corner[3]=new ff(this._maxx,this._miny)},Qy.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Qy.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Qy.prototype.getCoordinate=function(){return this._originalPt},Qy.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Qy.prototype.getSafeEnvelope=function(){if(null===this._safeEnv){var t=Qy.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor;this._safeEnv=new Df(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)}return this._safeEnv},Qy.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.hasIntersection())))},Qy.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),!!this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),!!this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),!!this._li.isProper()||(!(!n||!r)||(!!t.equals(this._pt)||!!e.equals(this._pt))))))},Qy.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Qy.prototype.interfaces_=function(){return[]},Qy.prototype.getClass=function(){return Qy},$y.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Qy,$y);var tv=function(){this.tempEnv1=new Df,this.selectedSegment=new sy};tv.prototype.select=function(){if(1===arguments.length);else if(2===arguments.length){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}},tv.prototype.interfaces_=function(){return[]},tv.prototype.getClass=function(){return tv};var ev=function(){this._index=null;var t=arguments[0];this._index=t},nv={HotPixelSnapAction:{configurable:!0}};ev.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new rv(e,n,r);return this._index.query(i,{interfaces_:function(){return[zd]},visitItem:function(t){var e=t;e.select(i,o)}}),o.isNodeAdded()}},ev.prototype.interfaces_=function(){return[]},ev.prototype.getClass=function(){return ev},nv.HotPixelSnapAction.get=function(){return rv},Object.defineProperties(ev,nv);var rv=function(t){function e(){t.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var e=arguments[0],n=arguments[1],r=arguments[2];this._hotPixel=e,this._parentEdge=n,this._hotPixelVertexIndex=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isNodeAdded=function(){return this._isNodeAdded},e.prototype.select=function(){if(2!==arguments.length)return t.prototype.select.apply(this,arguments);var e=arguments[0],n=arguments[1],r=e.getContext();return null!==this._parentEdge&&r===this._parentEdge&&n===this._hotPixelVertexIndex?null:void(this._isNodeAdded=this._hotPixel.addSnappedNode(r,n))},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(tv),iv=function(){this._li=null,this._interiorIntersections=null;var t=arguments[0];this._li=t,this._interiorIntersections=new fg};iv.prototype.processIntersections=function(t,e,n,r){var i=this;if(t===n&&e===r)return null;var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];if(this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var c=0;c<this._li.getIntersectionNum();c++)i._interiorIntersections.add(i._li.getIntersection(c));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},iv.prototype.isDone=function(){return!1},iv.prototype.getInteriorIntersections=function(){return this._interiorIntersections},iv.prototype.interfaces_=function(){return[By]},iv.prototype.getClass=function(){return iv};var ov=function(){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var t=arguments[0];this._pm=t,this._li=new Hf,this._li.setPrecisionModel(t),this._scaleFactor=t.getScale()};ov.prototype.checkCorrectness=function(t){var e=oy.getNodedSubstrings(t),n=new Zy(e);try{n.checkValid()}catch(r){if(!(r instanceof Of))throw r;r.printStackTrace()}finally{}},ov.prototype.getNodedSubstrings=function(){return oy.getNodedSubstrings(this._nodedSegStrings)},ov.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},ov.prototype.findInteriorIntersections=function(t,e){var n=new iv(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},ov.prototype.computeVertexSnaps=function(){var t=this;if(mf(arguments[0],cg))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.computeVertexSnaps(r)}else if(arguments[0]instanceof oy)for(var i=arguments[0],o=i.getCoordinates(),s=0;s<o.length;s++){var a=new Qy(o[s],t._scaleFactor,t._li),u=t._pointSnapper.snap(a,i,s);u&&i.addIntersection(o[s],s)}},ov.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new fy,this._pointSnapper=new ev(this._noder.getIndex()),this.snapRound(t,this._li)},ov.prototype.computeIntersectionSnaps=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=new Qy(r,e._scaleFactor,e._li);e._pointSnapper.snap(i)}},ov.prototype.interfaces_=function(){return[hy]},ov.prototype.getClass=function(){return ov};var sv=function(){if(this._argGeom=null,this._distance=null,this._bufParams=new dy,this._resultGeometry=null,this._saveException=null,1===arguments.length){var t=arguments[0];this._argGeom=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._argGeom=e,this._bufParams=n}},av={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};sv.prototype.bufferFixedPrecision=function(t){var e=new Jy(new ov(new od(1)),t.getScale()),n=new Wy(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},sv.prototype.bufferReducedPrecision=function(){var t=this;if(0===arguments.length){for(var e=sv.MAX_PRECISION_DIGITS;e>=0;e--){try{t.bufferReducedPrecision(e)}catch(n){if(!(n instanceof xd))throw n;t._saveException=n}finally{}if(null!==t._resultGeometry)return null}throw this._saveException}if(1===arguments.length){var r=arguments[0],i=sv.precisionScaleFactor(this._argGeom,this._distance,r),o=new od(i);
this.bufferFixedPrecision(o)}},sv.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===od.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},sv.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},sv.prototype.bufferOriginalPrecision=function(){try{var t=new Wy(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(e){if(!(e instanceof jf))throw e;this._saveException=e}finally{}},sv.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},sv.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},sv.prototype.interfaces_=function(){return[]},sv.prototype.getClass=function(){return sv},sv.bufferOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new sv(t),r=n.getResultGeometry(e);return r}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof $f&&"number"==typeof arguments[1]){var i=arguments[0],o=arguments[1],s=arguments[2],a=new sv(i);a.setQuadrantSegments(s);var u=a.getResultGeometry(o);return u}if(arguments[2]instanceof dy&&arguments[0]instanceof $f&&"number"==typeof arguments[1]){var c=arguments[0],l=arguments[1],h=arguments[2],p=new sv(c,h),f=p.getResultGeometry(l);return f}}else if(4===arguments.length){var g=arguments[0],d=arguments[1],y=arguments[2],v=arguments[3],_=new sv(g);_.setQuadrantSegments(y),_.setEndCapStyle(v);var m=_.getResultGeometry(d);return m}},sv.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=xf.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=e>0?e:0,s=i+2*o,a=Math.trunc(Math.log(s)/Math.log(10)+1),u=n-a,c=Math.pow(10,u);return c},av.CAP_ROUND.get=function(){return dy.CAP_ROUND},av.CAP_BUTT.get=function(){return dy.CAP_FLAT},av.CAP_FLAT.get=function(){return dy.CAP_FLAT},av.CAP_SQUARE.get=function(){return dy.CAP_SQUARE},av.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(sv,av);var uv=function(){this._pt=[new ff,new ff],this._distance=uf.NaN,this._isNull=!0};uv.prototype.getCoordinates=function(){return this._pt},uv.prototype.getCoordinate=function(t){return this._pt[t]},uv.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},uv.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},uv.prototype.getDistance=function(){return this._distance},uv.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},uv.prototype.interfaces_=function(){return[]},uv.prototype.getClass=function(){return uv};var cv=function(){};cv.prototype.interfaces_=function(){return[]},cv.prototype.getClass=function(){return cv},cv.computeDistance=function(){if(arguments[2]instanceof uv&&arguments[0]instanceof zg&&arguments[1]instanceof ff)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=t.getCoordinates(),i=new sy,o=0;o<r.length-1;o++){i.setCoordinates(r[o],r[o+1]);var s=i.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof uv&&arguments[0]instanceof Yg&&arguments[1]instanceof ff){var a=arguments[0],u=arguments[1],c=arguments[2];cv.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)cv.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof uv&&arguments[0]instanceof $f&&arguments[1]instanceof ff){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof zg)cv.computeDistance(h,p,f);else if(h instanceof Yg)cv.computeDistance(h,p,f);else if(h instanceof Tg)for(var g=h,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);cv.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof uv&&arguments[0]instanceof sy&&arguments[1]instanceof ff){var v=arguments[0],_=arguments[1],m=arguments[2],x=v.closestPoint(_);m.setMinimum(x,_)}};var lv=function(t){this._maxPtDist=new uv,this._inputGeom=t||null},hv={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};lv.prototype.computeMaxMidpointDistance=function(t){var e=new fv(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},lv.prototype.computeMaxVertexDistance=function(t){var e=new pv(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},lv.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},lv.prototype.getDistancePoints=function(){return this._maxPtDist},lv.prototype.interfaces_=function(){return[]},lv.prototype.getClass=function(){return lv},hv.MaxPointDistanceFilter.get=function(){return pv},hv.MaxMidpointDistanceFilter.get=function(){return fv},Object.defineProperties(lv,hv);var pv=function(t){this._maxPtDist=new uv,this._minPtDist=new uv,this._geom=t||null};pv.prototype.filter=function(t){this._minPtDist.initialize(),cv.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},pv.prototype.getMaxPointDistance=function(){return this._maxPtDist},pv.prototype.interfaces_=function(){return[ng]},pv.prototype.getClass=function(){return pv};var fv=function(t){this._maxPtDist=new uv,this._minPtDist=new uv,this._geom=t||null};fv.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new ff((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),cv.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},fv.prototype.isDone=function(){return!1},fv.prototype.isGeometryChanged=function(){return!1},fv.prototype.getMaxPointDistance=function(){return this._maxPtDist},fv.prototype.interfaces_=function(){return[Rg]},fv.prototype.getClass=function(){return fv};var gv=function(t){this._comps=t||null};gv.prototype.filter=function(t){t instanceof Yg&&this._comps.add(t)},gv.prototype.interfaces_=function(){return[Og]},gv.prototype.getClass=function(){return gv},gv.getPolygons=function(){if(1===arguments.length){var t=arguments[0];return gv.getPolygons(t,new fg)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Yg?n.add(e):e instanceof Tg&&e.apply(new gv(n)),n}};var dv=function(){if(this._lines=null,this._isForcedToLineString=!1,1===arguments.length){var t=arguments[0];this._lines=t}else if(2===arguments.length){var e=arguments[0],n=arguments[1];this._lines=e,this._isForcedToLineString=n}};dv.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Hg){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof zg&&this._lines.add(t)},dv.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},dv.prototype.interfaces_=function(){return[Qf]},dv.prototype.getClass=function(){return dv},dv.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(dv.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(dv.getLines(e,n))}},dv.getLines=function(){if(1===arguments.length){var t=arguments[0];return dv.getLines(t,!1)}if(2===arguments.length){if(mf(arguments[0],cg)&&mf(arguments[1],cg)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var i=r.next();dv.getLines(i,n)}return n}if(arguments[0]instanceof $f&&"boolean"==typeof arguments[1]){var o=arguments[0],s=arguments[1],a=new fg;return o.apply(new dv(a,s)),a}if(arguments[0]instanceof $f&&mf(arguments[1],cg)){var u=arguments[0],c=arguments[1];return u instanceof zg?c.add(u):u.apply(new dv(c)),c}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&mf(arguments[0],cg)&&mf(arguments[1],cg)){for(var l=arguments[0],h=arguments[1],p=arguments[2],f=l.iterator();f.hasNext();){var g=f.next();dv.getLines(g,h,p)}return h}if("boolean"==typeof arguments[2]&&arguments[0]instanceof $f&&mf(arguments[1],cg)){var d=arguments[0],y=arguments[1],v=arguments[2];return d.apply(new dv(y,v)),y}}};var yv=function(){if(this._boundaryRule=rg.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0===arguments.length);else if(1===arguments.length){var t=arguments[0];if(null===t)throw new af("Rule must be non-null");this._boundaryRule=t}};yv.prototype.locateInternal=function(){var t=this;if(arguments[0]instanceof ff&&arguments[1]instanceof Yg){var e=arguments[0],n=arguments[1];if(n.isEmpty())return vf.EXTERIOR;var r=n.getExteriorRing(),i=this.locateInPolygonRing(e,r);if(i===vf.EXTERIOR)return vf.EXTERIOR;if(i===vf.BOUNDARY)return vf.BOUNDARY;for(var o=0;o<n.getNumInteriorRing();o++){var s=n.getInteriorRingN(o),a=t.locateInPolygonRing(e,s);if(a===vf.INTERIOR)return vf.EXTERIOR;if(a===vf.BOUNDARY)return vf.BOUNDARY}return vf.INTERIOR}if(arguments[0]instanceof ff&&arguments[1]instanceof zg){var u=arguments[0],c=arguments[1];if(!c.getEnvelopeInternal().intersects(u))return vf.EXTERIOR;var l=c.getCoordinates();return c.isClosed()||!u.equals(l[0])&&!u.equals(l[l.length-1])?Zf.isOnLine(u,l)?vf.INTERIOR:vf.EXTERIOR:vf.BOUNDARY}if(arguments[0]instanceof ff&&arguments[1]instanceof Xg){var h=arguments[0],p=arguments[1],f=p.getCoordinate();return f.equals2D(h)?vf.INTERIOR:vf.EXTERIOR}},yv.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?Zf.locatePointInRing(t,e.getCoordinates()):vf.EXTERIOR},yv.prototype.intersects=function(t,e){return this.locate(t,e)!==vf.EXTERIOR},yv.prototype.updateLocationInfo=function(t){t===vf.INTERIOR&&(this._isIn=!0),t===vf.BOUNDARY&&this._numBoundaries++},yv.prototype.computeLocation=function(t,e){var n=this;if(e instanceof Xg&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof zg)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Yg)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Ag)for(var r=e,i=0;i<r.getNumGeometries();i++){var o=r.getGeometryN(i);n.updateLocationInfo(n.locateInternal(t,o))}else if(e instanceof Wg)for(var s=e,a=0;a<s.getNumGeometries();a++){var u=s.getGeometryN(a);n.updateLocationInfo(n.locateInternal(t,u))}else if(e instanceof Tg)for(var c=new Ry(e);c.hasNext();){var l=c.next();l!==e&&n.computeLocation(t,l)}},yv.prototype.locate=function(t,e){return e.isEmpty()?vf.EXTERIOR:e instanceof zg?this.locateInternal(t,e):e instanceof Yg?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?vf.BOUNDARY:this._numBoundaries>0||this._isIn?vf.INTERIOR:vf.EXTERIOR)},yv.prototype.interfaces_=function(){return[]},yv.prototype.getClass=function(){return yv};var vv=function Xm(){if(this._component=null,this._segIndex=null,this._pt=null,2===arguments.length){var t=arguments[0],e=arguments[1];Xm.call(this,t,Xm.INSIDE_AREA,e)}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._component=n,this._segIndex=r,this._pt=i}},_v={INSIDE_AREA:{configurable:!0}};vv.prototype.isInsideArea=function(){return this._segIndex===vv.INSIDE_AREA},vv.prototype.getCoordinate=function(){return this._pt},vv.prototype.getGeometryComponent=function(){return this._component},vv.prototype.getSegmentIndex=function(){return this._segIndex},vv.prototype.interfaces_=function(){return[]},vv.prototype.getClass=function(){return vv},_v.INSIDE_AREA.get=function(){return-1},Object.defineProperties(vv,_v);var mv=function(t){this._pts=t||null};mv.prototype.filter=function(t){t instanceof Xg&&this._pts.add(t)},mv.prototype.interfaces_=function(){return[Og]},mv.prototype.getClass=function(){return mv},mv.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof Xg?Yd.singletonList(t):mv.getPoints(t,new fg)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof Xg?n.add(e):e instanceof Tg&&e.apply(new mv(n)),n}};var xv=function(){this._locations=null;var t=arguments[0];this._locations=t};xv.prototype.filter=function(t){(t instanceof Xg||t instanceof zg||t instanceof Yg)&&this._locations.add(new vv(t,0,t.getCoordinate()))},xv.prototype.interfaces_=function(){return[Og]},xv.prototype.getClass=function(){return xv},xv.getLocations=function(t){var e=new fg;return t.apply(new xv(e)),e};var Ev=function(){if(this._geom=null,this._terminateDistance=0,this._ptLocator=new yv,this._minDistanceLocation=null,this._minDistance=uf.MAX_VALUE,2===arguments.length){var t=arguments[0],e=arguments[1];this._geom=[t,e],this._terminateDistance=0}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._geom=new Array(2).fill(null),this._geom[0]=n,this._geom[1]=r,this._terminateDistance=i}};Ev.prototype.computeContainmentDistance=function(){var t=this;if(0===arguments.length){var e=new Array(2).fill(null);if(this.computeContainmentDistance(0,e),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,e)}else if(2===arguments.length){var n=arguments[0],r=arguments[1],i=1-n,o=gv.getPolygons(this._geom[n]);if(o.size()>0){var s=xv.getLocations(this._geom[i]);if(this.computeContainmentDistance(s,o,r),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[i]=r[0],this._minDistanceLocation[n]=r[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&mf(arguments[0],pg)&&mf(arguments[1],pg)){for(var a=arguments[0],u=arguments[1],c=arguments[2],l=0;l<a.size();l++)for(var h=a.get(l),p=0;p<u.size();p++)if(t.computeContainmentDistance(h,u.get(p),c),t._minDistance<=t._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof vv&&arguments[1]instanceof Yg){var f=arguments[0],g=arguments[1],d=arguments[2],y=f.getCoordinate();if(vf.EXTERIOR!==this._ptLocator.locate(y,g))return this._minDistance=0,d[0]=f,d[1]=new vv(g,y),null}},Ev.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Ev.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=dv.getLines(this._geom[0]),n=dv.getLines(this._geom[1]),r=mv.getPoints(this._geom[0]),i=mv.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},Ev.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},Ev.prototype.updateMinDistance=function(t,e){return null===t[0]?null:void(e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1]))},Ev.prototype.nearestPoints=function(){this.computeMinDistance();var t=[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()];return t},Ev.prototype.computeMinDistance=function(){var t=this;if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof zg&&arguments[1]instanceof Xg){var e=arguments[0],n=arguments[1],r=arguments[2];if(e.getEnvelopeInternal().distance(n.getEnvelopeInternal())>this._minDistance)return null;for(var i=e.getCoordinates(),o=n.getCoordinate(),s=0;s<i.length-1;s++){var a=Zf.distancePointLine(o,i[s],i[s+1]);if(a<t._minDistance){t._minDistance=a;var u=new sy(i[s],i[s+1]),c=u.closestPoint(o);r[0]=new vv(e,s,c),r[1]=new vv(n,0,o)}if(t._minDistance<=t._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof zg&&arguments[1]instanceof zg){var l=arguments[0],h=arguments[1],p=arguments[2];if(l.getEnvelopeInternal().distance(h.getEnvelopeInternal())>this._minDistance)return null;for(var f=l.getCoordinates(),g=h.getCoordinates(),d=0;d<f.length-1;d++)for(var y=0;y<g.length-1;y++){var v=Zf.distanceLineLine(f[d],f[d+1],g[y],g[y+1]);if(v<t._minDistance){t._minDistance=v;var _=new sy(f[d],f[d+1]),m=new sy(g[y],g[y+1]),x=_.closestPoints(m);p[0]=new vv(l,d,x[0]),p[1]=new vv(h,y,x[1])}if(t._minDistance<=t._terminateDistance)return null}}},Ev.prototype.computeMinDistancePoints=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s),u=o.getCoordinate().distance(a.getCoordinate());if(u<r._minDistance&&(r._minDistance=u,n[0]=new vv(o,0,o.getCoordinate()),n[1]=new vv(a,0,a.getCoordinate())),r._minDistance<=r._terminateDistance)return null}},Ev.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new af("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},Ev.prototype.computeMinDistanceLines=function(t,e,n){for(var r=this,i=0;i<t.size();i++)for(var o=t.get(i),s=0;s<e.size();s++){var a=e.get(s);if(r.computeMinDistance(o,a,n),r._minDistance<=r._terminateDistance)return null}},Ev.prototype.interfaces_=function(){return[]},Ev.prototype.getClass=function(){return Ev},Ev.distance=function(t,e){var n=new Ev(t,e);return n.distance()},Ev.isWithinDistance=function(t,e,n){var r=new Ev(t,e,n);return r.distance()<=n},Ev.nearestPoints=function(t,e){var n=new Ev(t,e);return n.nearestPoints()};var wv=function(){this._pt=[new ff,new ff],this._distance=uf.NaN,this._isNull=!0};wv.prototype.getCoordinates=function(){return this._pt},wv.prototype.getCoordinate=function(t){return this._pt[t]},wv.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},wv.prototype.initialize=function(){if(0===arguments.length)this._isNull=!0;else if(2===arguments.length){var t=arguments[0],e=arguments[1];this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1}},wv.prototype.toString=function(){return zf.toLineString(this._pt[0],this._pt[1])},wv.prototype.getDistance=function(){return this._distance},wv.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},wv.prototype.interfaces_=function(){return[]},wv.prototype.getClass=function(){return wv};var bv=function(){};bv.prototype.interfaces_=function(){return[]},bv.prototype.getClass=function(){return bv},bv.computeDistance=function(){if(arguments[2]instanceof wv&&arguments[0]instanceof zg&&arguments[1]instanceof ff)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new sy,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var s=r.closestPoint(e);n.setMinimum(s,e)}else if(arguments[2]instanceof wv&&arguments[0]instanceof Yg&&arguments[1]instanceof ff){var a=arguments[0],u=arguments[1],c=arguments[2];bv.computeDistance(a.getExteriorRing(),u,c);for(var l=0;l<a.getNumInteriorRing();l++)bv.computeDistance(a.getInteriorRingN(l),u,c)}else if(arguments[2]instanceof wv&&arguments[0]instanceof $f&&arguments[1]instanceof ff){var h=arguments[0],p=arguments[1],f=arguments[2];if(h instanceof zg)bv.computeDistance(h,p,f);else if(h instanceof Yg)bv.computeDistance(h,p,f);else if(h instanceof Tg)for(var g=h,d=0;d<g.getNumGeometries();d++){var y=g.getGeometryN(d);bv.computeDistance(y,p,f)}else f.setMinimum(h.getCoordinate(),p)}else if(arguments[2]instanceof wv&&arguments[0]instanceof sy&&arguments[1]instanceof ff){var v=arguments[0],_=arguments[1],m=arguments[2],x=v.closestPoint(_);m.setMinimum(x,_)}};var Iv=function(){this._g0=null,this._g1=null,this._ptDist=new wv,this._densifyFrac=0;var t=arguments[0],e=arguments[1];this._g0=t,this._g1=e},Nv={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Iv.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Iv.prototype.setDensifyFraction=function(t){if(t>1||t<=0)throw new af("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Iv.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Iv.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Iv.prototype.computeOrientedDistance=function(t,e,n){var r=new Cv(e);if(t.apply(r),n.setMaximum(r.getMaxPointDistance()),this._densifyFrac>0){var i=new Sv(e,this._densifyFrac);t.apply(i),n.setMaximum(i.getMaxPointDistance())}},Iv.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Iv.prototype.interfaces_=function(){return[]},Iv.prototype.getClass=function(){return Iv},Iv.distance=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Iv(t,e);return n.distance()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new Iv(r,i);return s.setDensifyFraction(o),s.distance()}},Nv.MaxPointDistanceFilter.get=function(){return Cv},Nv.MaxDensifiedByFractionDistanceFilter.get=function(){return Sv},Object.defineProperties(Iv,Nv);var Cv=function(){this._maxPtDist=new wv,this._minPtDist=new wv,this._euclideanDist=new bv,this._geom=null;var t=arguments[0];this._geom=t};Cv.prototype.filter=function(t){this._minPtDist.initialize(),bv.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Cv.prototype.getMaxPointDistance=function(){return this._maxPtDist},Cv.prototype.interfaces_=function(){return[ng]},Cv.prototype.getClass=function(){return Cv};var Sv=function(){this._maxPtDist=new wv,this._minPtDist=new wv,this._geom=null,this._numSubSegs=0;var t=arguments[0],e=arguments[1];this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/e))};Sv.prototype.filter=function(t,e){var n=this;if(0===e)return null;for(var r=t.getCoordinate(e-1),i=t.getCoordinate(e),o=(i.x-r.x)/this._numSubSegs,s=(i.y-r.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var u=r.x+a*o,c=r.y+a*s,l=new ff(u,c);n._minPtDist.initialize(),bv.computeDistance(n._geom,l,n._minPtDist),n._maxPtDist.setMaximum(n._minPtDist)}},Sv.prototype.isDone=function(){return!1},Sv.prototype.isGeometryChanged=function(){return!1},Sv.prototype.getMaxPointDistance=function(){return this._maxPtDist},Sv.prototype.interfaces_=function(){return[Rg]},Sv.prototype.getClass=function(){return Sv};var Mv=function(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null},Lv={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Mv.prototype.checkMaximumDistance=function(t,e,n){var r=new Iv(e,t);if(r.setDensifyFraction(.25),this._maxDistanceFound=r.orientedDistance(),this._maxDistanceFound>n){this._isValid=!1;var i=r.getCoordinates();this._errorLocation=i[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+zf.toLineString(i[0],i[1])+")"}},Mv.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Mv.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(this._bufDistance>0?this.checkPositiveValid():this.checkNegativeValid(),Mv.VERBOSE&&Tf.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Mv.prototype.checkNegativeValid=function(){if(!(this._input instanceof Yg||this._input instanceof Wg||this._input instanceof Tg))return null;var t=this.getPolygonLines(this._input);return this.checkMinimumDistance(t,this._result,this._minValidDistance),this._isValid?void this.checkMaximumDistance(t,this._result,this._maxValidDistance):null},Mv.prototype.getErrorIndicator=function(){return this._errorIndicator},Mv.prototype.checkMinimumDistance=function(t,e,n){var r=new Ev(t,e,n);if(this._minDistanceFound=r.distance(),this._minDistanceFound<n){this._isValid=!1;var i=r.nearestPoints();this._errorLocation=r.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(i),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+zf.toLineString(i[0],i[1])+" )"}},Mv.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();return this.checkMinimumDistance(this._input,t,this._minValidDistance),this._isValid?void this.checkMaximumDistance(this._input,t,this._maxValidDistance):null},Mv.prototype.getErrorLocation=function(){return this._errorLocation},Mv.prototype.getPolygonLines=function(t){for(var e=new fg,n=new dv(e),r=gv.getPolygons(t),i=r.iterator();i.hasNext();){var o=i.next();o.apply(n)}return t.getFactory().buildGeometry(e)},Mv.prototype.getErrorMessage=function(){return this._errMsg},Mv.prototype.interfaces_=function(){return[]},Mv.prototype.getClass=function(){return Mv},Lv.VERBOSE.get=function(){return!1},Lv.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Mv,Lv);var Pv=function(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null},Ov={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Pv.prototype.isValid=function(){return this.checkPolygonal(),this._isValid?(this.checkExpectedEmpty(),this._isValid?(this.checkEnvelope(),this._isValid?(this.checkArea(),this._isValid?(this.checkDistance(),this._isValid):this._isValid):this._isValid):this._isValid):this._isValid},Pv.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Pv.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Df(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Df(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Pv.prototype.checkDistance=function(){var t=new Mv(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Pv.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();this._distance>0&&t>e&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Pv.prototype.checkPolygonal=function(){this._result instanceof Yg||this._result instanceof Wg||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Pv.prototype.getErrorIndicator=function(){return this._errorIndicator},Pv.prototype.getErrorLocation=function(){return this._errorLocation},Pv.prototype.checkExpectedEmpty=function(){return this._input.getDimension()>=2?null:this._distance>0?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Pv.prototype.report=function(t){return Pv.VERBOSE?void Tf.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED")):null},Pv.prototype.getErrorMessage=function(){return this._errorMsg},Pv.prototype.interfaces_=function(){return[]},Pv.prototype.getClass=function(){return Pv},Pv.isValidMsg=function(t,e,n){var r=new Pv(t,e,n);return r.isValid()?null:r.getErrorMessage()},Pv.isValid=function(t,e,n){var r=new Pv(t,e,n);return!!r.isValid()},Ov.VERBOSE.get=function(){return!1},Ov.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Pv,Ov);var Rv=function(){this._pts=null,this._data=null;var t=arguments[0],e=arguments[1];this._pts=t,this._data=e};Rv.prototype.getCoordinates=function(){return this._pts},Rv.prototype.size=function(){return this._pts.length},Rv.prototype.getCoordinate=function(t){return this._pts[t]},Rv.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Rv.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:ny.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Rv.prototype.setData=function(t){this._data=t},Rv.prototype.getData=function(){return this._data},Rv.prototype.toString=function(){return zf.toLineString(new td(this._pts))},Rv.prototype.interfaces_=function(){return[ry]},Rv.prototype.getClass=function(){return Rv};var Tv=function(){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new fg,this._intersectionCount=0,this._keepIntersections=!0;var t=arguments[0];this._li=t,this._interiorIntersection=null};Tv.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Tv.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Tv.prototype.getIntersectionSegments=function(){return this._intSegments},Tv.prototype.count=function(){return this._intersectionCount},Tv.prototype.getIntersections=function(){return this._intersections},Tv.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Tv.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Tv.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly){var i=this.isEndSegment(t,e)||this.isEndSegment(n,r);if(!i)return null}var o=t.getCoordinates()[e],s=t.getCoordinates()[e+1],a=n.getCoordinates()[r],u=n.getCoordinates()[r+1];this._li.computeIntersection(o,s,a,u),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=o,this._intSegments[1]=s,this._intSegments[2]=a,this._intSegments[3]=u,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Tv.prototype.isEndSegment=function(t,e){
return 0===e||e>=t.size()-2},Tv.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Tv.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Tv.prototype.interfaces_=function(){return[By]},Tv.prototype.getClass=function(){return Tv},Tv.createAllIntersectionsFinder=function(t){var e=new Tv(t);return e.setFindAllIntersections(!0),e},Tv.createAnyIntersectionFinder=function(t){return new Tv(t)},Tv.createIntersectionCounter=function(t){var e=new Tv(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};var Av=function(){this._li=new Hf,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0;var t=arguments[0];this._segStrings=t};Av.prototype.execute=function(){return null!==this._segInt?null:void this.checkInteriorIntersections()},Av.prototype.getIntersections=function(){return this._segInt.getIntersections()},Av.prototype.isValid=function(){return this.execute(),this._isValid},Av.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Av.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Tv(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new fy;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Av.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new xd(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Av.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+zf.toLineString(t[0],t[1])+" and "+zf.toLineString(t[2],t[3])},Av.prototype.interfaces_=function(){return[]},Av.prototype.getClass=function(){return Av},Av.computeIntersections=function(t){var e=new Av(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};var Dv=function Um(){this._nv=null;var t=arguments[0];this._nv=new Av(Um.toSegmentStrings(t))};Dv.prototype.checkValid=function(){this._nv.checkValid()},Dv.prototype.interfaces_=function(){return[]},Dv.prototype.getClass=function(){return Dv},Dv.toSegmentStrings=function(t){for(var e=new fg,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Rv(r.getCoordinates(),r))}return e},Dv.checkValid=function(t){var e=new Dv(t);e.checkValid()};var Fv=function(t){this._mapOp=t};Fv.prototype.map=function(t){for(var e=this,n=new fg,r=0;r<t.getNumGeometries();r++){var i=e._mapOp.map(t.getGeometryN(r));i.isEmpty()||n.add(i)}return t.getFactory().createGeometryCollection(cd.toGeometryArray(n))},Fv.prototype.interfaces_=function(){return[]},Fv.prototype.getClass=function(){return Fv},Fv.map=function(t,e){var n=new Fv(e);return n.map(t)};var qv=function(){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new fg,this._resultLineList=new fg;var t=arguments[0],e=arguments[1],n=arguments[2];this._op=t,this._geometryFactory=e,this._ptLocator=n};qv.prototype.collectLines=function(t){for(var e=this,n=this._op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next();e.collectLineEdge(r,t,e._lineEdgesList),e.collectBoundaryTouchEdge(r,t,e._lineEdgesList)}},qv.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},qv.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},qv.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!v_.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},qv.prototype.findCoveredLineEdges=function(){for(var t=this,e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();n.getEdges().findCoveredLineEdges()}for(var r=this._op.getGraph().getEdgeEnds().iterator();r.hasNext();){var i=r.next(),o=i.getEdge();if(i.isLineEdge()&&!o.isCoveredSet()){var s=t._op.isCoveredByA(i.getCoordinate());o.setCovered(s)}}},qv.prototype.labelIsolatedLines=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next(),i=r.getLabel();r.isIsolated()&&(i.isNull(0)?e.labelIsolatedLine(r,0):e.labelIsolatedLine(r,1))}},qv.prototype.buildLines=function(t){for(var e=this,n=this._lineEdgesList.iterator();n.hasNext();){var r=n.next(),i=e._geometryFactory.createLineString(r.getCoordinates());e._resultLineList.add(i),r.setInResult(!0)}},qv.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()?null:t.isVisited()?null:t.isInteriorAreaEdge()?null:t.getEdge().isInResult()?null:(Uf.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(v_.isResultOfOp(r,e)&&e===v_.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},qv.prototype.interfaces_=function(){return[]},qv.prototype.getClass=function(){return qv};var Gv=function(){this._op=null,this._geometryFactory=null,this._resultPointList=new fg;var t=arguments[0],e=arguments[1];this._op=t,this._geometryFactory=e};Gv.prototype.filterCoveredNodeToPoint=function(t){var e=t.getCoordinate();if(!this._op.isCoveredByLA(e)){var n=this._geometryFactory.createPoint(e);this._resultPointList.add(n)}},Gv.prototype.extractNonCoveredResultNodes=function(t){for(var e=this,n=this._op.getGraph().getNodes().iterator();n.hasNext();){var r=n.next();if(!(r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==v_.INTERSECTION)){var i=r.getLabel();v_.isResultOfOp(i,t)&&e.filterCoveredNodeToPoint(r)}}},Gv.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Gv.prototype.interfaces_=function(){return[]},Gv.prototype.getClass=function(){return Gv};var Bv=function(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1};Bv.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Bv.prototype.transformPolygon=function(t,e){var n=this,r=!0,i=this.transformLinearRing(t.getExteriorRing(),t);null!==i&&i instanceof Hg&&!i.isEmpty()||(r=!1);for(var o=new fg,s=0;s<t.getNumInteriorRing();s++){var a=n.transformLinearRing(t.getInteriorRingN(s),t);null===a||a.isEmpty()||(a instanceof Hg||(r=!1),o.add(a))}if(r)return this._factory.createPolygon(i,o.toArray([]));var u=new fg;return null!==i&&u.add(i),u.addAll(o),this._factory.buildGeometry(u)},Bv.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Bv.prototype.getInputGeometry=function(){return this._inputGeom},Bv.prototype.transformMultiLineString=function(t,e){for(var n=this,r=new fg,i=0;i<t.getNumGeometries();i++){var o=n.transformLineString(t.getGeometryN(i),t);null!==o&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)},Bv.prototype.transformCoordinates=function(t,e){return this.copy(t)},Bv.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Bv.prototype.transformMultiPoint=function(t,e){for(var n=this,r=new fg,i=0;i<t.getNumGeometries();i++){var o=n.transformPoint(t.getGeometryN(i),t);null!==o&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)},Bv.prototype.transformMultiPolygon=function(t,e){for(var n=this,r=new fg,i=0;i<t.getNumGeometries();i++){var o=n.transformPolygon(t.getGeometryN(i),t);null!==o&&(o.isEmpty()||r.add(o))}return this._factory.buildGeometry(r)},Bv.prototype.copy=function(t){return t.copy()},Bv.prototype.transformGeometryCollection=function(t,e){for(var n=this,r=new fg,i=0;i<t.getNumGeometries();i++){var o=n.transform(t.getGeometryN(i));null!==o&&(n._pruneEmptyGeometry&&o.isEmpty()||r.add(o))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(cd.toGeometryArray(r)):this._factory.buildGeometry(r)},Bv.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof Xg)return this.transformPoint(t,null);if(t instanceof Vg)return this.transformMultiPoint(t,null);if(t instanceof Hg)return this.transformLinearRing(t,null);if(t instanceof zg)return this.transformLineString(t,null);if(t instanceof Ag)return this.transformMultiLineString(t,null);if(t instanceof Yg)return this.transformPolygon(t,null);if(t instanceof Wg)return this.transformMultiPolygon(t,null);if(t instanceof Tg)return this.transformGeometryCollection(t,null);throw new af("Unknown Geometry subtype: "+t.getClass().getName())},Bv.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return r>0&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Bv.prototype.interfaces_=function(){return[]},Bv.prototype.getClass=function(){return Bv};var kv=function Ym(){if(this._snapTolerance=0,this._srcPts=null,this._seg=new sy,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof zg&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];Ym.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&"number"==typeof arguments[1]){var n=arguments[0],r=arguments[1];this._srcPts=n,this._isClosed=Ym.isClosed(n),this._snapTolerance=r}};kv.prototype.snapVertices=function(t,e){for(var n=this,r=this._isClosed?t.size()-1:t.size(),i=0;i<r;i++){var o=t.get(i),s=n.findSnapForVertex(o,e);null!==s&&(t.set(i,new ff(s)),0===i&&n._isClosed&&t.set(t.size()-1,new ff(s)))}},kv.prototype.findSnapForVertex=function(t,e){for(var n=this,r=0;r<e.length;r++){if(t.equals2D(e[r]))return null;if(t.distance(e[r])<n._snapTolerance)return e[r]}return null},kv.prototype.snapTo=function(t){var e=new dg(this._srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},kv.prototype.snapSegments=function(t,e){var n=this;if(0===e.length)return null;var r=e.length;e[0].equals2D(e[e.length-1])&&(r=e.length-1);for(var i=0;i<r;i++){var o=e[i],s=n.findSegmentIndexToSnap(o,t);s>=0&&t.add(s+1,new ff(o),!1)}},kv.prototype.findSegmentIndexToSnap=function(t,e){for(var n=this,r=uf.MAX_VALUE,i=-1,o=0;o<e.size()-1;o++){if(n._seg.p0=e.get(o),n._seg.p1=e.get(o+1),n._seg.p0.equals2D(t)||n._seg.p1.equals2D(t)){if(n._allowSnappingToSourceVertices)continue;return-1}var s=n._seg.distance(t);s<n._snapTolerance&&s<r&&(r=s,i=o)}return i},kv.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},kv.prototype.interfaces_=function(){return[]},kv.prototype.getClass=function(){return kv},kv.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};var zv=function(t){this._srcGeom=t||null},jv={SNAP_PRECISION_FACTOR:{configurable:!0}};zv.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t),r=new Xv(e,n);return r.transform(this._srcGeom)},zv.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Xv(t,n,(!0)),i=r.transform(this._srcGeom),o=i;return e&&mf(o,Ug)&&(o=i.buffer(0)),o},zv.prototype.computeSnapTolerance=function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},zv.prototype.extractTargetCoordinates=function(t){for(var e=new yu,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},zv.prototype.computeMinimumSegmentLength=function(t){for(var e=uf.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},zv.prototype.interfaces_=function(){return[]},zv.prototype.getClass=function(){return zv},zv.snap=function(t,e,n){var r=new Array(2).fill(null),i=new zv(t);r[0]=i.snapTo(e,n);var o=new zv(e);return r[1]=o.snapTo(r[0],n),r},zv.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t=arguments[0],e=zv.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===od.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(zv.computeOverlaySnapTolerance(i),zv.computeOverlaySnapTolerance(o))}},zv.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*zv.SNAP_PRECISION_FACTOR;return r},zv.snapToSelf=function(t,e,n){var r=new zv(t);return r.snapToSelf(e,n)},jv.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(zv,jv);var Xv=function(t){function e(e,n,r){t.call(this),this._snapTolerance=e||null,this._snapPts=n||null,this._isSelfSnap=void 0!==r&&r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapLine=function(t,e){var n=new kv(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},e.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(Bv),Uv=function(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null};Uv.prototype.getCommon=function(){return uf.longBitsToDouble(this._commonBits)},Uv.prototype.add=function(t){var e=uf.doubleToLongBits(t);if(this._isFirst)return this._commonBits=e,this._commonSignExp=Uv.signExpBits(this._commonBits),this._isFirst=!1,null;var n=Uv.signExpBits(e);return n!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Uv.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Uv.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Uv.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=uf.longBitsToDouble(t),n=uf.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,i=r.substring(r.length-64),o=i.substring(0,1)+"  "+i.substring(1,12)+"(exp) "+i.substring(12)+" [ "+e+" ]";return o}},Uv.prototype.interfaces_=function(){return[]},Uv.prototype.getClass=function(){return Uv},Uv.getBit=function(t,e){var n=1<<e;return 0!==(t&n)?1:0},Uv.signExpBits=function(t){return t>>52},Uv.zeroLowerBits=function(t,e){var n=(1<<e)-1,r=~n,i=t&r;return i},Uv.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Uv.getBit(t,r)!==Uv.getBit(e,r))return n;n++}return 52};var Yv=function(){this._commonCoord=null,this._ccFilter=new Hv},Vv={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Yv.prototype.addCommonBits=function(t){var e=new Wv(this._commonCoord);t.apply(e),t.geometryChanged()},Yv.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new ff(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Wv(e);return t.apply(n),t.geometryChanged(),t},Yv.prototype.getCommonCoordinate=function(){return this._commonCoord},Yv.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Yv.prototype.interfaces_=function(){return[]},Yv.prototype.getClass=function(){return Yv},Vv.CommonCoordinateFilter.get=function(){return Hv},Vv.Translater.get=function(){return Wv},Object.defineProperties(Yv,Vv);var Hv=function(){this._commonBitsX=new Uv,this._commonBitsY=new Uv};Hv.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Hv.prototype.getCommonCoordinate=function(){return new ff(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Hv.prototype.interfaces_=function(){return[ng]},Hv.prototype.getClass=function(){return Hv};var Wv=function(){this.trans=null;var t=arguments[0];this.trans=t};Wv.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Wv.prototype.isDone=function(){return!1},Wv.prototype.isGeometryChanged=function(){return!0},Wv.prototype.interfaces_=function(){return[Rg]},Wv.prototype.getClass=function(){return Wv};var Jv=function(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()};Jv.prototype.selfSnap=function(t){var e=new zv(t),n=e.snapTo(t,this._snapTolerance);return n},Jv.prototype.removeCommonBits=function(t){this._cbr=new Yv,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},Jv.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},Jv.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=v_.overlayOp(e[0],e[1],t);return this.prepareResult(n)},Jv.prototype.checkValid=function(t){t.isValid()||Tf.out.println("Snapped geometry is invalid")},Jv.prototype.computeSnapTolerance=function(){this._snapTolerance=zv.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},Jv.prototype.snap=function(t){var e=this.removeCommonBits(t),n=zv.snap(e[0],e[1],this._snapTolerance);return n},Jv.prototype.interfaces_=function(){return[]},Jv.prototype.getClass=function(){return Jv},Jv.overlayOp=function(t,e,n){var r=new Jv(t,e);return r.getResultGeometry(n)},Jv.union=function(t,e){return Jv.overlayOp(t,e,v_.UNION)},Jv.intersection=function(t,e){return Jv.overlayOp(t,e,v_.INTERSECTION)},Jv.symDifference=function(t,e){return Jv.overlayOp(t,e,v_.SYMDIFFERENCE)},Jv.difference=function(t,e){return Jv.overlayOp(t,e,v_.DIFFERENCE)};var Zv=function(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e};Zv.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=v_.overlayOp(this._geom[0],this._geom[1],t);var i=!0;i&&(n=!0)}catch(o){if(!(o instanceof jf))throw o;r=o}finally{}if(!n)try{e=Jv.overlayOp(this._geom[0],this._geom[1],t)}catch(o){throw o instanceof jf?r:o}finally{}return e},Zv.prototype.interfaces_=function(){return[]},Zv.prototype.getClass=function(){return Zv},Zv.overlayOp=function(t,e,n){var r=new Zv(t,e);return r.getResultGeometry(n)},Zv.union=function(t,e){return Zv.overlayOp(t,e,v_.UNION)},Zv.intersection=function(t,e){return Zv.overlayOp(t,e,v_.INTERSECTION)},Zv.symDifference=function(t,e){return Zv.overlayOp(t,e,v_.SYMDIFFERENCE)},Zv.difference=function(t,e){return Zv.overlayOp(t,e,v_.DIFFERENCE)};var Kv=function(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e};Kv.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},Kv.prototype.interfaces_=function(){return[]},Kv.prototype.getClass=function(){return Kv};var Qv=function Vm(){if(this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length){var t=arguments[0],e=arguments[1];this._eventType=Vm.DELETE,this._xValue=t,this._insertEvent=e}else if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];this._eventType=Vm.INSERT,this._label=n,this._xValue=r,this._obj=i}},$v={INSERT:{configurable:!0},DELETE:{configurable:!0}};Qv.prototype.isDelete=function(){return this._eventType===Qv.DELETE},Qv.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},Qv.prototype.getObject=function(){return this._obj},Qv.prototype.compareTo=function(t){var e=t;return this._xValue<e._xValue?-1:this._xValue>e._xValue?1:this._eventType<e._eventType?-1:this._eventType>e._eventType?1:0},Qv.prototype.getInsertEvent=function(){return this._insertEvent},Qv.prototype.isInsert=function(){return this._eventType===Qv.INSERT},Qv.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},Qv.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},Qv.prototype.interfaces_=function(){return[lf]},Qv.prototype.getClass=function(){return Qv},$v.INSERT.get=function(){return 1},$v.DELETE.get=function(){return 2},Object.defineProperties(Qv,$v);var t_=function(){};t_.prototype.interfaces_=function(){return[]},t_.prototype.getClass=function(){return t_};var e_=function(){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._li=t,this._includeProper=e,this._recordIsolated=n};e_.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(e_.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},e_.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},e_.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},e_.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},e_.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),i=r.getCoordinate();if(t.isIntersection(i))return!0}return!1},e_.prototype.hasProperIntersection=function(){return this._hasProper},e_.prototype.hasIntersection=function(){return this._hasIntersection},e_.prototype.isDone=function(){return this._isDone},e_.prototype.isBoundaryPoint=function(t,e){return null!==e&&(!!this.isBoundaryPointInternal(t,e[0])||!!this.isBoundaryPointInternal(t,e[1]))},e_.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},e_.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],s=n.getCoordinates()[r],a=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,s,a),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},e_.prototype.interfaces_=function(){return[]},e_.prototype.getClass=function(){return e_},e_.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};var n_=function(t){function e(){t.call(this),this.events=new fg,this.nOverlaps=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvents=function(){var t=this;Yd.sort(this.events);for(var e=0;e<this.events.size();e++){var n=t.events.get(e);n.isDelete()&&n.getInsertEvent().setDeleteEventIndex(e)}},e.prototype.computeIntersections=function(){var t=this;if(1===arguments.length){var e=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var n=0;n<this.events.size();n++){var r=t.events.get(n);if(r.isInsert()&&t.processOverlaps(n,r.getDeleteEventIndex(),r,e),e.isDone())break}}else if(3===arguments.length)if(arguments[2]instanceof e_&&mf(arguments[0],pg)&&mf(arguments[1],pg)){var i=arguments[0],o=arguments[1],s=arguments[2];this.addEdges(i,i),this.addEdges(o,o),this.computeIntersections(s)}else if("boolean"==typeof arguments[2]&&mf(arguments[0],pg)&&arguments[1]instanceof e_){var a=arguments[0],u=arguments[1],c=arguments[2];c?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(u)}},e.prototype.addEdge=function(t,e){for(var n=this,r=t.getMonotoneChainEdge(),i=r.getStartIndexes(),o=0;o<i.length-1;o++){var s=new Kv(r,o),a=new Qv(e,r.getMinX(o),s);n.events.add(a),n.events.add(new Qv(r.getMaxX(o),a))}},e.prototype.processOverlaps=function(t,e,n,r){for(var i=this,o=n.getObject(),s=t;s<e;s++){var a=i.events.get(s);if(a.isInsert()){var u=a.getObject();n.isSameLabel(a)||(o.computeIntersections(u,r),i.nOverlaps++)}}},e.prototype.addEdges=function(){var t=this;if(1===arguments.length)for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();t.addEdge(r,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],s=i.iterator();s.hasNext();){var a=s.next();t.addEdge(a,o)}},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(t_),r_=function(){this._min=uf.POSITIVE_INFINITY,this._max=uf.NEGATIVE_INFINITY},i_={NodeComparator:{configurable:!0}};r_.prototype.getMin=function(){return this._min},r_.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},r_.prototype.getMax=function(){return this._max},r_.prototype.toString=function(){return zf.toLineString(new ff(this._min,0),new ff(this._max,0))},r_.prototype.interfaces_=function(){return[]},r_.prototype.getClass=function(){return r_},i_.NodeComparator.get=function(){return o_},Object.defineProperties(r_,i_);var o_=function(){};o_.prototype.compare=function(t,e){var n=t,r=e,i=(n._min+n._max)/2,o=(r._min+r._max)/2;return i<o?-1:i>o?1:0},o_.prototype.interfaces_=function(){return[pf]},o_.prototype.getClass=function(){return o_};var s_=function(t){function e(){t.call(this),this._item=null;var e=arguments[0],n=arguments[1],r=arguments[2];this._min=e,this._max=n,this._item=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.query=function(t,e,n){return this.intersects(t,e)?void n.visitItem(this._item):null},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(r_),a_=function(t){function e(){t.call(this),this._node1=null,this._node2=null;var e=arguments[0],n=arguments[1];this._node1=e,this._node2=n,this.buildExtent(this._node1,this._node2)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},e.prototype.query=function(t,e,n){return this.intersects(t,e)?(null!==this._node1&&this._node1.query(t,e,n),void(null!==this._node2&&this._node2.query(t,e,n))):null},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(r_),u_=function(){this._leaves=new fg,this._root=null,this._level=0};u_.prototype.buildTree=function(){var t=this;Yd.sort(this._leaves,new r_.NodeComparator);for(var e=this._leaves,n=null,r=new fg;;){if(t.buildLevel(e,r),1===r.size())return r.get(0);n=e,e=r,r=n}},u_.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new s_(t,e,n))},u_.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},u_.prototype.buildRoot=function(){return null!==this._root?null:void(this._root=this.buildTree())},u_.prototype.printNode=function(t){Tf.out.println(zf.toLineString(new ff(t._min,this._level),new ff(t._max,this._level)))},u_.prototype.init=function(){return null!==this._root?null:void this.buildRoot()},u_.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n),i=n+1<t.size()?t.get(n):null;if(null===i)e.add(r);else{var o=new a_(t.get(n),t.get(n+1));e.add(o)}}},u_.prototype.interfaces_=function(){return[]},u_.prototype.getClass=function(){return u_};var c_=function(){this._items=new fg};c_.prototype.visitItem=function(t){this._items.add(t)},c_.prototype.getItems=function(){return this._items},c_.prototype.interfaces_=function(){return[zd]},c_.prototype.getClass=function(){return c_};var l_=function(){this._index=null;var t=arguments[0];if(!mf(t,Ug))throw new af("Argument must be Polygonal");this._index=new f_(t)},h_={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};l_.prototype.locate=function(t){var e=new Jf(t),n=new p_(e);return this._index.query(t.y,t.y,n),e.getLocation()},l_.prototype.interfaces_=function(){return[Oy]},l_.prototype.getClass=function(){return l_},h_.SegmentVisitor.get=function(){return p_},h_.IntervalIndexedGeometry.get=function(){return f_},Object.defineProperties(l_,h_);var p_=function(){this._counter=null;var t=arguments[0];this._counter=t};p_.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},p_.prototype.interfaces_=function(){return[zd]},p_.prototype.getClass=function(){return p_};var f_=function(){this._index=new u_;var t=arguments[0];this.init(t)};f_.prototype.init=function(t){for(var e=this,n=dv.getLines(t),r=n.iterator();r.hasNext();){var i=r.next(),o=i.getCoordinates();e.addLine(o)}},f_.prototype.addLine=function(t){for(var e=this,n=1;n<t.length;n++){var r=new sy(t[n-1],t[n]),i=Math.min(r.p0.y,r.p1.y),o=Math.max(r.p0.y,r.p1.y);e._index.insert(i,o,r)}},f_.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new c_;return this._index.query(t,e,n),n.getItems()}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];this._index.query(r,i,o)}},f_.prototype.interfaces_=function(){return[]},f_.prototype.getClass=function(){return f_};var g_=function(t){function e(){if(t.call(this),this._parentGeom=null,this._lineEdgeMap=new id,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new yv,2===arguments.length){var e=arguments[0],n=arguments[1],r=rg.OGC_SFS_BOUNDARY_RULE;this._argIndex=e,this._parentGeom=n,this._boundaryNodeRule=r,null!==n&&this.add(n)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];this._argIndex=i,this._parentGeom=o,this._boundaryNodeRule=s,null!==o&&this.add(o)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertBoundaryPoint=function(t,n){var r=this._nodes.addNode(n),i=r.getLabel(),o=1,s=vf.NONE;s=i.getLocation(t,vd.ON),s===vf.BOUNDARY&&o++;var a=e.determineBoundary(this._boundaryNodeRule,o);i.setLocation(t,a)},e.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=new e_(n,(!0),(!1));o.setIsDoneIfProperInt(i);var s=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Hg||this._parentGeom instanceof Yg||this._parentGeom instanceof Wg,u=r||!a;return s.computeIntersections(this._edges,o,u),this.addSelfIntersectionNodes(this._argIndex),o}},e.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},e.prototype.computeEdgeIntersections=function(t,e,n){var r=new e_(e,n,(!0));r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var i=this.createEdgeSetIntersector();return i.computeIntersections(this._edges,t._edges,r),r},e.prototype.getGeometry=function(){return this._parentGeom},e.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},e.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},e.prototype.addPoint=function(){if(arguments[0]instanceof Xg){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this._argIndex,e,vf.INTERIOR)}else if(arguments[0]instanceof ff){var n=arguments[0];this.insertPoint(this._argIndex,n,vf.INTERIOR)}},e.prototype.addPolygon=function(t){var e=this;this.addPolygonRing(t.getExteriorRing(),vf.EXTERIOR,vf.INTERIOR);for(var n=0;n<t.getNumInteriorRing();n++){var r=t.getInteriorRingN(n);e.addPolygonRing(r,vf.INTERIOR,vf.EXTERIOR)}},e.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],vf.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],vf.BOUNDARY)},e.prototype.addLineString=function(t){var e=yg.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],
null;var n=new Hy(e,new Id(this._argIndex,vf.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),Uf.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},e.prototype.getInvalidPoint=function(){return this._invalidPoint},e.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},e.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},e.prototype.addSelfIntersectionNode=function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===vf.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},e.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=yg.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;Zf.isCCW(r)&&(i=n,o=e);var s=new Hy(r,new Id(this._argIndex,vf.BOUNDARY,i,o));this._lineEdgeMap.put(t,s),this.insertEdge(s),this.insertPoint(this._argIndex,r[0],vf.BOUNDARY)},e.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new Id(t,n):i.setLocation(t,n)},e.prototype.createEdgeSetIntersector=function(){return new n_},e.prototype.addSelfIntersectionNodes=function(t){for(var e=this,n=this._edges.iterator();n.hasNext();)for(var r=n.next(),i=r.getLabel().getLocation(t),o=r.eiList.iterator();o.hasNext();){var s=o.next();e.addSelfIntersectionNode(t,s.coord,i)}},e.prototype.add=function(){if(1!==arguments.length)return t.prototype.add.apply(this,arguments);var e=arguments[0];if(e.isEmpty())return null;if(e instanceof Wg&&(this._useBoundaryDeterminationRule=!1),e instanceof Yg)this.addPolygon(e);else if(e instanceof zg)this.addLineString(e);else if(e instanceof Xg)this.addPoint(e);else if(e instanceof Vg)this.addCollection(e);else if(e instanceof Ag)this.addCollection(e);else if(e instanceof Wg)this.addCollection(e);else{if(!(e instanceof Tg))throw new Error(e.getClass().getName());this.addCollection(e)}},e.prototype.addCollection=function(t){for(var e=this,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);e.add(r)}},e.prototype.locate=function(t){return mf(this._parentGeom,Ug)&&this._parentGeom.getNumGeometries()>50?(null===this._areaPtLocator&&(this._areaPtLocator=new l_(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},e.prototype.findEdge=function(){if(1===arguments.length){var e=arguments[0];return this._lineEdgeMap.get(e)}return t.prototype.findEdge.apply(this,arguments)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e.determineBoundary=function(t,e){return t.isInBoundary(e)?vf.BOUNDARY:vf.INTERIOR},e}(Fd),d_=function(){if(this._li=new Hf,this._resultPrecisionModel=null,this._arg=null,1===arguments.length){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new g_(0,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=rg.OGC_SFS_BOUNDARY_RULE;e.getPrecisionModel().compareTo(n.getPrecisionModel())>=0?this.setComputationPrecision(e.getPrecisionModel()):this.setComputationPrecision(n.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new g_(0,e,r),this._arg[1]=new g_(1,n,r)}else if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];i.getPrecisionModel().compareTo(o.getPrecisionModel())>=0?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new g_(0,i,s),this._arg[1]=new g_(1,o,s)}};d_.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},d_.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},d_.prototype.interfaces_=function(){return[]},d_.prototype.getClass=function(){return d_};var y_=function(){};y_.prototype.interfaces_=function(){return[]},y_.prototype.getClass=function(){return y_},y_.map=function(){if(arguments[0]instanceof $f&&mf(arguments[1],y_.MapOp)){for(var t=arguments[0],e=arguments[1],n=new fg,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(mf(arguments[0],cg)&&mf(arguments[1],y_.MapOp)){for(var o=arguments[0],s=arguments[1],a=new fg,u=o.iterator();u.hasNext();){var c=u.next(),l=s.map(c);null!==l&&a.add(l)}return a}},y_.MapOp=function(){};var v_=function(t){function e(){var e=arguments[0],n=arguments[1];t.call(this,e,n),this._ptLocator=new yv,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Gy,this._resultPolyList=new fg,this._resultLineList=new fg,this._resultPointList=new fg,this._graph=new Fd(new Fy),this._geomFact=e.getFactory()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.insertUniqueEdge=function(t){var e=this._edgeList.findEqualEdge(t);if(null!==e){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Id(t.getLabel()),r.flip());var i=e.getDepth();i.isNull()&&i.add(n),i.add(r),n.merge(r)}else this._edgeList.add(t)},e.prototype.getGraph=function(){return this._graph},e.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},e.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},e.prototype.computeGeometry=function(t,n,r,i){var o=new fg;return o.addAll(t),o.addAll(n),o.addAll(r),o.isEmpty()?e.createEmptyResult(i,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(o)},e.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},e.prototype.isCovered=function(t,e){for(var n=this,r=e.iterator();r.hasNext();){var i=r.next(),o=n._ptLocator.locate(t,i);if(o!==vf.EXTERIOR)return!0}return!1},e.prototype.replaceCollapsedEdges=function(){for(var t=new fg,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},e.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},e.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},e.prototype.insertUniqueEdges=function(t){for(var e=this,n=t.iterator();n.hasNext();){var r=n.next();e.insertUniqueEdge(r)}},e.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new fg;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Dv.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new qd(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new qv(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Gv(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},e.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},e.prototype.copyPoints=function(t){for(var e=this,n=this._arg[t].getNodeIterator();n.hasNext();){var r=n.next(),i=e._graph.addNode(r.getCoordinate());i.setLabel(t,r.getLabel().getLocation(t))}},e.prototype.findResultAreaEdges=function(t){for(var n=this._graph.getEdgeEnds().iterator();n.hasNext();){var r=n.next(),i=r.getLabel();i.isArea()&&!r.isInteriorAreaEdge()&&e.isResultOfOp(i.getLocation(0,vd.RIGHT),i.getLocation(1,vd.RIGHT),t)&&r.setInResult(!0)}},e.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(Uf.isTrue(!r.isNull(i,vd.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,vd.LEFT,r.getLocation(i,vd.LEFT)),Uf.isTrue(!r.isNull(i,vd.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,vd.RIGHT,r.getLocation(i,vd.RIGHT))))}}},e.prototype.computeLabelling=function(){for(var t=this,e=this._graph.getNodes().iterator();e.hasNext();){var n=e.next();n.getEdges().computeLabelling(t._arg)}this.mergeSymLabels(),this.updateNodeLabelling()},e.prototype.labelIncompleteNodes=function(){for(var t=this,e=this._graph.getNodes().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?t.labelIncompleteNode(n,0):t.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},e.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},e.prototype.interfaces_=function(){return[]},e.prototype.getClass=function(){return e},e}(d_);v_.overlayOp=function(t,e,n){var r=new v_(t,e),i=r.getResultGeometry(n);return i},v_.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return v_.createEmptyResult(v_.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return Fv.map(t,{interfaces_:function(){return[y_.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zv.overlayOp(t,e,v_.INTERSECTION)},v_.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return v_.createEmptyResult(v_.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zv.overlayOp(t,e,v_.SYMDIFFERENCE)},v_.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case v_.INTERSECTION:o=Math.min(r,i);break;case v_.UNION:o=Math.max(r,i);break;case v_.DIFFERENCE:o=r;break;case v_.SYMDIFFERENCE:o=Math.max(r,i)}return o},v_.createEmptyResult=function(t,e,n,r){var i=null;switch(v_.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},v_.difference=function(t,e){return t.isEmpty()?v_.createEmptyResult(v_.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zv.overlayOp(t,e,v_.DIFFERENCE))},v_.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return v_.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1],s=arguments[2];switch(i===vf.BOUNDARY&&(i=vf.INTERIOR),o===vf.BOUNDARY&&(o=vf.INTERIOR),s){case v_.INTERSECTION:return i===vf.INTERIOR&&o===vf.INTERIOR;case v_.UNION:return i===vf.INTERIOR||o===vf.INTERIOR;case v_.DIFFERENCE:return i===vf.INTERIOR&&o!==vf.INTERIOR;case v_.SYMDIFFERENCE:return i===vf.INTERIOR&&o!==vf.INTERIOR||i!==vf.INTERIOR&&o===vf.INTERIOR}return!1}},v_.INTERSECTION=1,v_.UNION=2,v_.DIFFERENCE=3,v_.SYMDIFFERENCE=4;var __=function(){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new yv,this._seg=new sy;var t=arguments[0],e=arguments[1];this._g=t,this._boundaryDistanceTolerance=e,this._linework=this.extractLinework(t)};__.prototype.isWithinToleranceOfBoundary=function(t){for(var e=this,n=0;n<this._linework.getNumGeometries();n++)for(var r=e._linework.getGeometryN(n),i=r.getCoordinateSequence(),o=0;o<i.size()-1;o++){i.getCoordinate(o,e._seg.p0),i.getCoordinate(o+1,e._seg.p1);var s=e._seg.distance(t);if(s<=e._boundaryDistanceTolerance)return!0}return!1},__.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?vf.BOUNDARY:this._ptLocator.locate(t,this._g)},__.prototype.extractLinework=function(t){var e=new m_;t.apply(e);var n=e.getLinework(),r=cd.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},__.prototype.interfaces_=function(){return[]},__.prototype.getClass=function(){return __};var m_=function(){this._linework=null,this._linework=new fg};m_.prototype.getLinework=function(){return this._linework},m_.prototype.filter=function(t){var e=this;if(t instanceof Yg){var n=t;this._linework.add(n.getExteriorRing());for(var r=0;r<n.getNumInteriorRing();r++)e._linework.add(n.getInteriorRingN(r))}},m_.prototype.interfaces_=function(){return[Og]},m_.prototype.getClass=function(){return m_};var x_=function(){this._g=null,this._doLeft=!0,this._doRight=!0;var t=arguments[0];this._g=t};x_.prototype.extractPoints=function(t,e,n){for(var r=this,i=t.getCoordinates(),o=0;o<i.length-1;o++)r.computeOffsetPoints(i[o],i[o+1],e,n)},x_.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},x_.prototype.getPoints=function(t){for(var e=this,n=new fg,r=dv.getLines(this._g),i=r.iterator();i.hasNext();){var o=i.next();e.extractPoints(o,t,n)}return n},x_.prototype.computeOffsetPoints=function(t,e,n,r){var i=e.x-t.x,o=e.y-t.y,s=Math.sqrt(i*i+o*o),a=n*i/s,u=n*o/s,c=(e.x+t.x)/2,l=(e.y+t.y)/2;if(this._doLeft){var h=new ff(c-u,l+a);r.add(h)}if(this._doRight){var p=new ff(c+u,l-a);r.add(p)}},x_.prototype.interfaces_=function(){return[]},x_.prototype.getClass=function(){return x_};var E_=function Hm(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=Hm.TOLERANCE,this._testCoords=new fg;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=Hm.computeBoundaryDistanceTolerance(t,e),this._geom=[t,e,n],this._locFinder=[new __(this._geom[0],this._boundaryDistanceTolerance),new __(this._geom[1],this._boundaryDistanceTolerance),new __(this._geom[2],this._boundaryDistanceTolerance)]},w_={TOLERANCE:{configurable:!0}};E_.prototype.reportResult=function(t,e,n){Tf.out.println("Overlay result invalid - A:"+vf.toLocationSymbol(e[0])+" B:"+vf.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+vf.toLocationSymbol(e[2]))},E_.prototype.isValid=function Wm(t){this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]);var Wm=this.checkValid(t);return Wm},E_.prototype.checkValid=function(){var t=this;if(1===arguments.length){for(var e=arguments[0],n=0;n<this._testCoords.size();n++){var r=t._testCoords.get(n);if(!t.checkValid(e,r))return t._invalidLocation=r,!1}return!0}if(2===arguments.length){var i=arguments[0],o=arguments[1];return this._location[0]=this._locFinder[0].getLocation(o),this._location[1]=this._locFinder[1].getLocation(o),this._location[2]=this._locFinder[2].getLocation(o),!!E_.hasLocation(this._location,vf.BOUNDARY)||this.isValidResult(i,this._location)}},E_.prototype.addTestPts=function(t){var e=new x_(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},E_.prototype.isValidResult=function(t,e){var n=v_.isResultOfOp(e[0],e[1],t),r=e[2]===vf.INTERIOR,i=!(n^r);return i||this.reportResult(t,e,n),i},E_.prototype.getInvalidLocation=function(){return this._invalidLocation},E_.prototype.interfaces_=function(){return[]},E_.prototype.getClass=function(){return E_},E_.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},E_.computeBoundaryDistanceTolerance=function(t,e){return Math.min(zv.computeSizeBasedSnapTolerance(t),zv.computeSizeBasedSnapTolerance(e))},E_.isValid=function(t,e,n,r){var i=new E_(t,e,r);return i.isValid(n)},w_.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(E_,w_);var b_=function Jm(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=Jm.extractFactory(t),this._inputGeoms=t};b_.prototype.extractElements=function(t,e){var n=this;if(null===t)return null;for(var r=0;r<t.getNumGeometries();r++){var i=t.getGeometryN(r);n._skipEmpty&&i.isEmpty()||e.add(i)}},b_.prototype.combine=function(){for(var t=this,e=new fg,n=this._inputGeoms.iterator();n.hasNext();){var r=n.next();t.extractElements(r,e)}return 0===e.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(e)},b_.prototype.interfaces_=function(){return[]},b_.prototype.getClass=function(){return b_},b_.combine=function(){if(1===arguments.length){var t=arguments[0],e=new b_(t);return e.combine()}if(2===arguments.length){var n=arguments[0],r=arguments[1],i=new b_(b_.createList(n,r));return i.combine()}if(3===arguments.length){var o=arguments[0],s=arguments[1],a=arguments[2],u=new b_(b_.createList(o,s,a));return u.combine()}},b_.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},b_.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new fg;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],s=new fg;return s.add(r),s.add(i),s.add(o),s}};var I_=function(){this._inputPolys=null,this._geomFactory=null;var t=arguments[0];this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new fg)},N_={STRTREE_NODE_CAPACITY:{configurable:!0}};I_.prototype.reduceToGeometries=function(t){for(var e=this,n=new fg,r=t.iterator();r.hasNext();){var i=r.next(),o=null;mf(i,pg)?o=e.unionTree(i):i instanceof $f&&(o=i),n.add(o)}return n},I_.prototype.extractByEnvelope=function(t,e,n){for(var r=new fg,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},I_.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var i=b_.combine(t,e);return i}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,o)},I_.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Kd(I_.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree(),i=this.unionTree(r);return i},I_.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=I_.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n===2)return this.unionSafe(I_.getGeometry(e,n),I_.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),s=this.binaryUnion(e,n,o),a=this.binaryUnion(e,o,r);return this.unionSafe(s,a)}},I_.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=null===e?r.copy():e.union(r)}return e},I_.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},I_.prototype.unionActual=function(t,e){return I_.restrictToPolygons(t.union(e))},I_.prototype.unionTree=function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},I_.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new fg,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),s=this.unionActual(i,o);r.add(s);var a=b_.combine(r);return a},I_.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(2===arguments.length){var i=arguments[0],o=arguments[1],s=i.getFactory(),a=s.createGeometryCollection([i,o]),u=a.buffer(0);return u}},I_.prototype.interfaces_=function(){return[]},I_.prototype.getClass=function(){return I_},I_.restrictToPolygons=function(t){if(mf(t,Ug))return t;var e=gv.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(cd.toPolygonArray(e))},I_.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},I_.union=function(t){var e=new I_(t);return e.union()},N_.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(I_,N_);var C_=function(){};C_.prototype.interfaces_=function(){return[]},C_.prototype.getClass=function(){return C_},C_.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return v_.createEmptyResult(v_.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zv.overlayOp(t,e,v_.UNION)};var S_=function(){return new Cu};Cu.prototype={constructor:Cu,reset:function(){this.s=this.t=0},add:function(t){Su(M_,t,this.t),Su(this,M_.s,this.s),this.s?this.t+=M_.t:this.s=M_.t},valueOf:function(){return this.s}};var M_=new Cu,L_=1e-6,P_=Math.PI,O_=P_/2,R_=P_/4,T_=2*P_,A_=180/P_,D_=P_/180,F_=Math.abs,q_=Math.atan,G_=Math.atan2,B_=Math.cos,k_=Math.exp,z_=Math.log,j_=Math.sin,X_=Math.sqrt,U_=Math.tan,Y_={Feature:function(t,e){Ou(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Ou(n[r].geometry,e)}},V_={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ru(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Ru(n[r],e,0)},Polygon:function(t,e){Tu(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Tu(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Ou(n[r],e)}},H_=function(t,e){t&&Y_.hasOwnProperty(t.type)?Y_[t.type](t,e):Ou(t,e)},W_=(S_(),S_(),S_(),function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n});zu.invert=zu;var J_=function(t){function e(e){return e=t(e[0]*D_,e[1]*D_),e[0]*=A_,e[1]*=A_,e}return t=ju(t[0]*D_,t[1]*D_,t.length>2?t[2]*D_:0),e.invert=function(e){return e=t.invert(e[0]*D_,e[1]*D_),e[0]*=A_,e[1]*=A_,e},e},Z_=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Pu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},K_=function(t,e,n,r,i,o){var s,a=t[0],u=t[1],c=e[0],l=e[1],h=0,p=1,f=c-a,g=l-u;if(s=n-a,f||!(s>0)){if(s/=f,f<0){if(s<h)return;s<p&&(p=s)}else if(f>0){if(s>p)return;s>h&&(h=s)}if(s=i-a,f||!(s<0)){if(s/=f,f<0){if(s>p)return;s>h&&(h=s)}else if(f>0){if(s<h)return;s<p&&(p=s)}if(s=r-u,g||!(s>0)){if(s/=g,g<0){if(s<h)return;s<p&&(p=s)}else if(g>0){if(s>p)return;s>h&&(h=s)}if(s=o-u,g||!(s<0)){if(s/=g,g<0){if(s>p)return;s>h&&(h=s)}else if(g>0){if(s<h)return;s<p&&(p=s)}return h>0&&(t[0]=a+h*f,t[1]=u+h*g),p<1&&(e[0]=a+p*f,e[1]=u+p*g),!0}}}}},Q_=function(t,e){return F_(t[0]-e[0])<L_&&F_(t[1]-e[1])<L_},$_=function(t,e,n,r,i){var o,s,a=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],s=t[e];if(Q_(r,s)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a.push(n=new Wu(r,t,null,(!0))),u.push(n.o=new Wu(r,null,n,(!1))),a.push(n=new Wu(s,t,null,(!1))),u.push(n.o=new Wu(s,null,n,(!0)))}}),a.length){for(u.sort(e),Ju(a),Ju(u),o=0,s=u.length;o<s;++o)u[o].e=n=!n;for(var c,l,h=a[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,s=c.length;o<s;++o)i.point((l=c[o])[0],l[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(f)for(c=p.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,c=p.z,f=!f}while(!p.v);i.lineEnd()}}},tm=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},em=function(t){return 1===t.length&&(t=Zu(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},nm=(em(tm),function(t){for(var e,n,r,i=t.length,o=-1,s=0;++o<i;)s+=t[o].length;for(n=new Array(s);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--s]=r[e];return n}),rm=1e9,im=-rm,om=S_(),sm=function(t,e){var n=e[0],r=e[1],i=[j_(n),-B_(n),0],o=0,s=0;om.reset();for(var a=0,u=t.length;a<u;++a)if(l=(c=t[a]).length)for(var c,l,h=c[l-1],p=h[0],f=h[1]/2+R_,g=j_(f),d=B_(f),y=0;y<l;++y,p=_,g=x,d=E,h=v){var v=c[y],_=v[0],m=v[1]/2+R_,x=j_(m),E=B_(m),w=_-p,b=w>=0?1:-1,I=b*w,N=I>P_,C=g*x;if(om.add(G_(C*b*j_(I),d*E+C*B_(I))),o+=N?w+b*T_:w,N^p>=n^_>=n){var S=qu(Du(h),Du(v));ku(S);var M=qu(i,S);ku(M);var L=(N^w>=0?-1:1)*Lu(M[2]);(r>L||r===L&&(S[0]||S[1]))&&(s+=N^w>=0?1:-1)}}return(o<-L_||o<L_&&om<-L_)^1&s},am=(S_(),function(t){return t}),um=(S_(),S_(),1/0),cm=um,lm=-um,hm=lm,pm={point:Qu,lineStart:Pu,lineEnd:Pu,polygonStart:Pu,polygonEnd:Pu,result:function(){var t=[[um,cm],[lm,hm]];return lm=hm=-(cm=um=1/0),t}},fm=(S_(),function(t,e,n,r){return function(i,o){function s(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function a(t,e){var n=i(t,e);y.point(n[0],n[1])}function u(){E.point=a,y.lineStart()}function c(){E.point=s,y.lineEnd()}function l(t,e){d.push([t,e]);var n=i(t,e);m.point(n[0],n[1])}function h(){m.lineStart(),d=[]}function p(){l(d[0][0],d[0][1]),m.lineEnd();var t,e,n,r,i=m.clean(),s=_.result(),a=s.length;if(d.pop(),f.push(d),d=null,a)if(1&i){if(n=s[0],(e=n.length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else a>1&&2&i&&s.push(s.pop().concat(s.shift())),g.push(s.filter($u))}var f,g,d,y=e(o),v=i.invert(r[0],r[1]),_=Z_(),m=e(_),x=!1,E={point:s,lineStart:u,lineEnd:c,polygonStart:function(){E.point=l,E.lineStart=h,E.lineEnd=p,g=[],f=[]},polygonEnd:function(){E.point=s,E.lineStart=u,E.lineEnd=c,g=nm(g);var t=sm(f,v);g.length?(x||(o.polygonStart(),x=!0),$_(g,tc,t,n,o)):t&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),g=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return E}}),gm=fm(function(){return!0},ec,rc,[-P_,-O_]),dm=function(t,e){function n(n,r,i,o){Vu(o,t,e,i,n,r)}function r(t,e){return B_(t)*B_(e)>a}function i(t){var e,n,i,a,l;return{lineStart:function(){a=i=!1,l=1},point:function(h,p){var f,g=[h,p],d=r(h,p),y=u?d?0:s(h,p):d?s(h+(h<0?P_:-P_),p):0;if(!e&&(a=i=d)&&t.lineStart(),d!==i&&(f=o(e,g),(!f||Q_(e,f)||Q_(g,f))&&(g[0]+=L_,g[1]+=L_,d=r(g[0],g[1]))),d!==i)l=0,d?(t.lineStart(),f=o(g,e),t.point(f[0],f[1])):(f=o(e,g),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(c&&e&&u^d){var v;y&n||!(v=o(g,e,!0))||(l=0,u?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!d||e&&Q_(e,g)||t.point(g[0],g[1]),e=g,i=d,n=y},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return l|(a&&i)<<1}}}function o(t,e,n){var r=Du(t),i=Du(e),o=[1,0,0],s=qu(r,i),u=Fu(s,s),c=s[0],l=u-c*c;if(!l)return!n&&t;var h=a*u/l,p=-a*c/l,f=qu(o,s),g=Bu(o,h),d=Bu(s,p);Gu(g,d);var y=f,v=Fu(g,y),_=Fu(y,y),m=v*v-_*(Fu(g,g)-1);if(!(m<0)){var x=X_(m),E=Bu(y,(-v-x)/_);if(Gu(E,g),E=Au(E),!n)return E;var w,b=t[0],I=e[0],N=t[1],C=e[1];I<b&&(w=b,b=I,I=w);var S=I-b,M=F_(S-P_)<L_,L=M||S<L_;if(!M&&C<N&&(w=N,N=C,C=w),L?M?N+C>0^E[1]<(F_(E[0]-b)<L_?N:C):N<=E[1]&&E[1]<=C:S>P_^(b<=E[0]&&E[0]<=I)){var P=Bu(y,(-v+x)/_);return Gu(P,g),[E,Au(P)]}}}function s(e,n){var r=u?t:P_-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=B_(t),u=a>0,c=F_(a)>L_;return fm(r,i,n,u?[0,-t]:[-P_,t-P_])};oc.prototype={constructor:oc,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ym=16,vm=B_(30*D_),_m=function(t,e){return+e?cc(t,e):uc(t)},mm=ic({point:function(t,e){this.stream.point(t*D_,e*D_)}});pc.invert=function(t,e){return[t,2*q_(k_(e))-O_]},gc.invert=function(t,e){return[-e,2*q_(k_(t))-O_]};var xm=function(){var t=fc(gc),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.projection=Fl,t.random=rf,t.clusters=of,t.helpers=Uc,t.invariant=Vc,t.meta=Yc,t.isolines=yt,t.convex=ae,t.pointsWithinPolygon=he,t.concave=ze,t.collect=Xe,t.flip=Ue,t.simplify=en,t.bezierSpline=an,t.tag=un,t.sample=cn,t.envelope=pn,t.square=fn,t.circle=dn,t.midpoint=_n,t.center=mn,t.centerOfMass=En,t.centroid=xn,t.combine=wn,t.distance=ve,t.explode=bn,t.bbox=J,t.tesselate=$n,t.bboxPolygon=hn,t.booleanPointInPolygon=ue,t.nearestPoint=nr,t.nearestPointOnLine=Or,t.nearestPointToLine=Hr,t.planepoint=Jr,t.tin=pe,t.bearing=yn,t.destination=gn,t.kinks=Zr,t.pointOnFeature=Qr,t.area=ei,t.along=si,t.length=ai,t.lineSlice=ui,t.lineSliceAlong=ci,t.pointGrid=bi,t.truncate=Ii,t.flatten=Ci,t.lineIntersect=Lr,t.lineChunk=Si,t.unkinkPolygon=Di,t.greatCircle=Fi,t.lineSegment=Nr,t.lineSplit=qi,t.lineArc=ji,t.polygonToLine=Ui,t.lineToPolygon=Vi,t.bboxClip=to,t.lineOverlap=uo,t.sector=lo,t.rhumbBearing=Rr,t.rhumbDistance=Ar,t.rhumbDestination=po,t.polygonTangents=go,t.rewind=Eo,t.isobands=qo,t.transformRotate=Uo,t.transformScale=Yo,t.transformTranslate=Wo,t.lineOffset=rs,t.polygonize=hs,t.booleanDisjoint=ps,t.booleanContains=xs,t.booleanCrosses=Os,t.booleanClockwise=xo,t.booleanOverlap=ks,t.booleanPointOnLine=li,t.booleanEqual=zs,t.booleanWithin=pi,t.clone=_e,t.cleanCoords=Ye,t.clustersDbscan=js,t.clustersKmeans=Ys,t.pointToLineDistance=jr,t.booleanParallel=Vs,t.shortestPath=ta,t.voronoi=Da,t.ellipse=Fa,t.centerMean=Ga,t.centerMedian=Ba,t.standardDeviationalEllipse=za,t.difference=Iu,t.buffer=dc,t.union=Ec,t.intersect=wc,t.dissolve=Nc,t.hexGrid=Sc,t.mask=Pc,t.squareGrid=qc,t.triangleGrid=Gc,t.interpolate=Bc,t.pointOnSurface=Qr,t.polygonToLineString=Ui,t.lineStringToPolygon=Vi,t.inside=ue,t.within=he,t.bezier=an,t.nearest=nr,t.pointOnLine=Or,t.lineDistance=ai,t.radians2degrees=m,t.degrees2radians=x,t.distanceToDegrees=v,t.distanceToRadians=y,t.radiansToDistance=d,t.bearingToAngle=_,t.convertDistance=E,t.toMercator=Fr,t.toWgs84=qr,t.randomPosition=Xa,t.randomPoint=Ua,t.randomPolygon=Ya,t.randomLineString=Va,t.getCluster=Qa,t.clusterEach=$a,t.clusterReduce=tu,t.createBins=eu,t.applyFilter=nu,t.propertiesContainsFilter=ru,t.filterProperties=iu,t.earthRadius=kc,t.factors=zc,t.unitsFactors=jc,t.areaFactors=Xc,t.feature=e,t.geometry=n,t.point=r,t.points=i,t.polygon=o,t.polygons=s,t.lineString=a,t.lineStrings=u,t.featureCollection=c,t.multiLineString=l,t.multiPoint=h,t.multiPolygon=p,t.geometryCollection=f,t.round=g,t.radiansToLength=d,t.lengthToRadians=y,t.lengthToDegrees=v,t.bearingToAzimuth=_,t.radiansToDegrees=m,t.degreesToRadians=x,t.convertLength=E,t.convertArea=w,t.isNumber=b,t.isObject=I,t.validateBBox=N,t.validateId=C,t.getCoord=Z,t.getCoords=K,t.containsNumber=Q,t.geojsonType=$,t.featureOf=tt,t.collectionOf=et,t.getGeom=nt,t.getGeomType=rt,t.getType=it,t.coordEach=A,t.coordReduce=D,t.propEach=F,t.propReduce=q,t.featureEach=G,t.featureReduce=B,t.coordAll=k,t.geomEach=z,t.geomReduce=j,t.flattenEach=X,t.flattenReduce=U,t.segmentEach=Y,t.segmentReduce=V,t.lineEach=H,t.lineReduce=W,
Object.defineProperty(t,"__esModule",{value:!0})});
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("leaflet")):"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports?exports.VectorMarkers=t(require("leaflet")):e.VectorMarkers=t(e.L)}(this,function(e){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=t.VectorMarkers=void 0;var r=o(1),i=n(r),s=o(2),a=n(s),c=o(3),l=n(c);t.VectorMarkers=a["default"],t.Icon=l["default"],i["default"].VectorMarkers=a["default"]},function(t,o){t.exports=e},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=o(3),i=n(r);t["default"]={version:"1.0.0",Icon:i["default"],icon:function(e){return new i["default"](e)}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=o(1),l=n(c),u={shadowUrl:"dist/images/marker-shadow.png",iconSize:[25,41],shadowSize:[41,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],className:"vector-marker",prefix:"fa",spinClass:"fa-spin",extraIconClasses:"",extraDivClasses:"",icon:"home",markerColor:"#338ACC",iconColor:"white",viewBox:"0 0 32 52"},f="M16,1 C7.7146,1 1,7.65636364 1,15.8648485 C1,24.0760606 16,51 16,51 C16,51 31,24.0760606 31,15.8648485 C31,7.65636364 24.2815,1 16,1 L16,1 Z",p=function(e){function t(e){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l["default"].Util.setOptions(o,u),l["default"].Util.setOptions(o,e),o}return s(t,e),a(t,[{key:"createIcon",value:function(e){var t=e&&"DIV"===e.tagName?e:document.createElement("div"),o=this.options,n=o.map_pin||f;return t.innerHTML='<svg width="'+o.iconSize[0]+'px" height="'+o.iconSize[1]+'px" viewBox="'+o.viewBox+'" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="'+n+'" fill="'+o.markerColor+'"></path></svg>',o.icon&&t.appendChild(this._createInner()),o.className+=o.className.length>0?" "+o.extraDivClasses:o.extraDivClasses,this._setIconStyles(t,"icon"),this._setIconStyles(t,"icon-"+o.markerColor),t}},{key:"_createInner",value:function(){var e=document.createElement("i"),t=this.options;return e.classList.add(t.prefix),t.extraClasses&&e.classList.add(t.extraClasses),t.prefix?e.classList.add(t.prefix+"-"+t.icon):e.classList.add(t.icon),t.spin&&"string"==typeof t.spinClass&&e.classList.add(t.spinClass),t.iconColor&&("white"===t.iconColor||"black"===t.iconColor?e.classList.add("icon-"+t.iconColor):e.style.color=t.iconColor),t.iconSize&&(e.style.width=t.iconSize[0]+"px"),e}},{key:"_setIconStyles",value:function(e,t){var o=this.options,n=l["default"].point(o["shadow"===t?"shadowSize":"iconSize"]),r=void 0;r="shadow"===t?l["default"].point(o.shadowAnchor||o.iconAnchor):l["default"].point(o.iconAnchor),!r&&n&&(r=n.divideBy(2,!0)),e.className="vector-marker-"+t+" "+o.className,r&&(e.style.marginLeft=-r.x+"px",e.style.marginTop=-r.y+"px"),n&&(e.style.width=n.x+"px",e.style.height=n.y+"px")}}]),t}(l["default"].Icon);t["default"]=p}])});
!function(t,e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.bootbox=e(t.jQuery)}(this,function t(e,o){"use strict";function a(t,e){var o=t.length,a={};if(o<1||o>2)throw new Error("Invalid argument length");return 2===o||"string"==typeof t[0]?(a[e[0]]=t[0],a[e[1]]=t[1]):a=t[0],a}function r(t,o,r){return e.extend(!0,{},t,a(o,r))}function n(t,e,o,a){var n;if(a&&a[0]){n=a[0].locale||w.locale;var s=a[0].swapButtonOrder||w.swapButtonOrder;s&&(e=e.reverse())}var c={className:"bootbox-"+t,buttons:l(e,n)};return i(r(c,a,o),e)}function i(t,e){var a={};return u(e,function(t,e){a[e]=!0}),u(t.buttons,function(t){if(a[t]===o)throw new Error('button key "'+t+'" is not allowed (options are '+e.join(" ")+")")}),t}function l(t,e){for(var o={},a=0,r=t.length;a<r;a++){var n=t[a],i=n.toLowerCase(),l=n.toUpperCase();o[i]={label:s(l,e)}}return o}function s(t,e){var o=O[e];return o?o[t]:O.en[t]}function c(t){var o,a;if("object"!=typeof t)throw new Error("Please supply an object of options");if(!t.message)throw new Error('"message" option must not be null or an empty string.');return t=e.extend({},w,t),t.buttons||(t.buttons={}),o=t.buttons,a=p(o),u(o,function(r,n,i){if(e.isFunction(n)&&(n=o[r]={callback:n}),"object"!==e.type(n))throw new Error('button with key "'+r+'" must be an object');if(n.label||(n.label=r),!n.className){var l=!1;l=t.swapButtonOrder?0===i:i===a-1,a<=2&&l?n.className="btn-primary":n.className="btn-secondary btn-default"}}),t}function p(t){return Object.keys(t).length}function u(t,o){var a=0;e.each(t,function(t,e){o(t,e,a++)})}function d(t,o,a){t.stopPropagation(),t.preventDefault();var r=e.isFunction(a)&&a.call(o,t)===!1;r||o.modal("hide")}function b(t,e,a){var r=!1,n=!0,i=!0;if("date"===t)e===o||(n=m(e))?a===o||(i=m(a))||console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your max value may not be enforced by this browser.'):console.warn('Browsers which natively support the "date" input type expect date values to be of the form "YYYY-MM-DD" (see ISO-8601 https://www.iso.org/iso-8601-date-and-time-format.html). Bootbox does not enforce this rule, but your min value may not be enforced by this browser.');else if("time"===t){if(e!==o&&!(n=f(e)))throw new Error('"min" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.');if(a!==o&&!(i=f(a)))throw new Error('"max" is not a valid time. See https://www.w3.org/TR/2012/WD-html-markup-20120315/datatypes.html#form.data.time for more information.')}else{if(e!==o&&isNaN(e))throw n=!1,new Error('"min" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-min for more information.');if(a!==o&&isNaN(a))throw i=!1,new Error('"max" must be a valid number. See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.')}if(n&&i){if(a<=e)throw new Error('"max" must be greater than "min". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-max for more information.');r=!0}return r}function f(t){return/([01][0-9]|2[0-3]):[0-5][0-9]?:[0-5][0-9]/.test(t)}function m(t){return/(\d{4})-(\d{2})-(\d{2})/.test(t)}Object.keys||(Object.keys=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=o.length;return function(r){if("function"!=typeof r&&("object"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var n,i,l=[];for(n in r)t.call(r,n)&&l.push(n);if(e)for(i=0;i<a;i++)t.call(r,o[i])&&l.push(o[i]);return l}}());var h={},C="5.0.0";h.VERSION=C;var O={ar:{OK:"ÙÙØ§ÙÙ",CANCEL:"Ø§ÙØºØ§Ø¡",CONFIRM:"ØªØ£ÙÙØ¯"},bg_BG:{OK:"ÐÐº",CANCEL:"ÐÑÐºÐ°Ð·",CONFIRM:"ÐÐ¾ÑÐ²ÑÑÐ¶Ð´Ð°Ð²Ð°Ð¼"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"ZruÅ¡it",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"ÎÎ½ÏÎ¬Î¾ÎµÎ¹",CANCEL:"ÎÎºÏÏÏÏÎ·",CONFIRM:"ÎÏÎ¹Î²ÎµÎ²Î±Î¯ÏÏÎ·"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},eu:{OK:"OK",CANCEL:"Ezeztatu",CONFIRM:"Onartu"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"ÙØ¨ÙÙ",CANCEL:"ÙØºÙ",CONFIRM:"ØªØ§ÛÛØ¯"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"Confirmer"},he:{OK:"×××©××¨",CANCEL:"×××××",CONFIRM:"×××©××¨"},hu:{OK:"OK",CANCEL:"MÃ©gsem",CONFIRM:"MegerÅsÃ­t"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"ã­ã£ã³ã»ã«",CONFIRM:"ç¢ºèª"},ka:{OK:"OK",CANCEL:"ááá£á¥áááá",CONFIRM:"ááááá¡á¢á£á ááá"},ko:{OK:"OK",CANCEL:"ì·¨ì",CONFIRM:"íì¸"},lt:{OK:"Gerai",CANCEL:"AtÅ¡aukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"ApstiprinÄt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"PotwierdÅº"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"ÐÑÐ¼ÐµÐ½Ð°",CONFIRM:"ÐÑÐ¸Ð¼ÐµÐ½Ð¸ÑÑ"},sk:{OK:"OK",CANCEL:"ZruÅ¡iÅ¥",CONFIRM:"PotvrdiÅ¥"},sl:{OK:"OK",CANCEL:"PrekliÄi",CONFIRM:"Potrdi"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},sw:{OK:"Sawa",CANCEL:"Ghairi",CONFIRM:"Thibitisha"},ta:{OK:"à®à®°à®¿",CANCEL:"à®°à®¤à¯à®¤à¯ à®à¯à®¯à¯",CONFIRM:"à®à®±à¯à®¤à®¿ à®à¯à®¯à¯"},th:{OK:"à¸à¸à¸¥à¸",CANCEL:"à¸¢à¸à¹à¸¥à¸´à¸",CONFIRM:"à¸¢à¸·à¸à¸¢à¸±à¸"},tr:{OK:"Tamam",CANCEL:"Ä°ptal",CONFIRM:"Onayla"},uk:{OK:"OK",CANCEL:"ÐÑÐ´Ð¼ÑÐ½Ð°",CONFIRM:"ÐÑÐ¸Ð¹Ð½ÑÑÐ¸"},zh_CN:{OK:"OK",CANCEL:"åæ¶",CONFIRM:"ç¡®è®¤"},zh_TW:{OK:"OK",CANCEL:"åæ¶",CONFIRM:"ç¢ºèª"}},v={dialog:'<div class="bootbox modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-body"><div class="bootbox-body"></div></div></div></div></div>',header:'<div class="modal-header"><h5 class="modal-title"></h5></div>',footer:'<div class="modal-footer"></div>',closeButton:'<button type="button" class="bootbox-close-button close" aria-hidden="true">&times;</button>',form:'<form class="bootbox-form"></form>',button:'<button type="button" class="btn"></button>',option:"<option></option>",promptMessage:'<div class="bootbox-prompt-message"></div>',inputs:{text:'<input class="bootbox-input bootbox-input-text form-control" autocomplete="off" type="text" />',textarea:'<textarea class="bootbox-input bootbox-input-textarea form-control"></textarea>',email:'<input class="bootbox-input bootbox-input-email form-control" autocomplete="off" type="email" />',select:'<select class="bootbox-input bootbox-input-select form-control"></select>',checkbox:'<div class="form-check checkbox"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-checkbox" type="checkbox" /></label></div>',radio:'<div class="form-check radio"><label class="form-check-label"><input class="form-check-input bootbox-input bootbox-input-radio" type="radio" name="bootbox-radio" /></label></div>',date:'<input class="bootbox-input bootbox-input-date form-control" autocomplete="off" type="date" />',time:'<input class="bootbox-input bootbox-input-time form-control" autocomplete="off" type="time" />',number:'<input class="bootbox-input bootbox-input-number form-control" autocomplete="off" type="number" />',password:'<input class="bootbox-input bootbox-input-password form-control" autocomplete="off" type="password" />',range:'<input class="bootbox-input bootbox-input-range form-control-range" autocomplete="off" type="range" />'}},w={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body",value:"",inputType:"text",swapButtonOrder:!1,centerVertical:!1,multiple:!1,scrollable:!1};return h.locales=function(t){return t?O[t]:O},h.addLocale=function(t,o){return e.each(["OK","CANCEL","CONFIRM"],function(t,e){if(!o[e])throw new Error('Please supply a translation for "'+e+'"')}),O[t]={OK:o.OK,CANCEL:o.CANCEL,CONFIRM:o.CONFIRM},h},h.removeLocale=function(t){if("en"===t)throw new Error('"en" is used as the default and fallback locale and cannot be removed.');return delete O[t],h},h.setLocale=function(t){return h.setDefaults("locale",t)},h.setDefaults=function(){var t={};return 2===arguments.length?t[arguments[0]]=arguments[1]:t=arguments[0],e.extend(w,t),h},h.hideAll=function(){return e(".bootbox").modal("hide"),h},h.init=function(o){return t(o||e)},h.dialog=function(t){if(e.fn.modal===o)throw new Error('"$.fn.modal" is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.');if(t=c(t),e.fn.modal.Constructor.VERSION){t.fullBootstrapVersion=e.fn.modal.Constructor.VERSION;var a=t.fullBootstrapVersion.indexOf(".");t.bootstrap=t.fullBootstrapVersion.substring(0,a)}else t.bootstrap="2",t.fullBootstrapVersion="2.3.2",console.warn("Bootbox will *mostly* work with Bootstrap 2, but we do not officially support it. Please upgrade, if possible.");var r=e(v.dialog),n=r.find(".modal-dialog"),i=r.find(".modal-body"),l=e(v.header),s=e(v.footer),b=t.buttons,f={onEscape:t.onEscape};if(i.find(".bootbox-body").html(t.message),p(t.buttons)>0&&(u(b,function(t,o){var a=e(v.button);switch(a.data("bb-handler",t),a.addClass(o.className),t){case"ok":case"confirm":a.addClass("bootbox-accept");break;case"cancel":a.addClass("bootbox-cancel")}a.html(o.label),s.append(a),f[t]=o.callback}),i.after(s)),t.animate===!0&&r.addClass("fade"),t.className&&r.addClass(t.className),t.size)switch(t.fullBootstrapVersion.substring(0,3)<"3.1"&&console.warn('"size" requires Bootstrap 3.1.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option."),t.size){case"small":case"sm":n.addClass("modal-sm");break;case"large":case"lg":n.addClass("modal-lg");break;case"xl":case"extra-large":t.fullBootstrapVersion.substring(0,3)<"4.2"&&console.warn('Using size "xl"/"extra-large" requires Bootstrap 4.2.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option."),n.addClass("modal-xl")}if(t.scrollable&&(t.fullBootstrapVersion.substring(0,3)<"4.3"&&console.warn('Using "scrollable" requires Bootstrap 4.3.0 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option."),n.addClass("modal-dialog-scrollable")),t.title&&(i.before(l),r.find(".modal-title").html(t.title)),t.closeButton){var m=e(v.closeButton);t.title?t.bootstrap>3?r.find(".modal-header").append(m):r.find(".modal-header").prepend(m):m.prependTo(i)}return t.centerVertical&&(t.fullBootstrapVersion<"4.0.0"&&console.warn('"centerVertical" requires Bootstrap 4.0.0-beta.3 or higher. You appear to be using '+t.fullBootstrapVersion+". Please upgrade to use this option."),n.addClass("modal-dialog-centered")),r.one("hide.bs.modal",function(t){t.target===this&&(r.off("escape.close.bb"),r.off("click"))}),r.one("hidden.bs.modal",function(t){t.target===this&&r.remove()}),r.one("shown.bs.modal",function(){r.find(".bootbox-accept").first().trigger("focus")}),"static"!==t.backdrop&&r.on("click.dismiss.bs.modal",function(t){r.children(".modal-backdrop").length&&(t.currentTarget=r.children(".modal-backdrop").get(0)),t.target===t.currentTarget&&r.trigger("escape.close.bb")}),r.on("escape.close.bb",function(t){f.onEscape&&d(t,r,f.onEscape)}),r.on("click",".modal-footer button:not(.disabled)",function(t){var a=e(this).data("bb-handler");a!==o&&d(t,r,f[a])}),r.on("click",".bootbox-close-button",function(t){d(t,r,f.onEscape)}),r.on("keyup",function(t){27===t.which&&r.trigger("escape.close.bb")}),e(t.container).append(r),r.modal({backdrop:!!t.backdrop&&"static",keyboard:!1,show:!1}),t.show&&r.modal("show"),r},h.alert=function(){var t;if(t=n("alert",["ok"],["message","callback"],arguments),t.callback&&!e.isFunction(t.callback))throw new Error('alert requires the "callback" property to be a function when provided');return t.buttons.ok.callback=t.onEscape=function(){return!e.isFunction(t.callback)||t.callback.call(this)},h.dialog(t)},h.confirm=function(){var t;if(t=n("confirm",["cancel","confirm"],["message","callback"],arguments),!e.isFunction(t.callback))throw new Error("confirm requires a callback");return t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,!1)},t.buttons.confirm.callback=function(){return t.callback.call(this,!0)},h.dialog(t)},h.prompt=function(){var t,a,r,i,l,s;if(r=e(v.form),t=n("prompt",["cancel","confirm"],["title","callback"],arguments),t.value||(t.value=w.value),t.inputType||(t.inputType=w.inputType),l=t.show===o?w.show:t.show,t.show=!1,t.buttons.cancel.callback=t.onEscape=function(){return t.callback.call(this,null)},t.buttons.confirm.callback=function(){var o;if("checkbox"===t.inputType)o=i.find("input:checked").map(function(){return e(this).val()}).get();else if("radio"===t.inputType)o=i.find("input:checked").val();else{if(i[0].checkValidity&&!i[0].checkValidity())return!1;o="select"===t.inputType&&t.multiple===!0?i.find("option:selected").map(function(){return e(this).val()}).get():i.val()}return t.callback.call(this,o)},!t.title)throw new Error("prompt requires a title");if(!e.isFunction(t.callback))throw new Error("prompt requires a callback");if(!v.inputs[t.inputType])throw new Error("Invalid prompt type");switch(i=e(v.inputs[t.inputType]),t.inputType){case"text":case"textarea":case"email":case"password":i.val(t.value),t.placeholder&&i.attr("placeholder",t.placeholder),t.pattern&&i.attr("pattern",t.pattern),t.maxlength&&i.attr("maxlength",t.maxlength),t.required&&i.prop({required:!0}),t.rows&&!isNaN(parseInt(t.rows))&&"textarea"===t.inputType&&i.attr({rows:t.rows});break;case"date":case"time":case"number":case"range":if(i.val(t.value),t.placeholder&&i.attr("placeholder",t.placeholder),t.pattern&&i.attr("pattern",t.pattern),t.required&&i.prop({required:!0}),"date"!==t.inputType&&t.step){if(!("any"===t.step||!isNaN(t.step)&&parseFloat(t.step)>0))throw new Error('"step" must be a valid positive number or the value "any". See https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input#attr-step for more information.');i.attr("step",t.step)}b(t.inputType,t.min,t.max)&&(t.min!==o&&i.attr("min",t.min),t.max!==o&&i.attr("max",t.max));break;case"select":var c={};if(s=t.inputOptions||[],!e.isArray(s))throw new Error("Please pass an array of input options");if(!s.length)throw new Error('prompt with "inputType" set to "select" requires at least one option');t.placeholder&&i.attr("placeholder",t.placeholder),t.required&&i.prop({required:!0}),t.multiple&&i.prop({multiple:!0}),u(s,function(t,a){var r=i;if(a.value===o||a.text===o)throw new Error('each option needs a "value" property and a "text" property');a.group&&(c[a.group]||(c[a.group]=e("<optgroup />").attr("label",a.group)),r=c[a.group]);var n=e(v.option);n.attr("value",a.value).text(a.text),r.append(n)}),u(c,function(t,e){i.append(e)}),i.val(t.value);break;case"checkbox":var p=e.isArray(t.value)?t.value:[t.value];if(s=t.inputOptions||[],!s.length)throw new Error('prompt with "inputType" set to "checkbox" requires at least one option');i=e('<div class="bootbox-checkbox-list"></div>'),u(s,function(a,r){if(r.value===o||r.text===o)throw new Error('each option needs a "value" property and a "text" property');var n=e(v.inputs[t.inputType]);n.find("input").attr("value",r.value),n.find("label").append("\n"+r.text),u(p,function(t,e){e===r.value&&n.find("input").prop("checked",!0)}),i.append(n)});break;case"radio":if(t.value!==o&&e.isArray(t.value))throw new Error('prompt with "inputType" set to "radio" requires a single, non-array value for "value"');if(s=t.inputOptions||[],!s.length)throw new Error('prompt with "inputType" set to "radio" requires at least one option');i=e('<div class="bootbox-radiobutton-list"></div>');var d=!0;u(s,function(a,r){if(r.value===o||r.text===o)throw new Error('each option needs a "value" property and a "text" property');var n=e(v.inputs[t.inputType]);n.find("input").attr("value",r.value),n.find("label").append("\n"+r.text),t.value!==o&&r.value===t.value&&(n.find("input").prop("checked",!0),d=!1),i.append(n)}),d&&i.find('input[type="radio"]').first().prop("checked",!0)}if(r.append(i),r.on("submit",function(t){t.preventDefault(),t.stopPropagation(),a.find(".bootbox-accept").trigger("click")}),""!==e.trim(t.message)){var f=e(v.promptMessage).html(t.message);r.prepend(f),t.message=r}else t.message=r;return a=h.dialog(t),a.off("shown.bs.modal"),a.on("shown.bs.modal",function(){i.focus()}),l===!0&&a.modal("show"),a},h});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):(t=t||self,e(t.bootstrap={},t.jQuery,t.Popper))}(this,function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}function a(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function l(t){return{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}function c(){return{bindType:_,delegateType:_,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}}}function h(t){var n=this,i=!1;return e(this).one(p.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||p.triggerTransitionEnd(n)},t),this}function u(){e.fn.emulateTransitionEnd=h,e.event.special[p.TRANSITION_END]=c()}function f(t,e){var n=t.nodeName.toLowerCase();if(e.indexOf(n)!==-1)return Yt.indexOf(n)===-1||Boolean(t.nodeValue.match($t)||t.nodeValue.match(Jt));for(var i=e.filter(function(t){return t instanceof RegExp}),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return!0;return!1}function d(t,e,n){if(0===t.length)return t;if(n&&"function"==typeof n)return n(t);for(var i=new window.DOMParser,o=i.parseFromString(t,"text/html"),r=Object.keys(e),s=[].slice.call(o.body.querySelectorAll("*")),a=function(t,n){var i=s[t],o=i.nodeName.toLowerCase();if(r.indexOf(i.nodeName.toLowerCase())===-1)return i.parentNode.removeChild(i),"continue";var a=[].slice.call(i.attributes),l=[].concat(e["*"]||[],e[o]||[]);a.forEach(function(t){f(t,l)||i.removeAttribute(t.nodeName)})},l=0,c=s.length;l<c;l++){a(l,c)}return o.body.innerHTML}e=e&&e.hasOwnProperty("default")?e["default"]:e,n=n&&n.hasOwnProperty("default")?n["default"]:n;var _="transitionend",g=1e6,m=1e3,p={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do t+=~~(Math.random()*g);while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(i){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var n=e(t).css("transition-duration"),i=e(t).css("transition-delay"),o=parseFloat(n),r=parseFloat(i);return o||r?(n=n.split(",")[0],i=i.split(",")[0],(parseFloat(n)+parseFloat(i))*m):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){e(t).trigger(_)},supportsTransitionEnd:function(){return Boolean(_)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i],r=e[i],s=r&&p.isElement(r)?"element":l(r);if(!new RegExp(o).test(s))throw new Error(t.toUpperCase()+": "+('Option "'+i+'" provided type "'+s+'" ')+('but expected type "'+o+'".'))}},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?p.findShadowRoot(t.parentNode):null}};u();var E="alert",v="4.3.1",T="bs.alert",S="."+T,I=".data-api",A=e.fn[E],C={DISMISS:'[data-dismiss="alert"]'},y={CLOSE:"close"+S,CLOSED:"closed"+S,CLICK_DATA_API:"click"+S+I},O={ALERT:"alert",FADE:"fade",SHOW:"show"},D=function(){function t(t){this._element=t}var n=t.prototype;return n.close=function(t){var e=this._element;t&&(e=this._getRootElement(t));var n=this._triggerCloseEvent(e);n.isDefaultPrevented()||this._removeElement(e)},n.dispose=function(){e.removeData(this._element,T),this._element=null},n._getRootElement=function(t){var n=p.getSelectorFromElement(t),i=!1;return n&&(i=document.querySelector(n)),i||(i=e(t).closest("."+O.ALERT)[0]),i},n._triggerCloseEvent=function(t){var n=e.Event(y.CLOSE);return e(t).trigger(n),n},n._removeElement=function(t){var n=this;if(e(t).removeClass(O.SHOW),!e(t).hasClass(O.FADE))return void this._destroyElement(t);var i=p.getTransitionDurationFromElement(t);e(t).one(p.TRANSITION_END,function(e){return n._destroyElement(t,e)}).emulateTransitionEnd(i)},n._destroyElement=function(t){e(t).detach().trigger(y.CLOSED).remove()},t._jQueryInterface=function(n){return this.each(function(){var i=e(this),o=i.data(T);o||(o=new t(this),i.data(T,o)),"close"===n&&o[n](this)})},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},o(t,null,[{key:"VERSION",get:function(){return v}}]),t}();e(document).on(y.CLICK_DATA_API,C.DISMISS,D._handleDismiss(new D)),e.fn[E]=D._jQueryInterface,e.fn[E].Constructor=D,e.fn[E].noConflict=function(){return e.fn[E]=A,D._jQueryInterface};var N="button",b="4.3.1",w="bs.button",L="."+w,P=".data-api",R=e.fn[N],H={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},W={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:'input:not([type="hidden"])',ACTIVE:".active",BUTTON:".btn"},k={CLICK_DATA_API:"click"+L+P,FOCUS_BLUR_DATA_API:"focus"+L+P+" "+("blur"+L+P)},F=function(){function t(t){this._element=t}var n=t.prototype;return n.toggle=function(){var t=!0,n=!0,i=e(this._element).closest(W.DATA_TOGGLE)[0];if(i){var o=this._element.querySelector(W.INPUT);if(o){if("radio"===o.type)if(o.checked&&this._element.classList.contains(H.ACTIVE))t=!1;else{var r=i.querySelector(W.ACTIVE);r&&e(r).removeClass(H.ACTIVE)}if(t){if(o.hasAttribute("disabled")||i.hasAttribute("disabled")||o.classList.contains("disabled")||i.classList.contains("disabled"))return;o.checked=!this._element.classList.contains(H.ACTIVE),e(o).trigger("change")}o.focus(),n=!1}}n&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(H.ACTIVE)),t&&e(this._element).toggleClass(H.ACTIVE)},n.dispose=function(){e.removeData(this._element,w),this._element=null},t._jQueryInterface=function(n){return this.each(function(){var i=e(this).data(w);i||(i=new t(this),e(this).data(w,i)),"toggle"===n&&i[n]()})},o(t,null,[{key:"VERSION",get:function(){return b}}]),t}();e(document).on(k.CLICK_DATA_API,W.DATA_TOGGLE_CARROT,function(t){t.preventDefault();var n=t.target;e(n).hasClass(H.BUTTON)||(n=e(n).closest(W.BUTTON)),F._jQueryInterface.call(e(n),"toggle")}).on(k.FOCUS_BLUR_DATA_API,W.DATA_TOGGLE_CARROT,function(t){var n=e(t.target).closest(W.BUTTON)[0];e(n).toggleClass(H.FOCUS,/^focus(in)?$/.test(t.type))}),e.fn[N]=F._jQueryInterface,e.fn[N].Constructor=F,e.fn[N].noConflict=function(){return e.fn[N]=R,F._jQueryInterface};var V="carousel",U="4.3.1",M="bs.carousel",j="."+M,G=".data-api",B=e.fn[V],x=37,K=39,q=500,Q=40,Y={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},X={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},z={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},$={SLIDE:"slide"+j,SLID:"slid"+j,KEYDOWN:"keydown"+j,MOUSEENTER:"mouseenter"+j,MOUSELEAVE:"mouseleave"+j,TOUCHSTART:"touchstart"+j,TOUCHMOVE:"touchmove"+j,TOUCHEND:"touchend"+j,POINTERDOWN:"pointerdown"+j,POINTERUP:"pointerup"+j,DRAG_START:"dragstart"+j,LOAD_DATA_API:"load"+j+G,CLICK_DATA_API:"click"+j+G},J={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},Z={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},tt={TOUCH:"touch",PEN:"pen"},et=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(Z.INDICATORS),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var n=t.prototype;return n.next=function(){this._isSliding||this._slide(z.NEXT)},n.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},n.prev=function(){this._isSliding||this._slide(z.PREV)},n.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(Z.NEXT_PREV)&&(p.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},n.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},n.to=function(t){var n=this;this._activeElement=this._element.querySelector(Z.ACTIVE_ITEM);var i=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0)){if(this._isSliding)return void e(this._element).one($.SLID,function(){return n.to(t)});if(i===t)return this.pause(),void this.cycle();var o=t>i?z.NEXT:z.PREV;this._slide(o,this._items[t])}},n.dispose=function(){e(this._element).off(j),e.removeData(this._element,M),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},n._getConfig=function(t){return t=s({},Y,t),p.typeCheckConfig(V,t,X),t},n._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=Q)){var e=t/this.touchDeltaX;e>0&&this.prev(),e<0&&this.next()}},n._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on($.KEYDOWN,function(e){return t._keydown(e)}),"hover"===this._config.pause&&e(this._element).on($.MOUSEENTER,function(e){return t.pause(e)}).on($.MOUSELEAVE,function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},n._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var n=function(e){t._pointerEvent&&tt[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},i=function(e){e.originalEvent.touches&&e.originalEvent.touches.length>1?t.touchDeltaX=0:t.touchDeltaX=e.originalEvent.touches[0].clientX-t.touchStartX},o=function(e){t._pointerEvent&&tt[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},q+t._config.interval))};e(this._element.querySelectorAll(Z.ITEM_IMG)).on($.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(e(this._element).on($.POINTERDOWN,function(t){return n(t)}),e(this._element).on($.POINTERUP,function(t){return o(t)}),this._element.classList.add(J.POINTER_EVENT)):(e(this._element).on($.TOUCHSTART,function(t){return n(t)}),e(this._element).on($.TOUCHMOVE,function(t){return i(t)}),e(this._element).on($.TOUCHEND,function(t){return o(t)}))}},n._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case x:t.preventDefault(),this.prev();break;case K:t.preventDefault(),this.next()}},n._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(Z.ITEM)):[],this._items.indexOf(t)},n._getItemByDirection=function(t,e){var n=t===z.NEXT,i=t===z.PREV,o=this._getItemIndex(e),r=this._items.length-1,s=i&&0===o||n&&o===r;if(s&&!this._config.wrap)return e;var a=t===z.PREV?-1:1,l=(o+a)%this._items.length;return l===-1?this._items[this._items.length-1]:this._items[l]},n._triggerSlideEvent=function(t,n){var i=this._getItemIndex(t),o=this._getItemIndex(this._element.querySelector(Z.ACTIVE_ITEM)),r=e.Event($.SLIDE,{relatedTarget:t,direction:n,from:o,to:i});return e(this._element).trigger(r),r},n._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var n=[].slice.call(this._indicatorsElement.querySelectorAll(Z.ACTIVE));e(n).removeClass(J.ACTIVE);var i=this._indicatorsElement.children[this._getItemIndex(t)];i&&e(i).addClass(J.ACTIVE)}},n._slide=function(t,n){var i,o,r,s=this,a=this._element.querySelector(Z.ACTIVE_ITEM),l=this._getItemIndex(a),c=n||a&&this._getItemByDirection(t,a),h=this._getItemIndex(c),u=Boolean(this._interval);if(t===z.NEXT?(i=J.LEFT,o=J.NEXT,r=z.LEFT):(i=J.RIGHT,o=J.PREV,r=z.RIGHT),c&&e(c).hasClass(J.ACTIVE))return void(this._isSliding=!1);var f=this._triggerSlideEvent(c,r);if(!f.isDefaultPrevented()&&a&&c){this._isSliding=!0,u&&this.pause(),this._setActiveIndicatorElement(c);var d=e.Event($.SLID,{relatedTarget:c,direction:r,from:l,to:h});if(e(this._element).hasClass(J.SLIDE)){e(c).addClass(o),p.reflow(c),e(a).addClass(i),e(c).addClass(i);var _=parseInt(c.getAttribute("data-interval"),10);_?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=_):this._config.interval=this._config.defaultInterval||this._config.interval;var g=p.getTransitionDurationFromElement(a);e(a).one(p.TRANSITION_END,function(){e(c).removeClass(i+" "+o).addClass(J.ACTIVE),e(a).removeClass(J.ACTIVE+" "+o+" "+i),s._isSliding=!1,setTimeout(function(){return e(s._element).trigger(d)},0)}).emulateTransitionEnd(g)}else e(a).removeClass(J.ACTIVE),e(c).addClass(J.ACTIVE),this._isSliding=!1,e(this._element).trigger(d);u&&this.cycle()}},t._jQueryInterface=function(n){return this.each(function(){var i=e(this).data(M),o=s({},Y,e(this).data());"object"==typeof n&&(o=s({},o,n));var r="string"==typeof n?n:o.slide;if(i||(i=new t(this,o),e(this).data(M,i)),"number"==typeof n)i.to(n);else if("string"==typeof r){if("undefined"==typeof i[r])throw new TypeError('No method named "'+r+'"');i[r]()}else o.interval&&o.ride&&(i.pause(),i.cycle())})},t._dataApiClickHandler=function(n){var i=p.getSelectorFromElement(this);if(i){var o=e(i)[0];if(o&&e(o).hasClass(J.CAROUSEL)){var r=s({},e(o).data(),e(this).data()),a=this.getAttribute("data-slide-to");a&&(r.interval=!1),t._jQueryInterface.call(e(o),r),a&&e(o).data(M).to(a),n.preventDefault()}}},o(t,null,[{key:"VERSION",get:function(){return U}},{key:"Default",get:function(){return Y}}]),t}();e(document).on($.CLICK_DATA_API,Z.DATA_SLIDE,et._dataApiClickHandler),e(window).on($.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(Z.DATA_RIDE)),n=0,i=t.length;n<i;n++){var o=e(t[n]);et._jQueryInterface.call(o,o.data())}}),e.fn[V]=et._jQueryInterface,e.fn[V].Constructor=et,e.fn[V].noConflict=function(){return e.fn[V]=B,et._jQueryInterface};var nt="collapse",it="4.3.1",ot="bs.collapse",rt="."+ot,st=".data-api",at=e.fn[nt],lt={toggle:!0,parent:""},ct={toggle:"boolean",parent:"(string|element)"},ht={SHOW:"show"+rt,SHOWN:"shown"+rt,HIDE:"hide"+rt,HIDDEN:"hidden"+rt,CLICK_DATA_API:"click"+rt+st},ut={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},ft={WIDTH:"width",HEIGHT:"height"},dt={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},_t=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],'+('[data-toggle="collapse"][data-target="#'+t.id+'"]')));for(var n=[].slice.call(document.querySelectorAll(dt.DATA_TOGGLE)),i=0,o=n.length;i<o;i++){var r=n[i],s=p.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(s)).filter(function(e){return e===t});null!==s&&a.length>0&&(this._selector=s,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var n=t.prototype;return n.toggle=function(){e(this._element).hasClass(ut.SHOW)?this.hide():this.show()},n.show=function(){var n=this;if(!this._isTransitioning&&!e(this._element).hasClass(ut.SHOW)){var i,o;if(this._parent&&(i=[].slice.call(this._parent.querySelectorAll(dt.ACTIVES)).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(ut.COLLAPSE)}),0===i.length&&(i=null)),!(i&&(o=e(i).not(this._selector).data(ot),o&&o._isTransitioning))){var r=e.Event(ht.SHOW);if(e(this._element).trigger(r),!r.isDefaultPrevented()){i&&(t._jQueryInterface.call(e(i).not(this._selector),"hide"),o||e(i).data(ot,null));var s=this._getDimension();e(this._element).removeClass(ut.COLLAPSE).addClass(ut.COLLAPSING),this._element.style[s]=0,this._triggerArray.length&&e(this._triggerArray).removeClass(ut.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var a=function(){e(n._element).removeClass(ut.COLLAPSING).addClass(ut.COLLAPSE).addClass(ut.SHOW),n._element.style[s]="",n.setTransitioning(!1),e(n._element).trigger(ht.SHOWN)},l=s[0].toUpperCase()+s.slice(1),c="scroll"+l,h=p.getTransitionDurationFromElement(this._element);e(this._element).one(p.TRANSITION_END,a).emulateTransitionEnd(h),this._element.style[s]=this._element[c]+"px"}}}},n.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass(ut.SHOW)){var n=e.Event(ht.HIDE);if(e(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension();this._element.style[i]=this._element.getBoundingClientRect()[i]+"px",p.reflow(this._element),e(this._element).addClass(ut.COLLAPSING).removeClass(ut.COLLAPSE).removeClass(ut.SHOW);var o=this._triggerArray.length;if(o>0)for(var r=0;r<o;r++){var s=this._triggerArray[r],a=p.getSelectorFromElement(s);if(null!==a){var l=e([].slice.call(document.querySelectorAll(a)));l.hasClass(ut.SHOW)||e(s).addClass(ut.COLLAPSED).attr("aria-expanded",!1)}}this.setTransitioning(!0);var c=function(){t.setTransitioning(!1),e(t._element).removeClass(ut.COLLAPSING).addClass(ut.COLLAPSE).trigger(ht.HIDDEN)};this._element.style[i]="";var h=p.getTransitionDurationFromElement(this._element);e(this._element).one(p.TRANSITION_END,c).emulateTransitionEnd(h)}}},n.setTransitioning=function(t){this._isTransitioning=t},n.dispose=function(){e.removeData(this._element,ot),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},n._getConfig=function(t){return t=s({},lt,t),t.toggle=Boolean(t.toggle),p.typeCheckConfig(nt,t,ct),t},n._getDimension=function(){var t=e(this._element).hasClass(ft.WIDTH);return t?ft.WIDTH:ft.HEIGHT},n._getParent=function(){var n,i=this;p.isElement(this._config.parent)?(n=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(n=this._config.parent[0])):n=document.querySelector(this._config.parent);var o='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',r=[].slice.call(n.querySelectorAll(o));return e(r).each(function(e,n){i._addAriaAndCollapsedClass(t._getTargetFromElement(n),[n])}),n},n._addAriaAndCollapsedClass=function(t,n){var i=e(t).hasClass(ut.SHOW);n.length&&e(n).toggleClass(ut.COLLAPSED,!i).attr("aria-expanded",i)},t._getTargetFromElement=function(t){var e=p.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(n){return this.each(function(){var i=e(this),o=i.data(ot),r=s({},lt,i.data(),"object"==typeof n&&n?n:{});if(!o&&r.toggle&&/show|hide/.test(n)&&(r.toggle=!1),o||(o=new t(this,r),i.data(ot,o)),"string"==typeof n){if("undefined"==typeof o[n])throw new TypeError('No method named "'+n+'"');o[n]()}})},o(t,null,[{key:"VERSION",get:function(){return it}},{key:"Default",get:function(){return lt}}]),t}();e(document).on(ht.CLICK_DATA_API,dt.DATA_TOGGLE,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=e(this),i=p.getSelectorFromElement(this),o=[].slice.call(document.querySelectorAll(i));e(o).each(function(){var t=e(this),i=t.data(ot),o=i?"toggle":n.data();_t._jQueryInterface.call(t,o)})}),e.fn[nt]=_t._jQueryInterface,e.fn[nt].Constructor=_t,e.fn[nt].noConflict=function(){return e.fn[nt]=at,_t._jQueryInterface};var gt="dropdown",mt="4.3.1",pt="bs.dropdown",Et="."+pt,vt=".data-api",Tt=e.fn[gt],St=27,It=32,At=9,Ct=38,yt=40,Ot=3,Dt=new RegExp(Ct+"|"+yt+"|"+St),Nt={HIDE:"hide"+Et,HIDDEN:"hidden"+Et,SHOW:"show"+Et,SHOWN:"shown"+Et,CLICK:"click"+Et,CLICK_DATA_API:"click"+Et+vt,KEYDOWN_DATA_API:"keydown"+Et+vt,KEYUP_DATA_API:"keyup"+Et+vt},bt={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},wt={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},Lt={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},Pt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic"},Rt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string"},Ht=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var i=t.prototype;return i.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass(bt.DISABLED)){var i=t._getParentFromElement(this._element),o=e(this._menu).hasClass(bt.SHOW);if(t._clearMenus(),!o){var r={relatedTarget:this._element},s=e.Event(Nt.SHOW,r);if(e(i).trigger(s),!s.isDefaultPrevented()){if(!this._inNavbar){if("undefined"==typeof n)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var a=this._element;"parent"===this._config.reference?a=i:p.isElement(this._config.reference)&&(a=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(a=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(i).addClass(bt.POSITION_STATIC),this._popper=new n(a,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(i).closest(wt.NAVBAR_NAV).length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass(bt.SHOW),e(i).toggleClass(bt.SHOW).trigger(e.Event(Nt.SHOWN,r))}}}},i.show=function(){if(!(this._element.disabled||e(this._element).hasClass(bt.DISABLED)||e(this._menu).hasClass(bt.SHOW))){var n={relatedTarget:this._element},i=e.Event(Nt.SHOW,n),o=t._getParentFromElement(this._element);e(o).trigger(i),i.isDefaultPrevented()||(e(this._menu).toggleClass(bt.SHOW),e(o).toggleClass(bt.SHOW).trigger(e.Event(Nt.SHOWN,n)))}},i.hide=function(){if(!this._element.disabled&&!e(this._element).hasClass(bt.DISABLED)&&e(this._menu).hasClass(bt.SHOW)){var n={relatedTarget:this._element},i=e.Event(Nt.HIDE,n),o=t._getParentFromElement(this._element);e(o).trigger(i),i.isDefaultPrevented()||(e(this._menu).toggleClass(bt.SHOW),e(o).toggleClass(bt.SHOW).trigger(e.Event(Nt.HIDDEN,n)))}},i.dispose=function(){e.removeData(this._element,pt),e(this._element).off(Et),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},i.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},i._addEventListeners=function(){var t=this;e(this._element).on(Nt.CLICK,function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},i._getConfig=function(t){return t=s({},this.constructor.Default,e(this._element).data(),t),p.typeCheckConfig(gt,t,this.constructor.DefaultType),t},i._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(wt.MENU))}return this._menu},i._getPlacement=function(){var t=e(this._element.parentNode),n=Lt.BOTTOM;return t.hasClass(bt.DROPUP)?(n=Lt.TOP,e(this._menu).hasClass(bt.MENURIGHT)&&(n=Lt.TOPEND)):t.hasClass(bt.DROPRIGHT)?n=Lt.RIGHT:t.hasClass(bt.DROPLEFT)?n=Lt.LEFT:e(this._menu).hasClass(bt.MENURIGHT)&&(n=Lt.BOTTOMEND),n},i._detectNavbar=function(){return e(this._element).closest(".navbar").length>0},i._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=s({},e.offsets,t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},i._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),t},t._jQueryInterface=function(n){return this.each(function(){var i=e(this).data(pt),o="object"==typeof n?n:null;if(i||(i=new t(this,o),e(this).data(pt,i)),"string"==typeof n){if("undefined"==typeof i[n])throw new TypeError('No method named "'+n+'"');i[n]()}})},t._clearMenus=function(n){if(!n||n.which!==Ot&&("keyup"!==n.type||n.which===At))for(var i=[].slice.call(document.querySelectorAll(wt.DATA_TOGGLE)),o=0,r=i.length;o<r;o++){var s=t._getParentFromElement(i[o]),a=e(i[o]).data(pt),l={relatedTarget:i[o]};if(n&&"click"===n.type&&(l.clickEvent=n),a){var c=a._menu;if(e(s).hasClass(bt.SHOW)&&!(n&&("click"===n.type&&/input|textarea/i.test(n.target.tagName)||"keyup"===n.type&&n.which===At)&&e.contains(s,n.target))){var h=e.Event(Nt.HIDE,l);e(s).trigger(h),h.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),i[o].setAttribute("aria-expanded","false"),e(c).removeClass(bt.SHOW),e(s).removeClass(bt.SHOW).trigger(e.Event(Nt.HIDDEN,l)))}}}},t._getParentFromElement=function(t){var e,n=p.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},t._dataApiKeydownHandler=function(n){if((/input|textarea/i.test(n.target.tagName)?!(n.which===It||n.which!==St&&(n.which!==yt&&n.which!==Ct||e(n.target).closest(wt.MENU).length)):Dt.test(n.which))&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!e(this).hasClass(bt.DISABLED))){var i=t._getParentFromElement(this),o=e(i).hasClass(bt.SHOW);if(!o||o&&(n.which===St||n.which===It)){if(n.which===St){var r=i.querySelector(wt.DATA_TOGGLE);e(r).trigger("focus")}return void e(this).trigger("click")}var s=[].slice.call(i.querySelectorAll(wt.VISIBLE_ITEMS));if(0!==s.length){var a=s.indexOf(n.target);n.which===Ct&&a>0&&a--,n.which===yt&&a<s.length-1&&a++,a<0&&(a=0),s[a].focus()}}},o(t,null,[{key:"VERSION",get:function(){return mt}},{key:"Default",get:function(){return Pt}},{key:"DefaultType",get:function(){return Rt}}]),t}();e(document).on(Nt.KEYDOWN_DATA_API,wt.DATA_TOGGLE,Ht._dataApiKeydownHandler).on(Nt.KEYDOWN_DATA_API,wt.MENU,Ht._dataApiKeydownHandler).on(Nt.CLICK_DATA_API+" "+Nt.KEYUP_DATA_API,Ht._clearMenus).on(Nt.CLICK_DATA_API,wt.DATA_TOGGLE,function(t){t.preventDefault(),t.stopPropagation(),Ht._jQueryInterface.call(e(this),"toggle")}).on(Nt.CLICK_DATA_API,wt.FORM_CHILD,function(t){t.stopPropagation()}),e.fn[gt]=Ht._jQueryInterface,e.fn[gt].Constructor=Ht,e.fn[gt].noConflict=function(){return e.fn[gt]=Tt,Ht._jQueryInterface};var Wt="modal",kt="4.3.1",Ft="bs.modal",Vt="."+Ft,Ut=".data-api",Mt=e.fn[Wt],jt=27,Gt={backdrop:!0,keyboard:!0,focus:!0,show:!0},Bt={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},xt={HIDE:"hide"+Vt,HIDDEN:"hidden"+Vt,SHOW:"show"+Vt,SHOWN:"shown"+Vt,FOCUSIN:"focusin"+Vt,RESIZE:"resize"+Vt,CLICK_DISMISS:"click.dismiss"+Vt,KEYDOWN_DISMISS:"keydown.dismiss"+Vt,MOUSEUP_DISMISS:"mouseup.dismiss"+Vt,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Vt,CLICK_DATA_API:"click"+Vt+Ut},Kt={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},qt={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},Qt=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(qt.DIALOG),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var n=t.prototype;return n.toggle=function(t){return this._isShown?this.hide():this.show(t)},n.show=function(t){var n=this;if(!this._isShown&&!this._isTransitioning){e(this._element).hasClass(Kt.FADE)&&(this._isTransitioning=!0);var i=e.Event(xt.SHOW,{relatedTarget:t});e(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on(xt.CLICK_DISMISS,qt.DATA_DISMISS,function(t){return n.hide(t)}),e(this._dialog).on(xt.MOUSEDOWN_DISMISS,function(){e(n._element).one(xt.MOUSEUP_DISMISS,function(t){e(t.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(t)}))}},n.hide=function(t){var n=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var i=e.Event(xt.HIDE);if(e(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var o=e(this._element).hasClass(Kt.FADE);if(o&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off(xt.FOCUSIN),e(this._element).removeClass(Kt.SHOW),e(this._element).off(xt.CLICK_DISMISS),e(this._dialog).off(xt.MOUSEDOWN_DISMISS),o){var r=p.getTransitionDurationFromElement(this._element);e(this._element).one(p.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(r)}else this._hideModal()}}},n.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return e(t).off(Vt)}),e(document).off(xt.FOCUSIN),e.removeData(this._element,Ft),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},n.handleUpdate=function(){this._adjustDialog()},n._getConfig=function(t){return t=s({},Gt,t),p.typeCheckConfig(Wt,t,Bt),t},n._showElement=function(t){var n=this,i=e(this._element).hasClass(Kt.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),e(this._dialog).hasClass(Kt.SCROLLABLE)?this._dialog.querySelector(qt.MODAL_BODY).scrollTop=0:this._element.scrollTop=0,i&&p.reflow(this._element),e(this._element).addClass(Kt.SHOW),this._config.focus&&this._enforceFocus();var o=e.Event(xt.SHOWN,{relatedTarget:t}),r=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,e(n._element).trigger(o)};if(i){var s=p.getTransitionDurationFromElement(this._dialog);e(this._dialog).one(p.TRANSITION_END,r).emulateTransitionEnd(s)}else r()},n._enforceFocus=function(){var t=this;e(document).off(xt.FOCUSIN).on(xt.FOCUSIN,function(n){document!==n.target&&t._element!==n.target&&0===e(t._element).has(n.target).length&&t._element.focus()})},n._setEscapeEvent=function(){var t=this;this._isShown&&this._config.keyboard?e(this._element).on(xt.KEYDOWN_DISMISS,function(e){
e.which===jt&&(e.preventDefault(),t.hide())}):this._isShown||e(this._element).off(xt.KEYDOWN_DISMISS)},n._setResizeEvent=function(){var t=this;this._isShown?e(window).on(xt.RESIZE,function(e){return t.handleUpdate(e)}):e(window).off(xt.RESIZE)},n._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass(Kt.OPEN),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger(xt.HIDDEN)})},n._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},n._showBackdrop=function(t){var n=this,i=e(this._element).hasClass(Kt.FADE)?Kt.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=Kt.BACKDROP,i&&this._backdrop.classList.add(i),e(this._backdrop).appendTo(document.body),e(this._element).on(xt.CLICK_DISMISS,function(t){return n._ignoreBackdropClick?void(n._ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide()))}),i&&p.reflow(this._backdrop),e(this._backdrop).addClass(Kt.SHOW),!t)return;if(!i)return void t();var o=p.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(p.TRANSITION_END,t).emulateTransitionEnd(o)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass(Kt.SHOW);var r=function(){n._removeBackdrop(),t&&t()};if(e(this._element).hasClass(Kt.FADE)){var s=p.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(p.TRANSITION_END,r).emulateTransitionEnd(s)}else r()}else t&&t()},n._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},n._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},n._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},n._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var n=[].slice.call(document.querySelectorAll(qt.FIXED_CONTENT)),i=[].slice.call(document.querySelectorAll(qt.STICKY_CONTENT));e(n).each(function(n,i){var o=i.style.paddingRight,r=e(i).css("padding-right");e(i).data("padding-right",o).css("padding-right",parseFloat(r)+t._scrollbarWidth+"px")}),e(i).each(function(n,i){var o=i.style.marginRight,r=e(i).css("margin-right");e(i).data("margin-right",o).css("margin-right",parseFloat(r)-t._scrollbarWidth+"px")});var o=document.body.style.paddingRight,r=e(document.body).css("padding-right");e(document.body).data("padding-right",o).css("padding-right",parseFloat(r)+this._scrollbarWidth+"px")}e(document.body).addClass(Kt.OPEN)},n._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(qt.FIXED_CONTENT));e(t).each(function(t,n){var i=e(n).data("padding-right");e(n).removeData("padding-right"),n.style.paddingRight=i?i:""});var n=[].slice.call(document.querySelectorAll(""+qt.STICKY_CONTENT));e(n).each(function(t,n){var i=e(n).data("margin-right");"undefined"!=typeof i&&e(n).css("margin-right",i).removeData("margin-right")});var i=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=i?i:""},n._getScrollbarWidth=function(){var t=document.createElement("div");t.className=Kt.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(n,i){return this.each(function(){var o=e(this).data(Ft),r=s({},Gt,e(this).data(),"object"==typeof n&&n?n:{});if(o||(o=new t(this,r),e(this).data(Ft,o)),"string"==typeof n){if("undefined"==typeof o[n])throw new TypeError('No method named "'+n+'"');o[n](i)}else r.show&&o.show(i)})},o(t,null,[{key:"VERSION",get:function(){return kt}},{key:"Default",get:function(){return Gt}}]),t}();e(document).on(xt.CLICK_DATA_API,qt.DATA_TOGGLE,function(t){var n,i=this,o=p.getSelectorFromElement(this);o&&(n=document.querySelector(o));var r=e(n).data(Ft)?"toggle":s({},e(n).data(),e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var a=e(n).one(xt.SHOW,function(t){t.isDefaultPrevented()||a.one(xt.HIDDEN,function(){e(i).is(":visible")&&i.focus()})});Qt._jQueryInterface.call(e(n),r,this)}),e.fn[Wt]=Qt._jQueryInterface,e.fn[Wt].Constructor=Qt,e.fn[Wt].noConflict=function(){return e.fn[Wt]=Mt,Qt._jQueryInterface};var Yt=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Xt=/^aria-[\w-]*$/i,zt={"*":["class","dir","id","lang","role",Xt],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},$t=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,Jt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,Zt="tooltip",te="4.3.1",ee="bs.tooltip",ne="."+ee,ie=e.fn[Zt],oe="bs-tooltip",re=new RegExp("(^|\\s)"+oe+"\\S+","g"),se=["sanitize","whiteList","sanitizeFn"],ae={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},le={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},ce={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:zt},he={SHOW:"show",OUT:"out"},ue={HIDE:"hide"+ne,HIDDEN:"hidden"+ne,SHOW:"show"+ne,SHOWN:"shown"+ne,INSERTED:"inserted"+ne,CLICK:"click"+ne,FOCUSIN:"focusin"+ne,FOCUSOUT:"focusout"+ne,MOUSEENTER:"mouseenter"+ne,MOUSELEAVE:"mouseleave"+ne},fe={FADE:"fade",SHOW:"show"},de={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},_e={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},ge=function(){function t(t,e){if("undefined"==typeof n)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var i=t.prototype;return i.enable=function(){this._isEnabled=!0},i.disable=function(){this._isEnabled=!1},i.toggleEnabled=function(){this._isEnabled=!this._isEnabled},i.toggle=function(t){if(this._isEnabled)if(t){var n=this.constructor.DATA_KEY,i=e(t.currentTarget).data(n);i||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(e(this.getTipElement()).hasClass(fe.SHOW))return void this._leave(null,this);this._enter(null,this)}},i.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},i.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var i=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(i);var o=p.findShadowRoot(this.element),r=e.contains(null!==o?o:this.element.ownerDocument.documentElement,this.element);if(i.isDefaultPrevented()||!r)return;var s=this.getTipElement(),a=p.getUID(this.constructor.NAME);s.setAttribute("id",a),this.element.setAttribute("aria-describedby",a),this.setContent(),this.config.animation&&e(s).addClass(fe.FADE);var l="function"==typeof this.config.placement?this.config.placement.call(this,s,this.element):this.config.placement,c=this._getAttachment(l);this.addAttachmentClass(c);var h=this._getContainer();e(s).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(s).appendTo(h),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new n(this.element,s,{placement:c,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:de.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&t._handlePopperPlacementChange(e)},onUpdate:function(e){return t._handlePopperPlacementChange(e)}}),e(s).addClass(fe.SHOW),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var u=function(){t.config.animation&&t._fixTransition();var n=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),n===he.OUT&&t._leave(null,t)};if(e(this.tip).hasClass(fe.FADE)){var f=p.getTransitionDurationFromElement(this.tip);e(this.tip).one(p.TRANSITION_END,u).emulateTransitionEnd(f)}else u()}},i.hide=function(t){var n=this,i=this.getTipElement(),o=e.Event(this.constructor.Event.HIDE),r=function(){n._hoverState!==he.SHOW&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),e(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()};if(e(this.element).trigger(o),!o.isDefaultPrevented()){if(e(i).removeClass(fe.SHOW),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger[_e.CLICK]=!1,this._activeTrigger[_e.FOCUS]=!1,this._activeTrigger[_e.HOVER]=!1,e(this.tip).hasClass(fe.FADE)){var s=p.getTransitionDurationFromElement(i);e(i).one(p.TRANSITION_END,r).emulateTransitionEnd(s)}else r();this._hoverState=""}},i.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},i.isWithContent=function(){return Boolean(this.getTitle())},i.addAttachmentClass=function(t){e(this.getTipElement()).addClass(oe+"-"+t)},i.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},i.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(de.TOOLTIP_INNER)),this.getTitle()),e(t).removeClass(fe.FADE+" "+fe.SHOW)},i.setElementContent=function(t,n){return"object"==typeof n&&(n.nodeType||n.jquery)?void(this.config.html?e(n).parent().is(t)||t.empty().append(n):t.text(e(n).text())):void(this.config.html?(this.config.sanitize&&(n=d(n,this.config.whiteList,this.config.sanitizeFn)),t.html(n)):t.text(n))},i.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},i._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=s({},e.offsets,t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},i._getContainer=function(){return this.config.container===!1?document.body:p.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},i._getAttachment=function(t){return le[t.toUpperCase()]},i._setListeners=function(){var t=this,n=this.config.trigger.split(" ");n.forEach(function(n){if("click"===n)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if(n!==_e.MANUAL){var i=n===_e.HOVER?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,o=n===_e.HOVER?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(i,t.config.selector,function(e){return t._enter(e)}).on(o,t.config.selector,function(e){return t._leave(e)})}}),e(this.element).closest(".modal").on("hide.bs.modal",function(){t.element&&t.hide()}),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},i._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},i._enter=function(t,n){var i=this.constructor.DATA_KEY;return n=n||e(t.currentTarget).data(i),n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),t&&(n._activeTrigger["focusin"===t.type?_e.FOCUS:_e.HOVER]=!0),e(n.getTipElement()).hasClass(fe.SHOW)||n._hoverState===he.SHOW?void(n._hoverState=he.SHOW):(clearTimeout(n._timeout),n._hoverState=he.SHOW,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===he.SHOW&&n.show()},n.config.delay.show)):void n.show())},i._leave=function(t,n){var i=this.constructor.DATA_KEY;if(n=n||e(t.currentTarget).data(i),n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),t&&(n._activeTrigger["focusout"===t.type?_e.FOCUS:_e.HOVER]=!1),!n._isWithActiveTrigger())return clearTimeout(n._timeout),n._hoverState=he.OUT,n.config.delay&&n.config.delay.hide?void(n._timeout=setTimeout(function(){n._hoverState===he.OUT&&n.hide()},n.config.delay.hide)):void n.hide()},i._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},i._getConfig=function(t){var n=e(this.element).data();return Object.keys(n).forEach(function(t){se.indexOf(t)!==-1&&delete n[t]}),t=s({},this.constructor.Default,n,"object"==typeof t&&t?t:{}),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),p.typeCheckConfig(Zt,t,this.constructor.DefaultType),t.sanitize&&(t.template=d(t.template,t.whiteList,t.sanitizeFn)),t},i._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},i._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(re);null!==n&&n.length&&t.removeClass(n.join(""))},i._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},i._fixTransition=function(){var t=this.getTipElement(),n=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(fe.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=n)},t._jQueryInterface=function(n){return this.each(function(){var i=e(this).data(ee),o="object"==typeof n&&n;if((i||!/dispose|hide/.test(n))&&(i||(i=new t(this,o),e(this).data(ee,i)),"string"==typeof n)){if("undefined"==typeof i[n])throw new TypeError('No method named "'+n+'"');i[n]()}})},o(t,null,[{key:"VERSION",get:function(){return te}},{key:"Default",get:function(){return ce}},{key:"NAME",get:function(){return Zt}},{key:"DATA_KEY",get:function(){return ee}},{key:"Event",get:function(){return ue}},{key:"EVENT_KEY",get:function(){return ne}},{key:"DefaultType",get:function(){return ae}}]),t}();e.fn[Zt]=ge._jQueryInterface,e.fn[Zt].Constructor=ge,e.fn[Zt].noConflict=function(){return e.fn[Zt]=ie,ge._jQueryInterface};var me="popover",pe="4.3.1",Ee="bs.popover",ve="."+Ee,Te=e.fn[me],Se="bs-popover",Ie=new RegExp("(^|\\s)"+Se+"\\S+","g"),Ae=s({},ge.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Ce=s({},ge.DefaultType,{content:"(string|element|function)"}),ye={FADE:"fade",SHOW:"show"},Oe={TITLE:".popover-header",CONTENT:".popover-body"},De={HIDE:"hide"+ve,HIDDEN:"hidden"+ve,SHOW:"show"+ve,SHOWN:"shown"+ve,INSERTED:"inserted"+ve,CLICK:"click"+ve,FOCUSIN:"focusin"+ve,FOCUSOUT:"focusout"+ve,MOUSEENTER:"mouseenter"+ve,MOUSELEAVE:"mouseleave"+ve},Ne=function(t){function n(){return t.apply(this,arguments)||this}a(n,t);var i=n.prototype;return i.isWithContent=function(){return this.getTitle()||this._getContent()},i.addAttachmentClass=function(t){e(this.getTipElement()).addClass(Se+"-"+t)},i.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},i.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(Oe.TITLE),this.getTitle());var n=this._getContent();"function"==typeof n&&(n=n.call(this.element)),this.setElementContent(t.find(Oe.CONTENT),n),t.removeClass(ye.FADE+" "+ye.SHOW)},i._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},i._cleanTipClass=function(){var t=e(this.getTipElement()),n=t.attr("class").match(Ie);null!==n&&n.length>0&&t.removeClass(n.join(""))},n._jQueryInterface=function(t){return this.each(function(){var i=e(this).data(Ee),o="object"==typeof t?t:null;if((i||!/dispose|hide/.test(t))&&(i||(i=new n(this,o),e(this).data(Ee,i)),"string"==typeof t)){if("undefined"==typeof i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},o(n,null,[{key:"VERSION",get:function(){return pe}},{key:"Default",get:function(){return Ae}},{key:"NAME",get:function(){return me}},{key:"DATA_KEY",get:function(){return Ee}},{key:"Event",get:function(){return De}},{key:"EVENT_KEY",get:function(){return ve}},{key:"DefaultType",get:function(){return Ce}}]),n}(ge);e.fn[me]=Ne._jQueryInterface,e.fn[me].Constructor=Ne,e.fn[me].noConflict=function(){return e.fn[me]=Te,Ne._jQueryInterface};var be="scrollspy",we="4.3.1",Le="bs.scrollspy",Pe="."+Le,Re=".data-api",He=e.fn[be],We={offset:10,method:"auto",target:""},ke={offset:"number",method:"string",target:"(string|element)"},Fe={ACTIVATE:"activate"+Pe,SCROLL:"scroll"+Pe,LOAD_DATA_API:"load"+Pe+Re},Ve={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},Ue={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},Me={OFFSET:"offset",POSITION:"position"},je=function(){function t(t,n){var i=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(n),this._selector=this._config.target+" "+Ue.NAV_LINKS+","+(this._config.target+" "+Ue.LIST_ITEMS+",")+(this._config.target+" "+Ue.DROPDOWN_ITEMS),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on(Fe.SCROLL,function(t){return i._process(t)}),this.refresh(),this._process()}var n=t.prototype;return n.refresh=function(){var t=this,n=this._scrollElement===this._scrollElement.window?Me.OFFSET:Me.POSITION,i="auto"===this._config.method?n:this._config.method,o=i===Me.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight();var r=[].slice.call(document.querySelectorAll(this._selector));r.map(function(t){var n,r=p.getSelectorFromElement(t);if(r&&(n=document.querySelector(r)),n){var s=n.getBoundingClientRect();if(s.width||s.height)return[e(n)[i]().top+o,r]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},n.dispose=function(){e.removeData(this._element,Le),e(this._scrollElement).off(Pe),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},n._getConfig=function(t){if(t=s({},We,"object"==typeof t&&t?t:{}),"string"!=typeof t.target){var n=e(t.target).attr("id");n||(n=p.getUID(be),e(t.target).attr("id",n)),t.target="#"+n}return p.typeCheckConfig(be,t,ke),t},n._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},n._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},n._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},n._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];return void(this._activeTarget!==i&&this._activate(i))}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length,r=o;r--;){var s=this._activeTarget!==this._targets[r]&&t>=this._offsets[r]&&("undefined"==typeof this._offsets[r+1]||t<this._offsets[r+1]);s&&this._activate(this._targets[r])}},n._activate=function(t){this._activeTarget=t,this._clear();var n=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),i=e([].slice.call(document.querySelectorAll(n.join(","))));i.hasClass(Ve.DROPDOWN_ITEM)?(i.closest(Ue.DROPDOWN).find(Ue.DROPDOWN_TOGGLE).addClass(Ve.ACTIVE),i.addClass(Ve.ACTIVE)):(i.addClass(Ve.ACTIVE),i.parents(Ue.NAV_LIST_GROUP).prev(Ue.NAV_LINKS+", "+Ue.LIST_ITEMS).addClass(Ve.ACTIVE),i.parents(Ue.NAV_LIST_GROUP).prev(Ue.NAV_ITEMS).children(Ue.NAV_LINKS).addClass(Ve.ACTIVE)),e(this._scrollElement).trigger(Fe.ACTIVATE,{relatedTarget:t})},n._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(Ve.ACTIVE)}).forEach(function(t){return t.classList.remove(Ve.ACTIVE)})},t._jQueryInterface=function(n){return this.each(function(){var i=e(this).data(Le),o="object"==typeof n&&n;if(i||(i=new t(this,o),e(this).data(Le,i)),"string"==typeof n){if("undefined"==typeof i[n])throw new TypeError('No method named "'+n+'"');i[n]()}})},o(t,null,[{key:"VERSION",get:function(){return we}},{key:"Default",get:function(){return We}}]),t}();e(window).on(Fe.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(Ue.DATA_SPY)),n=t.length,i=n;i--;){var o=e(t[i]);je._jQueryInterface.call(o,o.data())}}),e.fn[be]=je._jQueryInterface,e.fn[be].Constructor=je,e.fn[be].noConflict=function(){return e.fn[be]=He,je._jQueryInterface};var Ge="tab",Be="4.3.1",xe="bs.tab",Ke="."+xe,qe=".data-api",Qe=e.fn[Ge],Ye={HIDE:"hide"+Ke,HIDDEN:"hidden"+Ke,SHOW:"show"+Ke,SHOWN:"shown"+Ke,CLICK_DATA_API:"click"+Ke+qe},Xe={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},ze={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},$e=function(){function t(t){this._element=t}var n=t.prototype;return n.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(Xe.ACTIVE)||e(this._element).hasClass(Xe.DISABLED))){var n,i,o=e(this._element).closest(ze.NAV_LIST_GROUP)[0],r=p.getSelectorFromElement(this._element);if(o){var s="UL"===o.nodeName||"OL"===o.nodeName?ze.ACTIVE_UL:ze.ACTIVE;i=e.makeArray(e(o).find(s)),i=i[i.length-1]}var a=e.Event(Ye.HIDE,{relatedTarget:this._element}),l=e.Event(Ye.SHOW,{relatedTarget:i});if(i&&e(i).trigger(a),e(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){r&&(n=document.querySelector(r)),this._activate(this._element,o);var c=function(){var n=e.Event(Ye.HIDDEN,{relatedTarget:t._element}),o=e.Event(Ye.SHOWN,{relatedTarget:i});e(i).trigger(n),e(t._element).trigger(o)};n?this._activate(n,n.parentNode,c):c()}}},n.dispose=function(){e.removeData(this._element,xe),this._element=null},n._activate=function(t,n,i){var o=this,r=!n||"UL"!==n.nodeName&&"OL"!==n.nodeName?e(n).children(ze.ACTIVE):e(n).find(ze.ACTIVE_UL),s=r[0],a=i&&s&&e(s).hasClass(Xe.FADE),l=function(){return o._transitionComplete(t,s,i)};if(s&&a){var c=p.getTransitionDurationFromElement(s);e(s).removeClass(Xe.SHOW).one(p.TRANSITION_END,l).emulateTransitionEnd(c)}else l()},n._transitionComplete=function(t,n,i){if(n){e(n).removeClass(Xe.ACTIVE);var o=e(n.parentNode).find(ze.DROPDOWN_ACTIVE_CHILD)[0];o&&e(o).removeClass(Xe.ACTIVE),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(e(t).addClass(Xe.ACTIVE),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),p.reflow(t),t.classList.contains(Xe.FADE)&&t.classList.add(Xe.SHOW),t.parentNode&&e(t.parentNode).hasClass(Xe.DROPDOWN_MENU)){var r=e(t).closest(ze.DROPDOWN)[0];if(r){var s=[].slice.call(r.querySelectorAll(ze.DROPDOWN_TOGGLE));e(s).addClass(Xe.ACTIVE)}t.setAttribute("aria-expanded",!0)}i&&i()},t._jQueryInterface=function(n){return this.each(function(){var i=e(this),o=i.data(xe);if(o||(o=new t(this),i.data(xe,o)),"string"==typeof n){if("undefined"==typeof o[n])throw new TypeError('No method named "'+n+'"');o[n]()}})},o(t,null,[{key:"VERSION",get:function(){return Be}}]),t}();e(document).on(Ye.CLICK_DATA_API,ze.DATA_TOGGLE,function(t){t.preventDefault(),$e._jQueryInterface.call(e(this),"show")}),e.fn[Ge]=$e._jQueryInterface,e.fn[Ge].Constructor=$e,e.fn[Ge].noConflict=function(){return e.fn[Ge]=Qe,$e._jQueryInterface};var Je="toast",Ze="4.3.1",tn="bs.toast",en="."+tn,nn=e.fn[Je],on={CLICK_DISMISS:"click.dismiss"+en,HIDE:"hide"+en,HIDDEN:"hidden"+en,SHOW:"show"+en,SHOWN:"shown"+en},rn={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},sn={animation:"boolean",autohide:"boolean",delay:"number"},an={animation:!0,autohide:!0,delay:500},ln={DATA_DISMISS:'[data-dismiss="toast"]'},cn=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var n=t.prototype;return n.show=function(){var t=this;e(this._element).trigger(on.SHOW),this._config.animation&&this._element.classList.add(rn.FADE);var n=function(){t._element.classList.remove(rn.SHOWING),t._element.classList.add(rn.SHOW),e(t._element).trigger(on.SHOWN),t._config.autohide&&t.hide()};if(this._element.classList.remove(rn.HIDE),this._element.classList.add(rn.SHOWING),this._config.animation){var i=p.getTransitionDurationFromElement(this._element);e(this._element).one(p.TRANSITION_END,n).emulateTransitionEnd(i)}else n()},n.hide=function(t){var n=this;this._element.classList.contains(rn.SHOW)&&(e(this._element).trigger(on.HIDE),t?this._close():this._timeout=setTimeout(function(){n._close()},this._config.delay))},n.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(rn.SHOW)&&this._element.classList.remove(rn.SHOW),e(this._element).off(on.CLICK_DISMISS),e.removeData(this._element,tn),this._element=null,this._config=null},n._getConfig=function(t){return t=s({},an,e(this._element).data(),"object"==typeof t&&t?t:{}),p.typeCheckConfig(Je,t,this.constructor.DefaultType),t},n._setListeners=function(){var t=this;e(this._element).on(on.CLICK_DISMISS,ln.DATA_DISMISS,function(){return t.hide(!0)})},n._close=function(){var t=this,n=function(){t._element.classList.add(rn.HIDE),e(t._element).trigger(on.HIDDEN)};if(this._element.classList.remove(rn.SHOW),this._config.animation){var i=p.getTransitionDurationFromElement(this._element);e(this._element).one(p.TRANSITION_END,n).emulateTransitionEnd(i)}else n()},t._jQueryInterface=function(n){return this.each(function(){var i=e(this),o=i.data(tn),r="object"==typeof n&&n;if(o||(o=new t(this,r),i.data(tn,o)),"string"==typeof n){if("undefined"==typeof o[n])throw new TypeError('No method named "'+n+'"');o[n](this)}})},o(t,null,[{key:"VERSION",get:function(){return Ze}},{key:"DefaultType",get:function(){return sn}},{key:"Default",get:function(){return an}}]),t}();e.fn[Je]=cn._jQueryInterface,e.fn[Je].Constructor=cn,e.fn[Je].noConflict=function(){return e.fn[Je]=nn,cn._jQueryInterface},function(){if("undefined"==typeof e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split("."),n=1,i=2,o=9,r=1,s=4;if(t[0]<i&&t[1]<o||t[0]===n&&t[1]===o&&t[2]<r||t[0]>=s)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(),t.Util=p,t.Alert=D,t.Button=F,t.Carousel=et,t.Collapse=_t,t.Dropdown=Ht,t.Modal=Qt,t.Popover=Ne,t.Scrollspy=je,t.Tab=$e,t.Toast=cn,t.Tooltip=ge,Object.defineProperty(t,"__esModule",{value:!0})});
!function(e){"use strict";function t(t,i){var n=t.nodeName.toLowerCase();if(e.inArray(n,i)!==-1)return e.inArray(n,h)===-1||Boolean(t.nodeValue.match(f)||t.nodeValue.match(m));for(var s=e(i).filter(function(e,t){return t instanceof RegExp}),o=0,r=s.length;o<r;o++)if(n.match(s[o]))return!0;return!1}function i(e,i,n){if(n&&"function"==typeof n)return n(e);for(var s=Object.keys(i),o=0,r=e.length;o<r;o++)for(var l=e[o].querySelectorAll("*"),a=0,c=l.length;a<c;a++){var d=l[a],h=d.nodeName.toLowerCase();if(s.indexOf(h)!==-1)for(var p=[].slice.call(d.attributes),u=[].concat(i["*"]||[],i[h]||[]),f=0,m=p.length;f<m;f++){var v=p[f];t(v,u)||d.removeAttribute(v.nodeName)}else d.parentNode.removeChild(d)}}function n(e,t){return e.length===t.length&&e.every(function(e,i){return e===t[i]})}function s(e){var t,i=[],n=e.selectedOptions;if(e.multiple)for(var s=0,o=n.length;s<o;s++)t=n[s],i.push(t.value||t.text);else i=e.value;return i}function o(e,t,i,n){for(var s=["content","subtext","tokens"],o=!1,r=0;r<s.length;r++){var l=s[r],c=e[l];if(c&&(c=c.toString(),"content"===l&&(c=c.replace(/<[^>]+>/g,"")),n&&(c=a(c)),c=c.toUpperCase(),o="contains"===i?c.indexOf(t)>=0:c.startsWith(t)))break}return o}function r(e){return parseInt(e,10)||0}function l(e){return I[e]}function a(e){return e=e.toString(),e&&e.replace(k,l).replace(A,"")}function c(t){var i=arguments,n=t;if([].shift.apply(i),!P.success){try{P.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(s){P.full=G.BootstrapVersion.split(" ")[0].split(".")}P.major=P.full[0],P.success=!0,"4"===P.major&&(M.DIVIDER="dropdown-divider",M.SHOW="show",M.BUTTONCLASS="btn-light",G.DEFAULTS.style=M.BUTTONCLASS="btn-light",M.POPOVERHEADER="popover-header")}var o,r=this.each(function(){var t=e(this);if(t.is("select")){var s=t.data("selectpicker"),r="object"==typeof n&&n;if(s){if(r)for(var l in r)r.hasOwnProperty(l)&&(s.options[l]=r[l])}else{var a=t.data();for(var c in a)a.hasOwnProperty(c)&&e.inArray(c,d)!==-1&&delete a[c];var h=e.extend({},G.DEFAULTS,e.fn.selectpicker.defaults||{},a,r);h.template=e.extend({},G.DEFAULTS.template,e.fn.selectpicker.defaults?e.fn.selectpicker.defaults.template:{},a.template,r.template),t.data("selectpicker",s=new G(this,h))}"string"==typeof n&&(o=s[n]instanceof Function?s[n].apply(s,i):s.options[n])}});return"undefined"!=typeof o?o:r}var d=["sanitize","whiteList","sanitizeFn"],h=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],p=/^aria-[\w-]*$/i,u={"*":["class","dir","id","lang","role","tabindex","style",p],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},f=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,m=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;"classList"in document.createElement("_")||!function(t){if("Element"in t){var i="classList",n="prototype",s=t.Element[n],o=Object,r=function(){var t=e(this);return{add:function(e){return t.addClass(e)},remove:function(e){return t.removeClass(e)},toggle:function(e,i){return t.toggleClass(e,i)},contains:function(e){return t.hasClass(e)}}};if(o.defineProperty){var l={get:r,enumerable:!0,configurable:!0};try{o.defineProperty(s,i,l)}catch(a){void 0!==a.number&&a.number!==-2146823252||(l.enumerable=!1,o.defineProperty(s,i,l))}}else o[n].__defineGetter__&&s.__defineGetter__(i,r)}}(window);var v=document.createElement("_");if(v.classList.toggle("c3",!1),v.classList.contains("c3")){var g=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:g.call(this,e)}}v=null,String.prototype.startsWith||!function(){var e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(n){}return i}(),t={}.toString,i=function(e){if(null==this)throw new TypeError;var i=String(this);if(e&&"[object RegExp]"==t.call(e))throw new TypeError;var n=i.length,s=String(e),o=s.length,r=arguments.length>1?arguments[1]:void 0,l=r?Number(r):0;l!=l&&(l=0);var a=Math.min(Math.max(l,0),n);if(o+a>n)return!1;for(var c=-1;++c<o;)if(i.charCodeAt(a+c)!=s.charCodeAt(c))return!1;return!0};e?e(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}(),Object.keys||(Object.keys=function(e,t,i){i=[];for(t in e)i.hasOwnProperty.call(e,t)&&i.push(t);return i}),HTMLSelectElement.prototype.hasOwnProperty("selectedOptions")||Object.defineProperty(HTMLSelectElement.prototype,"selectedOptions",{get:function(){return this.querySelectorAll(":checked")}});var b={useDefault:!1,_set:e.valHooks.select.set};e.valHooks.select.set=function(t,i){return i&&!b.useDefault&&e(t).data("selected",!0),b._set.apply(this,arguments)};var w=null,x=function(){try{return new Event("change"),!0}catch(e){return!1}}();e.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(x?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event"),t.initEvent(e,!0,!1)),i.dispatchEvent(t)):i.fireEvent?(t=document.createEventObject(),t.eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var I={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"s"},k=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,$="\\u0300-\\u036f",E="\\ufe20-\\ufe2f",S="\\u20d0-\\u20ff",y="\\u1ab0-\\u1aff",C="\\u1dc0-\\u1dff",O=$+E+S+y+C,z="["+O+"]",A=RegExp(z,"g"),T={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=function(e){var t=function(t){return e[t]},i="(?:"+Object.keys(e).join("|")+")",n=RegExp(i),s=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(s,t):e}},H=L(T),D={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},N={ESCAPE:27,ENTER:13,SPACE:32,TAB:9,ARROW_UP:38,ARROW_DOWN:40},P={success:!1,major:"3"};try{P.full=(e.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),P.major=P.full[0],P.success=!0}catch(R){console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",R)}var W=0,B=".bs.select",M={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title"},U={MENU:"."+M.MENU};"4"===P.major&&(M.DIVIDER="dropdown-divider",M.SHOW="show",M.BUTTONCLASS="btn-light",M.POPOVERHEADER="popover-header");var V={span:document.createElement("span"),i:document.createElement("i"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode("Â "),fragment:document.createDocumentFragment()};V.a.setAttribute("role","option"),V.subtext.className="text-muted",V.text=V.span.cloneNode(!1),V.text.className="text";var j=new RegExp(N.ARROW_UP+"|"+N.ARROW_DOWN),_=new RegExp("^"+N.TAB+"$|"+N.ESCAPE),F={li:function(e,t,i){var n=V.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?n.appendChild(e):n.innerHTML=e),"undefined"!=typeof t&&""!==t&&(n.className=t),"undefined"!=typeof i&&null!==i&&n.classList.add("optgroup-"+i),n},a:function(e,t,i){var n=V.a.cloneNode(!0);return e&&(11===e.nodeType?n.appendChild(e):n.insertAdjacentHTML("beforeend",e)),"undefined"!=typeof t&&""!==t&&(n.className=t),"4"===P.major&&n.classList.add("dropdown-item"),i&&n.setAttribute("style",i),n},text:function(e,t){var i,n,s=V.text.cloneNode(!1);if(e.optionContent)s.innerHTML=e.optionContent;else{if(s.textContent=e.text,e.optionIcon){var o=V.whitespace.cloneNode(!1);n=(t===!0?V.i:V.span).cloneNode(!1),n.className=e.iconBase+" "+e.optionIcon,V.fragment.appendChild(n),V.fragment.appendChild(o)}e.optionSubtext&&(i=V.subtext.cloneNode(!1),i.textContent=e.optionSubtext,s.appendChild(i))}if(t===!0)for(;s.childNodes.length>0;)V.fragment.appendChild(s.childNodes[0]);else V.fragment.appendChild(s);return V.fragment},label:function(e){var t,i,n=V.text.cloneNode(!1);if(n.innerHTML=e.labelEscaped,e.labelIcon){var s=V.whitespace.cloneNode(!1);i=V.span.cloneNode(!1),i.className=e.iconBase+" "+e.labelIcon,V.fragment.appendChild(i),V.fragment.appendChild(s)}return e.labelSubtext&&(t=V.subtext.cloneNode(!1),t.textContent=e.labelSubtext,n.appendChild(t)),V.fragment.appendChild(n),V.fragment}},G=function(t,i){var n=this;b.useDefault||(e.valHooks.select.set=b._set,b.useDefault=!0),this.$element=e(t),this.$newElement=null,this.$button=null,this.$menu=null,this.options=i,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){n.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var s=this.options.windowPadding;"number"==typeof s&&(this.options.windowPadding=[s,s,s,s]),this.val=G.prototype.val,this.render=G.prototype.render,this.refresh=G.prototype.refresh,this.setStyle=G.prototype.setStyle,this.selectAll=G.prototype.selectAll,this.deselectAll=G.prototype.deselectAll,this.destroy=G.prototype.destroy,this.remove=G.prototype.remove,this.show=G.prototype.show,this.hide=G.prototype.hide,this.init()};G.VERSION="1.13.6",G.BootstrapVersion=P.major,G.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:M.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1,sanitize:!0,sanitizeFn:null,whiteList:u},"4"===P.major&&(G.DEFAULTS.style="btn-light",G.DEFAULTS.iconBase="",G.DEFAULTS.tickIcon="bs-ok-default"),G.prototype={constructor:G,init:function(){var e=this,t=this.$element.attr("id");this.selectId=W++,this.$element[0].classList.add("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(U.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element[0].classList.remove("bs-select-hidden"),this.options.dropdownAlignRight===!0&&this.$menu[0].classList.add(M.MENURIGHT),"undefined"!=typeof t&&this.$button.attr("data-id",t),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide"+B,function(){if(e.isVirtual()){var t=e.$menuInner[0],i=t.firstChild.cloneNode(!1);t.replaceChild(i,t.firstChild),t.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(t){e.$menuInner.attr("aria-expanded",!1),e.$element.trigger("hide"+B,t)},"hidden.bs.dropdown":function(t){e.$element.trigger("hidden"+B,t)},"show.bs.dropdown":function(t){e.$menuInner.attr("aria-expanded",!0),e.$element.trigger("show"+B,t)},"shown.bs.dropdown":function(t){e.$element.trigger("shown"+B,t)}}),e.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){e.$button[0].classList.add("bs-invalid"),e.$element.on("shown"+B+".invalid",function(){e.$element.val(e.$element.val()).off("shown"+B+".invalid")}).on("rendered"+B,function(){this.validity.valid&&e.$button[0].classList.remove("bs-invalid"),e.$element.off("rendered"+B)}),e.$button.on("blur"+B,function(){e.$element.trigger("focus").trigger("blur"),e.$button.off("blur"+B)})}),setTimeout(function(){e.createLi(),e.$element.trigger("loaded"+B)})},createDropdown:function(){var t,i=this.multiple||this.options.showTick?" show-tick":"",n=this.autofocus?" autofocus":"",s="",o="",r="",l="";return this.options.header&&(s='<div class="'+M.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(o='<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+H(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>'),this.multiple&&this.options.actionsBox&&(r='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+M.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+M.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(l='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+M.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),t='<div class="dropdown bootstrap-select'+i+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+n+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===P.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+M.MENU+" "+("4"===P.major?"":M.SHOW)+'" role="combobox">'+s+o+r+'<div class="inner '+M.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="'+M.MENU+" inner "+("4"===P.major?M.SHOW:"")+'"></ul></div>'+l+"</div></div>",e(t)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return this.options.virtualScroll!==!1&&this.selectpicker.main.elements.length>=this.options.virtualScroll||this.options.virtualScroll===!0},createView:function(t,s){function o(e,s){var o,d,h,p,u,f,m,v,g=r.selectpicker.current.elements.length,b=[],w=!0,x=r.isVirtual();r.selectpicker.view.scrollTop=e,x===!0&&r.sizeInfo.hasScrollBar&&r.$menu[0].offsetWidth>r.sizeInfo.totalMenuWidth&&(r.sizeInfo.menuWidth=r.$menu[0].offsetWidth,r.sizeInfo.totalMenuWidth=r.sizeInfo.menuWidth+r.sizeInfo.scrollBarWidth,r.$menu.css("min-width",r.sizeInfo.menuWidth)),o=Math.ceil(r.sizeInfo.menuInnerHeight/r.sizeInfo.liHeight*1.5),d=Math.round(g/o)||1;for(var I=0;I<d;I++){var k=(I+1)*o;if(I===d-1&&(k=g),b[I]=[I*o+(I?1:0),k],!g)break;void 0===u&&e<=r.selectpicker.current.data[k-1].position-r.sizeInfo.menuInnerHeight&&(u=I)}if(void 0===u&&(u=0),f=[r.selectpicker.view.position0,r.selectpicker.view.position1],h=Math.max(0,u-1),p=Math.min(d-1,u+1),r.selectpicker.view.position0=Math.max(0,b[h][0])||0,r.selectpicker.view.position1=Math.min(g,b[p][1])||0,m=f[0]!==r.selectpicker.view.position0||f[1]!==r.selectpicker.view.position1,void 0!==r.activeIndex&&(a=r.selectpicker.current.elements[r.selectpicker.current.map.newIndex[r.prevActiveIndex]],c=r.selectpicker.current.elements[r.selectpicker.current.map.newIndex[r.activeIndex]],l=r.selectpicker.current.elements[r.selectpicker.current.map.newIndex[r.selectedIndex]],s&&(r.activeIndex!==r.selectedIndex&&c&&c.length&&(c.classList.remove("active"),c.firstChild&&c.firstChild.classList.remove("active")),r.activeIndex=void 0),r.activeIndex&&r.activeIndex!==r.selectedIndex&&l&&l.length&&(l.classList.remove("active"),l.firstChild&&l.firstChild.classList.remove("active"))),void 0!==r.prevActiveIndex&&r.prevActiveIndex!==r.activeIndex&&r.prevActiveIndex!==r.selectedIndex&&a&&a.length&&(a.classList.remove("active"),a.firstChild&&a.firstChild.classList.remove("active")),(s||m)&&(v=r.selectpicker.view.visibleElements?r.selectpicker.view.visibleElements.slice():[],r.selectpicker.view.visibleElements=r.selectpicker.current.elements.slice(r.selectpicker.view.position0,r.selectpicker.view.position1),r.setOptionStatus(),(t||x===!1&&s)&&(w=!n(v,r.selectpicker.view.visibleElements)),(s||x===!0)&&w)){var $,E,S=r.$menuInner[0],y=document.createDocumentFragment(),C=S.firstChild.cloneNode(!1),O=x===!0?r.selectpicker.view.visibleElements:r.selectpicker.current.elements,z=[];S.replaceChild(C,S.firstChild);for(var I=0,A=O.length;I<A;I++){var T,L,H=O[I];r.options.sanitize&&(T=H.lastChild,T&&(L=r.selectpicker.current.data[I+r.selectpicker.view.position0].data,L&&L.content&&!L.sanitized&&(z.push(T),L.sanitized=!0))),y.appendChild(H)}r.options.sanitize&&z.length&&i(z,r.options.whiteList,r.options.sanitizeFn),x===!0&&($=0===r.selectpicker.view.position0?0:r.selectpicker.current.data[r.selectpicker.view.position0-1].position,E=r.selectpicker.view.position1>g-1?0:r.selectpicker.current.data[g-1].position-r.selectpicker.current.data[r.selectpicker.view.position1-1].position,S.firstChild.style.marginTop=$+"px",S.firstChild.style.marginBottom=E+"px"),S.firstChild.appendChild(y)}if(r.prevActiveIndex=r.activeIndex,r.options.liveSearch){if(t&&s){var D,N=0;r.selectpicker.view.canHighlight[N]||(N=1+r.selectpicker.view.canHighlight.slice(1).indexOf(!0)),D=r.selectpicker.view.visibleElements[N],r.selectpicker.view.currentActive&&(r.selectpicker.view.currentActive.classList.remove("active"),r.selectpicker.view.currentActive.firstChild&&r.selectpicker.view.currentActive.firstChild.classList.remove("active")),D&&(D.classList.add("active"),D.firstChild&&D.firstChild.classList.add("active")),r.activeIndex=r.selectpicker.current.map.originalIndex[N]}}else r.$menuInner.trigger("focus")}s=s||0;var r=this;this.selectpicker.current=t?this.selectpicker.search:this.selectpicker.main;var l,a,c=[];this.setPositionData(),o(s,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){r.noScroll||o(this.scrollTop,t),r.noScroll=!1}),e(window).off("resize"+B+"."+this.selectId+".createView").on("resize"+B+"."+this.selectId+".createView",function(){var e=r.$newElement.hasClass(M.SHOW);e&&o(r.$menuInner[0].scrollTop)})},setPlaceholder:function(){var t=!1;if(this.options.title&&!this.multiple){this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option")),t=!0;var i=this.$element[0],n=!1,s=!this.selectpicker.view.titleOption.parentNode;if(s){this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="";var o=e(i.options[i.selectedIndex]);n=void 0===o.attr("selected")&&void 0===this.$element.data("selected")}(s||0!==this.selectpicker.view.titleOption.index)&&i.insertBefore(this.selectpicker.view.titleOption,i.firstChild),n&&(i.selectedIndex=0)}return t},createLi:function(){var e,t,i=this,n=i.options.iconBase,s=':not([hidden]):not([data-hidden="true"])',o=[],r=0,l=[],a=0,c=0,d=-1;this.options.hideDisabled&&(s+=":not(:disabled)"),(i.options.showTick||i.multiple)&&(e=V.span.cloneNode(!1),e.className=n+" "+i.options.tickIcon+" check-mark",V.a.appendChild(e)),this.setPlaceholder()&&d--;for(var h=this.$element[0].options,p=0,u=h.length;p<u;p++){var f=h[p];if(d++,!f.classList.contains("bs-title-option")){var m,v,g,b,w={content:f.getAttribute("data-content"),tokens:f.getAttribute("data-tokens"),subtext:f.getAttribute("data-subtext"),icon:f.getAttribute("data-icon"),hidden:"true"===f.getAttribute("data-hidden"),divider:"true"===f.getAttribute("data-divider")},x=f.className||"",I=f.style.cssText,k=I?H(I):"",$=w.content,E=f.textContent,S=f.parentNode,y=f.nextElementSibling,C=f.previousElementSibling,O="OPTGROUP"===S.tagName,z=O&&S.disabled,A=f.disabled||z,T=C&&"OPTGROUP"===C.tagName,L={hidden:"true"===S.getAttribute("data-hidden")};if(w.hidden===!0||f.hidden||O&&(L.hidden===!0||S.hidden)||i.options.hideDisabled&&(A||z))m=f.prevHiddenIndex,y&&(y.prevHiddenIndex=void 0!==m?m:p),d--;else{if(y&&void 0!==y.prevHiddenIndex&&(y.prevHiddenIndex=void 0),O&&w.divider!==!0){var D=" "+S.className||"",N=f.previousElementSibling;if(m=f.prevHiddenIndex,void 0!==m&&(N=h[m].previousElementSibling),!N){a+=1,L.subtext=S.getAttribute("data-subtext"),L.icon=S.getAttribute("data-icon");var P=S.label,R=H(P),W=L.subtext,B=L.icon;0!==p&&o.length>0&&(d++,o.push(F.li(!1,M.DIVIDER,a+"div")),l.push({type:"divider",optID:a})),d++,g=F.label({labelEscaped:R,labelSubtext:W,labelIcon:B,iconBase:n}),o.push(F.li(g,"dropdown-header"+D,a)),l.push({content:R,subtext:W,type:"optgroup-label",optID:a}),c=d-1}v=F.text({text:E,optionContent:$,optionSubtext:w.subtext,optionIcon:w.icon,iconBase:n}),o.push(F.li(F.a(v,"opt "+x+D,k),"",a)),l.push({content:$||E,subtext:w.subtext,tokens:w.tokens,type:"option",optID:a,headerIndex:c,lastIndex:c+S.querySelectorAll("option"+s).length,originalIndex:p,data:w})}else if(w.divider===!0)o.push(F.li(!1,M.DIVIDER)),l.push({type:"divider",originalIndex:p,data:w});else{if(i.options.hideDisabled)if(T){var U=C.querySelectorAll("option:disabled");U.length===C.children.length&&(T=!1)}else if(m=f.prevHiddenIndex,void 0!==m&&(b=h[m].previousElementSibling,b&&"OPTGROUP"===b.tagName&&!b.disabled)){var U=b.querySelectorAll("option:disabled");U.length<b.children.length&&(T=!0)}T&&l.length&&"divider"!==l[l.length-1].type&&(d++,o.push(F.li(!1,M.DIVIDER,a+"div")),l.push({type:"divider",optID:a})),v=F.text({text:E,optionContent:$,optionSubtext:w.subtext,optionIcon:w.icon,iconBase:n}),o.push(F.li(F.a(v,x,k))),l.push({content:$||E,subtext:w.subtext,tokens:w.tokens,type:"option",originalIndex:p,data:w})}i.selectpicker.main.map.newIndex[p]=d,i.selectpicker.main.map.originalIndex[d]=p;var j=l[l.length-1];j.disabled=A;var _=0;j.content&&(_+=j.content.length),j.subtext&&(_+=j.subtext.length),w.icon&&(_+=1),_>r&&(r=_,t=o[o.length-1])}}}this.selectpicker.main.elements=o,this.selectpicker.main.data=l,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=t},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){this.setPlaceholder();var e,t,n=this,s=this.$element[0].selectedOptions,o=s.length,r=this.$button.find(".filter-option-inner-inner")[0],l=document.createTextNode(this.options.multipleSeparator),a=V.fragment.cloneNode(!1),c=!1;if(this.togglePlaceholder(),this.tabIndex(),"static"===this.options.selectedTextFormat)a=F.text({text:this.options.title},!0);else if(e=this.multiple&&this.options.selectedTextFormat.indexOf("count")!==-1&&o>1,e&&(t=this.options.selectedTextFormat.split(">"),e=t.length>1&&o>t[1]||1===t.length&&o>=2),e===!1){for(var d=0;d<o&&d<50;d++){var h=s[d],p={},u={content:h.getAttribute("data-content"),subtext:h.getAttribute("data-subtext"),icon:h.getAttribute("data-icon")};this.multiple&&d>0&&a.appendChild(l.cloneNode(!1)),h.title?p.text=h.title:u.content&&n.options.showContent?(p.optionContent=u.content.toString(),c=!0):(n.options.showIcon&&(p.optionIcon=u.icon,p.iconBase=this.options.iconBase),n.options.showSubtext&&!n.multiple&&u.subtext&&(p.optionSubtext=" "+u.subtext),p.text=h.textContent.trim()),a.appendChild(F.text(p,!0))}o>49&&a.appendChild(document.createTextNode("..."))}else{var f=':not([hidden]):not([data-hidden="true"]):not([data-divider="true"])';this.options.hideDisabled&&(f+=":not(:disabled)");var m=this.$element[0].querySelectorAll("select > option"+f+", optgroup"+f+" option"+f).length,v="function"==typeof this.options.countSelectedText?this.options.countSelectedText(o,m):this.options.countSelectedText;a=F.text({text:v.replace("{0}",o.toString()).replace("{1}",m.toString())},!0)}void 0==this.options.title&&(this.options.title=this.$element.attr("title")),a.childNodes.length||(a=F.text({text:"undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText},!0)),this.$button[0].title=a.textContent.replace(/<[^>]*>?/g,"").trim(),this.options.sanitize&&c&&i([a],n.options.whiteList,n.options.sanitizeFn),r.innerHTML="",r.appendChild(a),this.$element.trigger("rendered"+B)},setStyle:function(e,t){var i=this.$button[0];this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var n=e||this.options.style;"add"==t?i.classList.add(n):"remove"==t?i.classList.remove(n):(i.classList.remove(this.options.style),i.classList.add(n))},liHeight:function(t){if(t||this.options.size!==!1&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var i=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),o=document.createElement("ul"),l=document.createElement("li"),a=document.createElement("li"),c=document.createElement("li"),d=document.createElement("a"),h=document.createElement("span"),p=this.options.header&&this.$menu.find("."+M.POPOVERHEADER).length>0?this.$menu.find("."+M.POPOVERHEADER)[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,f=this.options.actionsBox&&this.multiple&&this.$menu.find(".bs-actionsbox").length>0?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,m=this.options.doneButton&&this.multiple&&this.$menu.find(".bs-donebutton").length>0?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,v=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,h.className="text",d.className="dropdown-item "+(v?v.className:""),i.className=this.$menu[0].parentNode.className+" "+M.SHOW,i.style.width=this.sizeInfo.selectWidth+"px","auto"===this.options.width&&(n.style.minWidth=0),n.className=M.MENU+" "+M.SHOW,s.className="inner "+M.SHOW,o.className=M.MENU+" inner "+("4"===P.major?M.SHOW:""),l.className=M.DIVIDER,a.className="dropdown-header",h.appendChild(document.createTextNode("â")),d.appendChild(h),c.appendChild(d),a.appendChild(h.cloneNode(!0)),this.selectpicker.view.widestOption&&o.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),o.appendChild(c),o.appendChild(l),o.appendChild(a),p&&n.appendChild(p),u){var g=document.createElement("input");u.className="bs-searchbox",g.className="form-control",u.appendChild(g),n.appendChild(u)}f&&n.appendChild(f),s.appendChild(o),n.appendChild(s),m&&n.appendChild(m),i.appendChild(n),document.body.appendChild(i);var b,w=d.offsetHeight,x=a?a.offsetHeight:0,I=p?p.offsetHeight:0,k=u?u.offsetHeight:0,$=f?f.offsetHeight:0,E=m?m.offsetHeight:0,S=e(l).outerHeight(!0),y=!!window.getComputedStyle&&window.getComputedStyle(n),C=n.offsetWidth,O=y?null:e(n),z={vert:r(y?y.paddingTop:O.css("paddingTop"))+r(y?y.paddingBottom:O.css("paddingBottom"))+r(y?y.borderTopWidth:O.css("borderTopWidth"))+r(y?y.borderBottomWidth:O.css("borderBottomWidth")),horiz:r(y?y.paddingLeft:O.css("paddingLeft"))+r(y?y.paddingRight:O.css("paddingRight"))+r(y?y.borderLeftWidth:O.css("borderLeftWidth"))+r(y?y.borderRightWidth:O.css("borderRightWidth"))},A={vert:z.vert+r(y?y.marginTop:O.css("marginTop"))+r(y?y.marginBottom:O.css("marginBottom"))+2,horiz:z.horiz+r(y?y.marginLeft:O.css("marginLeft"))+r(y?y.marginRight:O.css("marginRight"))+2};s.style.overflowY="scroll",b=n.offsetWidth-C,document.body.removeChild(i),this.sizeInfo.liHeight=w,this.sizeInfo.dropdownHeaderHeight=x,this.sizeInfo.headerHeight=I,this.sizeInfo.searchHeight=k,this.sizeInfo.actionsHeight=$,this.sizeInfo.doneButtonHeight=E,this.sizeInfo.dividerHeight=S,this.sizeInfo.menuPadding=z,this.sizeInfo.menuExtras=A,this.sizeInfo.menuWidth=C,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=b,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var t,i=this,n=e(window),s=i.$newElement.offset(),o=e(i.options.container);i.options.container&&o.length&&!o.is("body")?(t=o.offset(),t.top+=parseInt(o.css("borderTopWidth")),t.left+=parseInt(o.css("borderLeftWidth"))):t={top:0,left:0};var r=i.options.windowPadding;this.sizeInfo.selectOffsetTop=s.top-t.top-n.scrollTop(),this.sizeInfo.selectOffsetBot=n.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-t.top-r[2],this.sizeInfo.selectOffsetLeft=s.left-t.left-n.scrollLeft(),this.sizeInfo.selectOffsetRight=n.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-t.left-r[1],this.sizeInfo.selectOffsetTop-=r[0],this.sizeInfo.selectOffsetLeft-=r[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,n,s,o,r,l,a=this.sizeInfo.selectWidth,c=this.sizeInfo.liHeight,d=this.sizeInfo.headerHeight,h=this.sizeInfo.searchHeight,p=this.sizeInfo.actionsHeight,u=this.sizeInfo.doneButtonHeight,f=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,v=0;if(this.options.dropupAuto&&(l=c*this.selectpicker.current.elements.length+m.vert,this.$newElement.toggleClass(M.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&l+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)),"auto"===this.options.size)s=this.selectpicker.current.elements.length>3?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,n=s+d+h+p+u,r=Math.max(s-m.vert,0),this.$newElement.hasClass(M.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),o=i,t=i-d-h-p-u-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){
for(var g=0;g<this.options.size;g++)"divider"===this.selectpicker.current.data[g].type&&v++;i=c*this.options.size+v*f+m.vert,t=i-m.vert,o=i+d+h+p+u,n=r=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(M.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.sizeInfo.totalMenuWidth-a),this.$menu.css({"max-height":o+"px",overflow:"hidden","min-height":n+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":r+"px"}),this.sizeInfo.menuInnerHeight=Math.max(t,1),this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(t){if(this.liHeight(t),this.options.header&&this.$menu.css("padding-top",0),this.options.size!==!1){var i,n=this,s=e(window),o=0;this.setMenuSize(),this.options.liveSearch&&this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return n.setMenuSize()}),"auto"===this.options.size?s.off("resize"+B+"."+this.selectId+".setMenuSize scroll"+B+"."+this.selectId+".setMenuSize").on("resize"+B+"."+this.selectId+".setMenuSize scroll"+B+"."+this.selectId+".setMenuSize",function(){return n.setMenuSize()}):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&s.off("resize"+B+"."+this.selectId+".setMenuSize scroll"+B+"."+this.selectId+".setMenuSize"),t?o=this.$menuInner[0].scrollTop:n.multiple||(i=n.selectpicker.main.map.newIndex[n.$element[0].selectedIndex],"number"==typeof i&&n.options.size!==!1&&(o=n.sizeInfo.liHeight*i,o=o-n.sizeInfo.menuInnerHeight/2+n.sizeInfo.liHeight/2)),n.createView(!1,o)}},setWidth:function(){var e=this;"auto"===this.options.width?requestAnimationFrame(function(){e.$menu.css("min-width","0"),e.liHeight(),e.setMenuSize();var t=e.$newElement.clone().appendTo("body"),i=t.css("width","auto").children("button").outerWidth();t.remove(),e.sizeInfo.selectWidth=Math.max(e.sizeInfo.totalMenuWidth,i),e.$newElement.css("width",e.sizeInfo.selectWidth+"px")}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement[0].classList.remove("fit-width")},selectPosition:function(){this.$bsContainer=e('<div class="bs-container" />');var t,i,n,s=this,o=e(this.options.container),r=function(r){var l={},a=s.options.display||!!e.fn.dropdown.Constructor.Default&&e.fn.dropdown.Constructor.Default.display;s.$bsContainer.addClass(r.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(M.DROPUP,r.hasClass(M.DROPUP)),t=r.offset(),o.is("body")?i={top:0,left:0}:(i=o.offset(),i.top+=parseInt(o.css("borderTopWidth"))-o.scrollTop(),i.left+=parseInt(o.css("borderLeftWidth"))-o.scrollLeft()),n=r.hasClass(M.DROPUP)?0:r[0].offsetHeight,(P.major<4||"static"===a)&&(l.top=t.top-i.top+n,l.left=t.left-i.left),l.width=r[0].offsetWidth,s.$bsContainer.css(l)};this.$button.on("click.bs.dropdown.data-api",function(){s.isDisabled()||(r(s.$newElement),s.$bsContainer.appendTo(s.options.container).toggleClass(M.SHOW,!s.$button.hasClass(M.SHOW)).append(s.$menu))}),e(window).off("resize"+B+"."+this.selectId+" scroll"+B+"."+this.selectId).on("resize"+B+"."+this.selectId+" scroll"+B+"."+this.selectId,function(){var e=s.$newElement.hasClass(M.SHOW);e&&r(s.$newElement)}),this.$element.on("hide"+B,function(){s.$menu.data("height",s.$menu.height()),s.$bsContainer.detach()})},setOptionStatus:function(){var e=this,t=this.$element[0].options;if(e.noScroll=!1,e.selectpicker.view.visibleElements&&e.selectpicker.view.visibleElements.length)for(var i=0;i<e.selectpicker.view.visibleElements.length;i++){var n=e.selectpicker.current.map.originalIndex[i+e.selectpicker.view.position0],s=t[n];if(s){var o=this.selectpicker.main.map.newIndex[n],r=this.selectpicker.main.elements[o];e.setDisabled(n,s.disabled||"OPTGROUP"===s.parentNode.tagName&&s.parentNode.disabled,o,r),e.setSelected(n,s.selected,o,r)}}},setSelected:function(e,t,i,n){var s,o,r,l=void 0!==this.activeIndex,a=this.activeIndex===e,c=a||t&&!this.multiple&&!l;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),r=n.firstChild,t&&(this.selectedIndex=e),n.classList.toggle("selected",t),n.classList.toggle("active",c),c&&(this.selectpicker.view.currentActive=n,this.activeIndex=e),r&&(r.classList.toggle("selected",t),r.classList.toggle("active",c),r.setAttribute("aria-selected",t)),c||!l&&t&&void 0!==this.prevActiveIndex&&(s=this.selectpicker.main.map.newIndex[this.prevActiveIndex],o=this.selectpicker.main.elements[s],o.classList.remove("active"),o.firstChild&&o.firstChild.classList.remove("active"))},setDisabled:function(e,t,i,n){var s;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),s=n.firstChild,n.classList.toggle(M.DISABLED,t),s&&("4"===P.major&&s.classList.toggle(M.DISABLED,t),s.setAttribute("aria-disabled",t),t?s.setAttribute("tabindex",-1):s.setAttribute("tabindex",0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement[0].classList.add(M.DISABLED),this.$button.addClass(M.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button[0].classList.contains(M.DISABLED)&&(this.$newElement[0].classList.remove(M.DISABLED),this.$button.removeClass(M.DISABLED).attr("aria-disabled",!1)),this.$button.attr("tabindex")!=-1||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.on("click",function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element[0],t=e.selectedIndex,i=t===-1;i||e.options[t].value||(i=!0),this.$button.toggleClass("bs-placeholder",i)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&this.$element.attr("tabindex")!==-98&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){function t(){n.options.liveSearch?n.$searchbox.trigger("focus"):n.$menuInner.trigger("focus")}function i(){n.dropdown&&n.dropdown._popper&&n.dropdown._popper.state.isCreated?t():requestAnimationFrame(i)}var n=this,o=e(document);o.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&o.data("spaceSelect")&&(e.preventDefault(),o.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){P.major>3&&!n.dropdown&&(n.dropdown=n.$button.data("bs.dropdown"),n.dropdown._menu=n.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){n.$newElement.hasClass(M.SHOW)||n.setSize()}),this.$element.on("shown"+B,function(){n.$menuInner[0].scrollTop!==n.selectpicker.view.scrollTop&&(n.$menuInner[0].scrollTop=n.selectpicker.view.scrollTop),P.major>3?requestAnimationFrame(i):t()}),this.$menuInner.on("click","li a",function(t,i){var o=e(this),r=n.isVirtual()?n.selectpicker.view.position0:0,l=n.selectpicker.current.map.originalIndex[o.parent().index()+r],a=s(n.$element[0]),c=n.$element.prop("selectedIndex"),d=!0;if(n.multiple&&1!==n.options.maxOptions&&t.stopPropagation(),t.preventDefault(),!n.isDisabled()&&!o.parent().hasClass(M.DISABLED)){var h=n.$element.find("option"),p=h.eq(l),u=p.prop("selected"),f=p.parent("optgroup"),m=f.find("option"),v=n.options.maxOptions,g=f.data("maxOptions")||!1;if(l===n.activeIndex&&(i=!0),i||(n.prevActiveIndex=n.activeIndex,n.activeIndex=void 0),n.multiple){if(p.prop("selected",!u),n.setSelected(l,!u),o.trigger("blur"),v!==!1||g!==!1){var b=v<h.filter(":selected").length,x=g<f.find("option:selected").length;if(v&&b||g&&x)if(v&&1==v){h.prop("selected",!1),p.prop("selected",!0);for(var I=0;I<h.length;I++)n.setSelected(I,!1);n.setSelected(l,!0)}else if(g&&1==g){f.find("option:selected").prop("selected",!1),p.prop("selected",!0);for(var I=0;I<m.length;I++){var k=m[I];n.setSelected(h.index(k),!1)}n.setSelected(l,!0)}else{var $="string"==typeof n.options.maxOptionsText?[n.options.maxOptionsText,n.options.maxOptionsText]:n.options.maxOptionsText,E="function"==typeof $?$(v,g):$,S=E[0].replace("{n}",v),y=E[1].replace("{n}",g),C=e('<div class="notify"></div>');E[2]&&(S=S.replace("{var}",E[2][v>1?0:1]),y=y.replace("{var}",E[2][g>1?0:1])),p.prop("selected",!1),n.$menu.append(C),v&&b&&(C.append(e("<div>"+S+"</div>")),d=!1,n.$element.trigger("maxReached"+B)),g&&x&&(C.append(e("<div>"+y+"</div>")),d=!1,n.$element.trigger("maxReachedGrp"+B)),setTimeout(function(){n.setSelected(l,!1)},10),C.delay(750).fadeOut(300,function(){e(this).remove()})}}}else h.prop("selected",!1),p.prop("selected",!0),n.setSelected(l,!0);!n.multiple||n.multiple&&1===n.options.maxOptions?n.$button.trigger("focus"):n.options.liveSearch&&n.$searchbox.trigger("focus"),d&&(a!=s(n.$element[0])&&n.multiple||c!=n.$element.prop("selectedIndex")&&!n.multiple)&&(w=[l,p.prop("selected"),a],n.$element.triggerNative("change"))}}),this.$menu.on("click","li."+M.DISABLED+" a, ."+M.POPOVERHEADER+", ."+M.POPOVERHEADER+" :not(.close)",function(t){t.currentTarget==this&&(t.preventDefault(),t.stopPropagation(),n.options.liveSearch&&!e(t.target).hasClass("close")?n.$searchbox.trigger("focus"):n.$button.trigger("focus"))}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),n.options.liveSearch?n.$searchbox.trigger("focus"):n.$button.trigger("focus")}),this.$menu.on("click","."+M.POPOVERHEADER+" .close",function(){n.$button.trigger("click")}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(t){n.options.liveSearch?n.$searchbox.trigger("focus"):n.$button.trigger("focus"),t.preventDefault(),t.stopPropagation(),e(this).hasClass("bs-select-all")?n.selectAll():n.deselectAll()}),this.$element.on({change:function(){n.render(),n.$element.trigger("changed"+B,w),w=null},focus:function(){n.options.mobile||n.$button.trigger("focus")}})},liveSearchListener:function(){var e=this,t=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){e.$searchbox.val()&&e.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var i=e.$searchbox.val();if(e.selectpicker.search.map.newIndex={},e.selectpicker.search.map.originalIndex={},e.selectpicker.search.elements=[],e.selectpicker.search.data=[],i){var n,s=[],r=i.toUpperCase(),l={},c=[],d=e._searchStyle(),h=e.options.liveSearchNormalize;h&&(r=a(r)),e._$lisSelected=e.$menuInner.find(".selected");for(var n=0;n<e.selectpicker.main.data.length;n++){var p=e.selectpicker.main.data[n];l[n]||(l[n]=o(p,r,d,h)),l[n]&&void 0!==p.headerIndex&&c.indexOf(p.headerIndex)===-1&&(p.headerIndex>0&&(l[p.headerIndex-1]=!0,c.push(p.headerIndex-1)),l[p.headerIndex]=!0,c.push(p.headerIndex),l[p.lastIndex+1]=!0),l[n]&&"optgroup-label"!==p.type&&c.push(n)}for(var n=0,u=c.length;n<u;n++){var f=c[n],m=c[n-1],p=e.selectpicker.main.data[f],v=e.selectpicker.main.data[m];("divider"!==p.type||"divider"===p.type&&v&&"divider"!==v.type&&u-1!==n)&&(e.selectpicker.search.data.push(p),s.push(e.selectpicker.main.elements[f]),p.hasOwnProperty("originalIndex")&&(e.selectpicker.search.map.newIndex[p.originalIndex]=s.length-1,e.selectpicker.search.map.originalIndex[s.length-1]=p.originalIndex))}e.activeIndex=void 0,e.noScroll=!0,e.$menuInner.scrollTop(0),e.selectpicker.search.elements=s,e.createView(!0),s.length||(t.className="no-results",t.innerHTML=e.options.noneResultsText.replace("{0}",'"'+H(i)+'"'),e.$menuInner[0].firstChild.appendChild(t))}else e.$menuInner.scrollTop(0),e.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){return"undefined"!=typeof e?(this.$element.val(e).triggerNative("change"),this.$element):this.$element.val()},changeAll:function(e){if(this.multiple){"undefined"==typeof e&&(e=!0);var t=this.$element[0],i=t.options,n=0,o=0,r=s(t);t.classList.add("bs-select-hidden");for(var l=0,a=this.selectpicker.current.elements.length;l<a;l++){var c=this.selectpicker.current.data[l],d=this.selectpicker.current.map.originalIndex[l],h=i[d];h&&!h.disabled&&"divider"!==c.type&&(h.selected&&n++,h.selected=e,e&&o++)}t.classList.remove("bs-select-hidden"),n!==o&&(this.setOptionStatus(),this.togglePlaceholder(),w=[null,null,r],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){e=e||window.event,e&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(t){var i,n,s,r,l,a=e(this),c=a.hasClass("dropdown-toggle"),d=c?a.closest(".dropdown"):a.closest(U.MENU),h=d.data("this"),p=h.findLis(),u=!1,f=t.which===N.TAB&&!c&&!h.options.selectOnTab,m=j.test(t.which)||f,v=h.$menuInner[0].scrollTop,g=h.isVirtual(),b=g===!0?h.selectpicker.view.position0:0;if(n=h.$newElement.hasClass(M.SHOW),!n&&(m||t.which>=48&&t.which<=57||t.which>=96&&t.which<=105||t.which>=65&&t.which<=90)&&(h.$button.trigger("click.bs.dropdown.data-api"),h.options.liveSearch))return void h.$searchbox.trigger("focus");if(t.which===N.ESCAPE&&n&&(t.preventDefault(),h.$button.trigger("click.bs.dropdown.data-api").trigger("focus")),m){if(!p.length)return;i=g===!0?p.index(p.filter(".active")):h.selectpicker.current.map.newIndex[h.activeIndex],void 0===i&&(i=-1),i!==-1&&(s=h.selectpicker.current.elements[i+b],s.classList.remove("active"),s.firstChild&&s.firstChild.classList.remove("active")),t.which===N.ARROW_UP?(i!==-1&&i--,i+b<0&&(i+=p.length),h.selectpicker.view.canHighlight[i+b]||(i=h.selectpicker.view.canHighlight.slice(0,i+b).lastIndexOf(!0)-b,i===-1&&(i=p.length-1))):(t.which===N.ARROW_DOWN||f)&&(i++,i+b>=h.selectpicker.view.canHighlight.length&&(i=0),h.selectpicker.view.canHighlight[i+b]||(i=i+1+h.selectpicker.view.canHighlight.slice(i+b+1).indexOf(!0))),t.preventDefault();var w=b+i;t.which===N.ARROW_UP?0===b&&i===p.length-1?(h.$menuInner[0].scrollTop=h.$menuInner[0].scrollHeight,w=h.selectpicker.current.elements.length-1):(r=h.selectpicker.current.data[w],l=r.position-r.height,u=l<v):(t.which===N.ARROW_DOWN||f)&&(0===i?(h.$menuInner[0].scrollTop=0,w=0):(r=h.selectpicker.current.data[w],l=r.position-h.sizeInfo.menuInnerHeight,u=l>v)),s=h.selectpicker.current.elements[w],s&&(s.classList.add("active"),s.firstChild&&s.firstChild.classList.add("active")),h.activeIndex=h.selectpicker.current.map.originalIndex[w],h.selectpicker.view.currentActive=s,u&&(h.$menuInner[0].scrollTop=l),h.options.liveSearch?h.$searchbox.trigger("focus"):a.trigger("focus")}else if(!a.is("input")&&!_.test(t.which)||t.which===N.SPACE&&h.selectpicker.keydown.keyHistory){var x,I,k=[];t.preventDefault(),h.selectpicker.keydown.keyHistory+=D[t.which],h.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(h.selectpicker.keydown.resetKeyHistory.cancel),h.selectpicker.keydown.resetKeyHistory.cancel=h.selectpicker.keydown.resetKeyHistory.start(),I=h.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(I)&&(I=I.charAt(0));for(var $=0;$<h.selectpicker.current.data.length;$++){var E,S=h.selectpicker.current.data[$];E=o(S,I,"startsWith",!0),E&&h.selectpicker.view.canHighlight[$]&&(S.index=$,k.push(S.originalIndex))}if(k.length){var y=0;p.removeClass("active").find("a").removeClass("active"),1===I.length&&(y=k.indexOf(h.activeIndex),y===-1||y===k.length-1?y=0:y++),x=h.selectpicker.current.map.newIndex[k[y]],r=h.selectpicker.current.data[x],v-r.position>0?(l=r.position-r.height,u=!0):(l=r.position-h.sizeInfo.menuInnerHeight,u=r.position>v+h.sizeInfo.menuInnerHeight),s=h.selectpicker.current.elements[x],s.classList.add("active"),s.firstChild&&s.firstChild.classList.add("active"),h.activeIndex=k[y],s.firstChild.trigger("focus"),u&&(h.$menuInner[0].scrollTop=l),a.trigger("focus")}}n&&(t.which===N.SPACE&&!h.selectpicker.keydown.keyHistory||t.which===N.ENTER||t.which===N.TAB&&h.options.selectOnTab)&&(t.which!==N.SPACE&&t.preventDefault(),h.options.liveSearch&&t.which===N.SPACE||(h.$menuInner.find(".active a").trigger("click",!0),a.trigger("focus"),h.options.liveSearch||(t.preventDefault(),e(document).data("spaceSelect",!0))))},mobile:function(){this.$element[0].classList.add("mobile-device")},refresh:function(){var t=e.extend({},this.options,this.$element.data());this.options=t,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.checkDisabled(),this.render(),this.createLi(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed"+B)},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(B).removeData("selectpicker").removeClass("bs-select-hidden selectpicker"),e(window).off(B+"."+this.selectId)}};var q=e.fn.selectpicker;e.fn.selectpicker=c,e.fn.selectpicker.Constructor=G,e.fn.selectpicker.noConflict=function(){return e.fn.selectpicker=q,this},e(document).off("keydown.bs.dropdown.data-api").on("keydown"+B,'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',G.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bootstrap-select .bs-searchbox input',function(e){e.stopPropagation()}),e(window).on("load"+B+".data-api",function(){e(".selectpicker").each(function(){var t=e(this);c.call(t,t.data())})})}(jQuery);
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},windowIsDefined="object"===("undefined"==typeof window?"undefined":_typeof(window));!function(t){if("function"==typeof define&&define.amd)define(["jquery"],t);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var i;try{i=require("jquery")}catch(e){i=null}module.exports=t(i)}else window&&(window.Slider=t(window.jQuery))}(function(t){var i="slider",e="bootstrapSlider";windowIsDefined&&!window.console&&(window.console={}),windowIsDefined&&!window.console.log&&(window.console.log=function(){}),windowIsDefined&&!window.console.warn&&(window.console.warn=function(){});var s;return function(t){function i(){}function e(t){function e(i){i.prototype.option||(i.prototype.option=function(i){t.isPlainObject(i)&&(this.options=t.extend(!0,this.options,i))})}function o(i,e){t.fn[i]=function(o){if("string"==typeof o){for(var a=s.call(arguments,1),h=0,l=this.length;h<l;h++){var r=this[h],p=t.data(r,i);if(p)if(t.isFunction(p[o])&&"_"!==o.charAt(0)){var d=p[o].apply(p,a);if(void 0!==d&&d!==p)return d}else n("no such method '"+o+"' for "+i+" instance");else n("cannot call methods on "+i+" prior to initialization; attempted to call '"+o+"'")}return this}var c=this.map(function(){var s=t.data(this,i);return s?(s.option(o),s._init()):(s=new e(this,o),t.data(this,i,s)),t(this)});return!c||c.length>1?c:c[0]}}if(t){var n="undefined"==typeof console?i:function(t){console.error(t)};return t.bridget=function(t,i){e(i),o(t,i)},t.bridget}}var s=Array.prototype.slice;e(t)}(t),function(t){function o(i,e){function s(t,i){var e="data-slider-"+i.replace(/_/g,"-"),s=t.getAttribute(e);try{return JSON.parse(s)}catch(o){return s}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},this.ticksCallbackMap={},this.handleCallbackMap={},"string"==typeof i?this.element=document.querySelector(i):i instanceof HTMLElement&&(this.element=i),e=e?e:{};for(var o=Object.keys(this.defaultOptions),n=0;n<o.length;n++){var h=o[n],l=e[h];l="undefined"!=typeof l?l:s(this.element,h),l=null!==l?l:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=l}"auto"===this.options.rtl&&(this.options.rtl="rtl"===window.getComputedStyle(this.element).direction),"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.rtl?this.options.tooltip_position="left":this.options.tooltip_position="right";var r,p,d,c,u,m=this.element.style.width,v=!1,_=this.element.parentNode;if(this.sliderElem)v=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var f=document.createElement("div");f.className="slider-track",p=document.createElement("div"),p.className="slider-track-low",r=document.createElement("div"),r.className="slider-selection",d=document.createElement("div"),d.className="slider-track-high",c=document.createElement("div"),c.className="slider-handle min-slider-handle",c.setAttribute("role","slider"),c.setAttribute("aria-valuemin",this.options.min),c.setAttribute("aria-valuemax",this.options.max),u=document.createElement("div"),u.className="slider-handle max-slider-handle",u.setAttribute("role","slider"),u.setAttribute("aria-valuemin",this.options.min),u.setAttribute("aria-valuemax",this.options.max),f.appendChild(p),f.appendChild(r),f.appendChild(d),this.rangeHighlightElements=[];var g=this.options.rangeHighlights;if(Array.isArray(g)&&g.length>0)for(var y=0;y<g.length;y++){var b=document.createElement("div"),k=g[y]["class"]||"";b.className="slider-rangeHighlight slider-selection "+k,this.rangeHighlightElements.push(b),f.appendChild(b)}var E=Array.isArray(this.options.labelledby);if(E&&this.options.labelledby[0]&&c.setAttribute("aria-labelledby",this.options.labelledby[0]),E&&this.options.labelledby[1]&&u.setAttribute("aria-labelledby",this.options.labelledby[1]),!E&&this.options.labelledby&&(c.setAttribute("aria-labelledby",this.options.labelledby),u.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",n=0;n<this.options.ticks.length;n++){var C=document.createElement("div");if(C.className="slider-tick",this.options.ticks_tooltip){var w=this._addTickListener(),x=w.addMouseEnter(this,C,n),L=w.addMouseLeave(this,C);this.ticksCallbackMap[n]={mouseEnter:x,mouseLeave:L}}this.ticks.push(C),this.ticksContainer.appendChild(C)}r.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",n=0;n<this.options.ticks_labels.length;n++){var P=document.createElement("div"),M=0===this.options.ticks_positions.length,T=this.options.reversed&&M?this.options.ticks_labels.length-(n+1):n;P.className="slider-tick-label",P.innerHTML=this.options.ticks_labels[T],this.tickLabels.push(P),this.tickLabelContainer.appendChild(P)}var A=function(t){var i=document.createElement("div");i.className="tooltip-arrow";var e=document.createElement("div");e.className="tooltip-inner",t.appendChild(i),t.appendChild(e)},H=document.createElement("div");H.className="tooltip tooltip-main",H.setAttribute("role","presentation"),A(H);var N=document.createElement("div");N.className="tooltip tooltip-min",N.setAttribute("role","presentation"),A(N);var S=document.createElement("div");S.className="tooltip tooltip-max",S.setAttribute("role","presentation"),A(S),this.sliderElem.appendChild(f),this.sliderElem.appendChild(H),this.sliderElem.appendChild(N),this.sliderElem.appendChild(S),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(c),this.sliderElem.appendChild(u),_.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(t&&(this.$element=t(this.element),this.$sliderElem=t(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),a[this.options.scale]&&(this.options.scale=a[this.options.scale]),v===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.sliderElem,"slider-rtl"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","right","top","width","height"].forEach(function(t){this._removeProperty(this.trackLow,t),this._removeProperty(this.trackSelection,t),this._removeProperty(this.trackHigh,t)},this),[this.handle1,this.handle2].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"right"),this._removeProperty(t,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(t){this._removeProperty(t,"left"),this._removeProperty(t,"right"),this._removeProperty(t,"top"),this._removeProperty(t,"margin-left"),this._removeProperty(t,"margin-right"),this._removeProperty(t,"margin-top"),this._removeClass(t,"right"),this._removeClass(t,"left"),this._removeClass(t,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=m,this.options.orientation="horizontal",this.options.rtl?this.stylePos="right":this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this.options.rtl&&this._addClass(this.sliderElem,"slider-rtl"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=p||this.trackLow,this.trackSelection=r||this.trackSelection,this.trackHigh=d||this.trackHigh,"none"===this.options.selection?(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")):"after"!==this.options.selection&&"before"!==this.options.selection||(this._removeClass(this.trackLow,"hide"),this._removeClass(this.trackSelection,"hide"),this._removeClass(this.trackHigh,"hide")),this.handle1=c||this.handle1,this.handle2=u||this.handle2,v===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),n=0;n<this.ticks.length;n++)this._removeClass(this.ticks[n],"round triangle hide");var z=["round","triangle","custom"],V=z.indexOf(this.options.handle)!==-1;if(V)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),n=0;n<this.ticks.length;n++)this._addClass(this.ticks[n],this.options.handle);if(this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable){var D=!1;try{var I=Object.defineProperty({},"passive",{get:function(){D=!0}});window.addEventListener("test",null,I)}catch(F){}var R=!!D&&{passive:!0};this.sliderElem.addEventListener("touchstart",this.touchstart,R),this.sliderElem.addEventListener("touchmove",this.touchmove,R)}if(this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip)this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide");else if("always"===this.options.tooltip)this._showTooltip(),this._alwaysShowTooltip=!0;else{if(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.options.ticks_tooltip){var O=this._addTickListener(),j=O.addMouseEnter(this,this.handle1),$=O.addMouseLeave(this,this.handle1);this.handleCallbackMap.handle1={mouseEnter:j,mouseLeave:$},j=O.addMouseEnter(this,this.handle2),$=O.addMouseLeave(this,this.handle2),this.handleCallbackMap.handle2={mouseEnter:j,mouseLeave:$}}else this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1);this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)}this.options.enabled?this.enable():this.disable()}var n={formatInvalidInputErrorMsg:function(t){return"Invalid input value '"+t+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},a={linear:{toValue:function(t){var i=t/100*(this.options.max-this.options.min),e=!0;if(this.options.ticks_positions.length>0){for(var s,o,n,a=0,h=1;h<this.options.ticks_positions.length;h++)if(t<=this.options.ticks_positions[h]){s=this.options.ticks[h-1],n=this.options.ticks_positions[h-1],o=this.options.ticks[h],a=this.options.ticks_positions[h];break}var l=(t-n)/(a-n);i=s+l*(o-s),e=!1}var r=e?this.options.min:0,p=r+Math.round(i/this.options.step)*this.options.step;return p<this.options.min?this.options.min:p>this.options.max?this.options.max:p},toPercentage:function(t){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var i,e,s,o=0,n=0;n<this.options.ticks.length;n++)if(t<=this.options.ticks[n]){i=n>0?this.options.ticks[n-1]:0,s=n>0?this.options.ticks_positions[n-1]:0,e=this.options.ticks[n],o=this.options.ticks_positions[n];break}if(n>0){var a=(t-i)/(e-i);return s+a*(o-s)}}return 100*(t-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(t){var i=0===this.options.min?0:Math.log(this.options.min),e=Math.log(this.options.max),s=Math.exp(i+(e-i)*t/100);return Math.round(s)===this.options.max?this.options.max:(s=this.options.min+Math.round((s-this.options.min)/this.options.step)*this.options.step,s<this.options.min?this.options.min:s>this.options.max?this.options.max:s)},toPercentage:function(t){if(this.options.max===this.options.min)return 0;var i=Math.log(this.options.max),e=0===this.options.min?0:Math.log(this.options.min),s=0===t?0:Math.log(t);return 100*(s-e)/(i-e)}}};if(s=function(t,i){return o.call(this,t,i),this},s.prototype={_init:function(){},constructor:s,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,rtl:"auto",enabled:!0,formatter:function(t){return Array.isArray(t)?t[0]+" : "+t[1]:t},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,ticks_tooltip:!1,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(t,i,e){t||(t=0);var s=this.getValue();this._state.value=this._validateInputValue(t);var o=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=o(this._state.value[0]),this._state.value[1]=o(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=o(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var n=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(n),i===!0&&this._trigger("slide",n),s!==n&&e===!0&&this._trigger("change",{oldValue:s,newValue:n}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),t&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(t,i){return this._bindNonQueryEventHandler(t,i),this},off:function(i,e){t?(this.$element.off(i,e),this.$sliderElem.off(i,e)):this._unbindNonQueryEventHandler(i,e)},getAttribute:function(t){return t?this.options[t]:this.options},setAttribute:function(t,i){return this.options[t]=i,this},refresh:function(){return this._removeSliderEventHandlers(),o.call(this,this.element,this.options),t&&t.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){if(this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.options.ticks_tooltip){for(var t=this.ticksContainer.getElementsByClassName("slider-tick"),i=0;i<t.length;i++)t[i].removeEventListener("mouseenter",this.ticksCallbackMap[i].mouseEnter,!1),t[i].removeEventListener("mouseleave",this.ticksCallbackMap[i].mouseLeave,!1);this.handle1.removeEventListener("mouseenter",this.handleCallbackMap.handle1.mouseEnter,!1),this.handle2.removeEventListener("mouseenter",this.handleCallbackMap.handle2.mouseEnter,!1),this.handle1.removeEventListener("mouseleave",this.handleCallbackMap.handle1.mouseLeave,!1),this.handle2.removeEventListener("mouseleave",this.handleCallbackMap.handle2.mouseLeave,!1)}this.handleCallbackMap=null,this.ticksCallbackMap=null,this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(t,i){void 0===this.eventToCallbackMap[t]&&(this.eventToCallbackMap[t]=[]),this.eventToCallbackMap[t].push(i)},_unbindNonQueryEventHandler:function(t,i){var e=this.eventToCallbackMap[t];if(void 0!==e)for(var s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}},_cleanUpEventCallbacksMap:function(){for(var t=Object.keys(this.eventToCallbackMap),i=0;i<t.length;i++){var e=t[i];delete this.eventToCallbackMap[e]}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_setToolTipOnMouseOver:function(t){function i(t,i){return i?[100-t.percentage[0],this.options.range?100-t.percentage[1]:t.percentage[1]]:[t.percentage[0],t.percentage[1]]}var e=this.options.formatter(t?t.value[0]:this._state.value[0]),s=t?i(t,this.options.reversed):i(this._state,this.options.reversed);this._setText(this.tooltipInner,e),this.tooltip.style[this.stylePos]=s[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px")},_addTickListener:function(){return{addMouseEnter:function(t,i,e){var s=function(){var i=t._state,s=e>=0?e:this.attributes["aria-valuenow"].value,o=parseInt(s,10);i.value[0]=o,i.percentage[0]=t.options.ticks_positions[o],t._setToolTipOnMouseOver(i),t._showTooltip()};return i.addEventListener("mouseenter",s,!1),s},addMouseLeave:function(t,i){var e=function(){t._hideTooltip()};return i.addEventListener("mouseleave",e,!1),e}}},_layout:function(){var t;if(t=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=t[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),isNaN(this.options.formatter(this._state.value[0]))&&this.handle1.setAttribute("aria-valuetext",this.options.formatter(this._state.value[0])),this.handle2.style[this.stylePos]=t[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),isNaN(this.options.formatter(this._state.value[1]))&&this.handle2.setAttribute("aria-valuetext",this.options.formatter(this._state.value[1])),this.rangeHighlightElements.length>0&&Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var i=0;i<this.options.rangeHighlights.length;i++){var e=this._toPercentage(this.options.rangeHighlights[i].start),s=this._toPercentage(this.options.rangeHighlights[i].end);if(this.options.reversed){var o=100-s;s=100-e,e=o}var n=this._createHighlightRange(e,s);n?"vertical"===this.options.orientation?(this.rangeHighlightElements[i].style.top=n.start+"%",this.rangeHighlightElements[i].style.height=n.size+"%"):(this.options.rtl?this.rangeHighlightElements[i].style.right=n.start+"%":this.rangeHighlightElements[i].style.left=n.start+"%",this.rangeHighlightElements[i].style.width=n.size+"%"):this.rangeHighlightElements[i].style.display="none"}if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var a,h="vertical"===this.options.orientation?"height":"width";a="vertical"===this.options.orientation?"marginTop":this.options.rtl?"marginRight":"marginLeft";var l=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var r=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[a]=-l/2+"px"),r=this.tickLabelContainer.offsetHeight;else for(p=0;p<this.tickLabelContainer.childNodes.length;p++)this.tickLabelContainer.childNodes[p].offsetHeight>r&&(r=this.tickLabelContainer.childNodes[p].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=r+"px")}for(var p=0;p<this.options.ticks.length;p++){var d=this.options.ticks_positions[p]||this._toPercentage(this.options.ticks[p]);this.options.reversed&&(d=100-d),this.ticks[p].style[this.stylePos]=d+"%",this._removeClass(this.ticks[p],"in-selection"),this.options.range?d>=t[0]&&d<=t[1]&&this._addClass(this.ticks[p],"in-selection"):"after"===this.options.selection&&d>=t[0]?this._addClass(this.ticks[p],"in-selection"):"before"===this.options.selection&&d<=t[0]&&this._addClass(this.ticks[p],"in-selection"),this.tickLabels[p]&&(this.tickLabels[p].style[h]=l+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[p]?(this.tickLabels[p].style.position="absolute",this.tickLabels[p].style[this.stylePos]=d+"%",this.tickLabels[p].style[a]=-l/2+"px"):"vertical"===this.options.orientation&&(this.options.rtl?this.tickLabels[p].style.marginRight=this.sliderElem.offsetWidth+"px":this.tickLabels[p].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style[a]=this.sliderElem.offsetWidth/2*-1+"px"))}}var c;if(this.options.range){c=this.options.formatter(this._state.value),this._setText(this.tooltipInner,c),this.tooltip.style[this.stylePos]=(t[1]+t[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px");var u=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,u);var m=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,m),this.tooltip_min.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-"+this.stylePos,-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=t[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-"+this.stylePos,-this.tooltip_max.offsetWidth/2+"px")}else c=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,c),this.tooltip.style[this.stylePos]=t[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-"+this.stylePos,-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(t[0],t[1])+"%",this.trackSelection.style.top=Math.min(t[0],t[1])+"%",this.trackSelection.style.height=Math.abs(t[0]-t[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";else{"right"===this.stylePos?this.trackLow.style.right="0":this.trackLow.style.left="0",this.trackLow.style.width=Math.min(t[0],t[1])+"%","right"===this.stylePos?this.trackSelection.style.right=Math.min(t[0],t[1])+"%":this.trackSelection.style.left=Math.min(t[0],t[1])+"%",this.trackSelection.style.width=Math.abs(t[0]-t[1])+"%","right"===this.stylePos?this.trackHigh.style.left="0":this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(t[0],t[1])-Math.abs(t[0]-t[1])+"%";var v=this.tooltip_min.getBoundingClientRect(),_=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?v.right>_.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):v.right>_.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_createHighlightRange:function(t,i){return this._isHighlightRange(t,i)?t>i?{start:i,size:t-i}:{start:t,size:i-t}:null},_isHighlightRange:function(t,i){return 0<=t&&t<=100&&0<=i&&i<=100},_resize:function(t){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(t,i){t.style.removeProperty?t.style.removeProperty(i):t.style.removeAttribute(i)},_mousedown:function(t){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var i=this._getPercentage(t);if(this.options.range){var e=Math.abs(this._state.percentage[0]-i),s=Math.abs(this._state.percentage[1]-i);this._state.dragged=e<s?0:1,this._adjustPercentageForRangeSliders(i)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=i,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var o=this._calculateValue();return this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!1,!0),t.returnValue=!1,this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(t){if(void 0===t.changedTouches)return void this._mousedown(t);var i=t.changedTouches[0];this.touchX=i.pageX,this.touchY=i.pageY},_triggerFocusOnHandle:function(t){0===t&&this.handle1.focus(),1===t&&this.handle2.focus()},_keydown:function(t,i){if(!this._state.enabled)return!1;var e;switch(i.keyCode){case 37:case 40:e=-1;break;case 39:case 38:e=1}if(e){if(this.options.natural_arrow_keys){var s="vertical"===this.options.orientation&&!this.options.reversed,o="horizontal"===this.options.orientation&&this.options.reversed;(s||o)&&(e=-e)}var n=this._state.value[t]+e*this.options.step,a=n/this.options.max*100;if(this._state.keyCtrl=t,this.options.range){this._adjustPercentageForRangeSliders(a);var h=this._state.keyCtrl?this._state.value[0]:n,l=this._state.keyCtrl?n:this._state.value[1];n=[h,l]}return this._trigger("slideStart",n),this._setDataVal(n),this.setValue(n,!0,!0),this._setDataVal(n),this._trigger("slideStop",n),this._layout(),this._pauseEvent(i),delete this._state.keyCtrl,!1}},_pauseEvent:function(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1},_mousemove:function(t){if(!this._state.enabled)return!1;var i=this._getPercentage(t);this._adjustPercentageForRangeSliders(i),this._state.percentage[this._state.dragged]=i,this._layout();var e=this._calculateValue(!0);return this.setValue(e,!0,!0),!1},_touchmove:function(t){if(void 0!==t.changedTouches){var i=t.changedTouches[0],e=i.pageX-this.touchX,s=i.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&e<=5&&e>=-5&&(s>=15||s<=-15)?this._mousedown(t):s<=5&&s>=-5&&(e>=15||e<=-15)&&this._mousedown(t))}},_adjustPercentageForRangeSliders:function(t){if(this.options.range){var i=this._getNumDigitsAfterDecimalPlace(t);i=i?i-1:0;var e=this._applyToFixedAndParseFloat(t,i);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],i)<e?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],i)>e?(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0):0===this._state.keyCtrl&&this._state.value[1]/this.options.max*100<t?(this._state.percentage[0]=this._state.percentage[1],this._state.keyCtrl=1,this.handle2.focus()):1===this._state.keyCtrl&&this._state.value[0]/this.options.max*100>t&&(this._state.percentage[1]=this._state.percentage[0],this._state.keyCtrl=0,this.handle1.focus())}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var t=this._calculateValue(!0);return this._layout(),this._setDataVal(t),this._trigger("slideStop",t),!1},_calculateValue:function(t){var i;if(this.options.range?(i=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(i[0]=this._toValue(this._state.percentage[0]),i[0]=this._applyPrecision(i[0])),100!==this._state.percentage[1]&&(i[1]=this._toValue(this._state.percentage[1]),i[1]=this._applyPrecision(i[1]))):(i=this._toValue(this._state.percentage[0]),i=parseFloat(i),i=this._applyPrecision(i)),t){for(var e=[i,1/0],s=0;s<this.options.ticks.length;s++){
var o=Math.abs(this.options.ticks[s]-i);o<=e[1]&&(e=[this.options.ticks[s],o])}if(e[1]<=this.options.ticks_snap_bounds)return e[0]}return i},_applyPrecision:function(t){var i=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(t,i)},_getNumDigitsAfterDecimalPlace:function(t){var i=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return i?Math.max(0,(i[1]?i[1].length:0)-(i[2]?+i[2]:0)):0},_applyToFixedAndParseFloat:function(t,i){var e=t.toFixed(i);return parseFloat(e)},_getPercentage:function(t){!this.touchCapable||"touchstart"!==t.type&&"touchmove"!==t.type||(t=t.touches[0]);var i=t[this.mousePos],e=this._state.offset[this.stylePos],s=i-e;"right"===this.stylePos&&(s=-s);var o=s/this._state.size*100;return o=Math.round(o/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(o=100-o),Math.max(0,Math.min(100,o))},_validateInputValue:function(t){if(isNaN(+t)){if(Array.isArray(t))return this._validateArray(t),t;throw new Error(n.formatInvalidInputErrorMsg(t))}return+t},_validateArray:function(t){for(var i=0;i<t.length;i++){var e=t[i];if("number"!=typeof e)throw new Error(n.formatInvalidInputErrorMsg(e))}},_setDataVal:function(t){this.element.setAttribute("data-value",t),this.element.setAttribute("value",t),this.element.value=t},_trigger:function(i,e){e=e||0===e?e:void 0;var s=this.eventToCallbackMap[i];if(s&&s.length)for(var o=0;o<s.length;o++){var n=s[o];n(e)}t&&this._triggerJQueryEvent(i,e)},_triggerJQueryEvent:function(t,i){var e={type:t,value:i};this.$element.trigger(e),this.$sliderElem.trigger(e)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(t,i){"undefined"!=typeof t.textContent?t.textContent=i:"undefined"!=typeof t.innerText&&(t.innerText=i)},_removeClass:function(t,i){for(var e=i.split(" "),s=t.className,o=0;o<e.length;o++){var n=e[o],a=new RegExp("(?:\\s|^)"+n+"(?:\\s|$)");s=s.replace(a," ")}t.className=s.trim()},_addClass:function(t,i){for(var e=i.split(" "),s=t.className,o=0;o<e.length;o++){var n=e[o],a=new RegExp("(?:\\s|^)"+n+"(?:\\s|$)"),h=a.test(s);h||(s+=" "+n)}t.className=s.trim()},_offsetLeft:function(t){return t.getBoundingClientRect().left},_offsetRight:function(t){return t.getBoundingClientRect().right},_offsetTop:function(t){for(var i=t.offsetTop;(t=t.offsetParent)&&!isNaN(t.offsetTop);)i+=t.offsetTop,"BODY"!==t.tagName&&(i-=t.scrollTop);return i},_offset:function(t){return{left:this._offsetLeft(t),right:this._offsetRight(t),top:this._offsetTop(t)}},_css:function(i,e,s){if(t)t.style(i,e,s);else{var o=e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,i){return i.toUpperCase()});i.style[o]=s}},_toValue:function(t){return this.options.scale.toValue.apply(this,[t])},_toPercentage:function(t){return this.options.scale.toPercentage.apply(this,[t])},_setTooltipPosition:function(){var t=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var i;i=this.options.tooltip_position?this.options.tooltip_position:this.options.rtl?"left":"right";var e="left"===i?"right":"left";t.forEach(function(t){this._addClass(t,i),t.style[e]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?t.forEach(function(t){this._addClass(t,"bottom"),t.style.top="22px"}.bind(this)):t.forEach(function(t){this._addClass(t,"top"),t.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},t&&t.fn){var h=void 0;t.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),h=e):(t.bridget(i,s),h=i),t.bridget(e,s),t(function(){t("input[data-provide=slider]")[h]()})}}(t),s});
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.CodeMirror=t()}(this,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function r(e,r){return t(e).appendChild(r)}function n(e,t,r,n){var i=document.createElement(e);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function i(e,t,r,i){var o=n(e,t,r,i);return o.setAttribute("role","presentation"),o}function o(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function l(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function s(t,r){var n=t.className;e(r).test(n)||(t.className+=(n?" ":"")+r)}function a(t,r){for(var n=t.split(" "),i=0;i<n.length;i++)n[i]&&!e(n[i]).test(r)&&(r+=" "+n[i]);return r}function u(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function c(e,t,r){t||(t={});for(var n in e)!e.hasOwnProperty(n)||r===!1&&t.hasOwnProperty(n)||(t[n]=e[n]);return t}function f(e,t,r,n,i){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var o=n||0,l=i||0;;){var s=e.indexOf("\t",o);if(s<0||s>=t)return l+(t-o);l+=s-o,l+=r-l%r,o=s+1}}function h(e,t){for(var r=0;r<e.length;++r)if(e[r]==t)return r;return-1}function d(e,t,r){for(var n=0,i=0;;){var o=e.indexOf("\t",n);o==-1&&(o=e.length);var l=o-n;if(o==e.length||i+l>=t)return n+Math.min(l,t-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=t)return n}}function p(e){for(;Zl.length<=e;)Zl.push(g(Zl)+" ");return Zl[e]}function g(e){return e[e.length-1]}function v(e,t){for(var r=[],n=0;n<e.length;n++)r[n]=t(e[n],n);return r}function m(e,t,r){for(var n=0,i=r(t);n<e.length&&r(e[n])<=i;)n++;e.splice(n,0,t)}function y(){}function b(e,t){var r;return Object.create?r=Object.create(e):(y.prototype=e,r=new y),t&&c(t,r),r}function w(e){return/\w/.test(e)||e>"Â"&&(e.toUpperCase()!=e.toLowerCase()||Ql.test(e))}function x(e,t){return t?!!(t.source.indexOf("\\w")>-1&&w(e))||t.test(e):w(e)}function C(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function S(e){return e.charCodeAt(0)>=768&&Jl.test(e)}function L(e,t,r){for(;(r<0?t>0:t<e.length)&&S(e.charAt(t));)t+=r;return t}function k(e,t,r){for(var n=t>r?-1:1;;){if(t==r)return t;var i=(t+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==t)return e(o)?t:r;e(o)?r=o:t=o+n}}function T(e,t,r){var o=this;this.input=r,o.scrollbarFiller=n("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=n("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=i("div",null,"CodeMirror-code"),o.selectionDiv=n("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=n("div",null,"CodeMirror-cursors"),o.measure=n("div",null,"CodeMirror-measure"),o.lineMeasure=n("div",null,"CodeMirror-measure"),o.lineSpace=i("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var l=i("div",[o.lineSpace],"CodeMirror-lines");o.mover=n("div",[l],null,"position: relative"),o.sizer=n("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=n("div",null,null,"position: absolute; height: "+Xl+"px; width: 1px;"),o.gutters=n("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=n("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=n("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),Cl&&Sl<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),Ll||yl&&Hl||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,r.init(o)}function M(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var r=e;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(t<o){r=i;break}t-=o}return r.lines[t]}function N(e,t,r){var n=[],i=t.line;return e.iter(t.line,r.line+1,function(e){var o=e.text;i==r.line&&(o=o.slice(0,r.ch)),i==t.line&&(o=o.slice(t.ch)),n.push(o),++i}),n}function O(e,t,r){var n=[];return e.iter(t,r,function(e){n.push(e.text)}),n}function A(e,t){var r=t-e.height;if(r)for(var n=e;n;n=n.parent)n.height+=r}function D(e){if(null==e.parent)return null;for(var t=e.parent,r=h(t.lines,e),n=t.parent;n;t=n,n=n.parent)for(var i=0;n.children[i]!=t;++i)r+=n.children[i].chunkSize();return r+t.first}function W(e,t){var r=e.first;e:do{for(var n=0;n<e.children.length;++n){var i=e.children[n],o=i.height;if(t<o){e=i;continue e}t-=o,r+=i.chunkSize()}return r}while(!e.lines);for(var l=0;l<e.lines.length;++l){var s=e.lines[l],a=s.height;if(t<a)break;t-=a}return r+l}function H(e,t){return t>=e.first&&t<e.first+e.size}function F(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function P(e,t,r){return void 0===r&&(r=null),this instanceof P?(this.line=e,this.ch=t,void(this.sticky=r)):new P(e,t,r)}function E(e,t){return e.line-t.line||e.ch-t.ch}function I(e,t){return e.sticky==t.sticky&&0==E(e,t)}function z(e){return P(e.line,e.ch)}function R(e,t){return E(e,t)<0?t:e}function B(e,t){return E(e,t)<0?e:t}function G(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function U(e,t){if(t.line<e.first)return P(e.first,0);var r=e.first+e.size-1;return t.line>r?P(r,M(e,r).text.length):V(t,M(e,t.line).text.length)}function V(e,t){var r=e.ch;return null==r||r>t?P(e.line,t):r<0?P(e.line,0):e}function K(e,t){for(var r=[],n=0;n<t.length;n++)r[n]=U(e,t[n]);return r}function j(){es=!0}function X(){ts=!0}function Y(e,t,r){this.marker=e,this.from=t,this.to=r}function _(e,t){if(e)for(var r=0;r<e.length;++r){var n=e[r];if(n.marker==t)return n}}function $(e,t){for(var r,n=0;n<e.length;++n)e[n]!=t&&(r||(r=[])).push(e[n]);return r}function q(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Z(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(s||o.from==t&&"bookmark"==l.type&&(!r||!o.marker.insertLeft)){var a=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(n||(n=[])).push(new Y(l,o.from,a?null:o.to))}}return n}function Q(e,t,r){var n;if(e)for(var i=0;i<e.length;++i){var o=e[i],l=o.marker,s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);if(s||o.from==t&&"bookmark"==l.type&&(!r||o.marker.insertLeft)){var a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);(n||(n=[])).push(new Y(l,a?null:o.from-t,null==o.to?null:o.to-t))}}return n}function J(e,t){if(t.full)return null;var r=H(e,t.from.line)&&M(e,t.from.line).markedSpans,n=H(e,t.to.line)&&M(e,t.to.line).markedSpans;if(!r&&!n)return null;var i=t.from.ch,o=t.to.ch,l=0==E(t.from,t.to),s=Z(r,i,l),a=Q(n,o,l),u=1==t.text.length,c=g(t.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var h=s[f];if(null==h.to){var d=_(a,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(a)for(var p=0;p<a.length;++p){var v=a[p];if(null!=v.to&&(v.to+=c),null==v.from){var m=_(s,v.marker);m||(v.from=c,u&&(s||(s=[])).push(v))}else v.from+=c,u&&(s||(s=[])).push(v)}s&&(s=ee(s)),a&&a!=s&&(a=ee(a));var y=[s];if(!u){var b,w=t.text.length-2;if(w>0&&s)for(var x=0;x<s.length;++x)null==s[x].to&&(b||(b=[])).push(new Y(s[x].marker,null,null));for(var C=0;C<w;++C)y.push(b);y.push(a)}return y}function ee(e){for(var t=0;t<e.length;++t){var r=e[t];null!=r.from&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function te(e,t,r){var n=null;if(e.iter(t.line,r.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var r=e.markedSpans[t].marker;!r.readOnly||n&&h(n,r)!=-1||(n||(n=[])).push(r)}}),!n)return null;for(var i=[{from:t,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(0),a=0;a<i.length;++a){var u=i[a];if(!(E(u.to,s.from)<0||E(u.from,s.to)>0)){var c=[a,1],f=E(u.from,s.from),d=E(u.to,s.to);(f<0||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(d>0||!l.inclusiveRight&&!d)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-3}}return i}function re(e){var t=e.markedSpans;if(t){for(var r=0;r<t.length;++r)t[r].marker.detachLine(e);e.markedSpans=null}}function ne(e,t){if(t){for(var r=0;r<t.length;++r)t[r].marker.attachLine(e);e.markedSpans=t}}function ie(e){return e.inclusiveLeft?-1:0}function oe(e){return e.inclusiveRight?1:0}function le(e,t){var r=e.lines.length-t.lines.length;if(0!=r)return r;var n=e.find(),i=t.find(),o=E(n.from,i.from)||ie(e)-ie(t);if(o)return-o;var l=E(n.to,i.to)||oe(e)-oe(t);return l?l:t.id-e.id}function se(e,t){var r,n=ts&&e.markedSpans;if(n)for(var i=void 0,o=0;o<n.length;++o)i=n[o],i.marker.collapsed&&null==(t?i.from:i.to)&&(!r||le(r,i.marker)<0)&&(r=i.marker);return r}function ae(e){return se(e,!0)}function ue(e){return se(e,!1)}function ce(e,t){var r,n=ts&&e.markedSpans;if(n)for(var i=0;i<n.length;++i){var o=n[i];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!r||le(r,o.marker)<0)&&(r=o.marker)}return r}function fe(e,t,r,n,i){var o=M(e,t),l=ts&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var a=l[s];if(a.marker.collapsed){var u=a.marker.find(0),c=E(u.from,r)||ie(a.marker)-ie(i),f=E(u.to,n)||oe(a.marker)-oe(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?E(u.to,r)>=0:E(u.to,r)>0)||c>=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?E(u.from,n)<=0:E(u.from,n)<0)))return!0}}}function he(e){for(var t;t=ae(e);)e=t.find(-1,!0).line;return e}function de(e){for(var t;t=ue(e);)e=t.find(1,!0).line;return e}function pe(e){for(var t,r;t=ue(e);)e=t.find(1,!0).line,(r||(r=[])).push(e);return r}function ge(e,t){var r=M(e,t),n=he(r);return r==n?t:D(n)}function ve(e,t){if(t>e.lastLine())return t;var r,n=M(e,t);if(!me(e,n))return t;for(;r=ue(n);)n=r.find(1,!0).line;return D(n)+1}function me(e,t){var r=ts&&t.markedSpans;if(r)for(var n=void 0,i=0;i<r.length;++i)if(n=r[i],n.marker.collapsed){if(null==n.from)return!0;if(!n.marker.widgetNode&&0==n.from&&n.marker.inclusiveLeft&&ye(e,t,n))return!0}}function ye(e,t,r){if(null==r.to){var n=r.marker.find(1,!0);return ye(e,n.line,_(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==t.text.length)return!0;for(var i=void 0,o=0;o<t.markedSpans.length;++o)if(i=t.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(null==i.to||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&ye(e,t,i))return!0}function be(e){e=he(e);for(var t=0,r=e.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==e)break;t+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var l=0;l<o.children.length;++l){var s=o.children[l];if(s==r)break;t+=s.height}return t}function we(e){if(0==e.height)return 0;for(var t,r=e.text.length,n=e;t=ae(n);){var i=t.find(0,!0);n=i.from.line,r+=i.from.ch-i.to.ch}for(n=e;t=ue(n);){var o=t.find(0,!0);r-=n.text.length-o.from.ch,n=o.to.line,r+=n.text.length-o.to.ch}return r}function xe(e){var t=e.display,r=e.doc;t.maxLine=M(r,r.first),t.maxLineLength=we(t.maxLine),t.maxLineChanged=!0,r.iter(function(e){var r=we(e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function Ce(e,t,r,n){if(!e)return n(t,r,"ltr",0);for(var i=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>t||t==r&&l.to==t)&&(n(Math.max(l.from,t),Math.min(l.to,r),1==l.level?"rtl":"ltr",o),i=!0)}i||n(t,r,"ltr")}function Se(e,t,r){var n;rs=null;for(var i=0;i<e.length;++i){var o=e[i];if(o.from<t&&o.to>t)return i;o.to==t&&(o.from!=o.to&&"before"==r?n=i:rs=i),o.from==t&&(o.from!=o.to&&"before"!=r?n=i:rs=i)}return null!=n?n:rs}function Le(e,t){var r=e.order;return null==r&&(r=e.order=ns(e.text,t)),r}function ke(e,t){return e._handlers&&e._handlers[t]||is}function Te(e,t,r){if(e.removeEventListener)e.removeEventListener(t,r,!1);else if(e.detachEvent)e.detachEvent("on"+t,r);else{var n=e._handlers,i=n&&n[t];if(i){var o=h(i,r);o>-1&&(n[t]=i.slice(0,o).concat(i.slice(o+1)))}}}function Me(e,t){var r=ke(e,t);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function Ne(e,t,r){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Me(e,r||t.type,e,t),Fe(t)||t.codemirrorIgnore}function Oe(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),n=0;n<t.length;++n)h(r,t[n])==-1&&r.push(t[n])}function Ae(e,t){return ke(e,t).length>0}function De(e){e.prototype.on=function(e,t){os(this,e,t)},e.prototype.off=function(e,t){Te(this,e,t)}}function We(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function He(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Fe(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Pe(e){We(e),He(e)}function Ee(e){return e.target||e.srcElement}function Ie(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),Fl&&e.ctrlKey&&1==t&&(t=3),t}function ze(e){if(null==Kl){var t=n("span","â");r(e,n("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Kl=t.offsetWidth<=1&&t.offsetHeight>2&&!(Cl&&Sl<8))}var i=Kl?n("span","â"):n("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Re(e){if(null!=jl)return jl;var n=r(e,document.createTextNode("AØ®A")),i=zl(n,0,1).getBoundingClientRect(),o=zl(n,1,2).getBoundingClientRect();return t(e),!(!i||i.left==i.right)&&(jl=o.right-i.right<3)}function Be(e){if(null!=cs)return cs;var t=r(e,n("span","x")),i=t.getBoundingClientRect(),o=zl(t,0,1).getBoundingClientRect();return cs=Math.abs(i.left-o.left)>1}function Ge(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),fs[e]=t}function Ue(e,t){hs[e]=t}function Ve(e){if("string"==typeof e&&hs.hasOwnProperty(e))e=hs[e];else if(e&&"string"==typeof e.name&&hs.hasOwnProperty(e.name)){var t=hs[e.name];"string"==typeof t&&(t={name:t}),e=b(t,e),e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Ve("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Ve("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function Ke(e,t){t=Ve(t);var r=fs[t.name];if(!r)return Ke(e,"text/plain");var n=r(e,t);if(ds.hasOwnProperty(t.name)){var i=ds[t.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=t.name,t.helperType&&(n.helperType=t.helperType),t.modeProps)for(var l in t.modeProps)n[l]=t.modeProps[l];return n}function je(e,t){var r=ds.hasOwnProperty(e)?ds[e]:ds[e]={};c(t,r)}function Xe(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var r={};for(var n in t){var i=t[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Ye(e,t){for(var r;e.innerMode&&(r=e.innerMode(t),r&&r.mode!=e);)t=r.state,e=r.mode;return r||{mode:e,state:t}}function _e(e,t,r){return!e.startState||e.startState(t,r)}function $e(e,t,r,n){var i=[e.state.modeGen],o={};nt(e,t.text,e.doc.mode,r,function(e,t){return i.push(e,t)},o,n);for(var l=r.state,s=function(n){r.baseTokens=i;var s=e.state.overlays[n],a=1,u=0;r.state=!0,nt(e,t.text,s.mode,r,function(e,t){for(var r=a;u<e;){var n=i[a];n>e&&i.splice(a,1,e,i[a+1],n),a+=2,u=Math.min(e,n)}if(t)if(s.opaque)i.splice(r,a-r,e,"overlay "+t),a=r+2;else for(;r<a;r+=2){var o=i[r+1];i[r+1]=(o?o+" ":"")+"overlay "+t}},o),r.state=l,r.baseTokens=null,r.baseTokenPos=1},a=0;a<e.state.overlays.length;++a)s(a);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function qe(e,t,r){if(!t.styles||t.styles[0]!=e.state.modeGen){var n=Ze(e,D(t)),i=t.text.length>e.options.maxHighlightLength&&Xe(e.doc.mode,n.state),o=$e(e,t,n);i&&(n.state=i),t.stateAfter=n.save(!i),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function Ze(e,t,r){var n=e.doc,i=e.display;if(!n.mode.startState)return new vs(n,(!0),t);var o=it(e,t,r),l=o>n.first&&M(n,o-1).stateAfter,s=l?vs.fromSaved(n,l,o):new vs(n,_e(n.mode),o);return n.iter(o,t,function(r){Qe(e,r.text,s);var n=s.line;r.stateAfter=n==t-1||n%5==0||n>=i.viewFrom&&n<i.viewTo?s.save():null,s.nextLine()}),r&&(n.modeFrontier=s.line),s}function Qe(e,t,r,n){var i=e.doc.mode,o=new ps(t,e.options.tabSize,r);for(o.start=o.pos=n||0,""==t&&Je(i,r.state);!o.eol();)et(i,o,r.state),o.start=o.pos}function Je(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var r=Ye(e,t);return r.mode.blankLine?r.mode.blankLine(r.state):void 0}}function et(e,t,r,n){for(var i=0;i<10;i++){n&&(n[0]=Ye(e,r).mode);var o=e.token(t,r);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}function tt(e,t,r,n){var i,o=e.doc,l=o.mode;t=U(o,t);var s,a=M(o,t.line),u=Ze(e,t.line,r),c=new ps(a.text,e.options.tabSize,u);for(n&&(s=[]);(n||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=et(l,c,u.state),n&&s.push(new ms(c,i,Xe(o.mode,u.state)));return n?s:new ms(c,i,u.state)}function rt(e,t){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";null==t[n]?t[n]=r[2]:new RegExp("(?:^|s)"+r[2]+"(?:$|s)").test(t[n])||(t[n]+=" "+r[2])}return e}function nt(e,t,r,n,i,o,l){var s=r.flattenSpans;null==s&&(s=e.options.flattenSpans);var a,u=0,c=null,f=new ps(t,e.options.tabSize,n),h=e.options.addModeClass&&[null];for(""==t&&rt(Je(r,n.state),o);!f.eol();){if(f.pos>e.options.maxHighlightLength?(s=!1,l&&Qe(e,t,n,f.pos),f.pos=t.length,a=null):a=rt(et(r,f,n.state,h),o),h){var d=h[0].name;d&&(a="m-"+(a?d+" "+a:d))}if(!s||c!=a){for(;u<f.start;)u=Math.min(f.start,u+5e3),i(u,c);c=a}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e3);i(p,c),u=p}}function it(e,t,r){for(var n,i,o=e.doc,l=r?-1:t-(e.doc.mode.innerMode?1e3:100),s=t;s>l;--s){if(s<=o.first)return o.first;var a=M(o,s-1),u=a.stateAfter;if(u&&(!r||s+(u instanceof gs?u.lookAhead:0)<=o.modeFrontier))return s;var c=f(a.text,null,e.options.tabSize);(null==i||n>c)&&(i=s-1,n=c)}return i}function ot(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var r=e.first,n=t-1;n>r;n--){var i=M(e,n).stateAfter;if(i&&(!(i instanceof gs)||n+i.lookAhead<t)){r=n+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}function lt(e,t,r,n){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),re(e),ne(e,r);var i=n?n(e):1;i!=e.height&&A(e,i)}function st(e){e.parent=null,re(e)}function at(e,t){if(!e||/^\s*$/.test(e))return null;var r=t.addModeClass?xs:ws;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function ut(e,t){var r=i("span",null,null,Ll?"padding-right: .1px":null),n={pre:i("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var o=0;o<=(t.rest?t.rest.length:0);o++){var l=o?t.rest[o-1]:t.line,s=void 0;n.pos=0,n.addToken=ft,Re(e.display.measure)&&(s=Le(l,e.doc.direction))&&(n.addToken=dt(n.addToken,s)),n.map=[];var u=t!=e.display.externalMeasured&&D(l);gt(l,n,qe(e,l,u)),l.styleClasses&&(l.styleClasses.bgClass&&(n.bgClass=a(l.styleClasses.bgClass,n.bgClass||"")),l.styleClasses.textClass&&(n.textClass=a(l.styleClasses.textClass,n.textClass||""))),0==n.map.length&&n.map.push(0,0,n.content.appendChild(ze(e.display.measure))),0==o?(t.measure.map=n.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(n.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(Ll){var c=n.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return Me(e,"renderLine",e,t.line,n.pre),n.pre.className&&(n.textClass=a(n.pre.className,n.textClass||"")),n}function ct(e){var t=n("span","â¢","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function ft(e,t,r,i,o,l,s){if(t){var a,u=e.splitSpaces?ht(t,e.trailingSpace):t,c=e.cm.state.specialChars,f=!1;if(c.test(t)){a=document.createDocumentFragment();for(var h=0;;){c.lastIndex=h;var d=c.exec(t),g=d?d.index-h:t.length-h;if(g){var v=document.createTextNode(u.slice(h,h+g));Cl&&Sl<9?a.appendChild(n("span",[v])):a.appendChild(v),e.map.push(e.pos,e.pos+g,v),e.col+=g,e.pos+=g}if(!d)break;h+=g+1;var m=void 0;if("\t"==d[0]){var y=e.cm.options.tabSize,b=y-e.col%y;m=a.appendChild(n("span",p(b),"cm-tab")),m.setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=b}else"\r"==d[0]||"\n"==d[0]?(m=a.appendChild(n("span","\r"==d[0]?"â":"â¤","cm-invalidchar")),m.setAttribute("cm-text",d[0]),e.col+=1):(m=e.cm.options.specialCharPlaceholder(d[0]),m.setAttribute("cm-text",d[0]),Cl&&Sl<9?a.appendChild(n("span",[m])):a.appendChild(m),e.col+=1);e.map.push(e.pos,e.pos+1,m),e.pos++}}else e.col+=t.length,a=document.createTextNode(u),e.map.push(e.pos,e.pos+t.length,a),Cl&&Sl<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==u.charCodeAt(t.length-1),r||i||o||f||l){var w=r||"";i&&(w+=i),o&&(w+=o);var x=n("span",[a],w,l);if(s)for(var C in s)s.hasOwnProperty(C)&&"style"!=C&&"class"!=C&&x.setAttribute(C,s[C]);return e.content.appendChild(x)}e.content.appendChild(a)}}function ht(e,t){if(e.length>1&&!/  /.test(e))return e;for(var r=t,n="",i=0;i<e.length;i++){var o=e.charAt(i);" "!=o||!r||i!=e.length-1&&32!=e.charCodeAt(i+1)||(o="Â "),n+=o,r=" "==o}return n}function dt(e,t){return function(r,n,i,o,l,s,a){i=i?i+" cm-force-border":"cm-force-border";for(var u=r.pos,c=u+n.length;;){for(var f=void 0,h=0;h<t.length&&(f=t[h],!(f.to>u&&f.from<=u));h++);if(f.to>=c)return e(r,n,i,o,l,s,a);e(r,n.slice(0,f.to-u),i,o,null,s,a),o=null,n=n.slice(f.to-u),u=f.to}}}function pt(e,t,r,n){var i=!n&&r.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!n&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function gt(e,t,r){var n=e.markedSpans,i=e.text,o=0;if(n)for(var l,s,a,u,c,f,h,d=i.length,p=0,g=1,v="",m=0;;){if(m==p){a=u=c=s="",h=null,f=null,m=1/0;for(var y=[],b=void 0,w=0;w<n.length;++w){var x=n[w],C=x.marker;if("bookmark"==C.type&&x.from==p&&C.widgetNode)y.push(C);else if(x.from<=p&&(null==x.to||x.to>p||C.collapsed&&x.to==p&&x.from==p)){if(null!=x.to&&x.to!=p&&m>x.to&&(m=x.to,u=""),C.className&&(a+=" "+C.className),C.css&&(s=(s?s+";":"")+C.css),C.startStyle&&x.from==p&&(c+=" "+C.startStyle),C.endStyle&&x.to==m&&(b||(b=[])).push(C.endStyle,x.to),C.title&&((h||(h={})).title=C.title),C.attributes)for(var S in C.attributes)(h||(h={}))[S]=C.attributes[S];C.collapsed&&(!f||le(f.marker,C)<0)&&(f=x)}else x.from>p&&m>x.from&&(m=x.from)}if(b)for(var L=0;L<b.length;L+=2)b[L+1]==m&&(u+=" "+b[L]);if(!f||f.from==p)for(var k=0;k<y.length;++k)pt(t,0,y[k]);if(f&&(f.from||0)==p){if(pt(t,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=d)break;for(var T=Math.min(d,m);;){if(v){var M=p+v.length;if(!f){var N=M>T?v.slice(0,T-p):v;t.addToken(t,N,l?l+a:a,c,p+N.length==m?u:"",s,h)}if(M>=T){v=v.slice(T-p),p=T;break}p=M,c=""}v=i.slice(o,o=r[g++]),l=at(r[g++],t.cm.options)}}else for(var O=1;O<r.length;O+=2)t.addToken(t,i.slice(o,o=r[O]),at(r[O+1],t.cm.options))}function vt(e,t,r){this.line=t,this.rest=pe(t),this.size=this.rest?D(g(this.rest))-r+1:1,this.node=this.text=null,this.hidden=me(e,t)}function mt(e,t,r){for(var n,i=[],o=t;o<r;o=n){var l=new vt(e.doc,M(e.doc,o),o);n=o+l.size,i.push(l)}return i}function yt(e){Cs?Cs.ops.push(e):e.ownsGroup=Cs={ops:[e],delayedCallbacks:[]}}function bt(e){var t=e.delayedCallbacks,r=0;do{for(;r<t.length;r++)t[r].call(null);for(var n=0;n<e.ops.length;n++){var i=e.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<t.length)}function wt(e,t){var r=e.ownsGroup;if(r)try{bt(r)}finally{Cs=null,t(r)}}function xt(e,t){var r=ke(e,t);if(r.length){var n,i=Array.prototype.slice.call(arguments,2);Cs?n=Cs.delayedCallbacks:Ss?n=Ss:(n=Ss=[],setTimeout(Ct,0));for(var o=function(e){n.push(function(){return r[e].apply(null,i)})},l=0;l<r.length;++l)o(l)}}function Ct(){var e=Ss;Ss=null;for(var t=0;t<e.length;++t)e[t]()}function St(e,t,r,n){for(var i=0;i<t.changes.length;i++){var o=t.changes[i];"text"==o?Mt(e,t):"gutter"==o?Ot(e,t,r,n):"class"==o?Nt(e,t):"widget"==o&&At(e,t,n)}t.changes=null}function Lt(e){return e.node==e.text&&(e.node=n("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),Cl&&Sl<8&&(e.node.style.zIndex=2)),e.node}function kt(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),t.background)r?t.background.className=r:(t.background.parentNode.removeChild(t.background),t.background=null);else if(r){var i=Lt(t);t.background=i.insertBefore(n("div",null,r),i.firstChild),e.display.input.setUneditable(t.background)}}function Tt(e,t){var r=e.display.externalMeasured;return r&&r.line==t.line?(e.display.externalMeasured=null,t.measure=r.measure,r.built):ut(e,t)}function Mt(e,t){var r=t.text.className,n=Tt(e,t);t.text==t.node&&(t.node=n.pre),t.text.parentNode.replaceChild(n.pre,t.text),t.text=n.pre,n.bgClass!=t.bgClass||n.textClass!=t.textClass?(t.bgClass=n.bgClass,t.textClass=n.textClass,Nt(e,t)):r&&(t.text.className=r)}function Nt(e,t){kt(e,t),t.line.wrapClass?Lt(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var r=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=r||""}function Ot(e,t,r,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var o=Lt(t);t.gutterBackground=n("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),o.insertBefore(t.gutterBackground,t.text)}var l=t.line.gutterMarkers;if(e.options.lineNumbers||l){var s=Lt(t),a=t.gutter=n("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),s.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||l&&l["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(n("div",F(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),l)for(var u=0;u<e.options.gutters.length;++u){var c=e.options.gutters[u],f=l.hasOwnProperty(c)&&l[c];f&&a.appendChild(n("div",[f],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function At(e,t,r){t.alignable&&(t.alignable=null);for(var n=t.node.firstChild,i=void 0;n;n=i)i=n.nextSibling,"CodeMirror-linewidget"==n.className&&t.node.removeChild(n);Wt(e,t,r)}function Dt(e,t,r,n){var i=Tt(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),Nt(e,t),Ot(e,t,r,n),Wt(e,t,n),t.node}function Wt(e,t,r){if(Ht(e,t.line,t,r,!0),t.rest)for(var n=0;n<t.rest.length;n++)Ht(e,t.rest[n],t,r,!1)}function Ht(e,t,r,i,o){if(t.widgets)for(var l=Lt(r),s=0,a=t.widgets;s<a.length;++s){var u=a[s],c=n("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),Ft(u,c,r,i),e.display.input.setUneditable(c),o&&u.above?l.insertBefore(c,r.gutter||r.text):l.appendChild(c),xt(u,"redraw")}}function Ft(e,t,r,n){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(t);var i=n.wrapperWidth;t.style.left=n.fixedPos+"px",e.coverGutter||(i-=n.gutterTotalWidth,t.style.paddingLeft=n.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-n.gutterTotalWidth+"px"))}function Pt(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!o(document.body,e.node)){var i="position: relative;";e.coverGutter&&(i+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(i+="width: "+t.display.wrapper.clientWidth+"px;"),r(t.display.measure,n("div",[e.node],null,i))}return e.height=e.node.parentNode.offsetHeight}function Et(e,t){for(var r=Ee(t);r!=e.wrapper;r=r.parentNode)if(!r||1==r.nodeType&&"true"==r.getAttribute("cm-ignore-events")||r.parentNode==e.sizer&&r!=e.mover)return!0}function It(e){return e.lineSpace.offsetTop}function zt(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Rt(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=r(e.measure,n("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(e.cachedPaddingH=o),o}function Bt(e){return Xl-e.display.nativeBarWidth}function Gt(e){return e.display.scroller.clientWidth-Bt(e)-e.display.barWidth}function Ut(e){return e.display.scroller.clientHeight-Bt(e)-e.display.barHeight}function Vt(e,t,r){var n=e.options.lineWrapping,i=n&&Gt(e);if(!t.measure.heights||n&&t.measure.width!=i){var o=t.measure.heights=[];if(n){t.measure.width=i;for(var l=t.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var a=l[s],u=l[s+1];Math.abs(a.bottom-u.bottom)>2&&o.push((a.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function Kt(e,t,r){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var n=0;n<e.rest.length;n++)if(e.rest[n]==t)return{map:e.measure.maps[n],cache:e.measure.caches[n]};for(var i=0;i<e.rest.length;i++)if(D(e.rest[i])>r)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function jt(e,t){t=he(t);var n=D(t),i=e.display.externalMeasured=new vt(e.doc,t,n);i.lineN=n;var o=i.built=ut(e,i);return i.text=o.pre,r(e.display.lineMeasure,o.pre),i}function Xt(e,t,r,n){return $t(e,_t(e,t),r,n)}function Yt(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Tr(e,t)];var r=e.display.externalMeasured;return r&&t>=r.lineN&&t<r.lineN+r.size?r:void 0}function _t(e,t){var r=D(t),n=Yt(e,r);n&&!n.text?n=null:n&&n.changes&&(St(e,n,r,xr(e)),e.curOp.forceUpdate=!0),n||(n=jt(e,t));var i=Kt(n,t,r);return{line:t,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function $t(e,t,r,n,i){t.before&&(r=-1);var o,l=r+(n||"");return t.cache.hasOwnProperty(l)?o=t.cache[l]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(Vt(e,t.view,t.rect),t.hasHeights=!0),o=Qt(e,t,r,n),o.bogus||(t.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function qt(e,t,r){for(var n,i,o,l,s,a,u=0;u<e.length;u+=3)if(s=e[u],a=e[u+1],t<s?(i=0,o=1,l="left"):t<a?(i=t-s,o=i+1):(u==e.length-3||t==a&&e[u+3]>t)&&(o=a-s,i=o-1,t>=a&&(l="right")),null!=i){if(n=e[u+2],s==a&&r==(n.insertLeft?"left":"right")&&(l=r),"left"==r&&0==i)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)n=e[(u-=3)+2],l="left";if("right"==r&&i==a-s)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)n=e[(u+=3)+2],
l="right";break}return{node:n,start:i,end:o,collapse:l,coverStart:s,coverEnd:a}}function Zt(e,t){var r=Ls;if("left"==t)for(var n=0;n<e.length&&(r=e[n]).left==r.right;n++);else for(var i=e.length-1;i>=0&&(r=e[i]).left==r.right;i--);return r}function Qt(e,t,r,n){var i,o=qt(t.map,r,n),l=o.node,s=o.start,a=o.end,u=o.collapse;if(3==l.nodeType){for(var c=0;c<4;c++){for(;s&&S(t.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+a<o.coverEnd&&S(t.line.text.charAt(o.coverStart+a));)++a;if(i=Cl&&Sl<9&&0==s&&a==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Zt(zl(l,s,a).getClientRects(),n),i.left||i.right||0==s)break;a=s,s-=1,u="right"}Cl&&Sl<11&&(i=Jt(e.display.measure,i))}else{s>0&&(u=n="right");var f;i=e.options.lineWrapping&&(f=l.getClientRects()).length>1?f["right"==n?f.length-1:0]:l.getBoundingClientRect()}if(Cl&&Sl<9&&!s&&(!i||!i.left&&!i.right)){var h=l.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+wr(e.display),top:h.top,bottom:h.bottom}:Ls}for(var d=i.top-t.rect.top,p=i.bottom-t.rect.top,g=(d+p)/2,v=t.view.measure.heights,m=0;m<v.length-1&&!(g<v[m]);m++);var y=m?v[m-1]:0,b=v[m],w={left:("right"==u?i.right:i.left)-t.rect.left,right:("left"==u?i.left:i.right)-t.rect.left,top:y,bottom:b};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=d,w.rbottom=p),w}function Jt(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Be(e))return t;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*r,right:t.right*r,top:t.top*n,bottom:t.bottom*n}}function er(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function tr(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var r=0;r<e.display.view.length;r++)er(e.display.view[r])}function rr(e){tr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function nr(){return Tl&&Wl?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ir(){return Tl&&Wl?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function or(e){var t=0;if(e.widgets)for(var r=0;r<e.widgets.length;++r)e.widgets[r].above&&(t+=Pt(e.widgets[r]));return t}function lr(e,t,r,n,i){if(!i){var o=or(t);r.top+=o,r.bottom+=o}if("line"==n)return r;n||(n="local");var l=be(t);if("local"==n?l+=It(e.display):l-=e.display.viewOffset,"page"==n||"window"==n){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+("window"==n?0:ir());var a=s.left+("window"==n?0:nr());r.left+=a,r.right+=a}return r.top+=l,r.bottom+=l,r}function sr(e,t,r){if("div"==r)return t;var n=t.left,i=t.top;if("page"==r)n-=nr(),i-=ir();else if("local"==r||!r){var o=e.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function ar(e,t,r,n,i){return n||(n=M(e.doc,t.line)),lr(e,n,Xt(e,n,t.ch,i),r)}function ur(e,t,r,n,i,o){function l(t,l){var s=$t(e,i,t,l?"right":"left",o);return l?s.left=s.right:s.right=s.left,lr(e,n,s,r)}function s(e,t,r){var n=a[t],i=1==n.level;return l(r?e-1:e,i!=r)}n=n||M(e.doc,t.line),i||(i=_t(e,n));var a=Le(n,e.doc.direction),u=t.ch,c=t.sticky;if(u>=n.text.length?(u=n.text.length,c="before"):u<=0&&(u=0,c="after"),!a)return l("before"==c?u-1:u,"before"==c);var f=Se(a,u,c),h=rs,d=s(u,f,"before"==c);return null!=h&&(d.other=s(u,h,"before"!=c)),d}function cr(e,t){var r=0;t=U(e.doc,t),e.options.lineWrapping||(r=wr(e.display)*t.ch);var n=M(e.doc,t.line),i=be(n)+It(e.display);return{left:r,right:r,top:i,bottom:i+n.height}}function fr(e,t,r,n,i){var o=P(e,t,r);return o.xRel=i,n&&(o.outside=!0),o}function hr(e,t,r){var n=e.doc;if(r+=e.display.viewOffset,r<0)return fr(n.first,0,null,!0,-1);var i=W(n,r),o=n.first+n.size-1;if(i>o)return fr(n.first+n.size-1,M(n,o).text.length,null,!0,1);t<0&&(t=0);for(var l=M(n,i);;){var s=vr(e,l,i,t,r),a=ce(l,s.ch+(s.xRel>0?1:0));if(!a)return s;var u=a.find(1);if(u.line==i)return u;l=M(n,i=u.line)}}function dr(e,t,r,n){n-=or(t);var i=t.text.length,o=k(function(t){return $t(e,r,t-1).bottom<=n},i,0);return i=k(function(t){return $t(e,r,t).top>n},o,i),{begin:o,end:i}}function pr(e,t,r,n){r||(r=_t(e,t));var i=lr(e,t,$t(e,r,n),"line").top;return dr(e,t,r,i)}function gr(e,t,r,n){return!(e.bottom<=r)&&(e.top>r||(n?e.left:e.right)>t)}function vr(e,t,r,n,i){i-=be(t);var o=_t(e,t),l=or(t),s=0,a=t.text.length,u=!0,c=Le(t,e.doc.direction);if(c){var f=(e.options.lineWrapping?yr:mr)(e,t,r,o,c,n,i);u=1!=f.level,s=u?f.from:f.to-1,a=u?f.to:f.from-1}var h,d,p=null,g=null,v=k(function(t){var r=$t(e,o,t);return r.top+=l,r.bottom+=l,!!gr(r,n,i,!1)&&(r.top<=i&&r.left<=n&&(p=t,g=r),!0)},s,a),m=!1;if(g){var y=n-g.left<g.right-n,b=y==u;v=p+(b?0:1),d=b?"after":"before",h=y?g.left:g.right}else{u||v!=a&&v!=s||v++,d=0==v?"after":v==t.text.length?"before":$t(e,o,v-(u?1:0)).bottom+l<=i==u?"after":"before";var w=ur(e,P(r,v,d),"line",t,o);h=w.left,m=i<w.top||i>=w.bottom}return v=L(t.text,v,1),fr(r,v,d,m,n-h)}function mr(e,t,r,n,i,o,l){var s=k(function(s){var a=i[s],u=1!=a.level;return gr(ur(e,P(r,u?a.to:a.from,u?"before":"after"),"line",t,n),o,l,!0)},0,i.length-1),a=i[s];if(s>0){var u=1!=a.level,c=ur(e,P(r,u?a.from:a.to,u?"after":"before"),"line",t,n);gr(c,o,l,!0)&&c.top>l&&(a=i[s-1])}return a}function yr(e,t,r,n,i,o,l){var s=dr(e,t,n,l),a=s.begin,u=s.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,f=null,h=0;h<i.length;h++){var d=i[h];if(!(d.from>=u||d.to<=a)){var p=1!=d.level,g=$t(e,n,p?Math.min(u,d.to)-1:Math.max(a,d.from)).right,v=g<o?o-g+1e9:g-o;(!c||f>v)&&(c=d,f=v)}}return c||(c=i[i.length-1]),c.from<a&&(c={from:a,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function br(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==bs){bs=n("pre");for(var i=0;i<49;++i)bs.appendChild(document.createTextNode("x")),bs.appendChild(n("br"));bs.appendChild(document.createTextNode("x"))}r(e.measure,bs);var o=bs.offsetHeight/50;return o>3&&(e.cachedTextHeight=o),t(e.measure),o||1}function wr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=n("span","xxxxxxxxxx"),i=n("pre",[t]);r(e.measure,i);var o=t.getBoundingClientRect(),l=(o.right-o.left)/10;return l>2&&(e.cachedCharWidth=l),l||10}function xr(e){for(var t=e.display,r={},n={},i=t.gutters.clientLeft,o=t.gutters.firstChild,l=0;o;o=o.nextSibling,++l)r[e.options.gutters[l]]=o.offsetLeft+o.clientLeft+i,n[e.options.gutters[l]]=o.clientWidth;return{fixedPos:Cr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:t.wrapper.clientWidth}}function Cr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Sr(e){var t=br(e.display),r=e.options.lineWrapping,n=r&&Math.max(5,e.display.scroller.clientWidth/wr(e.display)-3);return function(i){if(me(e.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*t:o+t}}function Lr(e){var t=e.doc,r=Sr(e);t.iter(function(e){var t=r(e);t!=e.height&&A(e,t)})}function kr(e,t,r,n){var i=e.display;if(!r&&"true"==Ee(t).getAttribute("cm-not-content"))return null;var o,l,s=i.lineSpace.getBoundingClientRect();try{o=t.clientX-s.left,l=t.clientY-s.top}catch(t){return null}var a,u=hr(e,o,l);if(n&&1==u.xRel&&(a=M(e.doc,u.line).text).length==u.ch){var c=f(a,a.length,e.options.tabSize)-a.length;u=P(u.line,Math.max(0,Math.round((o-Rt(e.display).left)/wr(e.display))-c))}return u}function Tr(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var r=e.display.view,n=0;n<r.length;n++)if(t-=r[n].size,t<0)return n}function Mr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Nr(e,t){void 0===t&&(t=!0);for(var r=e.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=0;l<r.sel.ranges.length;l++)if(t||l!=r.sel.primIndex){var s=r.sel.ranges[l];if(!(s.from().line>=e.display.viewTo||s.to().line<e.display.viewFrom)){var a=s.empty();(a||e.options.showCursorWhenSelecting)&&Or(e,s.head,i),a||Dr(e,s,o)}}return n}function Or(e,t,r){var i=ur(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),o=r.appendChild(n("div","Â ","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var l=r.appendChild(n("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));l.style.display="",l.style.left=i.other.left+"px",l.style.top=i.other.top+"px",l.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Ar(e,t){return e.top-t.top||e.left-t.left}function Dr(e,t,r){function i(e,t,r,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(n("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==r?f-e:r)+"px;\n                             height: "+(i-t)+"px"))}function o(t,r,n){function o(r,n){return ar(e,P(t,r),"div",d,n)}function l(t,r,n){var i=pr(e,d,null,t),l="ltr"==r==("after"==n)?"left":"right",s="after"==n?i.begin:i.end-(/\s/.test(d.text.charAt(i.end-1))?2:1);return o(s,l)[l]}var a,u,d=M(s,t),p=d.text.length,g=Le(d,s.direction);return Ce(g,r||0,null==n?p:n,function(e,t,s,d){var v="ltr"==s,m=o(e,v?"left":"right"),y=o(t-1,v?"right":"left"),b=null==r&&0==e,w=null==n&&t==p,x=0==d,C=!g||d==g.length-1;if(y.top-m.top<=3){var S=(h?b:w)&&x,L=(h?w:b)&&C,k=S?c:(v?m:y).left,T=L?f:(v?y:m).right;i(k,m.top,T-k,m.bottom)}else{var M,N,O,A;v?(M=h&&b&&x?c:m.left,N=h?f:l(e,s,"before"),O=h?c:l(t,s,"after"),A=h&&w&&C?f:y.right):(M=h?l(e,s,"before"):c,N=!h&&b&&x?f:m.right,O=!h&&w&&C?c:y.left,A=h?l(t,s,"after"):f),i(M,m.top,N-M,m.bottom),m.bottom<y.top&&i(c,m.bottom,null,y.top),i(O,y.top,A-O,y.bottom)}(!a||Ar(m,a)<0)&&(a=m),Ar(y,a)<0&&(a=y),(!u||Ar(m,u)<0)&&(u=m),Ar(y,u)<0&&(u=y)}),{start:a,end:u}}var l=e.display,s=e.doc,a=document.createDocumentFragment(),u=Rt(e.display),c=u.left,f=Math.max(l.sizerWidth,Gt(e)-l.sizer.offsetLeft)-u.right,h="ltr"==s.direction,d=t.from(),p=t.to();if(d.line==p.line)o(d.line,d.ch,p.ch);else{var g=M(s,d.line),v=M(s,p.line),m=he(g)==he(v),y=o(d.line,d.ch,m?g.text.length+1:null).end,b=o(p.line,m?0:null,p.ch).start;m&&(y.top<b.top-2?(i(y.right,y.top,null,y.bottom),i(c,b.top,b.left,b.bottom)):i(y.right,y.top,b.left-y.right,y.bottom)),y.bottom<b.top&&i(c,y.bottom,null,b.top)}r.appendChild(a)}function Wr(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var r=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Hr(e){e.state.focused||(e.display.input.focus(),Pr(e))}function Fr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Er(e))},100)}function Pr(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Me(e,"focus",e,t),e.state.focused=!0,s(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),Ll&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Wr(e))}function Er(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Me(e,"blur",e,t),e.state.focused=!1,Gl(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ir(e){for(var t=e.display,r=t.lineDiv.offsetTop,n=0;n<t.view.length;n++){var i=t.view[n],o=e.options.lineWrapping,l=void 0,s=0;if(!i.hidden){if(Cl&&Sl<8){var a=i.node.offsetTop+i.node.offsetHeight;l=a-r,r=a}else{var u=i.node.getBoundingClientRect();l=u.bottom-u.top,!o&&i.text.firstChild&&(s=i.text.firstChild.getBoundingClientRect().right-u.left-1)}var c=i.line.height-l;if(l<2&&(l=br(t)),(c>.005||c<-.005)&&(A(i.line,l),zr(i.line),i.rest))for(var f=0;f<i.rest.length;f++)zr(i.rest[f]);if(s>e.display.sizerWidth){var h=Math.ceil(s/wr(e.display));h>e.display.maxLineLength&&(e.display.maxLineLength=h,e.display.maxLine=i.line,e.display.maxLineChanged=!0)}}}}function zr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var r=e.widgets[t],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function Rr(e,t,r){var n=r&&null!=r.top?Math.max(0,r.top):e.scroller.scrollTop;n=Math.floor(n-It(e));var i=r&&null!=r.bottom?r.bottom:n+e.wrapper.clientHeight,o=W(t,n),l=W(t,i);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;s<o?(o=s,l=W(t,be(M(t,s))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=l&&(o=W(t,be(M(t,a))-e.wrapper.clientHeight),l=a)}return{from:o,to:Math.max(l,o+1)}}function Br(e){var t=e.display,r=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var n=Cr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var s=r[l].alignable;if(s)for(var a=0;a<s.length;a++)s[a].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=n+i+"px")}}function Gr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,r=F(e.options,t.first+t.size-1),i=e.display;if(r.length!=i.lineNumChars){var o=i.measure.appendChild(n("div",[n("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),l=o.firstChild.offsetWidth,s=o.offsetWidth-l;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(l,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Hn(e),!0}return!1}function Ur(e,t){if(!Ne(e,"scrollCursorIntoView")){var r=e.display,i=r.sizer.getBoundingClientRect(),o=null;if(t.top+i.top<0?o=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!Al){var l=n("div","â",null,"position: absolute;\n                         top: "+(t.top-r.viewOffset-It(e.display))+"px;\n                         height: "+(t.bottom-t.top+Bt(e)+r.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(l),l.scrollIntoView(o),e.display.lineSpace.removeChild(l)}}}function Vr(e,t,r,n){null==n&&(n=0);var i;e.options.lineWrapping||t!=r||(t=t.ch?P(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,r="before"==t.sticky?P(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var l=!1,s=ur(e,t),a=r&&r!=t?ur(e,r):s;i={left:Math.min(s.left,a.left),top:Math.min(s.top,a.top)-n,right:Math.max(s.left,a.left),bottom:Math.max(s.bottom,a.bottom)+n};var u=jr(e,i),c=e.doc.scrollTop,f=e.doc.scrollLeft;if(null!=u.scrollTop&&(Qr(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(l=!0)),null!=u.scrollLeft&&(en(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(l=!0)),!l)break}return i}function Kr(e,t){var r=jr(e,t);null!=r.scrollTop&&Qr(e,r.scrollTop),null!=r.scrollLeft&&en(e,r.scrollLeft)}function jr(e,t){var r=e.display,n=br(e.display);t.top<0&&(t.top=0);var i=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:r.scroller.scrollTop,o=Ut(e),l={};t.bottom-t.top>o&&(t.bottom=t.top+o);var s=e.doc.height+zt(r),a=t.top<n,u=t.bottom>s-n;if(t.top<i)l.scrollTop=a?0:t.top;else if(t.bottom>i+o){var c=Math.min(t.top,(u?s:t.bottom)-o);c!=i&&(l.scrollTop=c)}var f=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:r.scroller.scrollLeft,h=Gt(e)-(e.options.fixedGutter?r.gutters.offsetWidth:0),d=t.right-t.left>h;return d&&(t.right=t.left+h),t.left<10?l.scrollLeft=0:t.left<f?l.scrollLeft=Math.max(0,t.left-(d?0:10)):t.right>h+f-3&&(l.scrollLeft=t.right+(d?0:10)-h),l}function Xr(e,t){null!=t&&(qr(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Yr(e){qr(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function _r(e,t,r){null==t&&null==r||qr(e),null!=t&&(e.curOp.scrollLeft=t),null!=r&&(e.curOp.scrollTop=r)}function $r(e,t){qr(e),e.curOp.scrollToPos=t}function qr(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var r=cr(e,t.from),n=cr(e,t.to);Zr(e,r,n,t.margin)}}function Zr(e,t,r,n){var i=jr(e,{left:Math.min(t.left,r.left),top:Math.min(t.top,r.top)-n,right:Math.max(t.right,r.right),bottom:Math.max(t.bottom,r.bottom)+n});_r(e,i.scrollLeft,i.scrollTop)}function Qr(e,t){Math.abs(e.doc.scrollTop-t)<2||(yl||Dn(e,{top:t}),Jr(e,t,!0),yl&&Dn(e),Ln(e,100))}function Jr(e,t,r){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||r)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function en(e,t,r,n){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(r?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!n||(e.doc.scrollLeft=t,Br(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function tn(e){var t=e.display,r=t.gutters.offsetWidth,n=Math.round(e.doc.height+zt(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Bt(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:r}}function rn(e,t){t||(t=tn(e));var r=e.display.barWidth,n=e.display.barHeight;nn(e,t);for(var i=0;i<4&&r!=e.display.barWidth||n!=e.display.barHeight;i++)r!=e.display.barWidth&&e.options.lineWrapping&&Ir(e),nn(e,tn(e)),r=e.display.barWidth,n=e.display.barHeight}function nn(e,t){var r=e.display,n=r.scrollbars.update(t);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=t.gutterWidth+"px"):r.gutterFiller.style.display=""}function on(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&Gl(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Ms[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),os(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,r){"horizontal"==r?en(e,t):Qr(e,t)},e),e.display.scrollbars.addClass&&s(e.display.wrapper,e.display.scrollbars.addClass)}function ln(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ns},yt(e.curOp)}function sn(e){var t=e.curOp;t&&wt(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;an(e)})}function an(e){for(var t=e.ops,r=0;r<t.length;r++)un(t[r]);for(var n=0;n<t.length;n++)cn(t[n]);for(var i=0;i<t.length;i++)fn(t[i]);for(var o=0;o<t.length;o++)hn(t[o]);for(var l=0;l<t.length;l++)dn(t[l])}function un(e){var t=e.cm,r=t.display;Tn(t),e.updateMaxLine&&xe(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new Os(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function cn(e){e.updatedDisplay=e.mustUpdate&&On(e.cm,e.update)}function fn(e){var t=e.cm,r=t.display;e.updatedDisplay&&Ir(t),e.barMeasure=tn(t),r.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Xt(t,r.maxLine,r.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+Bt(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Gt(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function hn(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&en(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var r=e.focus&&e.focus==l();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=t.doc.height)&&rn(t,e.barMeasure),e.updatedDisplay&&Fn(t,e.barMeasure),e.selectionChanged&&Wr(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),r&&Hr(e.cm)}function dn(e){var t=e.cm,r=t.display,n=t.doc;if(e.updatedDisplay&&An(t,e.update),null==r.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(r.wheelStartX=r.wheelStartY=null),null!=e.scrollTop&&Jr(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&en(t,e.scrollLeft,!0,!0),e.scrollToPos){var i=Vr(t,U(n,e.scrollToPos.from),U(n,e.scrollToPos.to),e.scrollToPos.margin);Ur(t,i)}var o=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Me(o[s],"hide");if(l)for(var a=0;a<l.length;++a)l[a].lines.length&&Me(l[a],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Me(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function pn(e,t){if(e.curOp)return t();ln(e);try{return t()}finally{sn(e)}}function gn(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ln(e);try{return t.apply(e,arguments)}finally{sn(e)}}}function vn(e){return function(){if(this.curOp)return e.apply(this,arguments);ln(this);try{return e.apply(this,arguments)}finally{sn(this)}}}function mn(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ln(t);try{return e.apply(this,arguments)}finally{sn(t)}}}function yn(e,t,r,n){null==t&&(t=e.doc.first),null==r&&(r=e.doc.first+e.doc.size),n||(n=0);var i=e.display;if(n&&r<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)ts&&ge(e.doc,t)<i.viewTo&&wn(e);else if(r<=i.viewFrom)ts&&ve(e.doc,r+n)>i.viewFrom?wn(e):(i.viewFrom+=n,i.viewTo+=n);else if(t<=i.viewFrom&&r>=i.viewTo)wn(e);else if(t<=i.viewFrom){var o=xn(e,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):wn(e)}else if(r>=i.viewTo){var l=xn(e,t,t,-1);l?(i.view=i.view.slice(0,l.index),i.viewTo=l.lineN):wn(e)}else{var s=xn(e,t,t,-1),a=xn(e,r,r+n,1);s&&a?(i.view=i.view.slice(0,s.index).concat(mt(e,s.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=n):wn(e)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:t<u.lineN+u.size&&(i.externalMeasured=null))}function bn(e,t,r){e.curOp.viewChanged=!0;var n=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(n.externalMeasured=null),!(t<n.viewFrom||t>=n.viewTo)){var o=n.view[Tr(e,t)];if(null!=o.node){var l=o.changes||(o.changes=[]);h(l,r)==-1&&l.push(r)}}}function wn(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function xn(e,t,r,n){var i,o=Tr(e,t),l=e.display.view;if(!ts||r==e.doc.first+e.doc.size)return{index:o,lineN:r};for(var s=e.display.viewFrom,a=0;a<o;a++)s+=l[a].size;if(s!=t){if(n>0){if(o==l.length-1)return null;i=s+l[o].size-t,o++}else i=s-t;t+=i,r+=i}for(;ge(e.doc,r)!=r;){if(o==(n<0?0:l.length-1))return null;r+=n*l[o-(n<0?1:0)].size,o+=n}return{index:o,lineN:r}}function Cn(e,t,r){var n=e.display,i=n.view;0==i.length||t>=n.viewTo||r<=n.viewFrom?(n.view=mt(e,t,r),n.viewFrom=t):(n.viewFrom>t?n.view=mt(e,t,n.viewFrom).concat(n.view):n.viewFrom<t&&(n.view=n.view.slice(Tr(e,t))),n.viewFrom=t,n.viewTo<r?n.view=n.view.concat(mt(e,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,Tr(e,r)))),n.viewTo=r}function Sn(e){for(var t=e.display.view,r=0,n=0;n<t.length;n++){var i=t[n];i.hidden||i.node&&!i.changes||++r}return r}function Ln(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,u(kn,e))}function kn(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,n=Ze(e,t.highlightFrontier),i=[];t.iter(n.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(n.line>=e.display.viewFrom){var l=o.styles,s=o.text.length>e.options.maxHighlightLength?Xe(t.mode,n.state):null,a=$e(e,o,n,!0);s&&(n.state=s),o.styles=a.styles;var u=o.styleClasses,c=a.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!l||l.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),h=0;!f&&h<l.length;++h)f=l[h]!=o.styles[h];f&&i.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=e.options.maxHighlightLength&&Qe(e,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return Ln(e,e.options.workDelay),!0}),t.highlightFrontier=n.line,t.modeFrontier=Math.max(t.modeFrontier,n.line),i.length&&pn(e,function(){for(var t=0;t<i.length;t++)bn(e,i[t],"text")})}}function Tn(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Bt(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Bt(e)+"px",t.scrollbarsClipped=!0)}function Mn(e){if(e.hasFocus())return null;var t=l();if(!t||!o(e.display.lineDiv,t))return null;var r={activeElt:t};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&o(e.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function Nn(e){if(e&&e.activeElt&&e.activeElt!=l()&&(e.activeElt.focus(),e.anchorNode&&o(document.body,e.anchorNode)&&o(document.body,e.focusNode))){var t=window.getSelection(),r=document.createRange();r.setEnd(e.anchorNode,e.anchorOffset),r.collapse(!1),t.removeAllRanges(),t.addRange(r),t.extend(e.focusNode,e.focusOffset)}}function On(e,r){var n=e.display,i=e.doc;if(r.editorIsHidden)return wn(e),!1;if(!r.force&&r.visible.from>=n.viewFrom&&r.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==Sn(e))return!1;Gr(e)&&(wn(e),r.dims=xr(e));var o=i.first+i.size,l=Math.max(r.visible.from-e.options.viewportMargin,i.first),s=Math.min(o,r.visible.to+e.options.viewportMargin);n.viewFrom<l&&l-n.viewFrom<20&&(l=Math.max(i.first,n.viewFrom)),n.viewTo>s&&n.viewTo-s<20&&(s=Math.min(o,n.viewTo)),ts&&(l=ge(e.doc,l),s=ve(e.doc,s));var a=l!=n.viewFrom||s!=n.viewTo||n.lastWrapHeight!=r.wrapperHeight||n.lastWrapWidth!=r.wrapperWidth;Cn(e,l,s),n.viewOffset=be(M(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var u=Sn(e);if(!a&&0==u&&!r.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=Mn(e);return u>4&&(n.lineDiv.style.display="none"),Wn(e,n.updateLineNumbers,r.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,Nn(c),t(n.cursorDiv),t(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,a&&(n.lastWrapHeight=r.wrapperHeight,n.lastWrapWidth=r.wrapperWidth,Ln(e,400)),n.updateLineNumbers=null,!0}function An(e,t){for(var r=t.viewport,n=!0;(n&&e.options.lineWrapping&&t.oldDisplayWidth!=Gt(e)||(r&&null!=r.top&&(r={top:Math.min(e.doc.height+zt(e.display)-Ut(e),r.top)}),t.visible=Rr(e.display,e.doc,r),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&On(e,t);n=!1){Ir(e);var i=tn(e);Mr(e),rn(e,i),Fn(e,i),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Dn(e,t){var r=new Os(e,t);if(On(e,r)){Ir(e),An(e,r);var n=tn(e);Mr(e),rn(e,n),Fn(e,n),r.finish()}}function Wn(e,r,n){function i(t){var r=t.nextSibling;return Ll&&Fl&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),r}for(var o=e.display,l=e.options.lineNumbers,s=o.lineDiv,a=s.firstChild,u=o.view,c=o.viewFrom,f=0;f<u.length;f++){var d=u[f];if(d.hidden);else if(d.node&&d.node.parentNode==s){for(;a!=d.node;)a=i(a);var p=l&&null!=r&&r<=c&&d.lineNumber;d.changes&&(h(d.changes,"gutter")>-1&&(p=!1),St(e,d,c,n)),p&&(t(d.lineNumber),d.lineNumber.appendChild(document.createTextNode(F(e.options,c)))),a=d.node.nextSibling}else{var g=Dt(e,d,c,n);s.insertBefore(g,a)}c+=d.size}for(;a;)a=i(a)}function Hn(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function Fn(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Bt(e)+"px"}function Pn(e){var r=e.display.gutters,i=e.options.gutters;t(r);for(var o=0;o<i.length;++o){var l=i[o],s=r.appendChild(n("div",null,"CodeMirror-gutter "+l));"CodeMirror-linenumbers"==l&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}r.style.display=o?"":"none",Hn(e)}function En(e){var t=h(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function In(e){var t=e.wheelDeltaX,r=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==r&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:null==r&&(r=e.wheelDelta),{x:t,y:r}}function zn(e){var t=In(e);return t.x*=Ds,t.y*=Ds,t}function Rn(e,t){var r=In(t),n=r.x,i=r.y,o=e.display,l=o.scroller,s=l.scrollWidth>l.clientWidth,a=l.scrollHeight>l.clientHeight;if(n&&s||i&&a){if(i&&Fl&&Ll)e:for(var u=t.target,c=o.view;u!=l;u=u.parentNode)for(var f=0;f<c.length;f++)if(c[f].node==u){e.display.currentWheelTarget=u;break e}if(n&&!yl&&!Ml&&null!=Ds)return i&&a&&Qr(e,Math.max(0,l.scrollTop+i*Ds)),en(e,Math.max(0,l.scrollLeft+n*Ds)),(!i||i&&a)&&We(t),void(o.wheelStartX=null);if(i&&null!=Ds){var h=i*Ds,d=e.doc.scrollTop,p=d+o.wrapper.clientHeight;h<0?d=Math.max(0,d+h-50):p=Math.min(e.doc.height,p+h+50),Dn(e,{top:d,bottom:p})}As<20&&(null==o.wheelStartX?(o.wheelStartX=l.scrollLeft,o.wheelStartY=l.scrollTop,o.wheelDX=n,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var e=l.scrollLeft-o.wheelStartX,t=l.scrollTop-o.wheelStartY,r=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null,r&&(Ds=(Ds*As+r)/(As+1),++As)}},200)):(o.wheelDX+=n,o.wheelDY+=i))}}function Bn(e,t,r){var n=e&&e.options.selectionsMayTouch,i=t[r];t.sort(function(e,t){return E(e.from(),t.from())}),r=h(t,i);for(var o=1;o<t.length;o++){var l=t[o],s=t[o-1],a=E(s.to(),l.from());if(n&&!l.empty()?a>0:a>=0){var u=B(s.from(),l.from()),c=R(s.to(),l.to()),f=s.empty()?l.from()==l.head:s.from()==s.head;o<=r&&--r,t.splice(--o,2,new Hs(f?c:u,f?u:c))}}return new Ws(t,r)}function Gn(e,t){return new Ws([new Hs(e,t||e)],0)}function Un(e){return e.text?P(e.from.line+e.text.length-1,g(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Vn(e,t){if(E(e,t.from)<0)return e;if(E(e,t.to)<=0)return Un(t);var r=e.line+t.text.length-(t.to.line-t.from.line)-1,n=e.ch;return e.line==t.to.line&&(n+=Un(t).ch-t.to.ch),P(r,n)}function Kn(e,t){for(var r=[],n=0;n<e.sel.ranges.length;n++){
var i=e.sel.ranges[n];r.push(new Hs(Vn(i.anchor,t),Vn(i.head,t)))}return Bn(e.cm,r,e.sel.primIndex)}function jn(e,t,r){return e.line==t.line?P(r.line,e.ch-t.ch+r.ch):P(r.line+(e.line-t.line),e.ch)}function Xn(e,t,r){for(var n=[],i=P(e.first,0),o=i,l=0;l<t.length;l++){var s=t[l],a=jn(s.from,i,o),u=jn(Un(s),i,o);if(i=s.to,o=u,"around"==r){var c=e.sel.ranges[l],f=E(c.head,c.anchor)<0;n[l]=new Hs(f?u:a,f?a:u)}else n[l]=new Hs(a,a)}return new Ws(n,e.sel.primIndex)}function Yn(e){e.doc.mode=Ke(e.options,e.doc.modeOption),_n(e)}function _n(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Ln(e,100),e.state.modeGen++,e.curOp&&yn(e)}function $n(e,t){return 0==t.from.ch&&0==t.to.ch&&""==g(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function qn(e,t,r,n){function i(e){return r?r[e]:null}function o(e,r,i){lt(e,r,i,n),xt(e,"change",e,t)}function l(e,t){for(var r=[],o=e;o<t;++o)r.push(new ys(u[o],i(o),n));return r}var s=t.from,a=t.to,u=t.text,c=M(e,s.line),f=M(e,a.line),h=g(u),d=i(u.length-1),p=a.line-s.line;if(t.full)e.insert(0,l(0,u.length)),e.remove(u.length,e.size-u.length);else if($n(e,t)){var v=l(0,u.length-1);o(f,f.text,d),p&&e.remove(s.line,p),v.length&&e.insert(s.line,v)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,s.ch)+h+c.text.slice(a.ch),d);else{var m=l(1,u.length-1);m.push(new ys(h+c.text.slice(a.ch),d,n)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),e.insert(s.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(a.ch),i(0)),e.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(f,h+f.text.slice(a.ch),d);var y=l(1,u.length-1);p>1&&e.remove(s.line+1,p-1),e.insert(s.line+1,y)}xt(e,"change",e,t)}function Zn(e,t,r){function n(e,i,o){if(e.linked)for(var l=0;l<e.linked.length;++l){var s=e.linked[l];if(s.doc!=i){var a=o&&s.sharedHist;r&&!a||(t(s.doc,a),n(s.doc,e,a))}}}n(e,null,!0)}function Qn(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Lr(e),Yn(e),Jn(e),e.options.lineWrapping||xe(e),e.options.mode=t.modeOption,yn(e)}function Jn(e){("rtl"==e.doc.direction?s:Gl)(e.display.lineDiv,"CodeMirror-rtl")}function ei(e){pn(e,function(){Jn(e),yn(e)})}function ti(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function ri(e,t){var r={from:z(t.from),to:Un(t),text:N(e,t.from,t.to)};return ui(e,r,t.from.line,t.to.line+1),Zn(e,function(e){return ui(e,r,t.from.line,t.to.line+1)},!0),r}function ni(e){for(;e.length;){var t=g(e);if(!t.ranges)break;e.pop()}}function ii(e,t){return t?(ni(e.done),g(e.done)):e.done.length&&!g(e.done).ranges?g(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),g(e.done)):void 0}function oi(e,t,r,n){var i=e.history;i.undone.length=0;var o,l,s=+new Date;if((i.lastOp==n||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&i.lastModTime>s-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=ii(i,i.lastOp==n)))l=g(o.changes),0==E(t.from,t.to)&&0==E(t.from,l.to)?l.to=Un(t):o.changes.push(ri(e,t));else{var a=g(i.done);for(a&&a.ranges||ai(e.sel,i.done),o={changes:[ri(e,t)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=t.origin,l||Me(e,"historyAdded")}function li(e,t,r,n){var i=t.charAt(0);return"*"==i||"+"==i&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function si(e,t,r,n){var i=e.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||li(e,o,g(i.done),t))?i.done[i.done.length-1]=t:ai(t,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&n.clearRedo!==!1&&ni(i.undone)}function ai(e,t){var r=g(t);r&&r.ranges&&r.equals(e)||t.push(e)}function ui(e,t,r,n){var i=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,n),function(r){r.markedSpans&&((i||(i=t["spans_"+e.id]={}))[o]=r.markedSpans),++o})}function ci(e){if(!e)return null;for(var t,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?t||(t=e.slice(0,r)):t&&t.push(e[r]);return t?t.length?t:null:e}function fi(e,t){var r=t["spans_"+e.id];if(!r)return null;for(var n=[],i=0;i<t.text.length;++i)n.push(ci(r[i]));return n}function hi(e,t){var r=fi(e,t),n=J(e,t);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)e:for(var s=0;s<l.length;++s){for(var a=l[s],u=0;u<o.length;++u)if(o[u].marker==a.marker)continue e;o.push(a)}else l&&(r[i]=l)}return r}function di(e,t,r){for(var n=[],i=0;i<e.length;++i){var o=e[i];if(o.ranges)n.push(r?Ws.prototype.deepCopy.call(o):o);else{var l=o.changes,s=[];n.push({changes:s});for(var a=0;a<l.length;++a){var u=l[a],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),t)for(var f in u)(c=f.match(/^spans_(\d+)$/))&&h(t,Number(c[1]))>-1&&(g(s)[f]=u[f],delete u[f])}}}return n}function pi(e,t,r,n){if(n){var i=e.anchor;if(r){var o=E(t,i)<0;o!=E(r,i)<0?(i=t,t=r):o!=E(t,r)<0&&(t=r)}return new Hs(i,t)}return new Hs(r||t,t)}function gi(e,t,r,n,i){null==i&&(i=e.cm&&(e.cm.display.shift||e.extend)),xi(e,new Ws([pi(e.sel.primary(),t,r,i)],0),n)}function vi(e,t,r){for(var n=[],i=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)n[o]=pi(e.sel.ranges[o],t[o],null,i);var l=Bn(e.cm,n,e.sel.primIndex);xi(e,l,r)}function mi(e,t,r,n){var i=e.sel.ranges.slice(0);i[t]=r,xi(e,Bn(e.cm,i,e.sel.primIndex),n)}function yi(e,t,r,n){xi(e,Gn(t,r),n)}function bi(e,t,r){var n={ranges:t.ranges,update:function(t){var r=this;this.ranges=[];for(var n=0;n<t.length;n++)r.ranges[n]=new Hs(U(e,t[n].anchor),U(e,t[n].head))},origin:r&&r.origin};return Me(e,"beforeSelectionChange",e,n),e.cm&&Me(e.cm,"beforeSelectionChange",e.cm,n),n.ranges!=t.ranges?Bn(e.cm,n.ranges,n.ranges.length-1):t}function wi(e,t,r){var n=e.history.done,i=g(n);i&&i.ranges?(n[n.length-1]=t,Ci(e,t,r)):xi(e,t,r)}function xi(e,t,r){Ci(e,t,r),si(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Ci(e,t,r){(Ae(e,"beforeSelectionChange")||e.cm&&Ae(e.cm,"beforeSelectionChange"))&&(t=bi(e,t,r));var n=r&&r.bias||(E(t.primary().head,e.sel.primary().head)<0?-1:1);Si(e,ki(e,t,n,!0)),r&&r.scroll===!1||!e.cm||Yr(e.cm)}function Si(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,Oe(e.cm)),xt(e,"cursorActivity",e))}function Li(e){Si(e,ki(e,e.sel,null,!1))}function ki(e,t,r,n){for(var i,o=0;o<t.ranges.length;o++){var l=t.ranges[o],s=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],a=Mi(e,l.anchor,s&&s.anchor,r,n),u=Mi(e,l.head,s&&s.head,r,n);(i||a!=l.anchor||u!=l.head)&&(i||(i=t.ranges.slice(0,o)),i[o]=new Hs(a,u))}return i?Bn(e.cm,i,t.primIndex):t}function Ti(e,t,r,n,i){var o=M(e,t.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],a=s.marker;if((null==s.from||(a.inclusiveLeft?s.from<=t.ch:s.from<t.ch))&&(null==s.to||(a.inclusiveRight?s.to>=t.ch:s.to>t.ch))){if(i&&(Me(a,"beforeCursorEnter"),a.explicitlyCleared)){if(o.markedSpans){--l;continue}break}if(!a.atomic)continue;if(r){var u=a.find(n<0?1:-1),c=void 0;if((n<0?a.inclusiveRight:a.inclusiveLeft)&&(u=Ni(e,u,-n,u&&u.line==t.line?o:null)),u&&u.line==t.line&&(c=E(u,r))&&(n<0?c<0:c>0))return Ti(e,u,t,n,i)}var f=a.find(n<0?-1:1);return(n<0?a.inclusiveLeft:a.inclusiveRight)&&(f=Ni(e,f,n,f.line==t.line?o:null)),f?Ti(e,f,t,n,i):null}}return t}function Mi(e,t,r,n,i){var o=n||1,l=Ti(e,t,r,o,i)||!i&&Ti(e,t,r,o,!0)||Ti(e,t,r,-o,i)||!i&&Ti(e,t,r,-o,!0);return l?l:(e.cantEdit=!0,P(e.first,0))}function Ni(e,t,r,n){return r<0&&0==t.ch?t.line>e.first?U(e,P(t.line-1)):null:r>0&&t.ch==(n||M(e,t.line)).text.length?t.line<e.first+e.size-1?P(t.line+1,0):null:new P(t.line,t.ch+r)}function Oi(e){e.setSelection(P(e.firstLine(),0),P(e.lastLine()),_l)}function Ai(e,t,r){var n={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(t,r,i,o){t&&(n.from=U(e,t)),r&&(n.to=U(e,r)),i&&(n.text=i),void 0!==o&&(n.origin=o)}),Me(e,"beforeChange",e,n),e.cm&&Me(e.cm,"beforeChange",e.cm,n),n.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function Di(e,t,r){if(e.cm){if(!e.cm.curOp)return gn(e.cm,Di)(e,t,r);if(e.cm.state.suppressEdits)return}if(!(Ae(e,"beforeChange")||e.cm&&Ae(e.cm,"beforeChange"))||(t=Ai(e,t,!0))){var n=es&&!r&&te(e,t.from,t.to);if(n)for(var i=n.length-1;i>=0;--i)Wi(e,{from:n[i].from,to:n[i].to,text:i?[""]:t.text,origin:t.origin});else Wi(e,t)}}function Wi(e,t){if(1!=t.text.length||""!=t.text[0]||0!=E(t.from,t.to)){var r=Kn(e,t);oi(e,t,r,e.cm?e.cm.curOp.id:NaN),Pi(e,t,r,J(e,t));var n=[];Zn(e,function(e,r){r||h(n,e.history)!=-1||(Bi(e.history,t),n.push(e.history)),Pi(e,t,null,J(e,t))})}}function Hi(e,t,r){var n=e.cm&&e.cm.state.suppressEdits;if(!n||r){for(var i,o=e.history,l=e.sel,s="undo"==t?o.done:o.undone,a="undo"==t?o.undone:o.done,u=0;u<s.length&&(i=s[u],r?!i.ranges||i.equals(e.sel):i.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(i=s.pop(),!i.ranges){if(n)return void s.push(i);break}if(ai(i,a),r&&!i.equals(e.sel))return void xi(e,i,{clearRedo:!1});l=i}var c=[];ai(l,a),a.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=Ae(e,"beforeChange")||e.cm&&Ae(e.cm,"beforeChange"),d=function(r){var n=i.changes[r];if(n.origin=t,f&&!Ai(e,n,!1))return s.length=0,{};c.push(ri(e,n));var o=r?Kn(e,n):g(s);Pi(e,n,o,hi(e,n)),!r&&e.cm&&e.cm.scrollIntoView({from:n.from,to:Un(n)});var l=[];Zn(e,function(e,t){t||h(l,e.history)!=-1||(Bi(e.history,n),l.push(e.history)),Pi(e,n,null,hi(e,n))})},p=i.changes.length-1;p>=0;--p){var v=d(p);if(v)return v.v}}}}function Fi(e,t){if(0!=t&&(e.first+=t,e.sel=new Ws(v(e.sel.ranges,function(e){return new Hs(P(e.anchor.line+t,e.anchor.ch),P(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){yn(e.cm,e.first,e.first-t,t);for(var r=e.cm.display,n=r.viewFrom;n<r.viewTo;n++)bn(e.cm,n,"gutter")}}function Pi(e,t,r,n){if(e.cm&&!e.cm.curOp)return gn(e.cm,Pi)(e,t,r,n);if(t.to.line<e.first)return void Fi(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Fi(e,i),t={from:P(e.first,0),to:P(t.to.line+i,t.to.ch),text:[g(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:P(o,M(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=N(e,t.from,t.to),r||(r=Kn(e,t)),e.cm?Ei(e.cm,t,n):qn(e,t,n),Ci(e,r,_l)}}function Ei(e,t,r){var n=e.doc,i=e.display,o=t.from,l=t.to,s=!1,a=o.line;e.options.lineWrapping||(a=D(he(M(n,o.line))),n.iter(a,l.line+1,function(e){if(e==i.maxLine)return s=!0,!0})),n.sel.contains(t.from,t.to)>-1&&Oe(e),qn(n,t,r,Sr(e)),e.options.lineWrapping||(n.iter(a,o.line+t.text.length,function(e){var t=we(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),ot(n,o.line),Ln(e,400);var u=t.text.length-(l.line-o.line)-1;t.full?yn(e):o.line!=l.line||1!=t.text.length||$n(e.doc,t)?yn(e,o.line,l.line+1,u):bn(e,o.line,"text");var c=Ae(e,"changes"),f=Ae(e,"change");if(f||c){var h={from:o,to:l,text:t.text,removed:t.removed,origin:t.origin};f&&xt(e,"change",e,h),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function Ii(e,t,r,n,i){var o;n||(n=r),E(n,r)<0&&(o=[n,r],r=o[0],n=o[1]),"string"==typeof t&&(t=e.splitLines(t)),Di(e,{from:r,to:n,text:t,origin:i})}function zi(e,t,r,n){r<e.line?e.line+=n:t<e.line&&(e.line=t,e.ch=0)}function Ri(e,t,r,n){for(var i=0;i<e.length;++i){var o=e[i],l=!0;if(o.ranges){o.copied||(o=e[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)zi(o.ranges[s].anchor,t,r,n),zi(o.ranges[s].head,t,r,n)}else{for(var a=0;a<o.changes.length;++a){var u=o.changes[a];if(r<u.from.line)u.from=P(u.from.line+n,u.from.ch),u.to=P(u.to.line+n,u.to.ch);else if(t<=u.to.line){l=!1;break}}l||(e.splice(0,i+1),i=0)}}}function Bi(e,t){var r=t.from.line,n=t.to.line,i=t.text.length-(n-r)-1;Ri(e.done,r,n,i),Ri(e.undone,r,n,i)}function Gi(e,t,r,n){var i=t,o=t;return"number"==typeof t?o=M(e,G(e,t)):i=D(t),null==i?null:(n(o,i)&&e.cm&&bn(e.cm,i,r),o)}function Ui(e){var t=this;this.lines=e,this.parent=null;for(var r=0,n=0;n<e.length;++n)e[n].parent=t,r+=e[n].height;this.height=r}function Vi(e){var t=this;this.children=e;for(var r=0,n=0,i=0;i<e.length;++i){var o=e[i];r+=o.chunkSize(),n+=o.height,o.parent=t}this.size=r,this.height=n,this.parent=null}function Ki(e,t,r){be(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Xr(e,r)}function ji(e,t,r,n){var i=new Fs(e,r,n),o=e.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),Gi(e,t,"widget",function(t){var r=t.widgets||(t.widgets=[]);if(null==i.insertAt?r.push(i):r.splice(Math.min(r.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,o&&!me(e,t)){var n=be(t)<e.scrollTop;A(t,t.height+Pt(i)),n&&Xr(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&xt(o,"lineWidgetAdded",o,i,"number"==typeof t?t:D(t)),i}function Xi(e,t,r,n,o){if(n&&n.shared)return Yi(e,t,r,n,o);if(e.cm&&!e.cm.curOp)return gn(e.cm,Xi)(e,t,r,n,o);var l=new Es(e,o),s=E(t,r);if(n&&c(n,l,!1),s>0||0==s&&l.clearWhenEmpty!==!1)return l;if(l.replacedWith&&(l.collapsed=!0,l.widgetNode=i("span",[l.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||l.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(l.widgetNode.insertLeft=!0)),l.collapsed){if(fe(e,t.line,t,r,l)||t.line!=r.line&&fe(e,r.line,t,r,l))throw new Error("Inserting collapsed marker partially overlapping an existing one");X()}l.addToHistory&&oi(e,{from:t,to:r,origin:"markText"},e.sel,NaN);var a,u=t.line,f=e.cm;if(e.iter(u,r.line+1,function(e){f&&l.collapsed&&!f.options.lineWrapping&&he(e)==f.display.maxLine&&(a=!0),l.collapsed&&u!=t.line&&A(e,0),q(e,new Y(l,u==t.line?t.ch:null,u==r.line?r.ch:null)),++u}),l.collapsed&&e.iter(t.line,r.line+1,function(t){me(e,t)&&A(t,0)}),l.clearOnEnter&&os(l,"beforeCursorEnter",function(){return l.clear()}),l.readOnly&&(j(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),l.collapsed&&(l.id=++Ps,l.atomic=!0),f){if(a&&(f.curOp.updateMaxLine=!0),l.collapsed)yn(f,t.line,r.line+1);else if(l.className||l.startStyle||l.endStyle||l.css||l.attributes||l.title)for(var h=t.line;h<=r.line;h++)bn(f,h,"text");l.atomic&&Li(f.doc),xt(f,"markerAdded",f,l)}return l}function Yi(e,t,r,n,i){n=c(n),n.shared=!1;var o=[Xi(e,t,r,n,i)],l=o[0],s=n.widgetNode;return Zn(e,function(e){s&&(n.widgetNode=s.cloneNode(!0)),o.push(Xi(e,U(e,t),U(e,r),n,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;l=g(o)}),new Is(o,l)}function _i(e){return e.findMarks(P(e.first,0),e.clipPos(P(e.lastLine())),function(e){return e.parent})}function $i(e,t){for(var r=0;r<t.length;r++){var n=t[r],i=n.find(),o=e.clipPos(i.from),l=e.clipPos(i.to);if(E(o,l)){var s=Xi(e,o,l,n.primary,n.primary.type);n.markers.push(s),s.parent=n}}}function qi(e){for(var t=function(t){var r=e[t],n=[r.primary.doc];Zn(r.primary.doc,function(e){return n.push(e)});for(var i=0;i<r.markers.length;i++){var o=r.markers[i];h(n,o.doc)==-1&&(o.parent=null,r.markers.splice(i--,1))}},r=0;r<e.length;r++)t(r)}function Zi(e){var t=this;if(eo(t),!Ne(t,e)&&!Et(t.display,e)){We(e),Cl&&(Bs=+new Date);var r=kr(t,e,!0),n=e.dataTransfer.files;if(r&&!t.isReadOnly())if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,s=function(e,n){if(!t.options.allowDropFileTypes||h(t.options.allowDropFileTypes,e.type)!=-1){var s=new FileReader;s.onload=gn(t,function(){var e=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[n]=e,++l==i){r=U(t.doc,r);var a={from:r,to:r,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};Di(t.doc,a),wi(t.doc,Gn(r,Un(a)))}}),s.readAsText(e)}},a=0;a<i;++a)s(n[a],a);else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var u=e.dataTransfer.getData("Text");if(u){var c;if(t.state.draggingText&&!t.state.draggingText.copy&&(c=t.listSelections()),Ci(t.doc,Gn(r,r)),c)for(var f=0;f<c.length;++f)Ii(t.doc,"",c[f].anchor,c[f].head,"drag");t.replaceSelection(u,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Qi(e,t){if(Cl&&(!e.state.draggingText||+new Date-Bs<100))return void Pe(t);if(!Ne(e,t)&&!Et(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!Nl)){var r=n("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Ml&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),Ml&&r.parentNode.removeChild(r)}}function Ji(e,t){var i=kr(e,t);if(i){var o=document.createDocumentFragment();Or(e,i,o),e.display.dragCursor||(e.display.dragCursor=n("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),r(e.display.dragCursor,o)}}function eo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function to(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<t.length;n++){var i=t[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation(function(){for(var t=0;t<r.length;t++)e(r[t])})}}function ro(){Gs||(no(),Gs=!0)}function no(){var e;os(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,to(io)},100))}),os(window,"blur",function(){return to(Er)})}function io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}function oo(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var r,n,i,o,l=0;l<t.length-1;l++){var s=t[l];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))r=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return r&&(e="Alt-"+e),n&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function lo(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if("..."==n){delete e[r];continue}for(var i=v(r.split(" "),oo),o=0;o<i.length;o++){var l=void 0,s=void 0;o==i.length-1?(s=i.join(" "),l=n):(s=i.slice(0,o+1).join(" "),l="...");var a=t[s];if(a){if(a!=l)throw new Error("Inconsistent bindings for "+s)}else t[s]=l}delete e[r]}for(var u in t)e[u]=t[u];return e}function so(e,t,r,n){t=fo(t);var i=t.call?t.call(e,n):t[e];if(i===!1)return"nothing";if("..."===i)return"multi";if(null!=i&&r(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return so(e,t.fallthrough,r,n);for(var o=0;o<t.fallthrough.length;o++){var l=so(e,t.fallthrough[o],r,n);if(l)return l}}}function ao(e){var t="string"==typeof e?e:Us[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function uo(e,t,r){var n=e;return t.altKey&&"Alt"!=n&&(e="Alt-"+e),(Rl?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(e="Ctrl-"+e),(Rl?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(e="Cmd-"+e),!r&&t.shiftKey&&"Shift"!=n&&(e="Shift-"+e),e}function co(e,t){if(Ml&&34==e.keyCode&&e["char"])return!1;var r=Us[e.keyCode];return null!=r&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(r=e.code),uo(r,e,t))}function fo(e){return"string"==typeof e?Xs[e]:e}function ho(e,t){for(var r=e.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=t(r[i]);n.length&&E(o.from,g(n).to)<=0;){var l=n.pop();if(E(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}pn(e,function(){for(var t=n.length-1;t>=0;t--)Ii(e.doc,"",n[t].from,n[t].to,"+delete");Yr(e)})}function po(e,t,r){var n=L(e.text,t+r,r);return n<0||n>e.text.length?null:n}function go(e,t,r){var n=po(e,t.ch,r);return null==n?null:new P(t.line,n,r<0?"after":"before")}function vo(e,t,r,n,i){if(e){var o=Le(r,t.doc.direction);if(o){var l,s=i<0?g(o):o[0],a=i<0==(1==s.level),u=a?"after":"before";if(s.level>0||"rtl"==t.doc.direction){var c=_t(t,r);l=i<0?r.text.length-1:0;var f=$t(t,c,l).top;l=k(function(e){return $t(t,c,e).top==f},i<0==(1==s.level)?s.from:s.to-1,l),"before"==u&&(l=po(r,l,1))}else l=i<0?s.to:s.from;return new P(n,l,u)}}return new P(n,i<0?r.text.length:0,i<0?"before":"after")}function mo(e,t,r,n){var i=Le(t,e.doc.direction);if(!i)return go(t,r,n);r.ch>=t.text.length?(r.ch=t.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=Se(i,r.ch,r.sticky),l=i[o];if("ltr"==e.doc.direction&&l.level%2==0&&(n>0?l.to>r.ch:l.from<r.ch))return go(t,r,n);var s,a=function(e,r){return po(t,e instanceof P?e.ch:e,r)},u=function(r){return e.options.lineWrapping?(s=s||_t(e,t),pr(e,t,s,r)):{begin:0,end:t.text.length}},c=u("before"==r.sticky?a(r,-1):r.ch);if("rtl"==e.doc.direction||1==l.level){var f=1==l.level==n<0,h=a(r,f?1:-1);if(null!=h&&(f?h<=l.to&&h<=c.end:h>=l.from&&h>=c.begin)){var d=f?"before":"after";return new P(r.line,h,d)}}var p=function(e,t,n){for(var o=function(e,t){return t?new P(r.line,a(e,1),"before"):new P(r.line,e,"after")};e>=0&&e<i.length;e+=t){var l=i[e],s=t>0==(1!=l.level),u=s?n.begin:a(n.end,-1);if(l.from<=u&&u<l.to)return o(u,s);if(u=s?l.from:a(l.to,-1),n.begin<=u&&u<n.end)return o(u,s)}},g=p(o+n,n,c);if(g)return g;var v=n>0?c.end:a(c.begin,-1);return null==v||n>0&&v==t.text.length||!(g=p(n>0?0:i.length-1,n,u(v)))?null:g}function yo(e,t){var r=M(e.doc,t),n=he(r);return n!=r&&(t=D(n)),vo(!0,e,n,t,1)}function bo(e,t){var r=M(e.doc,t),n=de(r);return n!=r&&(t=D(n)),vo(!0,e,r,t,-1)}function wo(e,t){var r=yo(e,t.line),n=M(e.doc,r.line),i=Le(n,e.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,n.text.search(/\S/)),l=t.line==r.line&&t.ch<=o&&t.ch;return P(r.line,l?0:o,r.sticky)}return r}function xo(e,t,r){if("string"==typeof t&&(t=Ys[t],!t))return!1;e.display.input.ensurePolled();var n=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),i=t(e)!=Yl}finally{e.display.shift=n,e.state.suppressEdits=!1}return i}function Co(e,t,r){for(var n=0;n<e.state.keyMaps.length;n++){var i=so(t,e.state.keyMaps[n],r,e);if(i)return i}return e.options.extraKeys&&so(t,e.options.extraKeys,r,e)||so(t,e.options.keyMap,r,e)}function So(e,t,r,n){var i=e.state.keySeq;if(i){if(ao(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:_s.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),Lo(e,i+" "+t,r,n))return!0}return Lo(e,t,r,n)}function Lo(e,t,r,n){var i=Co(e,t,n);return"multi"==i&&(e.state.keySeq=t),"handled"==i&&xt(e,"keyHandled",e,t,r),"handled"!=i&&"multi"!=i||(We(r),Wr(e)),!!i}function ko(e,t){var r=co(t,!0);return!!r&&(t.shiftKey&&!e.state.keySeq?So(e,"Shift-"+r,t,function(t){return xo(e,t,!0)})||So(e,r,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return xo(e,t)}):So(e,r,t,function(t){return xo(e,t)}))}function To(e,t,r){return So(e,"'"+r+"'",t,function(t){return xo(e,t,!0)})}function Mo(e){var t=this;if(t.curOp.focus=l(),!Ne(t,e)){Cl&&Sl<11&&27==e.keyCode&&(e.returnValue=!1);var r=e.keyCode;t.display.shift=16==r||e.shiftKey;var n=ko(t,e);Ml&&($s=n?r:null,!n&&88==r&&!us&&(Fl?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=r||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||No(t)}}function No(e){function t(e){18!=e.keyCode&&e.altKey||(Gl(r,"CodeMirror-crosshair"),Te(document,"keyup",t),Te(document,"mouseover",t))}var r=e.display.lineDiv;s(r,"CodeMirror-crosshair"),os(document,"keyup",t),os(document,"mouseover",t)}function Oo(e){16==e.keyCode&&(this.doc.sel.shift=!1),Ne(this,e)}function Ao(e){var t=this;if(!(Et(t.display,e)||Ne(t,e)||e.ctrlKey&&!e.altKey||Fl&&e.metaKey)){var r=e.keyCode,n=e.charCode;if(Ml&&r==$s)return $s=null,void We(e);if(!Ml||e.which&&!(e.which<10)||!ko(t,e)){var i=String.fromCharCode(null==n?r:n);"\b"!=i&&(To(t,e,i)||t.display.input.onKeyPress(e))}}}function Do(e,t){var r=+new Date;return Js&&Js.compare(r,e,t)?(Qs=Js=null,"triple"):Qs&&Qs.compare(r,e,t)?(Js=new Zs(r,e,t),Qs=null,"double"):(Qs=new Zs(r,e,t),Js=null,"single")}function Wo(e){var t=this,r=t.display;if(!(Ne(t,e)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=e.shiftKey,Et(r,e))return void(Ll||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100)));if(!Go(t,e)){var n=kr(t,e),i=Ie(e),o=n?Do(n,i):"single";window.focus(),1==i&&t.state.selectingText&&t.state.selectingText(e),n&&Ho(t,i,n,o,e)||(1==i?n?Po(t,n,o,e):Ee(e)==r.scroller&&We(e):2==i?(n&&gi(t.doc,n),setTimeout(function(){return r.input.focus()},20)):3==i&&(Bl?t.display.input.onContextMenu(e):Fr(t)))}}}function Ho(e,t,r,n,i){var o="Click";return"double"==n?o="Double"+o:"triple"==n&&(o="Triple"+o),o=(1==t?"Left":2==t?"Middle":"Right")+o,So(e,uo(o,i),i,function(t){if("string"==typeof t&&(t=Ys[t]),!t)return!1;var n=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n=t(e,r)!=Yl}finally{e.state.suppressEdits=!1}return n})}function Fo(e,t,r){var n=e.getOption("configureMouse"),i=n?n(e,t,r):{};if(null==i.unit){var o=Pl?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==i.extend||e.doc.extend)&&(i.extend=e.doc.extend||r.shiftKey),null==i.addNew&&(i.addNew=Fl?r.metaKey:r.ctrlKey),null==i.moveOnDrag&&(i.moveOnDrag=!(Fl?r.altKey:r.ctrlKey)),i}function Po(e,t,r,n){Cl?setTimeout(u(Hr,e),0):e.curOp.focus=l();var i,o=Fo(e,r,n),s=e.doc.sel;e.options.dragDrop&&ls&&!e.isReadOnly()&&"single"==r&&(i=s.contains(t))>-1&&(E((i=s.ranges[i]).from(),t)<0||t.xRel>0)&&(E(i.to(),t)>0||t.xRel<0)?Eo(e,n,t,o):zo(e,n,t,o)}function Eo(e,t,r,n){var i=e.display,o=!1,l=gn(e,function(t){Ll&&(i.scroller.draggable=!1),e.state.draggingText=!1,Te(i.wrapper.ownerDocument,"mouseup",l),Te(i.wrapper.ownerDocument,"mousemove",s),Te(i.scroller,"dragstart",a),Te(i.scroller,"drop",l),o||(We(t),n.addNew||gi(e.doc,r,null,null,n.extend),Ll||Cl&&9==Sl?setTimeout(function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()},20):i.input.focus())}),s=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},a=function(){return o=!0};Ll&&(i.scroller.draggable=!0),e.state.draggingText=l,l.copy=!n.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop(),os(i.wrapper.ownerDocument,"mouseup",l),os(i.wrapper.ownerDocument,"mousemove",s),os(i.scroller,"dragstart",a),os(i.scroller,"drop",l),Fr(e),setTimeout(function(){return i.input.focus()},20)}function Io(e,t,r){if("char"==r)return new Hs(t,t);if("word"==r)return e.findWordAt(t);if("line"==r)return new Hs(P(t.line,0),U(e.doc,P(t.line+1,0)));var n=r(e,t);return new Hs(n.from,n.to)}function zo(e,t,r,n){function i(t){if(0!=E(m,t))if(m=t,"rectangle"==n.unit){for(var i=[],o=e.options.tabSize,l=f(M(u,r.line).text,r.ch,o),s=f(M(u,t.line).text,t.ch,o),a=Math.min(l,s),g=Math.max(l,s),v=Math.min(r.line,t.line),y=Math.min(e.lastLine(),Math.max(r.line,t.line));v<=y;v++){var b=M(u,v).text,w=d(b,a,o);a==g?i.push(new Hs(P(v,w),P(v,w))):b.length>w&&i.push(new Hs(P(v,w),P(v,d(b,g,o))))}i.length||i.push(new Hs(r,r)),xi(u,Bn(e,p.ranges.slice(0,h).concat(i),h),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var x,C=c,S=Io(e,t,n.unit),L=C.anchor;E(S.anchor,L)>0?(x=S.head,L=B(C.from(),S.anchor)):(x=S.anchor,L=R(C.to(),S.head));var k=p.ranges.slice(0);k[h]=Ro(e,new Hs(U(u,L),x)),xi(u,Bn(e,k,h),$l)}}function o(t){var r=++b,s=kr(e,t,!0,"rectangle"==n.unit);if(s)if(0!=E(s,m)){e.curOp.focus=l(),i(s);var c=Rr(a,u);(s.line>=c.to||s.line<c.from)&&setTimeout(gn(e,function(){b==r&&o(t)}),150)}else{var f=t.clientY<y.top?-20:t.clientY>y.bottom?20:0;f&&setTimeout(gn(e,function(){b==r&&(a.scroller.scrollTop+=f,o(t))}),50)}}function s(t){e.state.selectingText=!1,b=1/0,We(t),a.input.focus(),Te(a.wrapper.ownerDocument,"mousemove",w),Te(a.wrapper.ownerDocument,"mouseup",x),u.history.lastSelOrigin=null}var a=e.display,u=e.doc;We(t);var c,h,p=u.sel,g=p.ranges;if(n.addNew&&!n.extend?(h=u.sel.contains(r),c=h>-1?g[h]:new Hs(r,r)):(c=u.sel.primary(),h=u.sel.primIndex),"rectangle"==n.unit)n.addNew||(c=new Hs(r,r)),r=kr(e,t,!0,!0),h=-1;else{var v=Io(e,r,n.unit);c=n.extend?pi(c,v.anchor,v.head,n.extend):v}n.addNew?h==-1?(h=g.length,xi(u,Bn(e,g.concat([c]),h),{scroll:!1,origin:"*mouse"})):g.length>1&&g[h].empty()&&"char"==n.unit&&!n.extend?(xi(u,Bn(e,g.slice(0,h).concat(g.slice(h+1)),0),{scroll:!1,origin:"*mouse"}),p=u.sel):mi(u,h,c,$l):(h=0,xi(u,new Ws([c],0),$l),p=u.sel);var m=r,y=a.wrapper.getBoundingClientRect(),b=0,w=gn(e,function(e){0!==e.buttons&&Ie(e)?o(e):s(e)}),x=gn(e,s);e.state.selectingText=x,os(a.wrapper.ownerDocument,"mousemove",w),os(a.wrapper.ownerDocument,"mouseup",x)}function Ro(e,t){var r=t.anchor,n=t.head,i=M(e.doc,r.line);if(0==E(r,n)&&r.sticky==n.sticky)return t;var o=Le(i);if(!o)return t;var l=Se(o,r.ch,r.sticky),s=o[l];if(s.from!=r.ch&&s.to!=r.ch)return t;var a=l+(s.from==r.ch==(1!=s.level)?0:1);if(0==a||a==o.length)return t;var u;if(n.line!=r.line)u=(n.line-r.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=Se(o,n.ch,n.sticky),f=c-l||(n.ch-r.ch)*(1==s.level?-1:1);u=c==a-1||c==a?f<0:f>0}var h=o[a+(u?-1:0)],d=u==(1==h.level),p=d?h.from:h.to,g=d?"after":"before";return r.ch==p&&r.sticky==g?t:new Hs(new P(r.line,p,g),n)}function Bo(e,t,r,n){var i,o;if(t.touches)i=t.touches[0].clientX,o=t.touches[0].clientY;else try{i=t.clientX,o=t.clientY}catch(t){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;n&&We(t);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(o>s.bottom||!Ae(e,r))return Fe(t);o-=s.top-l.viewOffset;for(var a=0;a<e.options.gutters.length;++a){var u=l.gutters.childNodes[a];if(u&&u.getBoundingClientRect().right>=i){var c=W(e.doc,o),f=e.options.gutters[a];return Me(e,r,e,c,f,t),Fe(t)}}}function Go(e,t){return Bo(e,t,"gutterClick",!0)}function Uo(e,t){Et(e.display,t)||Vo(e,t)||Ne(e,t,"contextmenu")||Bl||e.display.input.onContextMenu(t)}function Vo(e,t){return!!Ae(e,"gutterContextMenu")&&Bo(e,t,"gutterContextMenu",!1)}function Ko(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),rr(e)}function jo(e){function t(t,n,i,o){e.defaults[t]=n,i&&(r[t]=o?function(e,t,r){r!=ea&&i(e,t,r)}:i)}var r=e.optionHandlers;e.defineOption=t,e.Init=ea,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,Yn(e)},!0),t("indentUnit",2,Yn,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){_n(e),rr(e),yn(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var r=[],n=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var o=e.text.indexOf(t,i);if(o==-1)break;i=o+t.length,r.push(P(n,o))}n++});for(var i=r.length-1;i>=0;i--)Ii(e.doc,t,r[i],P(r[i].line,r[i].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,r){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),r!=ea&&e.refresh()}),t("specialCharPlaceholder",ct,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",Hl?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),t("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),t("rtlMoveVisually",!El),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){Ko(e),Xo(e)},!0),t("keyMap","default",function(e,t,r){var n=fo(t),i=r!=ea&&fo(r);i&&i.detach&&i.detach(e,n),n.attach&&n.attach(e,i||null)}),t("extraKeys",null),t("configureMouse",null),t("lineWrapping",!1,_o,!0),t("gutters",[],function(e){En(e.options),Xo(e)},!0),t("fixedGutter",!0,function(e,t){
e.display.gutters.style.left=t?Cr(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return rn(e)},!0),t("scrollbarStyle","native",function(e){on(e),rn(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e){En(e.options),Xo(e)},!0),t("firstLineNumber",1,Xo,!0),t("lineNumberFormatter",function(e){return e},Xo,!0),t("showCursorWhenSelecting",!1,Mr,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("pasteLinesPerSelection",!0),t("selectionsMayTouch",!1),t("readOnly",!1,function(e,t){"nocursor"==t&&(Er(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,Yo),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,Mr,!0),t("singleCursorHeightPerLine",!0,Mr,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,_n,!0),t("addModeClass",!1,_n,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,_n,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null),t("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),t("phrases",null)}function Xo(e){Pn(e),yn(e),Br(e)}function Yo(e,t,r){var n=r&&r!=ea;if(!t!=!n){var i=e.display.dragFunctions,o=t?os:Te;o(e.display.scroller,"dragstart",i.start),o(e.display.scroller,"dragenter",i.enter),o(e.display.scroller,"dragover",i.over),o(e.display.scroller,"dragleave",i.leave),o(e.display.scroller,"drop",i.drop)}}function _o(e){e.options.lineWrapping?(s(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(Gl(e.display.wrapper,"CodeMirror-wrap"),xe(e)),Lr(e),yn(e),rr(e),setTimeout(function(){return rn(e)},100)}function $o(e,t){var r=this;if(!(this instanceof $o))return new $o(e,t);this.options=t=t?c(t):{},c(ta,t,!1),En(t);var n=t.value;"string"==typeof n?n=new Rs(n,t.mode,null,t.lineSeparator,t.direction):t.mode&&(n.modeOption=t.mode),this.doc=n;var i=new $o.inputStyles[t.inputStyle](this),o=this.display=new T(e,n,i);o.wrapper.CodeMirror=this,Pn(this),Ko(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),on(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Vl,keySeq:null,specialChars:null},t.autofocus&&!Hl&&o.input.focus(),Cl&&Sl<11&&setTimeout(function(){return r.display.input.reset(!0)},20),qo(this),ro(),ln(this),this.curOp.forceUpdate=!0,Qn(this,n),t.autofocus&&!Hl||this.hasFocus()?setTimeout(u(Pr,this),20):Er(this);for(var l in ra)ra.hasOwnProperty(l)&&ra[l](r,t[l],ea);Gr(this),t.finishInit&&t.finishInit(this);for(var s=0;s<na.length;++s)na[s](r);sn(this),Ll&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function qo(e){function t(){i.activeTouch&&(o=setTimeout(function(){return i.activeTouch=null},1e3),l=i.activeTouch,l.end=+new Date)}function r(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function n(e,t){if(null==t.left)return!0;var r=t.left-e.left,n=t.top-e.top;return r*r+n*n>400}var i=e.display;os(i.scroller,"mousedown",gn(e,Wo)),Cl&&Sl<11?os(i.scroller,"dblclick",gn(e,function(t){if(!Ne(e,t)){var r=kr(e,t);if(r&&!Go(e,t)&&!Et(e.display,t)){We(t);var n=e.findWordAt(r);gi(e.doc,n.anchor,n.head)}}})):os(i.scroller,"dblclick",function(t){return Ne(e,t)||We(t)}),os(i.scroller,"contextmenu",function(t){return Uo(e,t)});var o,l={end:0};os(i.scroller,"touchstart",function(t){if(!Ne(e,t)&&!r(t)&&!Go(e,t)){i.input.ensurePolled(),clearTimeout(o);var n=+new Date;i.activeTouch={start:n,moved:!1,prev:n-l.end<=300?l:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}}),os(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),os(i.scroller,"touchend",function(r){var o=i.activeTouch;if(o&&!Et(i,r)&&null!=o.left&&!o.moved&&new Date-o.start<300){var l,s=e.coordsChar(i.activeTouch,"page");l=!o.prev||n(o,o.prev)?new Hs(s,s):!o.prev.prev||n(o,o.prev.prev)?e.findWordAt(s):new Hs(P(s.line,0),U(e.doc,P(s.line+1,0))),e.setSelection(l.anchor,l.head),e.focus(),We(r)}t()}),os(i.scroller,"touchcancel",t),os(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Qr(e,i.scroller.scrollTop),en(e,i.scroller.scrollLeft,!0),Me(e,"scroll",e))}),os(i.scroller,"mousewheel",function(t){return Rn(e,t)}),os(i.scroller,"DOMMouseScroll",function(t){return Rn(e,t)}),os(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Ne(e,t)||Pe(t)},over:function(t){Ne(e,t)||(Ji(e,t),Pe(t))},start:function(t){return Qi(e,t)},drop:gn(e,Zi),leave:function(t){Ne(e,t)||eo(e)}};var s=i.input.getField();os(s,"keyup",function(t){return Oo.call(e,t)}),os(s,"keydown",gn(e,Mo)),os(s,"keypress",gn(e,Ao)),os(s,"focus",function(t){return Pr(e,t)}),os(s,"blur",function(t){return Er(e,t)})}function Zo(e,t,r,n){var i,o=e.doc;null==r&&(r="add"),"smart"==r&&(o.mode.indent?i=Ze(e,t).state:r="prev");var l=e.options.tabSize,s=M(o,t),a=f(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(n||/\S/.test(s.text)){if("smart"==r&&(u=o.mode.indent(i,s.text.slice(c.length),s.text),u==Yl||u>150)){if(!n)return;r="prev"}}else u=0,r="not";"prev"==r?u=t>o.first?f(M(o,t-1).text,null,l):0:"add"==r?u=a+e.options.indentUnit:"subtract"==r?u=a-e.options.indentUnit:"number"==typeof r&&(u=a+r),u=Math.max(0,u);var h="",d=0;if(e.options.indentWithTabs)for(var g=Math.floor(u/l);g;--g)d+=l,h+="\t";if(d<u&&(h+=p(u-d)),h!=c)return Ii(o,h,P(t,0),P(t,c.length),"+input"),s.stateAfter=null,!0;for(var v=0;v<o.sel.ranges.length;v++){var m=o.sel.ranges[v];if(m.head.line==t&&m.head.ch<c.length){var y=P(t,c.length);mi(o,v,new Hs(y,y));break}}}function Qo(e){ia=e}function Jo(e,t,r,n,i){var o=e.doc;e.display.shift=!1,n||(n=o.sel);var l=e.state.pasteIncoming||"paste"==i,s=ss(t),a=null;if(l&&n.ranges.length>1)if(ia&&ia.text.join("\n")==t){if(n.ranges.length%ia.text.length==0){a=[];for(var u=0;u<ia.text.length;u++)a.push(o.splitLines(ia.text[u]))}}else s.length==n.ranges.length&&e.options.pasteLinesPerSelection&&(a=v(s,function(e){return[e]}));for(var c=e.curOp.updateInput,f=n.ranges.length-1;f>=0;f--){var h=n.ranges[f],d=h.from(),p=h.to();h.empty()&&(r&&r>0?d=P(d.line,d.ch-r):e.state.overwrite&&!l?p=P(p.line,Math.min(M(o,p.line).text.length,p.ch+g(s).length)):l&&ia&&ia.lineWise&&ia.text.join("\n")==t&&(d=p=P(d.line,0)));var m={from:d,to:p,text:a?a[f%a.length]:s,origin:i||(l?"paste":e.state.cutIncoming?"cut":"+input")};Di(e.doc,m),xt(e,"inputRead",e,m)}t&&!l&&tl(e,t),Yr(e),e.curOp.updateInput<2&&(e.curOp.updateInput=c),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function el(e,t){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||pn(t,function(){return Jo(t,r,0,null,"paste")}),!0}function tl(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var r=e.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=e.getModeAt(i.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(t.indexOf(o.electricChars.charAt(s))>-1){l=Zo(e,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(M(e.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Zo(e,i.head.line,"smart"));l&&xt(e,"electricInput",e,i.head.line)}}}function rl(e){for(var t=[],r=[],n=0;n<e.doc.sel.ranges.length;n++){var i=e.doc.sel.ranges[n].head.line,o={anchor:P(i,0),head:P(i+1,0)};r.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:r}}function nl(e,t,r,n){e.setAttribute("autocorrect",!!r),e.setAttribute("autocapitalize",!!n),e.setAttribute("spellcheck",!!t)}function il(){var e=n("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=n("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Ll?e.style.width="1000px":e.setAttribute("wrap","off"),Dl&&(e.style.border="1px solid black"),nl(e),t}function ol(e){var t=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,r){var n=this.options,i=n[e];n[e]==r&&"mode"!=e||(n[e]=r,t.hasOwnProperty(e)&&gn(this,t[e])(this,r,i),Me(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](fo(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,r=0;r<t.length;++r)if(t[r]==e||t[r].name==e)return t.splice(r,1),!0},addOverlay:vn(function(t,r){var n=t.token?t:e.getMode(this.options,t);if(n.startState)throw new Error("Overlays may not be stateful.");m(this.state.overlays,{mode:n,modeSpec:t,opaque:r&&r.opaque,priority:r&&r.priority||0},function(e){return e.priority}),this.state.modeGen++,yn(this)}),removeOverlay:vn(function(e){for(var t=this,r=this.state.overlays,n=0;n<r.length;++n){var i=r[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return r.splice(n,1),t.state.modeGen++,void yn(t)}}),indentLine:vn(function(e,t,r){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),H(this.doc,e)&&Zo(this,e,t,r)}),indentSelection:vn(function(e){for(var t=this,r=this.doc.sel.ranges,n=-1,i=0;i<r.length;i++){var o=r[i];if(o.empty())o.head.line>n&&(Zo(t,o.head.line,e,!0),n=o.head.line,i==t.doc.sel.primIndex&&Yr(t));else{var l=o.from(),s=o.to(),a=Math.max(n,l.line);n=Math.min(t.lastLine(),s.line-(s.ch?0:1))+1;for(var u=a;u<n;++u)Zo(t,u,e);var c=t.doc.sel.ranges;0==l.ch&&r.length==c.length&&c[i].from().ch>0&&mi(t.doc,i,new Hs(l,c[i].to()),_l)}}}),getTokenAt:function(e,t){return tt(this,e,t)},getLineTokens:function(e,t){return tt(this,P(e),t,!0)},getTokenTypeAt:function(e){e=U(this.doc,e);var t,r=qe(this,M(this.doc,e.line)),n=0,i=(r.length-1)/2,o=e.ch;if(0==o)t=r[2];else for(;;){var l=n+i>>1;if((l?r[2*l-1]:0)>=o)i=l;else{if(!(r[2*l+1]<o)){t=r[2*l+2];break}n=l+1}}var s=t?t.indexOf("overlay "):-1;return s<0?t:0==s?null:t.slice(0,s-1)},getModeAt:function(t){var r=this.doc.mode;return r.innerMode?e.innerMode(r,this.getTokenAt(t).state).mode:r},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var n=this,i=[];if(!r.hasOwnProperty(t))return i;var o=r[t],l=this.getModeAt(e);if("string"==typeof l[t])o[l[t]]&&i.push(o[l[t]]);else if(l[t])for(var s=0;s<l[t].length;s++){var a=o[l[t][s]];a&&i.push(a)}else l.helperType&&o[l.helperType]?i.push(o[l.helperType]):o[l.name]&&i.push(o[l.name]);for(var u=0;u<o._global.length;u++){var c=o._global[u];c.pred(l,n)&&h(i,c.val)==-1&&i.push(c.val)}return i},getStateAfter:function(e,t){var r=this.doc;return e=G(r,null==e?r.first+r.size-1:e),Ze(this,e+1,t).state},cursorCoords:function(e,t){var r,n=this.doc.sel.primary();return r=null==e?n.head:"object"==typeof e?U(this.doc,e):e?n.from():n.to(),ur(this,r,t||"page")},charCoords:function(e,t){return ar(this,U(this.doc,e),t||"page")},coordsChar:function(e,t){return e=sr(this,e,t||"page"),hr(this,e.left,e.top)},lineAtHeight:function(e,t){return e=sr(this,{top:e,left:0},t||"page").top,W(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,r){var n,i=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,i=!0),n=M(this.doc,e)}else n=e;return lr(this,n,{top:0,left:0},t||"page",r||i).top+(i?this.doc.height-be(n):0)},defaultTextHeight:function(){return br(this.display)},defaultCharWidth:function(){return wr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,r,n,i){var o=this.display;e=ur(this,U(this.doc,e));var l=e.bottom,s=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==n)l=e.top;else if("above"==n||"near"==n){var a=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==n||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?l=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(l=e.bottom),s+t.offsetWidth>u&&(s=u-t.offsetWidth)}t.style.top=l+"px",t.style.left=t.style.right="","right"==i?(s=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=s+"px"),r&&Kr(this,{left:s,top:l,right:s+t.offsetWidth,bottom:l+t.offsetHeight})},triggerOnKeyDown:vn(Mo),triggerOnKeyPress:vn(Ao),triggerOnKeyUp:Oo,triggerOnMouseDown:vn(Wo),execCommand:function(e){if(Ys.hasOwnProperty(e))return Ys[e].call(null,this)},triggerElectric:vn(function(e){tl(this,e)}),findPosH:function(e,t,r,n){var i=this,o=1;t<0&&(o=-1,t=-t);for(var l=U(this.doc,e),s=0;s<t&&(l=ll(i.doc,l,o,r,n),!l.hitSide);++s);return l},moveH:vn(function(e,t){var r=this;this.extendSelectionsBy(function(n){return r.display.shift||r.doc.extend||n.empty()?ll(r.doc,n.head,e,t,r.options.rtlMoveVisually):e<0?n.from():n.to()},ql)}),deleteH:vn(function(e,t){var r=this.doc.sel,n=this.doc;r.somethingSelected()?n.replaceSelection("",null,"+delete"):ho(this,function(r){var i=ll(n,r.head,e,t,!1);return e<0?{from:i,to:r.head}:{from:r.head,to:i}})}),findPosV:function(e,t,r,n){var i=this,o=1,l=n;t<0&&(o=-1,t=-t);for(var s=U(this.doc,e),a=0;a<t;++a){var u=ur(i,s,"div");if(null==l?l=u.left:u.left=l,s=sl(i,u,o,r),s.hitSide)break}return s},moveV:vn(function(e,t){var r=this,n=this.doc,i=[],o=!this.display.shift&&!n.extend&&n.sel.somethingSelected();if(n.extendSelectionsBy(function(l){if(o)return e<0?l.from():l.to();var s=ur(r,l.head,"div");null!=l.goalColumn&&(s.left=l.goalColumn),i.push(s.left);var a=sl(r,s,e,t);return"page"==t&&l==n.sel.primary()&&Xr(r,ar(r,a,"div").top-s.top),a},ql),i.length)for(var l=0;l<n.sel.ranges.length;l++)n.sel.ranges[l].goalColumn=i[l]}),findWordAt:function(e){var t=this.doc,r=M(t,e.line).text,n=e.ch,i=e.ch;if(r){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&i!=r.length||!n?++i:--n;for(var l=r.charAt(n),s=x(l,o)?function(e){return x(e,o)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!x(e)};n>0&&s(r.charAt(n-1));)--n;for(;i<r.length&&s(r.charAt(i));)++i}return new Hs(P(e.line,n),P(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?s(this.display.cursorDiv,"CodeMirror-overwrite"):Gl(this.display.cursorDiv,"CodeMirror-overwrite"),Me(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==l()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:vn(function(e,t){_r(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Bt(this)-this.display.barHeight,width:e.scrollWidth-Bt(this)-this.display.barWidth,clientHeight:Ut(this),clientWidth:Gt(this)}},scrollIntoView:vn(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:P(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?$r(this,e):Zr(this,e.from,e.to,e.margin)}),setSize:vn(function(e,t){var r=this,n=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=n(e)),null!=t&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&tr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){bn(r,i,"widget");break}++i}),this.curOp.forceUpdate=!0,Me(this,"refresh",this)}),operation:function(e){return pn(this,e)},startOperation:function(){return ln(this)},endOperation:function(){return sn(this)},refresh:vn(function(){var e=this.display.cachedTextHeight;yn(this),this.curOp.forceUpdate=!0,rr(this),_r(this,this.doc.scrollLeft,this.doc.scrollTop),Hn(this),(null==e||Math.abs(e-br(this.display))>.5)&&Lr(this),Me(this,"refresh",this)}),swapDoc:vn(function(e){var t=this.doc;return t.cm=null,Qn(this,e),rr(this),this.display.input.reset(),_r(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,xt(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},De(e),e.registerHelper=function(t,n,i){r.hasOwnProperty(t)||(r[t]=e[t]={_global:[]}),r[t][n]=i},e.registerGlobalHelper=function(t,n,i,o){e.registerHelper(t,n,o),r[t]._global.push({pred:i,val:o})}}function ll(e,t,r,n,i){function o(){var n=t.line+r;return!(n<e.first||n>=e.first+e.size)&&(t=new P(n,t.ch,t.sticky),u=M(e,n))}function l(n){var l;if(l=i?mo(e.cm,u,t,r):go(u,t,r),null==l){if(n||!o())return!1;t=vo(i,e.cm,u,t.line,r)}else t=l;return!0}var s=t,a=r,u=M(e,t.line);if("char"==n)l();else if("column"==n)l(!0);else if("word"==n||"group"==n)for(var c=null,f="group"==n,h=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(r<0)||l(!d);d=!1){var p=u.text.charAt(t.ch)||"\n",g=x(p,h)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";if(!f||d||g||(g="s"),c&&c!=g){r<0&&(r=1,l(),t.sticky="after");break}if(g&&(c=g),r>0&&!l(!d))break}var v=Mi(e,t,s,a,!0);return I(s,v)&&(v.hitSide=!0),v}function sl(e,t,r,n){var i,o=e.doc,l=t.left;if("page"==n){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),a=Math.max(s-.5*br(e.display),3);i=(r>0?t.bottom:t.top)+r*a}else"line"==n&&(i=r>0?t.bottom+3:t.top-3);for(var u;u=hr(e,l,i),u.outside;){if(r<0?i<=0:i>=o.height){u.hitSide=!0;break}i+=5*r}return u}function al(e,t){var r=Yt(e,t.line);if(!r||r.hidden)return null;var n=M(e.doc,t.line),i=Kt(r,n,t.line),o=Le(n,e.doc.direction),l="left";if(o){var s=Se(o,t.ch);l=s%2?"right":"left"}var a=qt(i.map,t.ch,l);return a.offset="right"==a.collapse?a.end:a.start,a}function ul(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}function cl(e,t){return t&&(e.bad=!0),e}function fl(e,t,r,n,i){function o(e){return function(t){return t.id==e}}function l(){c&&(u+=f,h&&(u+=f),c=h=!1)}function s(e){e&&(l(),u+=e)}function a(t){if(1==t.nodeType){var r=t.getAttribute("cm-text");if(r)return void s(r);var u,d=t.getAttribute("cm-marker");if(d){var p=e.findMarks(P(n,0),P(i+1,0),o(+d));return void(p.length&&(u=p[0].find(0))&&s(N(e.doc,u.from,u.to).join(f)))}if("false"==t.getAttribute("contenteditable"))return;var g=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;g&&l();for(var v=0;v<t.childNodes.length;v++)a(t.childNodes[v]);/^(pre|p)$/i.test(t.nodeName)&&(h=!0),g&&(c=!0)}else 3==t.nodeType&&s(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var u="",c=!1,f=e.doc.lineSeparator(),h=!1;a(t),t!=r;)t=t.nextSibling,h=!1;return u}function hl(e,t,r){var n;if(t==e.display.lineDiv){if(n=e.display.lineDiv.childNodes[r],!n)return cl(e.clipPos(P(e.display.viewTo-1)),!0);t=null,r=0}else for(n=t;;n=n.parentNode){if(!n||n==e.display.lineDiv)return null;if(n.parentNode&&n.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var o=e.display.view[i];if(o.node==n)return dl(o,t,r)}}function dl(e,t,r){function n(t,r,n){for(var i=-1;i<(f?f.length:0);i++)for(var o=i<0?c.map:f[i],l=0;l<o.length;l+=3){var s=o[l+2];if(s==t||s==r){var a=D(i<0?e.line:e.rest[i]),u=o[l]+n;return(n<0||s!=t)&&(u=o[l+(n?1:0)]),P(a,u)}}}var i=e.text.firstChild,l=!1;if(!t||!o(i,t))return cl(P(D(e.line),0),!0);if(t==i&&(l=!0,t=i.childNodes[r],r=0,!t)){var s=e.rest?g(e.rest):e.line;return cl(P(D(s),s.text.length),l)}var a=3==t.nodeType?t:null,u=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,r&&(r=a.nodeValue.length));u.parentNode!=i;)u=u.parentNode;var c=e.measure,f=c.maps,h=n(a,u,r);if(h)return cl(h,l);for(var d=u.nextSibling,p=a?a.nodeValue.length-r:0;d;d=d.nextSibling){if(h=n(d,d.firstChild,0))return cl(P(h.line,h.ch-p),l);p+=d.textContent.length}for(var v=u.previousSibling,m=r;v;v=v.previousSibling){if(h=n(v,v.firstChild,-1))return cl(P(h.line,h.ch+m),l);m+=v.textContent.length}}function pl(e,t){function r(){e.value=u.getValue()}if(t=t?c(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=l();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}var i;if(e.form&&(os(e.form,"submit",r),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var s=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=s}}catch(a){}}t.finishInit=function(t){t.save=r,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,r(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(Te(e.form,"submit",r),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var u=$o(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return u}function gl(e){e.off=Te,e.on=os,e.wheelEventPixels=zn,e.Doc=Rs,e.splitLines=ss,e.countColumn=f,e.findColumn=d,e.isWordChar=w,e.Pass=Yl,e.signal=Me,e.Line=ys,e.changeEnd=Un,e.scrollbarModel=Ms,e.Pos=P,e.cmpPos=E,e.modes=fs,e.mimeModes=hs,e.resolveMode=Ve,e.getMode=Ke,e.modeExtensions=ds,e.extendMode=je,e.copyState=Xe,e.startState=_e,e.innerMode=Ye,e.commands=Ys,e.keyMap=Xs,e.keyName=co,e.isModifierKey=ao,e.lookupKey=so,e.normalizeKeyMap=lo,e.StringStream=ps,e.SharedTextMarker=Is,e.TextMarker=Es,e.LineWidget=Fs,e.e_preventDefault=We,e.e_stopPropagation=He,e.e_stop=Pe,e.addClass=s,e.contains=o,e.rmClass=Gl,e.keyNames=Us}var vl=navigator.userAgent,ml=navigator.platform,yl=/gecko\/\d/i.test(vl),bl=/MSIE \d/.test(vl),wl=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(vl),xl=/Edge\/(\d+)/.exec(vl),Cl=bl||wl||xl,Sl=Cl&&(bl?document.documentMode||6:+(xl||wl)[1]),Ll=!xl&&/WebKit\//.test(vl),kl=Ll&&/Qt\/\d+\.\d+/.test(vl),Tl=!xl&&/Chrome\//.test(vl),Ml=/Opera\//.test(vl),Nl=/Apple Computer/.test(navigator.vendor),Ol=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(vl),Al=/PhantomJS/.test(vl),Dl=!xl&&/AppleWebKit/.test(vl)&&/Mobile\/\w+/.test(vl),Wl=/Android/.test(vl),Hl=Dl||Wl||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(vl),Fl=Dl||/Mac/.test(ml),Pl=/\bCrOS\b/.test(vl),El=/win/i.test(ml),Il=Ml&&vl.match(/Version\/(\d*\.\d*)/);Il&&(Il=Number(Il[1])),Il&&Il>=15&&(Ml=!1,Ll=!0);var zl,Rl=Fl&&(kl||Ml&&(null==Il||Il<12.11)),Bl=yl||Cl&&Sl>=9,Gl=function(t,r){var n=t.className,i=e(r).exec(n);if(i){var o=n.slice(i.index+i[0].length);t.className=n.slice(0,i.index)+(o?i[1]+o:"")}};zl=document.createRange?function(e,t,r,n){var i=document.createRange();return i.setEnd(n||e,r),i.setStart(e,t),i}:function(e,t,r){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(i){return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",t),n};var Ul=function(e){e.select()};Dl?Ul=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:Cl&&(Ul=function(e){try{e.select()}catch(t){}});var Vl=function(){this.id=null};Vl.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Kl,jl,Xl=30,Yl={toString:function(){return"CodeMirror.Pass"}},_l={scroll:!1},$l={origin:"*mouse"},ql={origin:"+move"},Zl=[""],Ql=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Jl=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,es=!1,ts=!1,rs=null,ns=function(){function e(e){return e<=247?r.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?n.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,r){this.level=e,this.from=t,this.to=r}var r="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,l=/[LRr]/,s=/[Lb1n]/,a=/[1n]/;return function(r,n){var u="ltr"==n?"L":"R";if(0==r.length||"ltr"==n&&!i.test(r))return!1;for(var c=r.length,f=[],h=0;h<c;++h)f.push(e(r.charCodeAt(h)));for(var d=0,p=u;d<c;++d){var v=f[d];"m"==v?f[d]=p:p=v}for(var m=0,y=u;m<c;++m){var b=f[m];"1"==b&&"r"==y?f[m]="n":l.test(b)&&(y=b,"r"==b&&(f[m]="R"))}for(var w=1,x=f[0];w<c-1;++w){var C=f[w];"+"==C&&"1"==x&&"1"==f[w+1]?f[w]="1":","!=C||x!=f[w+1]||"1"!=x&&"n"!=x||(f[w]=x),x=C}for(var S=0;S<c;++S){var L=f[S];if(","==L)f[S]="N";else if("%"==L){var k=void 0;for(k=S+1;k<c&&"%"==f[k];++k);for(var T=S&&"!"==f[S-1]||k<c&&"1"==f[k]?"1":"N",M=S;M<k;++M)f[M]=T;S=k-1}}for(var N=0,O=u;N<c;++N){var A=f[N];"L"==O&&"1"==A?f[N]="L":l.test(A)&&(O=A)}for(var D=0;D<c;++D)if(o.test(f[D])){var W=void 0;for(W=D+1;W<c&&o.test(f[W]);++W);for(var H="L"==(D?f[D-1]:u),F="L"==(W<c?f[W]:u),P=H==F?H?"L":"R":u,E=D;E<W;++E)f[E]=P;D=W-1}for(var I,z=[],R=0;R<c;)if(s.test(f[R])){var B=R;for(++R;R<c&&s.test(f[R]);++R);z.push(new t(0,B,R))}else{var G=R,U=z.length;for(++R;R<c&&"L"!=f[R];++R);for(var V=G;V<R;)if(a.test(f[V])){G<V&&z.splice(U,0,new t(1,G,V));var K=V;for(++V;V<R&&a.test(f[V]);++V);z.splice(U,0,new t(2,K,V)),G=V}else++V;G<R&&z.splice(U,0,new t(1,G,R))}return"ltr"==n&&(1==z[0].level&&(I=r.match(/^\s+/))&&(z[0].from=I[0].length,z.unshift(new t(0,0,I[0].length))),1==g(z).level&&(I=r.match(/\s+$/))&&(g(z).to-=I[0].length,z.push(new t(0,c-I[0].length,c)))),"rtl"==n?z.reverse():z}}(),is=[],os=function(e,t,r){if(e.addEventListener)e.addEventListener(t,r,!1);else if(e.attachEvent)e.attachEvent("on"+t,r);else{var n=e._handlers||(e._handlers={});n[t]=(n[t]||is).concat(r)}},ls=function(){if(Cl&&Sl<9)return!1;var e=n("div");return"draggable"in e||"dragDrop"in e}(),ss=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,r=[],n=e.length;t<=n;){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");l!=-1?(r.push(o.slice(0,l)),t+=l+1):(r.push(o),t=i+1)}return r}:function(e){return e.split(/\r\n?|\n/)},as=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(r){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},us=function(){var e=n("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),cs=null,fs={},hs={},ds={},ps=function(e,t,r){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};ps.prototype.eol=function(){return this.pos>=this.string.length},ps.prototype.sol=function(){return this.pos==this.lineStart},ps.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ps.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ps.prototype.eat=function(e){var t,r=this.string.charAt(this.pos);if(t="string"==typeof e?r==e:r&&(e.test?e.test(r):e(r)))return++this.pos,r},ps.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ps.prototype.eatSpace=function(){for(var e=this,t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++e.pos;return this.pos>t},ps.prototype.skipToEnd=function(){this.pos=this.string.length},ps.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ps.prototype.backUp=function(e){this.pos-=e},ps.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=f(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},ps.prototype.indentation=function(){return f(this.string,null,this.tabSize)-(this.lineStart?f(this.string,this.lineStart,this.tabSize):0)},ps.prototype.match=function(e,t,r){if("string"!=typeof e){var n=this.string.slice(this.pos).match(e);return n&&n.index>0?null:(n&&t!==!1&&(this.pos+=n[0].length),n)}var i=function(e){return r?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(i(o)==i(e))return t!==!1&&(this.pos+=e.length),!0},ps.prototype.current=function(){return this.string.slice(this.start,this.pos)},ps.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ps.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ps.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var gs=function(e,t){this.state=e,this.lookAhead=t},vs=function(e,t,r,n){this.state=t,this.doc=e,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};vs.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},vs.prototype.baseToken=function(e){var t=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)t.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},vs.prototype.nextLine=function(){
this.line++,this.maxLookAhead>0&&this.maxLookAhead--},vs.fromSaved=function(e,t,r){return t instanceof gs?new vs(e,Xe(e.mode,t.state),r,t.lookAhead):new vs(e,Xe(e.mode,t),r)},vs.prototype.save=function(e){var t=e!==!1?Xe(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new gs(t,this.maxLookAhead):t};var ms=function(e,t,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=r},ys=function(e,t,r){this.text=e,ne(this,t),this.height=r?r(this):1};ys.prototype.lineNo=function(){return D(this)},De(ys);var bs,ws={},xs={},Cs=null,Ss=null,Ls={left:0,right:0,top:0,bottom:0},ks=function(e,t,r){this.cm=r;var i=this.vert=n("div",[n("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=n("div",[n("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=o.tabIndex=-1,e(i),e(o),os(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),os(o,"scroll",function(){o.clientWidth&&t(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Cl&&Sl<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ks.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,n=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=t?n+"px":"0";var i=e.viewHeight-(t?n:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==n&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:t?n:0}},ks.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ks.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ks.prototype.zeroWidthHack=function(){var e=Fl&&!Ol?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Vl,this.disableVert=new Vl},ks.prototype.enableZeroWidthBar=function(e,t,r){function n(){var i=e.getBoundingClientRect(),o="vert"==r?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},ks.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Ts=function(){};Ts.prototype.update=function(){return{bottom:0,right:0}},Ts.prototype.setScrollLeft=function(){},Ts.prototype.setScrollTop=function(){},Ts.prototype.clear=function(){};var Ms={"native":ks,"null":Ts},Ns=0,Os=function(e,t,r){var n=e.display;this.viewport=t,this.visible=Rr(n,e.doc,t),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=Gt(e),this.force=r,this.dims=xr(e),this.events=[]};Os.prototype.signal=function(e,t){Ae(e,t)&&this.events.push(arguments)},Os.prototype.finish=function(){for(var e=this,t=0;t<this.events.length;t++)Me.apply(null,e.events[t])};var As=0,Ds=null;Cl?Ds=-.53:yl?Ds=15:Tl?Ds=-.7:Nl&&(Ds=-1/3);var Ws=function(e,t){this.ranges=e,this.primIndex=t};Ws.prototype.primary=function(){return this.ranges[this.primIndex]},Ws.prototype.equals=function(e){var t=this;if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var n=t.ranges[r],i=e.ranges[r];if(!I(n.anchor,i.anchor)||!I(n.head,i.head))return!1}return!0},Ws.prototype.deepCopy=function(){for(var e=this,t=[],r=0;r<this.ranges.length;r++)t[r]=new Hs(z(e.ranges[r].anchor),z(e.ranges[r].head));return new Ws(t,this.primIndex)},Ws.prototype.somethingSelected=function(){for(var e=this,t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return!0;return!1},Ws.prototype.contains=function(e,t){var r=this;t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=r.ranges[n];if(E(t,i.from())>=0&&E(e,i.to())<=0)return n}return-1};var Hs=function(e,t){this.anchor=e,this.head=t};Hs.prototype.from=function(){return B(this.anchor,this.head)},Hs.prototype.to=function(){return R(this.anchor,this.head)},Hs.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Ui.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=this,n=e,i=e+t;n<i;++n){var o=r.lines[n];r.height-=o.height,st(o),xt(o,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,r){var n=this;this.height+=r,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=n},iterN:function(e,t,r){for(var n=this,i=e+t;e<i;++e)if(r(n.lines[e]))return!0}},Vi.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var r=this;this.size-=t;for(var n=0;n<this.children.length;++n){var i=r.children[n],o=i.chunkSize();if(e<o){var l=Math.min(t,o-e),s=i.height;if(i.removeInner(e,l),r.height-=s-i.height,o==l&&(r.children.splice(n--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof Ui))){var a=[];this.collapse(a),this.children=[new Ui(a)],this.children[0].parent=this}},collapse:function(e){for(var t=this,r=0;r<this.children.length;++r)t.children[r].collapse(e)},insertInner:function(e,t,r){var n=this;this.size+=t.length,this.height+=r;for(var i=0;i<this.children.length;++i){var o=n.children[i],l=o.chunkSize();if(e<=l){if(o.insertInner(e,t,r),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,a=s;a<o.lines.length;){var u=new Ui(o.lines.slice(a,a+=25));o.height-=u.height,n.children.splice(++i,0,u),u.parent=n}o.lines=o.lines.slice(0,s),n.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),r=new Vi(t);if(e.parent){e.size-=r.size,e.height-=r.height;var n=h(e.parent.children,e);e.parent.children.splice(n+1,0,r)}else{var i=new Vi(e.children);i.parent=e,e.children=[i,r],e=i}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,r){for(var n=this,i=0;i<this.children.length;++i){var o=n.children[i],l=o.chunkSize();if(e<l){var s=Math.min(t,l-e);if(o.iterN(e,s,r))return!0;if(0==(t-=s))break;e=0}else e-=l}}};var Fs=function(e,t,r){var n=this;if(r)for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i]);this.doc=e,this.node=t};Fs.prototype.clear=function(){var e=this,t=this.doc.cm,r=this.line.widgets,n=this.line,i=D(n);if(null!=i&&r){for(var o=0;o<r.length;++o)r[o]==e&&r.splice(o--,1);r.length||(n.widgets=null);var l=Pt(this);A(n,Math.max(0,n.height-l)),t&&(pn(t,function(){Ki(t,n,-l),bn(t,i,"widget")}),xt(t,"lineWidgetCleared",t,this,i))}},Fs.prototype.changed=function(){var e=this,t=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=Pt(this)-t;i&&(me(this.doc,n)||A(n,n.height+i),r&&pn(r,function(){r.curOp.forceUpdate=!0,Ki(r,n,i),xt(r,"lineWidgetChanged",r,e,D(n))}))},De(Fs);var Ps=0,Es=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++Ps};Es.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,r=t&&!t.curOp;if(r&&ln(t),Ae(this,"clear")){var n=this.find();n&&xt(this,"clear",n.from,n.to)}for(var i=null,o=null,l=0;l<this.lines.length;++l){var s=e.lines[l],a=_(s.markedSpans,e);t&&!e.collapsed?bn(t,D(s),"text"):t&&(null!=a.to&&(o=D(s)),null!=a.from&&(i=D(s))),s.markedSpans=$(s.markedSpans,a),null==a.from&&e.collapsed&&!me(e.doc,s)&&t&&A(s,br(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=he(e.lines[u]),f=we(c);f>t.display.maxLineLength&&(t.display.maxLine=c,t.display.maxLineLength=f,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&yn(t,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Li(t.doc)),t&&xt(t,"markerCleared",t,this,i,o),r&&sn(t),this.parent&&this.parent.clear()}},Es.prototype.find=function(e,t){var r=this;null==e&&"bookmark"==this.type&&(e=1);for(var n,i,o=0;o<this.lines.length;++o){var l=r.lines[o],s=_(l.markedSpans,r);if(null!=s.from&&(n=P(t?l:D(l),s.from),e==-1))return n;if(null!=s.to&&(i=P(t?l:D(l),s.to),1==e))return i}return n&&{from:n,to:i}},Es.prototype.changed=function(){var e=this,t=this.find(-1,!0),r=this,n=this.doc.cm;t&&n&&pn(n,function(){var i=t.line,o=D(t.line),l=Yt(n,o);if(l&&(er(l),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!me(r.doc,i)&&null!=r.height){var s=r.height;r.height=null;var a=Pt(r)-s;a&&A(i,i.height+a)}xt(n,"markerChanged",n,e)})},Es.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&h(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Es.prototype.detachLine=function(e){if(this.lines.splice(h(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},De(Es);var Is=function(e,t){var r=this;this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=r};Is.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();xt(this,"clear")}},Is.prototype.find=function(e,t){return this.primary.find(e,t)},De(Is);var zs=0,Rs=function(e,t,r,n,i){if(!(this instanceof Rs))return new Rs(e,t,r,n,i);null==r&&(r=0),Vi.call(this,[new Ui([new ys("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=P(r,0);this.sel=Gn(o),this.history=new ti(null),this.id=++zs,this.modeOption=t,this.lineSep=n,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),qn(this,{from:o,to:o,text:e}),xi(this,Gn(o),_l)};Rs.prototype=b(Vi.prototype,{constructor:Rs,iter:function(e,t,r){r?this.iterN(e-this.first,t-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var r=0,n=0;n<t.length;++n)r+=t[n].height;this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=O(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:mn(function(e){var t=P(this.first,0),r=this.first+this.size-1;Di(this,{from:t,to:P(r,M(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&_r(this.cm,0,0),xi(this,Gn(t),_l)}),replaceRange:function(e,t,r,n){t=U(this,t),r=r?U(this,r):t,Ii(this,e,t,r,n)},getRange:function(e,t,r){var n=N(this,U(this,e),U(this,t));return r===!1?n:n.join(r||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(H(this,e))return M(this,e)},getLineNumber:function(e){return D(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=M(this,e)),he(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return U(this,e)},getCursor:function(e){var t,r=this.sel.primary();return t=null==e||"head"==e?r.head:"anchor"==e?r.anchor:"end"==e||"to"==e||e===!1?r.to():r.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:mn(function(e,t,r){yi(this,U(this,"number"==typeof e?P(e,t||0):e),null,r)}),setSelection:mn(function(e,t,r){yi(this,U(this,e),U(this,t||e),r)}),extendSelection:mn(function(e,t,r){gi(this,U(this,e),t&&U(this,t),r)}),extendSelections:mn(function(e,t){vi(this,K(this,e),t)}),extendSelectionsBy:mn(function(e,t){var r=v(this.sel.ranges,e);vi(this,K(this,r),t)}),setSelections:mn(function(e,t,r){var n=this;if(e.length){for(var i=[],o=0;o<e.length;o++)i[o]=new Hs(U(n,e[o].anchor),U(n,e[o].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),xi(this,Bn(this.cm,i,t),r)}}),addSelection:mn(function(e,t,r){var n=this.sel.ranges.slice(0);n.push(new Hs(U(this,e),U(this,t||e))),xi(this,Bn(this.cm,n,n.length-1),r)}),getSelection:function(e){for(var t,r=this,n=this.sel.ranges,i=0;i<n.length;i++){var o=N(r,n[i].from(),n[i].to());t=t?t.concat(o):o}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=this,r=[],n=this.sel.ranges,i=0;i<n.length;i++){var o=N(t,n[i].from(),n[i].to());e!==!1&&(o=o.join(e||t.lineSeparator())),r[i]=o}return r},replaceSelection:function(e,t,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=e;this.replaceSelections(n,t,r||"+input")},replaceSelections:mn(function(e,t,r){for(var n=this,i=[],o=this.sel,l=0;l<o.ranges.length;l++){var s=o.ranges[l];i[l]={from:s.from(),to:s.to(),text:n.splitLines(e[l]),origin:r}}for(var a=t&&"end"!=t&&Xn(this,i,t),u=i.length-1;u>=0;u--)Di(n,i[u]);a?wi(this,a):this.cm&&Yr(this.cm)}),undo:mn(function(){Hi(this,"undo")}),redo:mn(function(){Hi(this,"redo")}),undoSelection:mn(function(){Hi(this,"undo",!0)}),redoSelection:mn(function(){Hi(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,r=0,n=0;n<e.done.length;n++)e.done[n].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++r;return{undo:t,redo:r}},clearHistory:function(){this.history=new ti(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:di(this.history.done),undone:di(this.history.undone)}},setHistory:function(e){var t=this.history=new ti(this.history.maxGeneration);t.done=di(e.done.slice(0),null,!0),t.undone=di(e.undone.slice(0),null,!0)},setGutterMarker:mn(function(e,t,r){return Gi(this,e,"gutter",function(e){var n=e.gutterMarkers||(e.gutterMarkers={});return n[t]=r,!r&&C(n)&&(e.gutterMarkers=null),!0})}),clearGutter:mn(function(e){var t=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&Gi(t,r,"gutter",function(){return r.gutterMarkers[e]=null,C(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!H(this,e))return null;if(t=e,e=M(this,e),!e)return null}else if(t=D(e),null==t)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:mn(function(t,r,n){return Gi(this,t,"gutter"==r?"gutter":"class",function(t){var i="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass";if(t[i]){if(e(n).test(t[i]))return!1;t[i]+=" "+n}else t[i]=n;return!0})}),removeLineClass:mn(function(t,r,n){return Gi(this,t,"gutter"==r?"gutter":"class",function(t){var i="text"==r?"textClass":"background"==r?"bgClass":"gutter"==r?"gutterClass":"wrapClass",o=t[i];if(!o)return!1;if(null==n)t[i]=null;else{var l=o.match(e(n));if(!l)return!1;var s=l.index+l[0].length;t[i]=o.slice(0,l.index)+(l.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:mn(function(e,t,r){return ji(this,e,t,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,r){return Xi(this,U(this,e),U(this,t),r,r&&r.type||"range")},setBookmark:function(e,t){var r={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=U(this,e),Xi(this,e,e,r,"bookmark")},findMarksAt:function(e){e=U(this,e);var t=[],r=M(this,e.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,r){e=U(this,e),t=U(this,t);var n=[],i=e.line;return this.iter(e.line,t.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var a=l[s];null!=a.to&&i==e.line&&e.ch>=a.to||null==a.from&&i!=e.line||null!=a.from&&i==t.line&&a.from>=t.ch||r&&!r(a.marker)||n.push(a.marker.parent||a.marker)}++i}),n},getAllMarks:function(){var e=[];return this.iter(function(t){var r=t.markedSpans;if(r)for(var n=0;n<r.length;++n)null!=r[n].from&&e.push(r[n].marker)}),e},posFromIndex:function(e){var t,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;return o>e?(t=e,!0):(e-=o,void++r)}),U(this,P(r,t))},indexFromPos:function(e){e=U(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+r}),t},copy:function(e){var t=new Rs(O(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,r=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<r&&(r=e.to);var n=new Rs(O(this,t,r),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:e.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],$i(n,_i(this)),n},unlinkDoc:function(e){var t=this;if(e instanceof $o&&(e=e.doc),this.linked)for(var r=0;r<this.linked.length;++r){var n=t.linked[r];if(n.doc==e){t.linked.splice(r,1),e.unlinkDoc(t),qi(_i(t));break}}if(e.history==this.history){var i=[e.id];Zn(e,function(e){return i.push(e.id)},!0),e.history=new ti(null),e.history.done=di(this.history.done,i),e.history.undone=di(this.history.undone,i)}},iterLinkedDocs:function(e){Zn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):ss(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:mn(function(e){"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&ei(this.cm))})}),Rs.prototype.eachLine=Rs.prototype.iter;for(var Bs=0,Gs=!1,Us={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Vs=0;Vs<10;Vs++)Us[Vs+48]=Us[Vs+96]=String(Vs);for(var Ks=65;Ks<=90;Ks++)Us[Ks]=String.fromCharCode(Ks);for(var js=1;js<=12;js++)Us[js+111]=Us[js+63235]="F"+js;var Xs={};Xs.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Xs.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Xs.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Xs.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Xs["default"]=Fl?Xs.macDefault:Xs.pcDefault;var Ys={selectAll:Oi,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),_l)},killLine:function(e){return ho(e,function(t){if(t.empty()){var r=M(e.doc,t.head.line).text.length;return t.head.ch==r&&t.head.line<e.lastLine()?{from:t.head,to:P(t.head.line+1,0)}:{from:t.head,to:P(t.head.line,r)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return ho(e,function(t){return{from:P(t.from().line,0),to:U(e.doc,P(t.to().line+1,0))}})},delLineLeft:function(e){return ho(e,function(e){return{from:P(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return ho(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return{from:n,to:t.from()}})},delWrappedLineRight:function(e){return ho(e,function(t){var r=e.charCoords(t.head,"div").top+5,n=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:t.from(),to:n}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(P(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(P(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return yo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return wo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return bo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},ql)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},ql)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,n=e.coordsChar({left:0,top:r},"div");return n.ch<e.getLine(n.line).search(/\S/)?wo(e,t.head):n},ql)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],r=e.listSelections(),n=e.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=f(e.getLine(o.line),o.ch,n);t.push(p(n-l%n))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return pn(e,function(){for(var t=e.listSelections(),r=[],n=0;n<t.length;n++)if(t[n].empty()){var i=t[n].head,o=M(e.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new P(i.line,i.ch-1)),i.ch>0)i=new P(i.line,i.ch+1),e.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),P(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var l=M(e.doc,i.line-1).text;l&&(i=new P(i.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+l.charAt(l.length-1),P(i.line-1,l.length-1),i,"+transpose"))}r.push(new Hs(i,i))}e.setSelections(r)})},newlineAndIndent:function(e){return pn(e,function(){for(var t=e.listSelections(),r=t.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),t[r].anchor,t[r].head,"+input");t=e.listSelections();for(var n=0;n<t.length;n++)e.indentLine(t[n].from().line,null,!0);Yr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},_s=new Vl,$s=null,qs=400,Zs=function(e,t,r){this.time=e,this.pos=t,this.button=r};Zs.prototype.compare=function(e,t,r){return this.time+qs>e&&0==E(t,this.pos)&&r==this.button};var Qs,Js,ea={toString:function(){return"CodeMirror.Init"}},ta={},ra={};$o.defaults=ta,$o.optionHandlers=ra;var na=[];$o.defineInitHook=function(e){return na.push(e)};var ia=null,oa=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Vl,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};oa.prototype.init=function(e){function t(e){if(!Ne(i,e)){if(i.somethingSelected())Qo({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=rl(i);Qo({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,_l),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var r=ia.text.join("\n");if(e.clipboardData.setData("Text",r),e.clipboardData.getData("Text")==r)return void e.preventDefault()}var l=il(),s=l.firstChild;i.display.lineSpace.insertBefore(l,i.display.lineSpace.firstChild),s.value=ia.text.join("\n");var a=document.activeElement;Ul(s),setTimeout(function(){i.display.lineSpace.removeChild(l),a.focus(),a==o&&n.showPrimarySelection()},50)}}var r=this,n=this,i=n.cm,o=n.div=e.lineDiv;nl(o,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),os(o,"paste",function(e){Ne(i,e)||el(e,i)||Sl<=11&&setTimeout(gn(i,function(){return r.updateFromDOM()}),20)}),os(o,"compositionstart",function(e){r.composing={data:e.data,done:!1}}),os(o,"compositionupdate",function(e){r.composing||(r.composing={data:e.data,done:!1})}),os(o,"compositionend",function(e){r.composing&&(e.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),os(o,"touchstart",function(){return n.forceCompositionEnd()}),os(o,"input",function(){r.composing||r.readFromDOMSoon()}),os(o,"copy",t),os(o,"cut",t)},oa.prototype.prepareSelection=function(){var e=Nr(this.cm,!1);return e.focus=this.cm.state.focused,e},oa.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},oa.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},oa.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,r=t.doc.sel.primary(),n=r.from(),i=r.to();if(t.display.viewTo==t.display.viewFrom||n.line>=t.display.viewTo||i.line<t.display.viewFrom)return void e.removeAllRanges();var o=hl(t,e.anchorNode,e.anchorOffset),l=hl(t,e.focusNode,e.focusOffset);if(!o||o.bad||!l||l.bad||0!=E(B(o,l),n)||0!=E(R(o,l),i)){var s=t.display.view,a=n.line>=t.display.viewFrom&&al(t,n)||{node:s[0].measure.map[2],offset:0},u=i.line<t.display.viewTo&&al(t,i);if(!u){var c=s[s.length-1].measure,f=c.maps?c.maps[c.maps.length-1]:c.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(!a||!u)return void e.removeAllRanges();var h,d=e.rangeCount&&e.getRangeAt(0);try{h=zl(a.node,a.offset,u.offset,u.node)}catch(p){}h&&(!yl&&t.state.focused?(e.collapse(a.node,a.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),d&&null==e.anchorNode?e.addRange(d):yl&&this.startGracePeriod()),this.rememberSelection()}},oa.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},oa.prototype.showMultipleSelections=function(e){r(this.cm.display.cursorDiv,e.cursors),r(this.cm.display.selectionDiv,e.selection)},oa.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},oa.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return o(this.div,t)},oa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},oa.prototype.blur=function(){this.div.blur()},oa.prototype.getField=function(){return this.div},oa.prototype.supportsTouch=function(){return!0},oa.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():pn(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},oa.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},oa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(Wl&&Tl&&this.cm.options.gutters.length&&ul(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var r=hl(t,e.anchorNode,e.anchorOffset),n=hl(t,e.focusNode,e.focusOffset);r&&n&&pn(t,function(){xi(t.doc,Gn(r,n),_l),(r.bad||n.bad)&&(t.curOp.selectionChanged=!0)})}}},oa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,r=e.doc.sel.primary(),n=r.from(),i=r.to();if(0==n.ch&&n.line>e.firstLine()&&(n=P(n.line-1,M(e.doc,n.line-1).length)),
i.ch==M(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=P(i.line+1,0)),n.line<t.viewFrom||i.line>t.viewTo-1)return!1;var o,l,s;n.line==t.viewFrom||0==(o=Tr(e,n.line))?(l=D(t.view[0].line),s=t.view[0].node):(l=D(t.view[o].line),s=t.view[o-1].node.nextSibling);var a,u,c=Tr(e,i.line);if(c==t.view.length-1?(a=t.viewTo-1,u=t.lineDiv.lastChild):(a=D(t.view[c+1].line)-1,u=t.view[c+1].node.previousSibling),!s)return!1;for(var f=e.doc.splitLines(fl(e,s,u,l,a)),h=N(e.doc,P(l,0),P(a,M(e.doc,a).text.length));f.length>1&&h.length>1;)if(g(f)==g(h))f.pop(),h.pop(),a--;else{if(f[0]!=h[0])break;f.shift(),h.shift(),l++}for(var d=0,p=0,v=f[0],m=h[0],y=Math.min(v.length,m.length);d<y&&v.charCodeAt(d)==m.charCodeAt(d);)++d;for(var b=g(f),w=g(h),x=Math.min(b.length-(1==f.length?d:0),w.length-(1==h.length?d:0));p<x&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)++p;if(1==f.length&&1==h.length&&l==n.line)for(;d&&d>n.ch&&b.charCodeAt(b.length-p-1)==w.charCodeAt(w.length-p-1);)d--,p++;f[f.length-1]=b.slice(0,b.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(d).replace(/\u200b+$/,"");var C=P(l,d),S=P(a,h.length?g(h).length-p:0);return f.length>1||f[0]||E(C,S)?(Ii(e.doc,f,C,S,"+input"),!0):void 0},oa.prototype.ensurePolled=function(){this.forceCompositionEnd()},oa.prototype.reset=function(){this.forceCompositionEnd()},oa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},oa.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},oa.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||pn(this.cm,function(){return yn(e.cm)})},oa.prototype.setUneditable=function(e){e.contentEditable="false"},oa.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||gn(this.cm,Jo)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},oa.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},oa.prototype.onContextMenu=function(){},oa.prototype.resetPosition=function(){},oa.prototype.needsContentAttribute=!0;var la=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new Vl,this.hasSelection=!1,this.composing=null};la.prototype.init=function(e){function t(e){if(!Ne(i,e)){if(i.somethingSelected())Qo({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=rl(i);Qo({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,_l):(n.prevInput="",o.value=t.text.join("\n"),Ul(o))}"cut"==e.type&&(i.state.cutIncoming=!0)}}var r=this,n=this,i=this.cm;this.createField(e);var o=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Dl&&(o.style.width="0px"),os(o,"input",function(){Cl&&Sl>=9&&r.hasSelection&&(r.hasSelection=null),n.poll()}),os(o,"paste",function(e){Ne(i,e)||el(e,i)||(i.state.pasteIncoming=!0,n.fastPoll())}),os(o,"cut",t),os(o,"copy",t),os(e.scroller,"paste",function(t){Et(e,t)||Ne(i,t)||(i.state.pasteIncoming=!0,n.focus())}),os(e.lineSpace,"selectstart",function(t){Et(e,t)||We(t)}),os(o,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),os(o,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},la.prototype.createField=function(e){this.wrapper=il(),this.textarea=this.wrapper.firstChild},la.prototype.prepareSelection=function(){var e=this.cm,t=e.display,r=e.doc,n=Nr(e);if(e.options.moveInputWithCursor){var i=ur(e,r.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),l=t.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+l.left-o.left))}return n},la.prototype.showSelection=function(e){var t=this.cm,n=t.display;r(n.cursorDiv,e.cursors),r(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},la.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var r=t.getSelection();this.textarea.value=r,t.state.focused&&Ul(this.textarea),Cl&&Sl>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",Cl&&Sl>=9&&(this.hasSelection=null))}},la.prototype.getField=function(){return this.textarea},la.prototype.supportsTouch=function(){return!1},la.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Hl||l()!=this.textarea))try{this.textarea.focus()}catch(e){}},la.prototype.blur=function(){this.textarea.blur()},la.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},la.prototype.receivedFocus=function(){this.slowPoll()},la.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},la.prototype.fastPoll=function(){function e(){var n=r.poll();n||t?(r.pollingFast=!1,r.slowPoll()):(t=!0,r.polling.set(60,e))}var t=!1,r=this;r.pollingFast=!0,r.polling.set(20,e)},la.prototype.poll=function(){var e=this,t=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!t.state.focused||as(r)&&!n&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=r.value;if(i==n&&!t.somethingSelected())return!1;if(Cl&&Sl>=9&&this.hasSelection===i||Fl&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||n||(n="â"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,s=Math.min(n.length,i.length);l<s&&n.charCodeAt(l)==i.charCodeAt(l);)++l;return pn(t,function(){Jo(t,i.slice(l),n.length-l,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?r.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},la.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},la.prototype.onKeyPress=function(){Cl&&Sl>=9&&(this.hasSelection=null),this.fastPoll()},la.prototype.onContextMenu=function(e){function t(){if(null!=l.selectionStart){var e=i.somethingSelected(),t="â"+(e?l.value:"");l.value="â",l.value=t,n.prevInput=e?"":"â",l.selectionStart=1,l.selectionEnd=t.length,o.selForContextMenu=i.doc.sel}}function r(){if(n.contextMenuPending==r&&(n.contextMenuPending=!1,n.wrapper.style.cssText=f,l.style.cssText=c,Cl&&Sl<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=a),null!=l.selectionStart)){(!Cl||Cl&&Sl<9)&&t();var e=0,s=function(){o.selForContextMenu==i.doc.sel&&0==l.selectionStart&&l.selectionEnd>0&&"â"==n.prevInput?gn(i,Oi)(i):e++<10?o.detectingSelectAll=setTimeout(s,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(s,200)}}var n=this,i=n.cm,o=i.display,l=n.textarea;n.contextMenuPending&&n.contextMenuPending();var s=kr(i,e),a=o.scroller.scrollTop;if(s&&!Ml){var u=i.options.resetSelectionOnContextMenu;u&&i.doc.sel.contains(s)==-1&&gn(i,xi)(i.doc,Gn(s),_l);var c=l.style.cssText,f=n.wrapper.style.cssText,h=n.wrapper.offsetParent.getBoundingClientRect();n.wrapper.style.cssText="position: static",l.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(Cl?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var d;if(Ll&&(d=window.scrollY),o.input.focus(),Ll&&window.scrollTo(null,d),o.input.reset(),i.somethingSelected()||(l.value=n.prevInput=" "),n.contextMenuPending=r,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),Cl&&Sl>=9&&t(),Bl){Pe(e);var p=function(){Te(window,"mouseup",p),setTimeout(r,20)};os(window,"mouseup",p)}else setTimeout(r,50)}},la.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},la.prototype.setUneditable=function(){},la.prototype.needsContentAttribute=!1,jo($o),ol($o);var sa="iter insert remove copy getEditor constructor".split(" ");for(var aa in Rs.prototype)Rs.prototype.hasOwnProperty(aa)&&h(sa,aa)<0&&($o.prototype[aa]=function(e){return function(){return e.apply(this.doc,arguments)}}(Rs.prototype[aa]));return De(Rs),$o.inputStyles={textarea:la,contenteditable:oa},$o.defineMode=function(e){$o.defaults.mode||"null"==e||($o.defaults.mode=e),Ge.apply(this,arguments)},$o.defineMIME=Ue,$o.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),$o.defineMIME("text/plain","null"),$o.defineExtension=function(e,t){$o.prototype[e]=t},$o.defineDocExtension=function(e,t){Rs.prototype[e]=t},$o.fromTextArea=pl,gl($o),$o.version="5.43.0",$o});
!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function r(n){return null===n?NaN:+n}function i(n){return!isNaN(n)}function u(n){return{left:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var u=r+i>>>1;n(t[u],e)<0?r=u+1:i=u}return r},right:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var u=r+i>>>1;n(t[u],e)>0?i=u:r=u+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function l(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function c(){this._=Object.create(null)}function f(n){return(n+="")===bo||n[0]===_o?_o+n:n}function s(n){return(n+="")[0]===_o?n.slice(1):n}function h(n){return f(n)in this._}function p(n){return(n=f(n))in this._&&delete this._[n]}function g(){var n=[];for(var t in this._)n.push(s(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function y(){this._=Object.create(null)}function m(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=wo.length;e<r;++e){var i=wo[e]+t;if(i in n)return i}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,i=-1,u=r.length;++i<u;)(t=r[i].on)&&t.apply(this,arguments);return n}var e=[],r=new c;return t.on=function(t,i){var u,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),r.remove(t)),i&&e.push(r.set(t,{on:i})),n)},t}function S(){ao.event.preventDefault()}function k(){for(var n,t=ao.event;n=t.sourceEvent;)t=n;return t}function N(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(i){try{var u=i.sourceEvent=ao.event;i.target=n,ao.event=i,t[i.type].apply(e,r)}finally{ao.event=u}}},t}function E(n){return ko(n,Co),n}function A(n){return"function"==typeof n?n:function(){return No(n,this)}}function C(n){return"function"==typeof n?n:function(){return Eo(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function i(){this.setAttribute(n,t)}function u(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ao.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?u:i}function L(n){return n.trim().replace(/\s+/g," ")}function q(n){return new RegExp("(?:^|\\s+)"+ao.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<i;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<i;)n[e](this,r)}n=T(n).map(D);var i=n.length;return"function"==typeof t?r:e}function D(n){var t=q(n);return function(e,r){if(i=e.classList)return r?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||e.setAttribute("class",L(i+" "+n))):e.setAttribute("class",L(i.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function i(){this.style.setProperty(n,t,e)}function u(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?u:i}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function i(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?i:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e===zo&&t.documentElement.namespaceURI===zo?t.createElement(n):t.createElementNS(e,n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ao.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return Ao(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;e<r;e++)for(var i,u=n[e],o=0,a=u.length;o<a;o++)(i=u[o])&&t(i,o,e);return n}function Z(n){return ko(n,qo),n}function V(n){var t,e;return function(r,i,u){var o,a=n[u].update,l=a.length;for(u!=e&&(e=u,t=0),i>=t&&(t=i+1);!(o=a[t])&&++t<l;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function i(){var i=l(t,co(arguments));r.call(this),this.addEventListener(n,this[o]=i,i.$=e),i._=t}function u(){var t,e=new RegExp("^__on([^.]+)"+ao.requote(n)+"$");for(var r in this)if(t=r.match(e)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),l=$;a>0&&(n=n.slice(0,a));var c=To.get(n);return c&&(n=c,l=B),a?t?i:r:t?b:u}function $(n,t){return function(e){var r=ao.event;ao.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ao.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Do,i="click"+r,u=ao.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ro&&(Ro=!("onselectstart"in e)&&x(e.style,"userSelect")),Ro){var o=n(e).style,a=o[Ro];o[Ro]="none"}return function(n){if(u.on(r,null),Ro&&(o[Ro]=a),n){var t=function(){u.on(i,null)};u.on(i,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();if(Po<0){var u=t(n);if(u.scrollX||u.scrollY){r=ao.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Po=!(o.f||o.e),r.remove()}}return Po?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ao.event.changedTouches[0].identifier}function K(n){return n>0?1:n<0?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nn(n){return n>1?0:n<-1?Fo:Math.acos(n)}function tn(n){return n>1?Io:n<-1?-Io:Math.asin(n)}function en(n){return((n=Math.exp(n))-1/n)/2}function rn(n){return((n=Math.exp(n))+1/n)/2}function un(n){return((n=Math.exp(2*n))-1)/(n+1)}function on(n){return(n=Math.sin(n/2))*n}function an(){}function ln(n,t,e){return this instanceof ln?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ln?new ln(n.h,n.s,n.l):_n(""+n,wn,ln):new ln(n,t,e)}function cn(n,t,e){function r(n){return n>360?n-=360:n<0&&(n+=360),n<60?u+(o-u)*n/60:n<180?o:n<240?u+(o-u)*(240-n)/60:u}function i(n){return Math.round(255*r(n))}var u,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:t>1?1:t,e=e<0?0:e>1?1:e,o=e<=.5?e*(1+t):e+t-e*t,u=2*e-o,new mn(i(n+120),i(n),i(n-120))}function fn(n,t,e){return this instanceof fn?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof fn?new fn(n.h,n.c,n.l):n instanceof hn?gn(n.l,n.a,n.b):gn((n=Sn((n=ao.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new fn(n,t,e)}function sn(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new hn(e,Math.cos(n*=Yo)*t,Math.sin(n)*t)}function hn(n,t,e){return this instanceof hn?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof hn?new hn(n.l,n.a,n.b):n instanceof fn?sn(n.h,n.c,n.l):Sn((n=mn(n)).r,n.g,n.b):new hn(n,t,e)}function pn(n,t,e){var r=(n+16)/116,i=r+t/500,u=r-e/200;return i=vn(i)*na,r=vn(r)*ta,u=vn(u)*ea,new mn(yn(3.2404542*i-1.5371385*r-.4985314*u),yn(-.969266*i+1.8760108*r+.041556*u),yn(.0556434*i-.2040259*r+1.0572252*u))}function gn(n,t,e){return n>0?new fn(Math.atan2(e,t)*Zo,Math.sqrt(t*t+e*e),n):new fn(NaN,NaN,n)}function vn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function dn(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function yn(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mn(n,t,e){return this instanceof mn?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mn?new mn(n.r,n.g,n.b):_n(""+n,mn,cn):new mn(n,t,e)}function Mn(n){return new mn(n>>16,n>>8&255,255&n)}function xn(n){return Mn(n)+""}function bn(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function _n(n,t,e){var r,i,u,o=0,a=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(n=n.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Nn(i[0]),Nn(i[1]),Nn(i[2]))}return(u=ua.get(n))?t(u.r,u.g,u.b):(null==n||"#"!==n.charAt(0)||isNaN(u=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&u)>>4,o=o>>4|o,a=240&u,a=a>>4|a,l=15&u,l=l<<4|l):7===n.length&&(o=(16711680&u)>>16,a=(65280&u)>>8,l=255&u)),t(o,a,l))}function wn(n,t,e){var r,i,u=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-u,l=(o+u)/2;return a?(i=l<.5?a/(o+u):a/(2-o-u),r=n==o?(t-e)/a+(t<e?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new ln(r,i,l)}function Sn(n,t,e){n=kn(n),t=kn(t),e=kn(e);var r=dn((.4124564*n+.3575761*t+.1804375*e)/na),i=dn((.2126729*n+.7151522*t+.072175*e)/ta),u=dn((.0193339*n+.119192*t+.9503041*e)/ea);return hn(116*i-16,500*(r-i),200*(i-u))}function kn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function Nn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function En(n){return"function"==typeof n?n:function(){return n}}function An(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Cn(t,e,n,r)}}function Cn(n,t,e,r){function i(){var n,t=l.status;if(!t&&Ln(l)||t>=200&&t<300||304===t){try{n=e.call(u,l)}catch(r){return void o.error.call(u,r)}o.load.call(u,n)}else o.error.call(u,l)}var u={},o=ao.dispatch("beforesend","progress","load","error"),a={},l=new XMLHttpRequest,c=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(n)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(n){var t=ao.event;ao.event=n;try{o.progress.call(u,l)}finally{ao.event=t}},u.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",u)},u.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",u):t},u.responseType=function(n){return arguments.length?(c=n,u):c},u.response=function(n){return e=n,u},["get","post"].forEach(function(n){u[n]=function(){return u.send.apply(u,[n].concat(co(arguments)))}}),u.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),l.setRequestHeader)for(var f in a)l.setRequestHeader(f,a[f]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=c&&(l.responseType=c),null!=i&&u.on("error",i).on("load",function(n){i(null,n)}),o.beforesend.call(u,l),l.send(null==r?null:r),u},u.abort=function(){return l.abort(),u},ao.rebind(u,o,"on"),null==r?u:u.get(zn(r))}function zn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Ln(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qn(n,t,e){var r=arguments.length;r<2&&(t=0),r<3&&(e=Date.now());var i=e+t,u={c:n,t:i,n:null};return aa?aa.n=u:oa=u,aa=u,la||(ca=clearTimeout(ca),la=1,fa(Tn)),u}function Tn(){var n=Rn(),t=Dn()-n;t>24?(isFinite(t)&&(clearTimeout(ca),ca=setTimeout(Tn,t)),la=0):(la=1,fa(Tn))}function Rn(){for(var n=Date.now(),t=oa;t;)n>=t.t&&t.c(n-t.t)&&(t.c=null),t=t.n;return n}function Dn(){for(var n,t=oa,e=1/0;t;)t.c?(t.t<e&&(e=t.t),t=(n=t).n):t=n?n.n=t.n:oa=t.n;return aa=n,e}function Pn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Un(n,t){var e=Math.pow(10,3*xo(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function jn(n){var t=n.decimal,e=n.thousands,r=n.grouping,i=n.currency,u=r&&e?function(n,t){for(var i=n.length,u=[],o=0,a=r[0],l=0;i>0&&a>0&&(l+a+1>t&&(a=Math.max(1,t-l)),u.push(n.substring(i-=a,i+a)),!((l+=a+1)>t));)a=r[o=(o+1)%r.length];return u.reverse().join(e)}:m;return function(n){var e=ha.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",l=e[4]||"",c=e[5],f=+e[6],s=e[7],h=e[8],p=e[9],g=1,v="",d="",y=!1,m=!0;switch(h&&(h=+h.substring(1)),(c||"0"===r&&"="===o)&&(c=r="0",o="="),p){case"n":s=!0,p="g";break;case"%":g=100,d="%",p="f";break;case"p":g=100,d="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+p.toLowerCase());case"c":m=!1;case"d":y=!0,h=0;break;case"s":g=-1,p="r"}"$"===l&&(v=i[0],d=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):"e"!=p&&"f"!=p||(h=Math.max(0,Math.min(20,h)))),p=pa.get(p)||Fn;var M=c&&s;return function(n){var e=d;if(y&&n%1)return"";var i=n<0||0===n&&1/n<0?(n=-n,"-"):"-"===a?"":a;if(g<0){var l=ao.formatPrefix(n,h);n=l.scale(n),e=l.symbol+d}else n*=g;n=p(n,h);var x,b,_=n.lastIndexOf(".");if(_<0){var w=m?n.lastIndexOf("e"):-1;w<0?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!c&&s&&(x=u(x,1/0));var S=v.length+x.length+b.length+(M?0:i.length),k=S<f?new Array(S=f-S+1).join(r):"";return M&&(x=u(k+x,k.length?f-b.length:1/0)),i+=v,n=x+b,("<"===o?i+n+k:">"===o?k+i+n:"^"===o?k.substring(0,S>>=1)+i+n+k.substring(S):i+(M?n:k+n))+e}}}function Fn(n){return n+""}function Hn(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function On(n,t,e){function r(t){var e=n(t),r=u(e,1);return t-e<r-t?e:r}function i(e){return t(e=n(new va(e-1)),1),e}function u(n,e){return t(n=new va((+n)),e),n}function o(n,r,u){var o=i(n),a=[];if(u>1)for(;o<r;)e(o)%u||a.push(new Date((+o))),t(o,1);else for(;o<r;)a.push(new Date((+o))),t(o,1);return a}function a(n,t,e){try{va=Hn;var r=new Hn;return r._=n,o(r,t,e)}finally{va=Date}}n.floor=n,n.round=r,n.ceil=i,n.offset=u,n.range=o;var l=n.utc=In(n);return l.floor=l,l.round=In(r),l.ceil=In(i),l.offset=In(u),l.range=a,n}function In(n){return function(t,e){try{va=Hn;var r=new Hn;return r._=t,n(r,e)._}finally{va=Date}}}function Yn(n){function t(n){function t(t){for(var e,i,u,o=[],a=-1,l=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(l,a)),null!=(i=ya[e=n.charAt(++a)])&&(e=n.charAt(++a)),(u=A[e])&&(e=u(t,null==i?"e"===e?" ":"0":i)),o.push(e),l=a+1);return o.push(n.slice(l,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=e(r,n,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var u=null!=r.Z&&va!==Hn,o=new(u?Hn:va);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),u?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var i,u,o,a=0,l=t.length,c=e.length;a<l;){if(r>=c)return-1;if(i=t.charCodeAt(a++),37===i){if(o=t.charAt(a++),u=C[o in ya?t.charAt(a++):o],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){N.lastIndex=0;var r=N.exec(t.slice(e));return r?(n.m=E.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,A.c.toString(),t,r)}function l(n,t,r){return e(n,A.x.toString(),t,r)}function c(n,t,r){return e(n,A.X.toString(),t,r)}function f(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var s=n.dateTime,h=n.date,p=n.time,g=n.periods,v=n.days,d=n.shortDays,y=n.months,m=n.shortMonths;t.utc=function(n){function e(n){try{va=Hn;var t=new va;return t._=n,r(t)}finally{va=Date}}var r=t(n);return e.parse=function(n){try{va=Hn;var t=r.parse(n);return t&&t._}finally{va=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ct;var M=ao.map(),x=Vn(v),b=Xn(v),_=Vn(d),w=Xn(d),S=Vn(y),k=Xn(y),N=Vn(m),E=Xn(m);g.forEach(function(n,t){M.set(n.toLowerCase(),t)});var A={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return m[n.getMonth()]},B:function(n){return y[n.getMonth()]},c:t(s),d:function(n,t){return Zn(n.getDate(),t,2)},e:function(n,t){return Zn(n.getDate(),t,2)},H:function(n,t){return Zn(n.getHours(),t,2)},I:function(n,t){return Zn(n.getHours()%12||12,t,2)},j:function(n,t){return Zn(1+ga.dayOfYear(n),t,3)},L:function(n,t){return Zn(n.getMilliseconds(),t,3)},m:function(n,t){return Zn(n.getMonth()+1,t,2)},M:function(n,t){return Zn(n.getMinutes(),t,2)},p:function(n){return g[+(n.getHours()>=12)]},S:function(n,t){return Zn(n.getSeconds(),t,2)},U:function(n,t){return Zn(ga.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Zn(ga.mondayOfYear(n),t,2)},x:t(h),X:t(p),y:function(n,t){return Zn(n.getFullYear()%100,t,2)},Y:function(n,t){return Zn(n.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},C={a:r,A:i,b:u,B:o,c:a,d:tt,e:tt,H:rt,I:rt,j:et,L:ot,m:nt,M:it,p:f,S:ut,U:Bn,w:$n,W:Wn,x:l,X:c,y:Gn,Y:Jn,Z:Kn,"%":lt};return t}function Zn(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",u=i.length;return r+(u<e?new Array(e-u+1).join(t)+i:i)}function Vn(n){return new RegExp("^(?:"+n.map(ao.requote).join("|")+")","i")}function Xn(n){for(var t=new c,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function $n(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Bn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function Wn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Jn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Gn(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.y=Qn(+r[0]),e+r[0].length):-1}function Kn(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Qn(n){return n+(n>68?1900:2e3)}function nt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function tt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function et(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function rt(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function it(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function ut(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ot(n,t,e){ma.lastIndex=0;var r=ma.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function at(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=xo(t)/60|0,i=xo(t)%60;return e+Zn(r,"0",2)+Zn(i,"0",2)}function lt(n,t,e){Ma.lastIndex=0;var r=Ma.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ct(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ft(){}function st(n,t,e){var r=e.s=n+t,i=r-n,u=r-i;e.t=n-u+(t-i)}function ht(n,t){n&&wa.hasOwnProperty(n.type)&&wa[n.type](n,t)}function pt(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function gt(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)pt(n[e],t,1);t.polygonEnd()}function vt(){function n(n,t){n*=Yo,t=t*Yo/2+Fo/4;var e=n-r,o=e>=0?1:-1,a=o*e,l=Math.cos(t),c=Math.sin(t),f=u*c,s=i*l+f*Math.cos(a),h=f*o*Math.sin(a);ka.add(Math.atan2(h,s)),r=n,i=l,u=c}var t,e,r,i,u;Na.point=function(o,a){Na.point=n,r=(t=o)*Yo,i=Math.cos(a=(e=a)*Yo/2+Fo/4),u=Math.sin(a)},Na.lineEnd=function(){n(t,e)}}function dt(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function yt(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function mt(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Mt(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function xt(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function bt(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function _t(n){return[Math.atan2(n[1],n[0]),tn(n[2])]}function wt(n,t){return xo(n[0]-t[0])<Uo&&xo(n[1]-t[1])<Uo}function St(n,t){n*=Yo;var e=Math.cos(t*=Yo);kt(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function kt(n,t,e){++Ea,Ca+=(n-Ca)/Ea,za+=(t-za)/Ea,La+=(e-La)/Ea}function Nt(){function n(n,i){n*=Yo;var u=Math.cos(i*=Yo),o=u*Math.cos(n),a=u*Math.sin(n),l=Math.sin(i),c=Math.atan2(Math.sqrt((c=e*l-r*a)*c+(c=r*o-t*l)*c+(c=t*a-e*o)*c),t*o+e*a+r*l);Aa+=c,qa+=c*(t+(t=o)),Ta+=c*(e+(e=a)),Ra+=c*(r+(r=l)),kt(t,e,r)}var t,e,r;ja.point=function(i,u){i*=Yo;var o=Math.cos(u*=Yo);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(u),ja.point=n,kt(t,e,r)}}function Et(){ja.point=St}function At(){function n(n,t){n*=Yo;var e=Math.cos(t*=Yo),o=e*Math.cos(n),a=e*Math.sin(n),l=Math.sin(t),c=i*l-u*a,f=u*o-r*l,s=r*a-i*o,h=Math.sqrt(c*c+f*f+s*s),p=r*o+i*a+u*l,g=h&&-nn(p)/h,v=Math.atan2(h,p);Da+=g*c,Pa+=g*f,Ua+=g*s,Aa+=v,qa+=v*(r+(r=o)),Ta+=v*(i+(i=a)),Ra+=v*(u+(u=l)),kt(r,i,u)}var t,e,r,i,u;ja.point=function(o,a){t=o,e=a,ja.point=n,o*=Yo;var l=Math.cos(a*=Yo);r=l*Math.cos(o),i=l*Math.sin(o),u=Math.sin(a),kt(r,i,u)},ja.lineEnd=function(){n(t,e),ja.lineEnd=Et,ja.point=St}}function Ct(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function zt(){return!0}function Lt(n,t,e,r,i){var u=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(wt(e,r)){i.lineStart();for(var a=0;a<t;++a)i.point((e=n[a])[0],e[1]);return void i.lineEnd()}var l=new Tt(e,n,null,(!0)),c=new Tt(e,null,l,(!1));l.o=c,u.push(l),o.push(c),l=new Tt(r,n,null,(!1)),c=new Tt(r,null,l,(!0)),l.o=c,u.push(l),o.push(c)}}),o.sort(t),qt(u),qt(o),u.length){for(var a=0,l=e,c=o.length;a<c;++a)o[a].e=l=!l;for(var f,s,h=u[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var a=0,c=f.length;a<c;++a)i.point((s=f[a])[0],s[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g){f=p.p.z;for(var a=f.length-1;a>=0;--a)i.point((s=f[a])[0],s[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function qt(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Tt(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Rt(n,t,e,r){return function(i,u){function o(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function a(n,t){var e=i(n,t);d.point(e[0],e[1])}function l(){m.point=a,d.lineStart()}function c(){m.point=o,d.lineEnd()}function f(n,t){v.push([n,t]);var e=i(n,t);x.point(e[0],e[1])}function s(){x.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),g.push(v),v=null,r)if(1&t){n=e[0];var i,r=n.length-1,o=-1;if(r>0){for(b||(u.polygonStart(),b=!0),u.lineStart();++o<r;)u.point((i=n[o])[0],i[1]);u.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Dt))}var p,g,v,d=t(u),y=i.invert(r[0],r[1]),m={point:o,lineStart:l,lineEnd:c,polygonStart:function(){m.point=f,m.lineStart=s,m.lineEnd=h,p=[],g=[]},polygonEnd:function(){m.point=o,m.lineStart=l,m.lineEnd=c,p=ao.merge(p);var n=Ot(y,g);p.length?(b||(u.polygonStart(),b=!0),Lt(p,Ut,n,e,u)):n&&(b||(u.polygonStart(),b=!0),u.lineStart(),e(null,null,1,u),u.lineEnd()),b&&(u.polygonEnd(),b=!1),p=g=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}},M=Pt(),x=t(M),b=!1;return m}}function Dt(n){return n.length>1}function Pt(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ut(n,t){return((n=n.x)[0]<0?n[1]-Io-Uo:Io-n[1])-((t=t.x)[0]<0?t[1]-Io-Uo:Io-t[1])}function jt(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,o){var a=u>0?Fo:-Fo,l=xo(u-e);xo(l-Fo)<Uo?(n.point(e,r=(r+o)/2>0?Io:-Io),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(u,r),t=0):i!==a&&l>=Fo&&(xo(e-i)<Uo&&(e-=i*Uo),xo(u-a)<Uo&&(u-=a*Uo),r=Ft(e,r,u,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=u,r=o),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function Ft(n,t,e,r){var i,u,o=Math.sin(n-e);return xo(o)>Uo?Math.atan((Math.sin(t)*(u=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*u*o)):(t+r)/2}function Ht(n,t,e,r){var i;if(null==n)i=e*Io,r.point(-Fo,i),r.point(0,i),r.point(Fo,i),r.point(Fo,0),r.point(Fo,-i),r.point(0,-i),r.point(-Fo,-i),r.point(-Fo,0),r.point(-Fo,i);else if(xo(n[0]-t[0])>Uo){var u=n[0]<t[0]?Fo:-Fo;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function Ot(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],u=0,o=0;ka.reset();for(var a=0,l=t.length;a<l;++a){var c=t[a],f=c.length;if(f)for(var s=c[0],h=s[0],p=s[1]/2+Fo/4,g=Math.sin(p),v=Math.cos(p),d=1;;){d===f&&(d=0),n=c[d];var y=n[0],m=n[1]/2+Fo/4,M=Math.sin(m),x=Math.cos(m),b=y-h,_=b>=0?1:-1,w=_*b,S=w>Fo,k=g*M;if(ka.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),u+=S?b+_*Ho:b,S^h>=e^y>=e){var N=mt(dt(s),dt(n));bt(N);var E=mt(i,N);bt(E);var A=(S^b>=0?-1:1)*tn(E[2]);(r>A||r===A&&(N[0]||N[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=y,g=M,v=x,s=n}}return(u<-Uo||u<Uo&&ka<-Uo)^1&o}function It(n){function t(n,t){return Math.cos(n)*Math.cos(t)>u}function e(n){var e,u,l,c,f;return{lineStart:function(){c=l=!1,f=1},point:function(s,h){var p,g=[s,h],v=t(s,h),d=o?v?0:i(s,h):v?i(s+(s<0?Fo:-Fo),h):0;if(!e&&(c=l=v)&&n.lineStart(),v!==l&&(p=r(e,g),(wt(e,p)||wt(g,p))&&(g[0]+=Uo,g[1]+=Uo,v=t(g[0],g[1]))),v!==l)f=0,v?(n.lineStart(),p=r(g,e),n.point(p[0],p[1])):(p=r(e,g),n.point(p[0],p[1]),n.lineEnd()),e=p;else if(a&&e&&o^v){var y;d&u||!(y=r(g,e,!0))||(f=0,o?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||e&&wt(e,g)||n.point(g[0],g[1]),e=g,l=v,u=d},lineEnd:function(){l&&n.lineEnd(),e=null},clean:function(){return f|(c&&l)<<1}}}function r(n,t,e){var r=dt(n),i=dt(t),o=[1,0,0],a=mt(r,i),l=yt(a,a),c=a[0],f=l-c*c;if(!f)return!e&&n;var s=u*l/f,h=-u*c/f,p=mt(o,a),g=xt(o,s),v=xt(a,h);Mt(g,v);var d=p,y=yt(g,d),m=yt(d,d),M=y*y-m*(yt(g,g)-1);if(!(M<0)){var x=Math.sqrt(M),b=xt(d,(-y-x)/m);if(Mt(b,g),b=_t(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],N=t[1];S<w&&(_=w,w=S,S=_);var E=S-w,A=xo(E-Fo)<Uo,C=A||E<Uo;if(!A&&N<k&&(_=k,k=N,N=_),C?A?k+N>0^b[1]<(xo(b[0]-w)<Uo?k:N):k<=b[1]&&b[1]<=N:E>Fo^(w<=b[0]&&b[0]<=S)){var z=xt(d,(-y+x)/m);return Mt(z,g),[b,_t(z)]}}}function i(t,e){var r=o?n:Fo-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var u=Math.cos(n),o=u>0,a=xo(u)>Uo,l=ve(n,6*Yo);return Rt(t,e,l,o?[0,-n]:[-Fo,n-Fo])}function Yt(n,t,e,r){return function(i){var u,o=i.a,a=i.b,l=o.x,c=o.y,f=a.x,s=a.y,h=0,p=1,g=f-l,v=s-c;if(u=n-l,g||!(u>0)){if(u/=g,g<0){if(u<h)return;u<p&&(p=u)}else if(g>0){if(u>p)return;u>h&&(h=u)}if(u=e-l,g||!(u<0)){if(u/=g,g<0){if(u>p)return;u>h&&(h=u)}else if(g>0){if(u<h)return;u<p&&(p=u)}if(u=t-c,v||!(u>0)){if(u/=v,v<0){if(u<h)return;u<p&&(p=u)}else if(v>0){if(u>p)return;u>h&&(h=u)}if(u=r-c,v||!(u<0)){if(u/=v,v<0){if(u>p)return;u>h&&(h=u)}else if(v>0){if(u<h)return;u<p&&(p=u)}return h>0&&(i.a={x:l+h*g,y:c+h*v}),p<1&&(i.b={x:l+p*g,y:c+p*v}),i}}}}}}function Zt(n,t,e,r){function i(r,i){return xo(r[0]-n)<Uo?i>0?0:3:xo(r[0]-e)<Uo?i>0?2:1:xo(r[1]-t)<Uo?i>0?1:0:i>0?3:2}function u(n,t){return o(n.x,t.x)}function o(n,t){var e=i(n,1),r=i(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function l(n){for(var t=0,e=d.length,r=n[1],i=0;i<e;++i)for(var u,o=1,a=d[i],l=a.length,c=a[0];o<l;++o)u=a[o],c[1]<=r?u[1]>r&&Q(c,u,n)>0&&++t:u[1]<=r&&Q(c,u,n)<0&&--t,c=u;return 0!==t}function c(u,a,l,c){var f=0,s=0;if(null==u||(f=i(u,l))!==(s=i(a,l))||o(u,a)<0^l>0){do c.point(0===f||3===f?n:e,f>1?r:t);while((f=(f+l+4)%4)!==s)}else c.point(a[0],a[1])}function f(i,u){return n<=i&&i<=e&&t<=u&&u<=r}function s(n,t){f(n,t)&&a.point(n,t)}function h(){C.point=g,d&&d.push(y=[]),S=!0,w=!1,b=_=NaN}function p(){v&&(g(m,M),x&&w&&E.rejoin(),v.push(E.buffer())),C.point=s,w&&a.lineEnd()}function g(n,t){n=Math.max(-Ha,Math.min(Ha,n)),t=Math.max(-Ha,Math.min(Ha,t));var e=f(n,t);if(d&&y.push([n,t]),S)m=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};A(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,y,m,M,x,b,_,w,S,k,N=a,E=Pt(),A=Yt(n,t,e,r),C={point:s,lineStart:h,lineEnd:p,polygonStart:function(){a=E,v=[],d=[],k=!0},polygonEnd:function(){a=N,v=ao.merge(v);var t=l([n,r]),e=k&&t,i=v.length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),c(null,null,1,a),a.lineEnd()),i&&Lt(v,u,t,c,a),a.polygonEnd()),v=d=y=null}};return C}}function Vt(n){var t=0,e=Fo/3,r=ae(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*Fo/180,e=n[1]*Fo/180):[t/Fo*180,e/Fo*180]},i}function Xt(n,t){function e(n,t){var e=Math.sqrt(u-2*i*Math.sin(t))/i;return[e*Math.sin(n*=i),o-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),o=Math.sqrt(u)/i;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/i,tn((u-(n*n+e*e)*i*i)/(2*i))]},e}function $t(){function n(n,t){Ia+=i*n-r*t,r=n,i=t}var t,e,r,i;$a.point=function(u,o){$a.point=n,t=r=u,e=i=o},$a.lineEnd=function(){n(t,e)}}function Bt(n,t){n<Ya&&(Ya=n),n>Va&&(Va=n),t<Za&&(Za=t),t>Xa&&(Xa=t)}function Wt(){function n(n,t){o.push("M",n,",",t,u)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function i(){o.push("Z")}var u=Jt(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return u=Jt(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Jt(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function Gt(n,t){Ca+=n,za+=t,++La}function Kt(){function n(n,r){var i=n-t,u=r-e,o=Math.sqrt(i*i+u*u);qa+=o*(t+n)/2,Ta+=o*(e+r)/2,Ra+=o,Gt(t=n,e=r)}var t,e;Wa.point=function(r,i){Wa.point=n,Gt(t=r,e=i)}}function Qt(){Wa.point=Gt}function ne(){function n(n,t){var e=n-r,u=t-i,o=Math.sqrt(e*e+u*u);qa+=o*(r+n)/2,Ta+=o*(i+t)/2,Ra+=o,o=i*n-r*t,Da+=o*(r+n),Pa+=o*(i+t),Ua+=3*o,Gt(r=n,i=t)}var t,e,r,i;Wa.point=function(u,o){Wa.point=n,Gt(t=r=u,e=i=o)},Wa.lineEnd=function(){n(t,e)}}function te(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,Ho)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function i(){a.point=t}function u(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function ee(n){function t(n){return(a?r:e)(n)}function e(t){return ue(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=NaN,S.point=u,t.lineStart()}function u(e,r){var u=dt([e,r]),o=n(e,r);i(M,x,m,b,_,w,M=o[0],x=o[1],m=e,b=u[0],_=u[1],w=u[2],a,t),t.point(M,x)}function o(){S.point=e,
t.lineEnd()}function l(){r(),S.point=c,S.lineEnd=f}function c(n,t){u(s=n,h=t),p=M,g=x,v=b,d=_,y=w,S.point=u}function f(){i(M,x,m,b,_,w,p,g,s,v,d,y,a,t),S.lineEnd=o,o()}var s,h,p,g,v,d,y,m,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=l},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function i(t,e,r,a,l,c,f,s,h,p,g,v,d,y){var m=f-t,M=s-e,x=m*m+M*M;if(x>4*u&&d--){var b=a+p,_=l+g,w=c+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),N=xo(xo(w)-1)<Uo||xo(r-h)<Uo?(r+h)/2:Math.atan2(_,b),E=n(N,k),A=E[0],C=E[1],z=A-t,L=C-e,q=M*z-m*L;(q*q/x>u||xo((m*z+M*L)/x-.5)>.3||a*p+l*g+c*v<o)&&(i(t,e,r,a,l,c,A,C,N,b/=S,_/=S,w,d,y),y.point(A,C),i(A,C,N,b,_,w,f,s,h,p,g,v,d,y))}}var u=.5,o=Math.cos(30*Yo),a=16;return t.precision=function(n){return arguments.length?(a=(u=n*n)>0&&16,t):Math.sqrt(u)},t}function re(n){var t=ee(function(t,e){return n([t*Zo,e*Zo])});return function(n){return le(t(n))}}function ie(n){this.stream=n}function ue(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function oe(n){return ae(function(){return n})()}function ae(n){function t(n){return n=a(n[0]*Yo,n[1]*Yo),[n[0]*h+l,c-n[1]*h]}function e(n){return n=a.invert((n[0]-l)/h,(c-n[1])/h),n&&[n[0]*Zo,n[1]*Zo]}function r(){a=Ct(o=se(y,M,x),u);var n=u(v,d);return l=p-n[0]*h,c=g+n[1]*h,i()}function i(){return f&&(f.valid=!1,f=null),t}var u,o,a,l,c,f,s=ee(function(n,t){return n=u(n,t),[n[0]*h+l,c-n[1]*h]}),h=150,p=480,g=250,v=0,d=0,y=0,M=0,x=0,b=Fa,_=m,w=null,S=null;return t.stream=function(n){return f&&(f.valid=!1),f=le(b(o,s(_(n)))),f.valid=!0,f},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Fa):It((w=+n)*Yo),i()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Zt(n[0][0],n[0][1],n[1][0],n[1][1]):m,i()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(p=+n[0],g=+n[1],r()):[p,g]},t.center=function(n){return arguments.length?(v=n[0]%360*Yo,d=n[1]%360*Yo,r()):[v*Zo,d*Zo]},t.rotate=function(n){return arguments.length?(y=n[0]%360*Yo,M=n[1]%360*Yo,x=n.length>2?n[2]%360*Yo:0,r()):[y*Zo,M*Zo,x*Zo]},ao.rebind(t,s,"precision"),function(){return u=n.apply(this,arguments),t.invert=u.invert&&e,r()}}function le(n){return ue(n,function(t,e){n.point(t*Yo,e*Yo)})}function ce(n,t){return[n,t]}function fe(n,t){return[n>Fo?n-Ho:n<-Fo?n+Ho:n,t]}function se(n,t,e){return n?t||e?Ct(pe(n),ge(t,e)):pe(n):t||e?ge(t,e):fe}function he(n){return function(t,e){return t+=n,[t>Fo?t-Ho:t<-Fo?t+Ho:t,e]}}function pe(n){var t=he(n);return t.invert=he(-n),t}function ge(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),f=c*r+a*i;return[Math.atan2(l*u-f*o,a*r-c*i),tn(f*u+l*o)]}var r=Math.cos(n),i=Math.sin(n),u=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,l=Math.sin(n)*e,c=Math.sin(t),f=c*u-l*o;return[Math.atan2(l*u+c*o,a*r+f*i),tn(f*r-a*i)]},e}function ve(n,t){var e=Math.cos(n),r=Math.sin(n);return function(i,u,o,a){var l=o*t;null!=i?(i=de(e,i),u=de(e,u),(o>0?i<u:i>u)&&(i+=o*Ho)):(i=n+o*Ho,u=n-.5*l);for(var c,f=i;o>0?f>u:f<u;f-=l)a.point((c=_t([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],c[1])}}function de(n,t){var e=dt(t);e[0]-=n,bt(e);var r=nn(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Uo)%(2*Math.PI)}function ye(n,t,e){var r=ao.range(n,t-Uo,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function me(n,t,e){var r=ao.range(n,t-Uo,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Me(n){return n.source}function xe(n){return n.target}function be(n,t,e,r){var i=Math.cos(t),u=Math.sin(t),o=Math.cos(r),a=Math.sin(r),l=i*Math.cos(n),c=i*Math.sin(n),f=o*Math.cos(e),s=o*Math.sin(e),h=2*Math.asin(Math.sqrt(on(r-t)+i*o*on(e-n))),p=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*l+t*f,i=e*c+t*s,o=e*u+t*a;return[Math.atan2(i,r)*Zo,Math.atan2(o,Math.sqrt(r*r+i*i))*Zo]}:function(){return[n*Zo,t*Zo]};return g.distance=h,g}function _e(){function n(n,i){var u=Math.sin(i*=Yo),o=Math.cos(i),a=xo((n*=Yo)-t),l=Math.cos(a);Ja+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*u-e*o*l)*a),e*u+r*o*l),t=n,e=u,r=o}var t,e,r;Ga.point=function(i,u){t=i*Yo,e=Math.sin(u*=Yo),r=Math.cos(u),Ga.point=n},Ga.lineEnd=function(){Ga.point=Ga.lineEnd=b}}function we(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),u=n(r*i);return[u*i*Math.sin(t),u*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),u=Math.sin(i),o=Math.cos(i);return[Math.atan2(n*u,r*o),Math.asin(r&&e*u/r)]},e}function Se(n,t){function e(n,t){o>0?t<-Io+Uo&&(t=-Io+Uo):t>Io-Uo&&(t=Io-Uo);var e=o/Math.pow(i(t),u);return[e*Math.sin(u*n),o-e*Math.cos(u*n)]}var r=Math.cos(n),i=function(n){return Math.tan(Fo/4+n/2)},u=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(i(t)/i(n)),o=r*Math.pow(i(n),u)/u;return u?(e.invert=function(n,t){var e=o-t,r=K(u)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/u,2*Math.atan(Math.pow(o/r,1/u))-Io]},e):Ne}function ke(n,t){function e(n,t){var e=u-t;return[e*Math.sin(i*n),u-e*Math.cos(i*n)]}var r=Math.cos(n),i=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),u=r/i+n;return xo(i)<Uo?ce:(e.invert=function(n,t){var e=u-t;return[Math.atan2(n,e)/i,u-K(i)*Math.sqrt(n*n+e*e)]},e)}function Ne(n,t){return[n,Math.log(Math.tan(Fo/4+t/2))]}function Ee(n){var t,e=oe(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=u.apply(e,arguments);if(o===e){if(t=null==n){var a=Fo*r(),l=i();u([[l[0]-a,l[1]-a],[l[0]+a,l[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Ae(n,t){return[Math.log(Math.tan(Fo/4+t/2)),-n]}function Ce(n){return n[0]}function ze(n){return n[1]}function Le(n){for(var t=n.length,e=[0,1],r=2,i=2;i<t;i++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function qe(n,t){return n[0]-t[0]||n[1]-t[1]}function Te(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Re(n,t,e,r){var i=n[0],u=e[0],o=t[0]-i,a=r[0]-u,l=n[1],c=e[1],f=t[1]-l,s=r[1]-c,h=(a*(l-c)-s*(i-u))/(s*o-a*f);return[i+h*o,l+h*f]}function De(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Pe(){rr(this),this.edge=this.site=this.circle=null}function Ue(n){var t=cl.pop()||new Pe;return t.site=n,t}function je(n){Be(n),ol.remove(n),cl.push(n),rr(n)}function Fe(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},u=n.P,o=n.N,a=[n];je(n);for(var l=u;l.circle&&xo(e-l.circle.x)<Uo&&xo(r-l.circle.cy)<Uo;)u=l.P,a.unshift(l),je(l),l=u;a.unshift(l),Be(l);for(var c=o;c.circle&&xo(e-c.circle.x)<Uo&&xo(r-c.circle.cy)<Uo;)o=c.N,a.push(c),je(c),c=o;a.push(c),Be(c);var f,s=a.length;for(f=1;f<s;++f)c=a[f],l=a[f-1],nr(c.edge,l.site,c.site,i);l=a[0],c=a[s-1],c.edge=Ke(l.site,c.site,null,i),$e(l),$e(c)}function He(n){for(var t,e,r,i,u=n.x,o=n.y,a=ol._;a;)if(r=Oe(a,o)-u,r>Uo)a=a.L;else{if(i=u-Ie(a,o),!(i>Uo)){r>-Uo?(t=a.P,e=a):i>-Uo?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var l=Ue(n);if(ol.insert(t,l),t||e){if(t===e)return Be(t),e=Ue(t.site),ol.insert(l,e),l.edge=e.edge=Ke(t.site,l.site),$e(t),void $e(e);if(!e)return void(l.edge=Ke(t.site,l.site));Be(t),Be(e);var c=t.site,f=c.x,s=c.y,h=n.x-f,p=n.y-s,g=e.site,v=g.x-f,d=g.y-s,y=2*(h*d-p*v),m=h*h+p*p,M=v*v+d*d,x={x:(d*m-p*M)/y+f,y:(h*M-v*m)/y+s};nr(e.edge,c,g,x),l.edge=Ke(c,n,null,x),e.edge=Ke(n,g,null,x),$e(t),$e(e)}}function Oe(n,t){var e=n.site,r=e.x,i=e.y,u=i-t;if(!u)return r;var o=n.P;if(!o)return-(1/0);e=o.site;var a=e.x,l=e.y,c=l-t;if(!c)return a;var f=a-r,s=1/u-1/c,h=f/c;return s?(-h+Math.sqrt(h*h-2*s*(f*f/(-2*c)-l+c/2+i-u/2)))/s+r:(r+a)/2}function Ie(n,t){var e=n.N;if(e)return Oe(e,t);var r=n.site;return r.y===t?r.x:1/0}function Ye(n){this.site=n,this.edges=[]}function Ze(n){for(var t,e,r,i,u,o,a,l,c,f,s=n[0][0],h=n[1][0],p=n[0][1],g=n[1][1],v=ul,d=v.length;d--;)if(u=v[d],u&&u.prepare())for(a=u.edges,l=a.length,o=0;o<l;)f=a[o].end(),r=f.x,i=f.y,c=a[++o%l].start(),t=c.x,e=c.y,(xo(r-t)>Uo||xo(i-e)>Uo)&&(a.splice(o,0,new tr(Qe(u.site,f,xo(r-s)<Uo&&g-i>Uo?{x:s,y:xo(t-s)<Uo?e:g}:xo(i-g)<Uo&&h-r>Uo?{x:xo(e-g)<Uo?t:h,y:g}:xo(r-h)<Uo&&i-p>Uo?{x:h,y:xo(t-h)<Uo?e:p}:xo(i-p)<Uo&&r-s>Uo?{x:xo(e-p)<Uo?t:s,y:p}:null),u.site,null)),++l)}function Ve(n,t){return t.angle-n.angle}function Xe(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $e(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var o=i.x,a=i.y,l=r.x-o,c=r.y-a,f=u.x-o,s=u.y-a,h=2*(l*s-c*f);if(!(h>=-jo)){var p=l*l+c*c,g=f*f+s*s,v=(s*p-c*g)/h,d=(l*g-f*p)/h,s=d+a,y=fl.pop()||new Xe;y.arc=n,y.site=i,y.x=v+o,y.y=s+Math.sqrt(v*v+d*d),y.cy=s,n.circle=y;for(var m=null,M=ll._;M;)if(y.y<M.y||y.y===M.y&&y.x<=M.x){if(!M.L){m=M.P;break}M=M.L}else{if(!M.R){m=M;break}M=M.R}ll.insert(m,y),m||(al=y)}}}}function Be(n){var t=n.circle;t&&(t.P||(al=t.N),ll.remove(t),fl.push(t),rr(t),n.circle=null)}function We(n){for(var t,e=il,r=Yt(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)t=e[i],(!Je(t,n)||!r(t)||xo(t.a.x-t.b.x)<Uo&&xo(t.a.y-t.b.y)<Uo)&&(t.a=t.b=null,e.splice(i,1))}function Je(n,t){var e=n.b;if(e)return!0;var r,i,u=n.a,o=t[0][0],a=t[1][0],l=t[0][1],c=t[1][1],f=n.l,s=n.r,h=f.x,p=f.y,g=s.x,v=s.y,d=(h+g)/2,y=(p+v)/2;if(v===p){if(d<o||d>=a)return;if(h>g){if(u){if(u.y>=c)return}else u={x:d,y:l};e={x:d,y:c}}else{if(u){if(u.y<l)return}else u={x:d,y:c};e={x:d,y:l}}}else if(r=(h-g)/(v-p),i=y-r*d,r<-1||r>1)if(h>g){if(u){if(u.y>=c)return}else u={x:(l-i)/r,y:l};e={x:(c-i)/r,y:c}}else{if(u){if(u.y<l)return}else u={x:(c-i)/r,y:c};e={x:(l-i)/r,y:l}}else if(p<v){if(u){if(u.x>=a)return}else u={x:o,y:r*o+i};e={x:a,y:r*a+i}}else{if(u){if(u.x<o)return}else u={x:a,y:r*a+i};e={x:o,y:r*o+i}}return n.a=u,n.b=e,!0}function Ge(n,t){this.l=n,this.r=t,this.a=this.b=null}function Ke(n,t,e,r){var i=new Ge(n,t);return il.push(i),e&&nr(i,n,t,e),r&&nr(i,t,n,r),ul[n.i].edges.push(new tr(i,n,t)),ul[t.i].edges.push(new tr(i,t,n)),i}function Qe(n,t,e){var r=new Ge(n,null);return r.a=t,r.b=e,il.push(r),r}function nr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function tr(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function er(){this._=null}function rr(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function ir(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ur(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function or(n){for(;n.L;)n=n.L;return n}function ar(n,t){var e,r,i,u=n.sort(lr).pop();for(il=[],ul=new Array(n.length),ol=new er,ll=new er;;)if(i=al,u&&(!i||u.y<i.y||u.y===i.y&&u.x<i.x))u.x===e&&u.y===r||(ul[u.i]=new Ye(u),He(u),e=u.x,r=u.y),u=n.pop();else{if(!i)break;Fe(i.arc)}t&&(We(t),Ze(t));var o={cells:ul,edges:il};return ol=ll=il=ul=null,o}function lr(n,t){return t.y-n.y||t.x-n.x}function cr(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function fr(n){return n.x}function sr(n){return n.y}function hr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function pr(n,t,e,r,i,u){if(!n(t,e,r,i,u)){var o=.5*(e+i),a=.5*(r+u),l=t.nodes;l[0]&&pr(n,l[0],e,r,o,a),l[1]&&pr(n,l[1],o,r,i,a),l[2]&&pr(n,l[2],e,a,o,u),l[3]&&pr(n,l[3],o,a,i,u)}}function gr(n,t,e,r,i,u,o){var a,l=1/0;return function c(n,f,s,h,p){if(!(f>u||s>o||h<r||p<i)){if(g=n.point){var g,v=t-n.x,d=e-n.y,y=v*v+d*d;if(y<l){var m=Math.sqrt(l=y);r=t-m,i=e-m,u=t+m,o=e+m,a=g}}for(var M=n.nodes,x=.5*(f+h),b=.5*(s+p),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;S<k;++S)if(n=M[3&S])switch(3&S){case 0:c(n,f,s,x,b);break;case 1:c(n,x,s,h,b);break;case 2:c(n,f,b,x,p);break;case 3:c(n,x,b,h,p)}}}(n,r,i,u,o),a}function vr(n,t){n=ao.rgb(n),t=ao.rgb(t);var e=n.r,r=n.g,i=n.b,u=t.r-e,o=t.g-r,a=t.b-i;return function(n){return"#"+bn(Math.round(e+u*n))+bn(Math.round(r+o*n))+bn(Math.round(i+a*n))}}function dr(n,t){var e,r={},i={};for(e in n)e in t?r[e]=Mr(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function yr(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function mr(n,t){var e,r,i,u=hl.lastIndex=pl.lastIndex=0,o=-1,a=[],l=[];for(n+="",t+="";(e=hl.exec(n))&&(r=pl.exec(t));)(i=r.index)>u&&(i=t.slice(u,i),a[o]?a[o]+=i:a[++o]=i),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:yr(e,r)})),u=pl.lastIndex;return u<t.length&&(i=t.slice(u),a[o]?a[o]+=i:a[++o]=i),a.length<2?l[0]?(t=l[0].x,function(n){return t(n)+""}):function(){return t}:(t=l.length,function(n){for(var e,r=0;r<t;++r)a[(e=l[r]).i]=e.x(n);return a.join("")})}function Mr(n,t){for(var e,r=ao.interpolators.length;--r>=0&&!(e=ao.interpolators[r](n,t)););return e}function xr(n,t){var e,r=[],i=[],u=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;e<a;++e)r.push(Mr(n[e],t[e]));for(;e<u;++e)i[e]=n[e];for(;e<o;++e)i[e]=t[e];return function(n){for(e=0;e<a;++e)i[e]=r[e](n);return i}}function br(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function _r(n){return function(t){return 1-n(1-t)}}function wr(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function Sr(n){return n*n}function kr(n){return n*n*n}function Nr(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(n<.5?e:3*(n-t)+e-.75)}function Er(n){return function(t){return Math.pow(t,n)}}function Ar(n){return 1-Math.cos(n*Io)}function Cr(n){return Math.pow(2,10*(n-1))}function zr(n){return 1-Math.sqrt(1-n*n)}function Lr(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Ho*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Ho/t)}}function qr(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Tr(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Rr(n,t){n=ao.hcl(n),t=ao.hcl(t);var e=n.h,r=n.c,i=n.l,u=t.h-e,o=t.c-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return sn(e+u*n,r+o*n,i+a*n)+""}}function Dr(n,t){n=ao.hsl(n),t=ao.hsl(t);var e=n.h,r=n.s,i=n.l,u=t.h-e,o=t.s-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return cn(e+u*n,r+o*n,i+a*n)+""}}function Pr(n,t){n=ao.lab(n),t=ao.lab(t);var e=n.l,r=n.a,i=n.b,u=t.l-e,o=t.a-r,a=t.b-i;return function(n){return pn(e+u*n,r+o*n,i+a*n)+""}}function Ur(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function jr(n){var t=[n.a,n.b],e=[n.c,n.d],r=Hr(t),i=Fr(t,e),u=Hr(Or(e,t,-i))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Zo,this.translate=[n.e,n.f],this.scale=[r,u],this.skew=u?Math.atan2(i,u)*Zo:0}function Fr(n,t){return n[0]*t[0]+n[1]*t[1]}function Hr(n){var t=Math.sqrt(Fr(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Or(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Ir(n){return n.length?n.pop()+",":""}function Yr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(n[0],t[0])},{i:i-2,x:yr(n[1],t[1])})}else(t[0]||t[1])&&e.push("translate("+t+")")}function Zr(n,t,e,r){n!==t?(n-t>180?t+=360:t-n>180&&(n+=360),r.push({i:e.push(Ir(e)+"rotate(",null,")")-2,x:yr(n,t)})):t&&e.push(Ir(e)+"rotate("+t+")")}function Vr(n,t,e,r){n!==t?r.push({i:e.push(Ir(e)+"skewX(",null,")")-2,x:yr(n,t)}):t&&e.push(Ir(e)+"skewX("+t+")")}function Xr(n,t,e,r){if(n[0]!==t[0]||n[1]!==t[1]){var i=e.push(Ir(e)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(n[0],t[0])},{i:i-2,x:yr(n[1],t[1])})}else 1===t[0]&&1===t[1]||e.push(Ir(e)+"scale("+t+")")}function $r(n,t){var e=[],r=[];return n=ao.transform(n),t=ao.transform(t),Yr(n.translate,t.translate,e,r),Zr(n.rotate,t.rotate,e,r),Vr(n.skew,t.skew,e,r),Xr(n.scale,t.scale,e,r),n=t=null,function(n){for(var t,i=-1,u=r.length;++i<u;)e[(t=r[i]).i]=t.x(n);return e.join("")}}function Br(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Wr(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Jr(n){for(var t=n.source,e=n.target,r=Kr(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var u=i.length;e!==r;)i.splice(u,0,e),e=e.parent;return i}function Gr(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Kr(n,t){if(n===t)return n;for(var e=Gr(n),r=Gr(t),i=e.pop(),u=r.pop(),o=null;i===u;)o=i,i=e.pop(),u=r.pop();return o}function Qr(n){n.fixed|=2}function ni(n){n.fixed&=-7}function ti(n){n.fixed|=4,n.px=n.x,n.py=n.y}function ei(n){n.fixed&=-5}function ri(n,t,e){var r=0,i=0;if(n.charge=0,!n.leaf)for(var u,o=n.nodes,a=o.length,l=-1;++l<a;)u=o[l],null!=u&&(ri(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var c=t*e[n.point.index];n.charge+=n.pointCharge=c,r+=c*n.point.x,i+=c*n.point.y}n.cx=r/n.charge,n.cy=i/n.charge}function ii(n,t){return ao.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=fi,n}function ui(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(i=n.children)&&(r=i.length))for(var r,i;--r>=0;)e.push(i[r])}function oi(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(u=n.children)&&(i=u.length))for(var i,u,o=-1;++o<i;)e.push(u[o]);for(;null!=(n=r.pop());)t(n)}function ai(n){return n.children}function li(n){return n.value}function ci(n,t){return t.value-n.value}function fi(n){return ao.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function si(n){return n.x}function hi(n){return n.y}function pi(n,t,e){n.y0=t,n.y=e}function gi(n){return ao.range(n.length)}function vi(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function di(n){for(var t,e=1,r=0,i=n[0][1],u=n.length;e<u;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function yi(n){return n.reduce(mi,0)}function mi(n,t){return n+t[1]}function Mi(n,t){return xi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function xi(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,u=[];++e<=t;)u[e]=i*e+r;return u}function bi(n){return[ao.min(n),ao.max(n)]}function _i(n,t){return n.value-t.value}function wi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Si(n,t){n._pack_next=t,t._pack_prev=n}function ki(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return.999*i*i>e*e+r*r}function Ni(n){function t(n){f=Math.min(n.x-n.r,f),s=Math.max(n.x+n.r,s),h=Math.min(n.y-n.r,h),p=Math.max(n.y+n.r,p)}if((e=n.children)&&(c=e.length)){var e,r,i,u,o,a,l,c,f=1/0,s=-(1/0),h=1/0,p=-(1/0);if(e.forEach(Ei),r=e[0],r.x=-r.r,r.y=0,t(r),c>1&&(i=e[1],i.x=i.r,i.y=0,t(i),c>2))for(u=e[2],zi(r,i,u),t(u),wi(r,u),r._pack_prev=u,wi(u,i),i=r._pack_next,o=3;o<c;o++){zi(r,i,u=e[o]);var g=0,v=1,d=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(ki(a,u)){g=1;break}if(1==g)for(l=r._pack_prev;l!==a._pack_prev&&!ki(l,u);l=l._pack_prev,d++);g?(v<d||v==d&&i.r<r.r?Si(r,i=a):Si(r=l,i),o--):(wi(r,u),i=u,t(u))}var y=(f+s)/2,m=(h+p)/2,M=0;for(o=0;o<c;o++)u=e[o],u.x-=y,u.y-=m,M=Math.max(M,u.r+Math.sqrt(u.x*u.x+u.y*u.y));n.r=M,e.forEach(Ai)}}function Ei(n){n._pack_next=n._pack_prev=n}function Ai(n){delete n._pack_next,delete n._pack_prev}function Ci(n,t,e,r){var i=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,i)for(var u=-1,o=i.length;++u<o;)Ci(i[u],t,e,r)}function zi(n,t,e){var r=n.r+e.r,i=t.x-n.x,u=t.y-n.y;if(r&&(i||u)){var o=t.r+e.r,a=i*i+u*u;o*=o,r*=r;var l=.5+(r-o)/(2*a),c=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+l*i+c*u,e.y=n.y+l*u-c*i}else e.x=n.x+r,e.y=n.y}function Li(n,t){return n.parent==t.parent?1:2}function qi(n){var t=n.children;return t.length?t[0]:n.t}function Ti(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ri(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Di(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Pi(n,t,e){return n.a.parent===t.parent?n.a:e}function Ui(n){return 1+ao.max(n,function(n){return n.y})}function ji(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Fi(n){var t=n.children;return t&&t.length?Fi(t[0]):n}function Hi(n){var t,e=n.children;return e&&(t=e.length)?Hi(e[t-1]):n}function Oi(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Ii(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],u=n.dy-t[0]-t[2];return i<0&&(e+=i/2,i=0),u<0&&(r+=u/2,u=0),{x:e,y:r,dx:i,dy:u}}function Yi(n){var t=n[0],e=n[n.length-1];return t<e?[t,e]:[e,t]}function Zi(n){return n.rangeExtent?n.rangeExtent():Yi(n.range())}function Vi(n,t,e,r){var i=e(n[0],n[1]),u=r(t[0],t[1]);return function(n){return u(i(n))}}function Xi(n,t){var e,r=0,i=n.length-1,u=n[r],o=n[i];return o<u&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function $i(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:Sl}function Bi(n,t,e,r){var i=[],u=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)i.push(e(n[o-1],n[o])),u.push(r(t[o-1],t[o]));return function(t){var e=ao.bisect(n,t,1,a)-1;return u[e](i[e](t))}}function Wi(n,t,e,r){function i(){var i=Math.min(n.length,t.length)>2?Bi:Vi,l=r?Wr:Br;return o=i(n,t,l,e),a=i(t,n,l,Mr),u}function u(n){return o(n)}var o,a;return u.invert=function(n){return a(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},u.range=function(n){return arguments.length?(t=n,i()):t},u.rangeRound=function(n){return u.range(n).interpolate(Ur)},u.clamp=function(n){return arguments.length?(r=n,i()):r},u.interpolate=function(n){return arguments.length?(e=n,i()):e},u.ticks=function(t){return Qi(n,t)},u.tickFormat=function(t,e){return nu(n,t,e)},u.nice=function(t){return Gi(n,t),i()},u.copy=function(){return Wi(n,t,e,r)},i()}function Ji(n,t){return ao.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Gi(n,t){return Xi(n,$i(Ki(n,t)[2])),Xi(n,$i(Ki(n,t)[2])),n}function Ki(n,t){null==t&&(t=10);var e=Yi(n),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),u=t/r*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function Qi(n,t){return ao.range.apply(ao,Ki(n,t))}function nu(n,t,e){var r=Ki(n,t);if(e){var i=ha.exec(e);if(i.shift(),"s"===i[8]){var u=ao.formatPrefix(Math.max(xo(r[0]),xo(r[1])));return i[7]||(i[7]="."+tu(u.scale(r[2]))),i[8]="f",e=ao.format(i.join("")),function(n){return e(u.scale(n))+u.symbol}}i[7]||(i[7]="."+eu(i[8],r)),e=i.join("")}else e=",."+tu(r[2])+"f";return ao.format(e)}function tu(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function eu(n,t){var e=tu(t[2]);return n in kl?Math.abs(e-tu(Math.max(xo(t[0]),xo(t[1]))))+ +("e"!==n):e-2*("%"===n)}function ru(n,t,e,r){function i(n){return(e?Math.log(n<0?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function u(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(i(t))}return o.invert=function(t){return u(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(i)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(i)),o):t},o.nice=function(){var t=Xi(r.map(i),e?Math:El);return n.domain(t),r=t.map(u),o},o.ticks=function(){var n=Yi(r),o=[],a=n[0],l=n[1],c=Math.floor(i(a)),f=Math.ceil(i(l)),s=t%1?2:t;if(isFinite(f-c)){if(e){for(;c<f;c++)for(var h=1;h<s;h++)o.push(u(c)*h);o.push(u(c))}else for(o.push(u(c));c++<f;)for(var h=s-1;h>0;h--)o.push(u(c)*h);for(c=0;o[c]<a;c++);for(f=o.length;o[f-1]>l;f--);o=o.slice(c,f)}return o},o.tickFormat=function(n,e){if(!arguments.length)return Nl;arguments.length<2?e=Nl:"function"!=typeof e&&(e=ao.format(e));var r=Math.max(1,t*n/o.ticks().length);return function(n){var o=n/u(Math.round(i(n)));return o*t<t-.5&&(o*=t),o<=r?e(n):""}},o.copy=function(){return ru(n.copy(),t,e,r)},Ji(o,n)}function iu(n,t,e){function r(t){return n(i(t))}var i=uu(t),u=uu(1/t);return r.invert=function(t){return u(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(i)),r):e},r.ticks=function(n){return Qi(e,n)},r.tickFormat=function(n,t){return nu(e,n,t)},r.nice=function(n){return r.domain(Gi(e,n))},r.exponent=function(o){return arguments.length?(i=uu(t=o),u=uu(1/t),n.domain(e.map(i)),r):t},r.copy=function(){return iu(n.copy(),t,e)},Ji(r,n)}function uu(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function ou(n,t){function e(e){return u[((i.get(e)||("range"===t.t?i.set(e,n.push(e)):NaN))-1)%u.length]}function r(t,e){return ao.range(n.length).map(function(n){return t+e*n})}var i,u,o;return e.domain=function(r){if(!arguments.length)return n;n=[],i=new c;for(var u,o=-1,a=r.length;++o<a;)i.has(u=r[o])||i.set(u,n.push(u));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(u=n,o=0,t={t:"range",a:arguments},e):u},e.rangePoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],f=n.length<2?(l=(l+c)/2,0):(c-l)/(n.length-1+a);return u=r(l+f*a/2,f),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(i,a){arguments.length<2&&(a=0);var l=i[0],c=i[1],f=n.length<2?(l=c=Math.round((l+c)/2),0):(c-l)/(n.length-1+a)|0;return u=r(l+Math.round(f*a/2+(c-l-(n.length-1+a)*f)/2),f),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],f=i[c-0],s=i[1-c],h=(s-f)/(n.length-a+2*l);return u=r(f+h*l,h),c&&u.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,a,l){arguments.length<2&&(a=0),arguments.length<3&&(l=a);var c=i[1]<i[0],f=i[c-0],s=i[1-c],h=Math.floor((s-f)/(n.length-a+2*l));return u=r(f+Math.round((s-f-(n.length-a)*h)/2),h),c&&u.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Yi(t.a[0])},e.copy=function(){return ou(n,t)},e.domain(n)}function au(n,t){function u(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ao.quantile(n,e/r);return o}function o(n){if(!isNaN(n=+n))return t[ao.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(i).sort(e),u()):n},o.range=function(n){return arguments.length?(t=n,u()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),e<0?[NaN,NaN]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return au(n,t)},u()}function lu(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(u*(t-n))))]}function i(){return u=e.length/(t-n),o=e.length-1,r}var u,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],i()):[n,t]},r.range=function(n){return arguments.length?(e=n,i()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=t<0?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return lu(n,t,e)},i()}function cu(n,t){function e(e){if(e<=e)return t[ao.bisect(n,e)]}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return cu(n,t)},e}function fu(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Qi(n,t)},t.tickFormat=function(t,e){return nu(n,t,e)},t.copy=function(){return fu(n)},t}function su(){return 0}function hu(n){return n.innerRadius}function pu(n){return n.outerRadius}function gu(n){return n.startAngle}function vu(n){return n.endAngle}function du(n){return n&&n.padAngle}function yu(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function mu(n,t,e,r,i){var u=n[0]-t[0],o=n[1]-t[1],a=(i?r:-r)/Math.sqrt(u*u+o*o),l=a*o,c=-a*u,f=n[0]+l,s=n[1]+c,h=t[0]+l,p=t[1]+c,g=(f+h)/2,v=(s+p)/2,d=h-f,y=p-s,m=d*d+y*y,M=e-r,x=f*p-h*s,b=(y<0?-1:1)*Math.sqrt(Math.max(0,M*M*m-x*x)),_=(x*y-d*b)/m,w=(-x*d-y*b)/m,S=(x*y+d*b)/m,k=(-x*d+y*b)/m,N=_-g,E=w-v,A=S-g,C=k-v;return N*N+E*E>A*A+C*C&&(_=S,w=k),[[_-l,w-c],[_*e/M,w*e/M]]}function Mu(n){function t(t){function o(){c.push("M",u(n(f),a))}for(var l,c=[],f=[],s=-1,h=t.length,p=En(e),g=En(r);++s<h;)i.call(this,l=t[s],s)?f.push([+p.call(this,l,s),+g.call(this,l,s)]):f.length&&(o(),f=[]);return f.length&&o(),c.length?c.join(""):null}var e=Ce,r=ze,i=zt,u=xu,o=u.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?u=n:(u=Tl.get(n)||xu).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function xu(n){return n.length>1?n.join("L"):n+"Z"}function bu(n){return n.join("L")+"Z"}function _u(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function wu(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function Su(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function ku(n,t){return n.length<4?xu(n):n[1]+Au(n.slice(1,-1),Cu(n,t))}function Nu(n,t){return n.length<3?bu(n):n[0]+Au((n.push(n[0]),n),Cu([n[n.length-2]].concat(n,[n[1]]),t))}function Eu(n,t){return n.length<3?xu(n):n[0]+Au(n,Cu(n,t))}function Au(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return xu(n);var e=n.length!=t.length,r="",i=n[0],u=n[1],o=t[0],a=o,l=1;if(e&&(r+="Q"+(u[0]-2*o[0]/3)+","+(u[1]-2*o[1]/3)+","+u[0]+","+u[1],i=n[1],l=2),t.length>1){a=t[1],u=n[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1];for(var c=2;c<t.length;c++,l++)u=n[l],a=t[c],r+="S"+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1]}if(e){var f=n[l];r+="Q"+(u[0]+2*a[0]/3)+","+(u[1]+2*a[1]/3)+","+f[0]+","+f[1]}return r}function Cu(n,t){for(var e,r=[],i=(1-t)/2,u=n[0],o=n[1],a=1,l=n.length;++a<l;)e=u,u=o,o=n[a],r.push([i*(o[0]-e[0]),i*(o[1]-e[1])]);return r}function zu(n){if(n.length<3)return xu(n);var t=1,e=n.length,r=n[0],i=r[0],u=r[1],o=[i,i,i,(r=n[1])[0]],a=[u,u,u,r[1]],l=[i,",",u,"L",Ru(Pl,o),",",Ru(Pl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Du(l,o,a);return n.pop(),l.push("L",r),l.join("")}function Lu(n){if(n.length<4)return xu(n);for(var t,e=[],r=-1,i=n.length,u=[0],o=[0];++r<3;)t=n[r],u.push(t[0]),o.push(t[1]);for(e.push(Ru(Pl,u)+","+Ru(Pl,o)),--r;++r<i;)t=n[r],u.shift(),u.push(t[0]),o.shift(),o.push(t[1]),Du(e,u,o);return e.join("")}function qu(n){for(var t,e,r=-1,i=n.length,u=i+4,o=[],a=[];++r<4;)e=n[r%i],o.push(e[0]),a.push(e[1]);for(t=[Ru(Pl,o),",",Ru(Pl,a)],--r;++r<u;)e=n[r%i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Du(t,o,a);return t.join("")}function Tu(n,t){var e=n.length-1;if(e)for(var r,i,u=n[0][0],o=n[0][1],a=n[e][0]-u,l=n[e][1]-o,c=-1;++c<=e;)r=n[c],i=c/e,r[0]=t*r[0]+(1-t)*(u+i*a),r[1]=t*r[1]+(1-t)*(o+i*l);return zu(n)}function Ru(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Du(n,t,e){n.push("C",Ru(Rl,t),",",Ru(Rl,e),",",Ru(Dl,t),",",Ru(Dl,e),",",Ru(Pl,t),",",Ru(Pl,e))}function Pu(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Uu(n){for(var t=0,e=n.length-1,r=[],i=n[0],u=n[1],o=r[0]=Pu(i,u);++t<e;)r[t]=(o+(o=Pu(i=u,u=n[t+1])))/2;return r[t]=o,r}function ju(n){for(var t,e,r,i,u=[],o=Uu(n),a=-1,l=n.length-1;++a<l;)t=Pu(n[a],n[a+1]),xo(t)<Uo?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,i=e*e+r*r,i>9&&(i=3*t/Math.sqrt(i),o[a]=i*e,o[a+1]=i*r));for(a=-1;++a<=l;)i=(n[Math.min(l,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),u.push([i||0,o[a]*i||0]);return u}function Fu(n){return n.length<3?xu(n):n[0]+Au(n,ju(n))}function Hu(n){for(var t,e,r,i=-1,u=n.length;++i<u;)t=n[i],e=t[0],r=t[1]-Io,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Ou(n){function t(t){function l(){v.push("M",a(n(y),s),f,c(n(d.reverse()),s),"Z")}for(var h,p,g,v=[],d=[],y=[],m=-1,M=t.length,x=En(e),b=En(i),_=e===r?function(){
return p}:En(r),w=i===u?function(){return g}:En(u);++m<M;)o.call(this,h=t[m],m)?(d.push([p=+x.call(this,h,m),g=+b.call(this,h,m)]),y.push([+_.call(this,h,m),+w.call(this,h,m)])):d.length&&(l(),d=[],y=[]);return d.length&&l(),v.length?v.join(""):null}var e=Ce,r=Ce,i=0,u=ze,o=zt,a=xu,l=a.key,c=a,f="L",s=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=u=n,t):u},t.y0=function(n){return arguments.length?(i=n,t):i},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(l="function"==typeof n?a=n:(a=Tl.get(n)||xu).key,c=a.reverse||a,f=a.closed?"M":"L",t):l},t.tension=function(n){return arguments.length?(s=n,t):s},t}function Iu(n){return n.radius}function Yu(n){return[n.x,n.y]}function Zu(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Io;return[e*Math.cos(r),e*Math.sin(r)]}}function Vu(){return 64}function Xu(){return"circle"}function $u(n){var t=Math.sqrt(n/Fo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Bu(n){return function(){var t,e,r;(t=this[n])&&(r=t[e=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[e]:delete this[n],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Wu(n,t,e){return ko(n,Yl),n.namespace=t,n.id=e,n}function Ju(n,t,e,r){var i=n.id,u=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[u][i].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[u][i].tween.set(t,e)}))}function Gu(n){return null==n&&(n=""),function(){this.textContent=n}}function Ku(n){return null==n?"__transition__":"__transition_"+n+"__"}function Qu(n,t,e,r,i){function u(n){var t=v.delay;return f.t=t+l,t<=n?o(n-t):void(f.c=o)}function o(e){var i=g.active,u=g[i];u&&(u.timer.c=null,u.timer.t=NaN,--g.count,delete g[i],u.event&&u.event.interrupt.call(n,n.__data__,u.index));for(var o in g)if(+o<r){var c=g[o];c.timer.c=null,c.timer.t=NaN,--g.count,delete g[o]}f.c=a,qn(function(){return f.c&&a(e||1)&&(f.c=null,f.t=NaN),1},0,l),g.active=r,v.event&&v.event.start.call(n,n.__data__,t),p=[],v.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&p.push(r)}),h=v.ease,s=v.duration}function a(i){for(var u=i/s,o=h(u),a=p.length;a>0;)p[--a].call(n,o);if(u>=1)return v.event&&v.event.end.call(n,n.__data__,t),--g.count?delete g[r]:delete n[e],1}var l,f,s,h,p,g=n[e]||(n[e]={active:0,count:0}),v=g[r];v||(l=i.time,f=qn(u,0,l),v=g[r]={tween:new c,time:l,timer:f,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++g.count)}function no(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function to(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function eo(n){return n.toISOString()}function ro(n,t,e){function r(t){return n(t)}function i(n,e){var r=n[1]-n[0],i=r/e,u=ao.bisect(Kl,i);return u==Kl.length?[t.year,Ki(n.map(function(n){return n/31536e6}),e)[2]]:u?t[i/Kl[u-1]<Kl[u]/i?u-1:u]:[tc,Ki(n,e)[2]]}return r.invert=function(t){return io(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(io)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,io(+e+1),t).length}var u=r.domain(),o=Yi(u),a=null==n?i(o,10):"number"==typeof n&&i(o,n);return a&&(n=a[0],t=a[1]),r.domain(Xi(u,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=io(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=io(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Yi(r.domain()),u=null==n?i(e,10):"number"==typeof n?i(e,n):!n.range&&[{range:n},t];return u&&(n=u[0],t=u[1]),n.range(e[0],io(+e[1]+1),t<1?1:t)},r.tickFormat=function(){return e},r.copy=function(){return ro(n.copy(),t,e)},Ji(r,n)}function io(n){return new Date(n)}function uo(n){return JSON.parse(n.responseText)}function oo(n){var t=fo.createRange();return t.selectNode(fo.body),t.createContextualFragment(n.responseText)}var ao={version:"3.5.17"},lo=[].slice,co=function(n){return lo.call(n)},fo=this.document;if(fo)try{co(fo.documentElement.childNodes)[0].nodeType}catch(so){co=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),fo)try{fo.createElement("DIV").style.setProperty("opacity",0,"")}catch(ho){var po=this.Element.prototype,go=po.setAttribute,vo=po.setAttributeNS,yo=this.CSSStyleDeclaration.prototype,mo=yo.setProperty;po.setAttribute=function(n,t){go.call(this,n,t+"")},po.setAttributeNS=function(n,t,e){vo.call(this,n,t,e+"")},yo.setProperty=function(n,t,e){mo.call(this,n,t+"",e)}}ao.ascending=e,ao.descending=function(n,t){return t<n?-1:t>n?1:t>=n?0:NaN},ao.min=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t.call(n,n[i],i))&&e>r&&(e=r)}return e},ao.max=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u;)if(null!=(r=n[i])&&r>=r){e=r;break}for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=r;break}for(;++i<u;)null!=(r=t.call(n,n[i],i))&&r>e&&(e=r)}return e},ao.extent=function(n,t){var e,r,i,u=-1,o=n.length;if(1===arguments.length){for(;++u<o;)if(null!=(r=n[u])&&r>=r){e=i=r;break}for(;++u<o;)null!=(r=n[u])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++u<o;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=i=r;break}for(;++u<o;)null!=(r=t.call(n,n[u],u))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},ao.sum=function(n,t){var e,r=0,u=n.length,o=-1;if(1===arguments.length)for(;++o<u;)i(e=+n[o])&&(r+=e);else for(;++o<u;)i(e=+t.call(n,n[o],o))&&(r+=e);return r},ao.mean=function(n,t){var e,u=0,o=n.length,a=-1,l=o;if(1===arguments.length)for(;++a<o;)i(e=r(n[a]))?u+=e:--l;else for(;++a<o;)i(e=r(t.call(n,n[a],a)))?u+=e:--l;if(l)return u/l},ao.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),i=+n[r-1],u=e-r;return u?i+u*(n[r]-i):i},ao.median=function(n,t){var u,o=[],a=n.length,l=-1;if(1===arguments.length)for(;++l<a;)i(u=r(n[l]))&&o.push(u);else for(;++l<a;)i(u=r(t.call(n,n[l],l)))&&o.push(u);if(o.length)return ao.quantile(o.sort(e),.5)},ao.variance=function(n,t){var e,u,o=n.length,a=0,l=0,c=-1,f=0;if(1===arguments.length)for(;++c<o;)i(e=r(n[c]))&&(u=e-a,a+=u/++f,l+=u*(e-a));else for(;++c<o;)i(e=r(t.call(n,n[c],c)))&&(u=e-a,a+=u/++f,l+=u*(e-a));if(f>1)return l/(f-1)},ao.deviation=function(){var n=ao.variance.apply(this,arguments);return n?Math.sqrt(n):n};var Mo=u(e);ao.bisectLeft=Mo.left,ao.bisect=ao.bisectRight=Mo.right,ao.bisector=function(n){return u(1===n.length?function(t,r){return e(n(t),r)}:n)},ao.shuffle=function(n,t,e){(u=arguments.length)<3&&(e=n.length,u<2&&(t=0));for(var r,i,u=e-t;u;)i=Math.random()*u--|0,r=n[u+t],n[u+t]=n[i+t],n[i+t]=r;return n},ao.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ao.pairs=function(n){for(var t,e=0,r=n.length-1,i=n[0],u=new Array(r<0?0:r);e<r;)u[e]=[t=i,i=n[++e]];return u},ao.transpose=function(n){if(!(i=n.length))return[];for(var t=-1,e=ao.min(n,o),r=new Array(e);++t<e;)for(var i,u=-1,a=r[t]=new Array(i);++u<i;)a[u]=n[u][t];return r},ao.zip=function(){return ao.transpose(arguments)},ao.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ao.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ao.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ao.merge=function(n){for(var t,e,r,i=n.length,u=-1,o=0;++u<i;)o+=n[u].length;for(e=new Array(o);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--o]=r[t];return e};var xo=Math.abs;ao.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,i=[],u=a(xo(e)),o=-1;if(n*=u,t*=u,e*=u,e<0)for(;(r=n+e*++o)>t;)i.push(r/u);else for(;(r=n+e*++o)<t;)i.push(r/u);return i},ao.map=function(n,t){var e=new c;if(n instanceof c)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,i=-1,u=n.length;if(1===arguments.length)for(;++i<u;)e.set(i,n[i]);else for(;++i<u;)e.set(t.call(n,r=n[i],i),r)}else for(var o in n)e.set(o,n[o]);return e};var bo="__proto__",_o="\0";l(c,{has:h,get:function(n){return this._[f(n)]},set:function(n,t){return this._[f(n)]=t},remove:p,keys:g,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:s(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,s(t),this._[t])}}),ao.nest=function(){function n(t,o,a){if(a>=u.length)return r?r.call(i,o):e?o.sort(e):o;for(var l,f,s,h,p=-1,g=o.length,v=u[a++],d=new c;++p<g;)(h=d.get(l=v(f=o[p])))?h.push(f):d.set(l,[f]);return t?(f=t(),s=function(e,r){f.set(e,n(t,r,a))}):(f={},s=function(e,r){f[e]=n(t,r,a)}),d.forEach(s),f}function t(n,e){if(e>=u.length)return n;var r=[],i=o[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}var e,r,i={},u=[],o=[];return i.map=function(t,e){return n(e,t,0)},i.entries=function(e){return t(n(ao.map,e,0),0)},i.key=function(n){return u.push(n),i},i.sortKeys=function(n){return o[u.length-1]=n,i},i.sortValues=function(n){return e=n,i},i.rollup=function(n){return r=n,i},i},ao.set=function(n){var t=new y;if(n)for(var e=0,r=n.length;e<r;++e)t.add(n[e]);return t},l(y,{has:h,add:function(n){return this._[f(n+="")]=!0,n},remove:p,values:g,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,s(t))}}),ao.behavior={},ao.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=M(n,t,t[e]);return n};var wo=["webkit","ms","moz","Moz","o","O"];ao.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ao.event=null,ao.requote=function(n){return n.replace(So,"\\$&")};var So=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ko={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},No=function(n,t){return t.querySelector(n)},Eo=function(n,t){return t.querySelectorAll(n)},Ao=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(Ao=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(No=function(n,t){return Sizzle(n,t)[0]||null},Eo=Sizzle,Ao=Sizzle.matchesSelector),ao.selection=function(){return ao.select(fo.documentElement)};var Co=ao.selection.prototype=[];Co.select=function(n){var t,e,r,i,u=[];n=A(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,c=r.length;++l<c;)(i=r[l])?(t.push(e=n.call(i,i.__data__,l,o)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return E(u)},Co.selectAll=function(n){var t,e,r=[];n=C(n);for(var i=-1,u=this.length;++i<u;)for(var o=this[i],a=-1,l=o.length;++a<l;)(e=o[a])&&(r.push(t=co(n.call(e,e.__data__,a,i))),t.parentNode=e);return E(r)};var zo="http://www.w3.org/1999/xhtml",Lo={svg:"http://www.w3.org/2000/svg",xhtml:zo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ao.ns={prefix:Lo,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&"xmlns"!==(e=n.slice(0,t))&&(n=n.slice(t+1)),Lo.hasOwnProperty(e)?{space:Lo[e],local:n}:n}},Co.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ao.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},Co.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!q(n[i]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},Co.style=function(n,e,r){var i=arguments.length;if(i<3){if("string"!=typeof n){i<2&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(i<2){var u=this.node();return t(u).getComputedStyle(u,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},Co.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},Co.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Co.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Co.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},Co.insert=function(n,t){return n=j(n),t=A(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},Co.remove=function(){return this.each(F)},Co.data=function(n,t){function e(n,e){var r,i,u,o=n.length,s=e.length,h=Math.min(o,s),p=new Array(s),g=new Array(s),v=new Array(o);if(t){var d,y=new c,m=new Array(o);for(r=-1;++r<o;)(i=n[r])&&(y.has(d=t.call(i,i.__data__,r))?v[r]=i:y.set(d,i),m[r]=d);for(r=-1;++r<s;)(i=y.get(d=t.call(e,u=e[r],r)))?i!==!0&&(p[r]=i,i.__data__=u):g[r]=H(u),y.set(d,!0);for(r=-1;++r<o;)r in m&&y.get(m[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)i=n[r],u=e[r],i?(i.__data__=u,p[r]=i):g[r]=H(u);for(;r<s;++r)g[r]=H(e[r]);for(;r<o;++r)v[r]=n[r]}g.update=p,g.parentNode=p.parentNode=v.parentNode=n.parentNode,a.push(g),l.push(p),f.push(v)}var r,i,u=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++u<o;)(i=r[u])&&(n[u]=i.__data__);return n}var a=Z([]),l=E([]),f=E([]);if("function"==typeof n)for(;++u<o;)e(r=this[u],n.call(r,r.parentNode.__data__,u));else for(;++u<o;)e(r=this[u],n);return l.enter=function(){return a},l.exit=function(){return f},l},Co.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},Co.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=O(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]),t.parentNode=(e=this[u]).parentNode;for(var a=0,l=e.length;a<l;a++)(r=e[a])&&n.call(r,r.__data__,a,u)&&t.push(r)}return E(i)},Co.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,u=r[i];--i>=0;)(e=r[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},Co.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},Co.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},Co.call=function(n){var t=co(arguments);return n.apply(t[0]=this,t),this},Co.empty=function(){return!this.node()},Co.node=function(){for(var n=0,t=this.length;n<t;n++)for(var e=this[n],r=0,i=e.length;r<i;r++){var u=e[r];if(u)return u}return null},Co.size=function(){var n=0;return Y(this,function(){++n}),n};var qo=[];ao.selection.enter=Z,ao.selection.enter.prototype=qo,qo.append=Co.append,qo.empty=Co.empty,qo.node=Co.node,qo.call=Co.call,qo.size=Co.size,qo.select=function(n){for(var t,e,r,i,u,o=[],a=-1,l=this.length;++a<l;){r=(i=this[a]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var c=-1,f=i.length;++c<f;)(u=i[c])?(t.push(r[c]=e=n.call(i.parentNode,u.__data__,c,a)),e.__data__=u.__data__):t.push(null)}return E(o)},qo.insert=function(n,t){return arguments.length<2&&(t=V(this)),Co.insert.call(this,n,t)},ao.select=function(t){var e;return"string"==typeof t?(e=[No(t,fo)],e.parentNode=fo.documentElement):(e=[t],e.parentNode=n(t)),E([e])},ao.selectAll=function(n){var t;return"string"==typeof n?(t=co(Eo(n,fo)),t.parentNode=fo.documentElement):(t=co(n),t.parentNode=null),E([t])},Co.on=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var To=ao.map({mouseenter:"mouseover",mouseleave:"mouseout"});fo&&To.forEach(function(n){"on"+n in fo&&To.remove(n)});var Ro,Do=0;ao.mouse=function(n){return J(n,k())};var Po=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ao.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,i=0,u=t.length;i<u;++i)if((r=t[i]).identifier===e)return J(n,r)},ao.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",o)}function e(n,t,e,u,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],g|=n|e,M=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:n,dy:e}))}function l(){t(h,v)&&(y.on(u+d,null).on(o+d,null),m(g),p({type:"dragend"}))}var c,f=this,s=ao.event.target.correspondingElement||ao.event.target,h=f.parentNode,p=r.of(f,arguments),g=0,v=n(),d=".drag"+(null==v?"":"-"+v),y=ao.select(e(s)).on(u+d,a).on(o+d,l),m=W(s),M=t(h,v);i?(c=i.apply(f,arguments),c=[c.x-M[0],c.y-M[1]]):c=[0,0],p({type:"dragstart"})}}var r=N(n,"drag","dragstart","dragend"),i=null,u=e(b,ao.mouse,t,"mousemove","mouseup"),o=e(G,ao.touch,m,"touchmove","touchend");return n.origin=function(t){return arguments.length?(i=t,n):i},ao.rebind(n,r,"on")},ao.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?co(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Uo=1e-6,jo=Uo*Uo,Fo=Math.PI,Ho=2*Fo,Oo=Ho-Uo,Io=Fo/2,Yo=Fo/180,Zo=180/Fo,Vo=Math.SQRT2,Xo=2,$o=4;ao.interpolateZoom=function(n,t){var e,r,i=n[0],u=n[1],o=n[2],a=t[0],l=t[1],c=t[2],f=a-i,s=l-u,h=f*f+s*s;if(h<jo)r=Math.log(c/o)/Vo,e=function(n){return[i+n*f,u+n*s,o*Math.exp(Vo*n*r)]};else{var p=Math.sqrt(h),g=(c*c-o*o+$o*h)/(2*o*Xo*p),v=(c*c-o*o-$o*h)/(2*c*Xo*p),d=Math.log(Math.sqrt(g*g+1)-g),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-d)/Vo,e=function(n){var t=n*r,e=rn(d),a=o/(Xo*p)*(e*un(Vo*t+d)-en(d));return[i+a*f,u+a*s,o*e/rn(Vo*t+d)]}}return e.duration=1e3*r,e},ao.behavior.zoom=function(){function n(n){n.on(L,s).on(Wo+".zoom",p).on("dblclick.zoom",g).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function i(n){k.k=Math.max(A[0],Math.min(A[1],n))}function u(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},i(Math.pow(2,o)),u(d=e,r),t=ao.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function l(n){z++||n({type:"zoomstart"})}function c(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function f(n){--z||(n({type:"zoomend"}),d=null)}function s(){function n(){a=1,u(ao.mouse(i),h),c(o)}function r(){s.on(q,null).on(T,null),p(a),f(o)}var i=this,o=D.of(i,arguments),a=0,s=ao.select(t(i)).on(q,n).on(T,r),h=e(ao.mouse(i)),p=W(i);Il.call(i),l(o)}function h(){function n(){var n=ao.touches(g);return p=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ao.event.target;ao.select(t).on(x,r).on(b,a),_.push(t);for(var e=ao.event.changedTouches,i=0,u=e.length;i<u;++i)d[e[i].identifier]=null;var l=n(),c=Date.now();if(1===l.length){if(c-M<500){var f=l[0];o(g,f,d[f.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=c}else if(l.length>1){var f=l[0],s=l[1],h=f[0]-s[0],p=f[1]-s[1];y=h*h+p*p}}function r(){var n,t,e,r,o=ao.touches(g);Il.call(g);for(var a=0,l=o.length;a<l;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var f=(f=e[0]-n[0])*f+(f=e[1]-n[1])*f,s=y&&Math.sqrt(f/y);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(s*p)}M=null,u(n,t),c(v)}function a(){if(ao.event.touches.length){for(var t=ao.event.changedTouches,e=0,r=t.length;e<r;++e)delete d[t[e].identifier];for(var i in d)return void n()}ao.selectAll(_).on(m,null),w.on(L,s).on(R,h),N(),f(v)}var p,g=this,v=D.of(g,arguments),d={},y=0,m=".zoom-"+ao.event.changedTouches[0].identifier,x="touchmove"+m,b="touchend"+m,_=[],w=ao.select(g),N=W(g);t(),l(v),w.on(L,null).on(R,t)}function p(){var n=D.of(this,arguments);m?clearTimeout(m):(Il.call(this),v=e(d=y||ao.mouse(this)),l(n)),m=setTimeout(function(){m=null,f(n)},50),S(),i(Math.pow(2,.002*Bo())*k.k),u(d,v),c(n)}function g(){var n=ao.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ao.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,y,m,M,x,b,_,w,k={x:0,y:0,k:1},E=[960,500],A=Jo,C=250,z=0,L="mousedown.zoom",q="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=N(n,"zoomstart","zoom","zoomend");return Wo||(Wo="onwheel"in fo?(Bo=function(){return-ao.event.deltaY*(ao.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fo?(Bo=function(){return ao.event.wheelDelta},"mousewheel"):(Bo=function(){return-ao.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Hl?ao.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},l(n)}).tween("zoom:zoom",function(){var e=E[0],r=E[1],i=d?d[0]:e/2,u=d?d[1]:r/2,o=ao.interpolateZoom([(i-k.x)/k.k,(u-k.y)/k.k,e/k.k],[(i-t.x)/t.k,(u-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:i-r[0]*a,y:u-r[1]*a,k:a},c(n)}}).each("interrupt.zoom",function(){f(n)}).each("end.zoom",function(){f(n)}):(this.__chart__=k,l(n),c(n),f(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:null},i(+t),a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(A=null==t?Jo:[+t[0],+t[1]],n):A},n.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],n):y},n.size=function(t){return arguments.length?(E=t&&[+t[0],+t[1]],n):E},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ao.rebind(n,D,"on")};var Bo,Wo,Jo=[0,1/0];ao.color=an,an.prototype.toString=function(){return this.rgb()+""},ao.hsl=ln;var Go=ln.prototype=new an;Go.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,this.l/n)},Go.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ln(this.h,this.s,n*this.l)},Go.rgb=function(){return cn(this.h,this.s,this.l)},ao.hcl=fn;var Ko=fn.prototype=new an;Ko.brighter=function(n){return new fn(this.h,this.c,Math.min(100,this.l+Qo*(arguments.length?n:1)))},Ko.darker=function(n){return new fn(this.h,this.c,Math.max(0,this.l-Qo*(arguments.length?n:1)))},Ko.rgb=function(){return sn(this.h,this.c,this.l).rgb()},ao.lab=hn;var Qo=18,na=.95047,ta=1,ea=1.08883,ra=hn.prototype=new an;ra.brighter=function(n){return new hn(Math.min(100,this.l+Qo*(arguments.length?n:1)),this.a,this.b)},ra.darker=function(n){return new hn(Math.max(0,this.l-Qo*(arguments.length?n:1)),this.a,this.b)},ra.rgb=function(){return pn(this.l,this.a,this.b)},ao.rgb=mn;var ia=mn.prototype=new an;ia.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,i=30;return t||e||r?(t&&t<i&&(t=i),e&&e<i&&(e=i),r&&r<i&&(r=i),new mn(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mn(i,i,i)},ia.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mn(n*this.r,n*this.g,n*this.b)},ia.hsl=function(){return wn(this.r,this.g,this.b)},ia.toString=function(){return"#"+bn(this.r)+bn(this.g)+bn(this.b)};var ua=ao.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ua.forEach(function(n,t){ua.set(n,Mn(t))}),ao.functor=En,ao.xhr=An(m),ao.dsv=function(n,t){function e(n,e,u){arguments.length<3&&(u=e,e=null);var o=Cn(n,t,null==e?r:i(e),u);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:i(n)):e},o}function r(n){return e.parse(n.responseText)}function i(n){return function(t){return e.parse(t.responseText,n)}}function u(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var i=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(i(n),e)}:i})},e.parseRows=function(n,t){function e(){if(f>=c)return o;if(i)return i=!1,u;var t=f;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}f=e+2;var r=n.charCodeAt(e+1);return 13===r?(i=!0,10===n.charCodeAt(e+2)&&++f):10===r&&(i=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;f<c;){var r=n.charCodeAt(f++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===n.charCodeAt(f)&&(++f,++a);else if(r!==l)continue;return n.slice(t,f-a)}return n.slice(t)}for(var r,i,u={},o={},a=[],c=n.length,f=0,s=0;(r=e())!==o;){for(var h=[];r!==u&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,s++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new y,i=[];return t.forEach(function(n){for(var t in n)r.has(t)||i.push(r.add(t))}),[i.map(o).join(n)].concat(t.map(function(t){return i.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(u).join("\n")},e},ao.csv=ao.dsv(",","text/csv"),ao.tsv=ao.dsv("\t","text/tab-separated-values");var oa,aa,la,ca,fa=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ao.timer=function(){qn.apply(this,arguments)},ao.timer.flush=function(){Rn(),Dn()},ao.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var sa=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"].map(Un);ao.formatPrefix=function(n,t){var e=0;return(n=+n)&&(n<0&&(n*=-1),t&&(n=ao.round(n,Pn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),sa[8+e/3]};var ha=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,pa=ao.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ao.round(n,Pn(n,t))).toFixed(Math.max(0,Math.min(20,Pn(n*(1+1e-15),t))))}}),ga=ao.time={},va=Date;Hn.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){da.setUTCDate.apply(this._,arguments)},setDay:function(){da.setUTCDay.apply(this._,arguments)},setFullYear:function(){da.setUTCFullYear.apply(this._,arguments)},setHours:function(){da.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){da.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){da.setUTCMinutes.apply(this._,arguments)},setMonth:function(){da.setUTCMonth.apply(this._,arguments)},setSeconds:function(){da.setUTCSeconds.apply(this._,arguments)},setTime:function(){da.setTime.apply(this._,arguments)}};var da=Date.prototype;ga.year=On(function(n){return n=ga.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ga.years=ga.year.range,ga.years.utc=ga.year.utc.range,ga.day=On(function(n){var t=new va(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ga.days=ga.day.range,ga.days.utc=ga.day.utc.range,ga.dayOfYear=function(n){var t=ga.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ga[n]=On(function(n){return(n=ga.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ga.year(n).getDay();return Math.floor((ga.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ga[n+"s"]=e.range,ga[n+"s"].utc=e.utc.range,ga[n+"OfYear"]=function(n){var e=ga.year(n).getDay();return Math.floor((ga.dayOfYear(n)+(e+t)%7)/7)}}),ga.week=ga.sunday,ga.weeks=ga.sunday.range,ga.weeks.utc=ga.sunday.utc.range,ga.weekOfYear=ga.sundayOfYear;var ya={"-":"",_:" ",0:"0"},ma=/^\s*\d+/,Ma=/^%/;ao.locale=function(n){return{numberFormat:jn(n),timeFormat:Yn(n)}};var xa=ao.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],
shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ao.format=xa.numberFormat,ao.geo={},ft.prototype={s:0,t:0,add:function(n){st(n,this.t,ba),st(ba.s,this.s,this),this.s?this.t+=ba.t:this.s=ba.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ba=new ft;ao.geo.stream=function(n,t){n&&_a.hasOwnProperty(n.type)?_a[n.type](n,t):ht(n,t)};var _a={Feature:function(n,t){ht(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)ht(e[r].geometry,t)}},wa={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){pt(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)pt(e[r],t,0)},Polygon:function(n,t){gt(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)gt(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)ht(e[r],t)}};ao.geo.area=function(n){return Sa=0,ao.geo.stream(n,Na),Sa};var Sa,ka=new ft,Na={sphere:function(){Sa+=4*Fo},point:b,lineStart:b,lineEnd:b,polygonStart:function(){ka.reset(),Na.lineStart=vt},polygonEnd:function(){var n=2*ka;Sa+=n<0?4*Fo+n:n,Na.lineStart=Na.lineEnd=Na.point=b}};ao.geo.bounds=function(){function n(n,t){M.push(x=[f=n,h=n]),t<s&&(s=t),t>p&&(p=t)}function t(t,e){var r=dt([t*Yo,e*Yo]);if(y){var i=mt(y,r),u=[i[1],-i[0],0],o=mt(u,i);bt(o),o=_t(o);var l=t-g,c=l>0?1:-1,v=o[0]*Zo*c,d=xo(l)>180;if(d^(c*g<v&&v<c*t)){var m=o[1]*Zo;m>p&&(p=m)}else if(v=(v+360)%360-180,d^(c*g<v&&v<c*t)){var m=-o[1]*Zo;m<s&&(s=m)}else e<s&&(s=e),e>p&&(p=e);d?t<g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t):h>=f?(t<f&&(f=t),t>h&&(h=t)):t>g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t)}else n(t,e);y=r,g=t}function e(){b.point=t}function r(){x[0]=f,x[1]=h,b.point=n,y=null}function i(n,e){if(y){var r=n-g;m+=xo(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Na.point(n,e),t(n,e)}function u(){Na.lineStart()}function o(){i(v,d),Na.lineEnd(),xo(m)>Uo&&(f=-(h=180)),x[0]=f,x[1]=h,y=null}function a(n,t){return(t-=n)<0?t+360:t}function l(n,t){return n[0]-t[0]}function c(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var f,s,h,p,g,v,d,y,m,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=i,b.lineStart=u,b.lineEnd=o,m=0,Na.polygonStart()},polygonEnd:function(){Na.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,ka<0?(f=-(h=180),s=-(p=90)):m>Uo?p=90:m<-Uo&&(s=-90),x[0]=f,x[1]=h}};return function(n){p=h=-(f=s=1/0),M=[],ao.geo.stream(n,b);var t=M.length;if(t){M.sort(l);for(var e,r=1,i=M[0],u=[i];r<t;++r)e=M[r],c(e[0],i)||c(e[1],i)?(a(i[0],e[1])>a(i[0],i[1])&&(i[1]=e[1]),a(e[0],i[1])>a(i[0],i[1])&&(i[0]=e[0])):u.push(i=e);for(var o,e,g=-(1/0),t=u.length-1,r=0,i=u[t];r<=t;i=e,++r)e=u[r],(o=a(i[1],e[0]))>g&&(g=o,f=e[0],h=i[1])}return M=x=null,f===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,s],[h,p]]}}(),ao.geo.centroid=function(n){Ea=Aa=Ca=za=La=qa=Ta=Ra=Da=Pa=Ua=0,ao.geo.stream(n,ja);var t=Da,e=Pa,r=Ua,i=t*t+e*e+r*r;return i<jo&&(t=qa,e=Ta,r=Ra,Aa<Uo&&(t=Ca,e=za,r=La),i=t*t+e*e+r*r,i<jo)?[NaN,NaN]:[Math.atan2(e,t)*Zo,tn(r/Math.sqrt(i))*Zo]};var Ea,Aa,Ca,za,La,qa,Ta,Ra,Da,Pa,Ua,ja={sphere:b,point:St,lineStart:Nt,lineEnd:Et,polygonStart:function(){ja.lineStart=At},polygonEnd:function(){ja.lineStart=Nt}},Fa=Rt(zt,jt,Ht,[-Fo,-Fo/2]),Ha=1e9;ao.geo.clipExtent=function(){var n,t,e,r,i,u,o={stream:function(n){return i&&(i.valid=!1),i=u(n),i.valid=!0,i},extent:function(a){return arguments.length?(u=Zt(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ao.geo.conicEqualArea=function(){return Vt(Xt)}).raw=Xt,ao.geo.albers=function(){return ao.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ao.geo.albersUsa=function(){function n(n){var u=n[0],o=n[1];return t=null,e(u,o),t||(r(u,o),t)||i(u,o),t}var t,e,r,i,u=ao.geo.albers(),o=ao.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ao.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?a:u).invert(n)},n.stream=function(n){var t=u.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(u.precision(t),o.precision(t),a.precision(t),n):u.precision()},n.scale=function(t){return arguments.length?(u.scale(t),o.scale(.35*t),a.scale(t),n.translate(u.translate())):u.scale()},n.translate=function(t){if(!arguments.length)return u.translate();var c=u.scale(),f=+t[0],s=+t[1];return e=u.translate(t).clipExtent([[f-.455*c,s-.238*c],[f+.455*c,s+.238*c]]).stream(l).point,r=o.translate([f-.307*c,s+.201*c]).clipExtent([[f-.425*c+Uo,s+.12*c+Uo],[f-.214*c-Uo,s+.234*c-Uo]]).stream(l).point,i=a.translate([f-.205*c,s+.212*c]).clipExtent([[f-.214*c+Uo,s+.166*c+Uo],[f-.115*c-Uo,s+.234*c-Uo]]).stream(l).point,n},n.scale(1070)};var Oa,Ia,Ya,Za,Va,Xa,$a={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Ia=0,$a.lineStart=$t},polygonEnd:function(){$a.lineStart=$a.lineEnd=$a.point=b,Oa+=xo(Ia/2)}},Ba={point:Bt,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Wa={point:Gt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){Wa.lineStart=ne},polygonEnd:function(){Wa.point=Gt,Wa.lineStart=Kt,Wa.lineEnd=Qt}};ao.geo.path=function(){function n(n){return n&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(u)),ao.geo.stream(n,o)),u.result()}function t(){return o=null,n}var e,r,i,u,o,a=4.5;return n.area=function(n){return Oa=0,ao.geo.stream(n,i($a)),Oa},n.centroid=function(n){return Ca=za=La=qa=Ta=Ra=Da=Pa=Ua=0,ao.geo.stream(n,i(Wa)),Ua?[Da/Ua,Pa/Ua]:Ra?[qa/Ra,Ta/Ra]:La?[Ca/La,za/La]:[NaN,NaN]},n.bounds=function(n){return Va=Xa=-(Ya=Za=1/0),ao.geo.stream(n,i(Ba)),[[Ya,Za],[Va,Xa]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||re(n):m,t()):e},n.context=function(n){return arguments.length?(u=null==(r=n)?new Wt:new te(n),"function"!=typeof a&&u.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(u.pointRadius(+t),+t),n):a},n.projection(ao.geo.albersUsa()).context(null)},ao.geo.transform=function(n){return{stream:function(t){var e=new ie(t);for(var r in n)e[r]=n[r];return e}}},ie.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ao.geo.projection=oe,ao.geo.projectionMutator=ae,(ao.geo.equirectangular=function(){return oe(ce)}).raw=ce.invert=ce,ao.geo.rotation=function(n){function t(t){return t=n(t[0]*Yo,t[1]*Yo),t[0]*=Zo,t[1]*=Zo,t}return n=se(n[0]%360*Yo,n[1]*Yo,n.length>2?n[2]*Yo:0),t.invert=function(t){return t=n.invert(t[0]*Yo,t[1]*Yo),t[0]*=Zo,t[1]*=Zo,t},t},fe.invert=ce,ao.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=se(-n[0]*Yo,-n[1]*Yo,0).invert,i=[];return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Zo,n[1]*=Zo}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=ve((t=+r)*Yo,i*Yo),n):t},n.precision=function(r){return arguments.length?(e=ve(t*Yo,(i=+r)*Yo),n):i},n.angle(90)},ao.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Yo,i=n[1]*Yo,u=t[1]*Yo,o=Math.sin(r),a=Math.cos(r),l=Math.sin(i),c=Math.cos(i),f=Math.sin(u),s=Math.cos(u);return Math.atan2(Math.sqrt((e=s*o)*e+(e=c*f-l*s*a)*e),l*f+c*s*a)},ao.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ao.range(Math.ceil(u/d)*d,i,d).map(h).concat(ao.range(Math.ceil(c/y)*y,l,y).map(p)).concat(ao.range(Math.ceil(r/g)*g,e,g).filter(function(n){return xo(n%d)>Uo}).map(f)).concat(ao.range(Math.ceil(a/v)*v,o,v).filter(function(n){return xo(n%y)>Uo}).map(s))}var e,r,i,u,o,a,l,c,f,s,h,p,g=10,v=g,d=90,y=360,m=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(u).concat(p(l).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],c=+t[0][1],l=+t[1][1],u>i&&(t=u,u=i,i=t),c>l&&(t=c,c=l,l=t),n.precision(m)):[[u,c],[i,l]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(m)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],y=+t[1],n):[d,y]},n.minorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],n):[g,v]},n.precision=function(t){return arguments.length?(m=+t,f=ye(a,o,90),s=me(r,e,m),h=ye(c,l,90),p=me(u,i,m),n):m},n.majorExtent([[-180,-90+Uo],[180,90-Uo]]).minorExtent([[-180,-80-Uo],[180,80+Uo]])},ao.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=Me,i=xe;return n.distance=function(){return ao.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},ao.geo.interpolate=function(n,t){return be(n[0]*Yo,n[1]*Yo,t[0]*Yo,t[1]*Yo)},ao.geo.length=function(n){return Ja=0,ao.geo.stream(n,Ga),Ja};var Ja,Ga={sphere:b,point:b,lineStart:_e,lineEnd:b,polygonStart:b,polygonEnd:b},Ka=we(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ao.geo.azimuthalEqualArea=function(){return oe(Ka)}).raw=Ka;var Qa=we(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},m);(ao.geo.azimuthalEquidistant=function(){return oe(Qa)}).raw=Qa,(ao.geo.conicConformal=function(){return Vt(Se)}).raw=Se,(ao.geo.conicEquidistant=function(){return Vt(ke)}).raw=ke;var nl=we(function(n){return 1/n},Math.atan);(ao.geo.gnomonic=function(){return oe(nl)}).raw=nl,Ne.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Io]},(ao.geo.mercator=function(){return Ee(Ne)}).raw=Ne;var tl=we(function(){return 1},Math.asin);(ao.geo.orthographic=function(){return oe(tl)}).raw=tl;var el=we(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ao.geo.stereographic=function(){return oe(el)}).raw=el,Ae.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Io]},(ao.geo.transverseMercator=function(){var n=Ee(Ae),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Ae,ao.geom={},ao.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,i=En(e),u=En(r),o=n.length,a=[],l=[];for(t=0;t<o;t++)a.push([+i.call(this,n[t],t),+u.call(this,n[t],t),t]);for(a.sort(qe),t=0;t<o;t++)l.push([a[t][0],-a[t][1]]);var c=Le(a),f=Le(l),s=f[0]===c[0],h=f[f.length-1]===c[c.length-1],p=[];for(t=c.length-1;t>=0;--t)p.push(n[a[c[t]][2]]);for(t=+s;t<f.length-h;++t)p.push(n[a[f[t]][2]]);return p}var e=Ce,r=ze;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ao.geom.polygon=function(n){return ko(n,rl),n};var rl=ao.geom.polygon.prototype=[];rl.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},rl.centroid=function(n){var t,e,r=-1,i=this.length,u=0,o=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],u+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[u*n,o*n]},rl.clip=function(n){for(var t,e,r,i,u,o,a=De(n),l=-1,c=this.length-De(this),f=this[c-1];++l<c;){for(t=n.slice(),n.length=0,i=this[l],u=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Te(o,f,i)?(Te(u,f,i)||n.push(Re(u,o,f,i)),n.push(o)):Te(u,f,i)&&n.push(Re(u,o,f,i)),u=o;a&&n.push(n[0]),f=i}return n};var il,ul,ol,al,ll,cl=[],fl=[];Ye.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ve),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=or(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(ir(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ur(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(ur(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ir(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,o=n.R;if(e=u?o?or(o):u:o,i?i.L===n?i.L=e:i.R=e:this._=e,u&&o?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==o?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=o,o.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ur(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ur(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ur(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},ao.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],i=a[0][1],u=a[1][0],o=a[1][1];return ar(e(n),a).cells.forEach(function(e,a){var l=e.edges,c=e.site,f=t[a]=l.length?l.map(function(n){var t=n.start();return[t.x,t.y]}):c.x>=r&&c.x<=u&&c.y>=i&&c.y<=o?[[r,o],[u,o],[u,i],[r,i]]:[];f.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(u(n,t)/Uo)*Uo,y:Math.round(o(n,t)/Uo)*Uo,i:t}})}var r=Ce,i=ze,u=r,o=i,a=sl;return n?t(n):(t.links=function(n){return ar(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return ar(e(n)).cells.forEach(function(e,r){for(var i,u,o=e.site,a=e.edges.sort(Ve),l=-1,c=a.length,f=a[c-1].edge,s=f.l===o?f.r:f.l;++l<c;)i=f,u=s,f=a[l].edge,s=f.l===o?f.r:f.l,r<u.i&&r<s.i&&cr(o,u,s)<0&&t.push([n[r],n[u.i],n[s.i]])}),t},t.x=function(n){return arguments.length?(u=En(r=n),t):r},t.y=function(n){return arguments.length?(o=En(i=n),t):i},t.clipExtent=function(n){return arguments.length?(a=null==n?sl:n,t):a===sl?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===sl?null:a&&a[1]},t)};var sl=[[-1e6,-1e6],[1e6,1e6]];ao.geom.delaunay=function(n){return ao.geom.voronoi().triangles(n)},ao.geom.quadtree=function(n,t,e,r,i){function u(n){function u(n,t,e,r,i,u,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var l=n.x,f=n.y;if(null!=l)if(xo(l-e)+xo(f-r)<.01)c(n,t,e,r,i,u,o,a);else{var s=n.point;n.x=n.y=n.point=null,c(n,s,l,f,i,u,o,a),c(n,t,e,r,i,u,o,a)}else n.x=e,n.y=r,n.point=t}else c(n,t,e,r,i,u,o,a)}function c(n,t,e,r,i,o,a,l){var c=.5*(i+a),f=.5*(o+l),s=e>=c,h=r>=f,p=h<<1|s;n.leaf=!1,n=n.nodes[p]||(n.nodes[p]=hr()),s?i=c:a=c,h?o=f:l=f,u(n,t,e,r,i,o,a,l)}var f,s,h,p,g,v,d,y,m,M=En(a),x=En(l);if(null!=t)v=t,d=e,y=r,m=i;else if(y=m=-(v=d=1/0),s=[],h=[],g=n.length,o)for(p=0;p<g;++p)f=n[p],f.x<v&&(v=f.x),f.y<d&&(d=f.y),f.x>y&&(y=f.x),f.y>m&&(m=f.y),s.push(f.x),h.push(f.y);else for(p=0;p<g;++p){var b=+M(f=n[p],p),_=+x(f,p);b<v&&(v=b),_<d&&(d=_),b>y&&(y=b),_>m&&(m=_),s.push(b),h.push(_)}var w=y-v,S=m-d;w>S?m=d+w:y=v+S;var k=hr();if(k.add=function(n){u(k,n,+M(n,++p),+x(n,p),v,d,y,m)},k.visit=function(n){pr(n,k,v,d,y,m)},k.find=function(n){return gr(k,n[0],n[1],v,d,y,m)},p=-1,null==t){for(;++p<g;)u(k,n[p],s[p],h[p],v,d,y,m);--p}else n.forEach(k.add);return s=h=n=f=null,k}var o,a=Ce,l=ze;return(o=arguments.length)?(a=fr,l=sr,3===o&&(i=e,r=t,e=t=0),u(n)):(u.x=function(n){return arguments.length?(a=n,u):a},u.y=function(n){return arguments.length?(l=n,u):l},u.extent=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),u):null==t?null:[[t,e],[r,i]]},u.size=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=e=0,r=+n[0],i=+n[1]),u):null==t?null:[r-t,i-e]},u)},ao.interpolateRgb=vr,ao.interpolateObject=dr,ao.interpolateNumber=yr,ao.interpolateString=mr;var hl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pl=new RegExp(hl.source,"g");ao.interpolate=Mr,ao.interpolators=[function(n,t){var e=typeof t;return("string"===e?ua.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?vr:mr:t instanceof an?vr:Array.isArray(t)?xr:"object"===e&&isNaN(t)?dr:yr)(n,t)}],ao.interpolateArray=xr;var gl=function(){return m},vl=ao.map({linear:gl,poly:Er,quad:function(){return Sr},cubic:function(){return kr},sin:function(){return Ar},exp:function(){return Cr},circle:function(){return zr},elastic:Lr,back:qr,bounce:function(){return Tr}}),dl=ao.map({"in":m,out:_r,"in-out":wr,"out-in":function(n){return wr(_r(n))}});ao.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=vl.get(e)||gl,r=dl.get(r)||m,br(r(e.apply(null,lo.call(arguments,1))))},ao.interpolateHcl=Rr,ao.interpolateHsl=Dr,ao.interpolateLab=Pr,ao.interpolateRound=Ur,ao.transform=function(n){var t=fo.createElementNS(ao.ns.prefix.svg,"g");return(ao.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new jr(e?e.matrix:yl)})(n)},jr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yl={a:1,b:0,c:0,d:1,e:0,f:0};ao.interpolateTransform=$r,ao.layout={},ao.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Jr(n[e]));return t}},ao.layout.chord=function(){function n(){var n,c,s,h,p,g={},v=[],d=ao.range(u),y=[];for(e=[],r=[],n=0,h=-1;++h<u;){for(c=0,p=-1;++p<u;)c+=i[h][p];v.push(c),y.push(ao.range(u)),n+=c}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&y.forEach(function(n,t){n.sort(function(n,e){return a(i[t][n],i[t][e])})}),n=(Ho-f*u)/n,c=0,h=-1;++h<u;){for(s=c,p=-1;++p<u;){var m=d[h],M=y[m][p],x=i[m][M],b=c,_=c+=x*n;g[m+"-"+M]={index:m,subindex:M,startAngle:b,endAngle:_,value:x}}r[m]={index:m,startAngle:s,endAngle:c,value:v[m]},c+=f}for(h=-1;++h<u;)for(p=h-1;++p<u;){var w=g[h+"-"+p],S=g[p+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}l&&t()}function t(){e.sort(function(n,t){return l((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,i,u,o,a,l,c={},f=0;return c.matrix=function(n){return arguments.length?(u=(i=n)&&i.length,e=r=null,c):i},c.padding=function(n){return arguments.length?(f=n,e=r=null,c):f},c.sortGroups=function(n){return arguments.length?(o=n,e=r=null,c):o},c.sortSubgroups=function(n){return arguments.length?(a=n,e=null,c):a},c.sortChords=function(n){return arguments.length?(l=n,e&&t(),c):l},c.chords=function(){return e||n(),e},c.groups=function(){return r||n(),r},c},ao.layout.force=function(){function n(n){return function(t,e,r,i){if(t.point!==n){var u=t.cx-n.x,o=t.cy-n.y,a=i-e,l=u*u+o*o;if(a*a/y<l){if(l<v){var c=t.charge/l;n.px-=u*c,n.py-=o*c}return!0}if(t.point&&l&&l<v){var c=t.pointCharge/l;n.px-=u*c,n.py-=o*c}}return!t.charge}}function t(n){n.px=ao.event.x,n.py=ao.event.y,l.resume()}var e,r,i,u,o,a,l={},c=ao.dispatch("start","tick","end"),f=[1,1],s=.9,h=ml,p=Ml,g=-30,v=xl,d=.1,y=.64,M=[],x=[];return l.tick=function(){if((i*=.99)<.005)return e=null,c.end({type:"end",alpha:i=0}),!0;var t,r,l,h,p,v,y,m,b,_=M.length,w=x.length;for(r=0;r<w;++r)l=x[r],h=l.source,p=l.target,m=p.x-h.x,b=p.y-h.y,(v=m*m+b*b)&&(v=i*o[r]*((v=Math.sqrt(v))-u[r])/v,m*=v,b*=v,p.x-=m*(y=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=b*y,h.x+=m*(y=1-y),h.y+=b*y);if((y=i*d)&&(m=f[0]/2,b=f[1]/2,r=-1,y))for(;++r<_;)l=M[r],l.x+=(m-l.x)*y,l.y+=(b-l.y)*y;if(g)for(ri(t=ao.geom.quadtree(M),i,a),r=-1;++r<_;)(l=M[r]).fixed||t.visit(n(l));for(r=-1;++r<_;)l=M[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*s,l.y-=(l.py-(l.py=l.y))*s);c.tick({type:"tick",alpha:i})},l.nodes=function(n){return arguments.length?(M=n,l):M},l.links=function(n){return arguments.length?(x=n,l):x},l.size=function(n){return arguments.length?(f=n,l):f},l.linkDistance=function(n){return arguments.length?(h="function"==typeof n?n:+n,l):h},l.distance=l.linkDistance,l.linkStrength=function(n){return arguments.length?(p="function"==typeof n?n:+n,l):p},l.friction=function(n){return arguments.length?(s=+n,l):s},l.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,l):g},l.chargeDistance=function(n){return arguments.length?(v=n*n,l):Math.sqrt(v)},l.gravity=function(n){return arguments.length?(d=+n,l):d},l.theta=function(n){return arguments.length?(y=n*n,l):Math.sqrt(y)},l.alpha=function(n){return arguments.length?(n=+n,i?n>0?i=n:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:i=0})):n>0&&(c.start({type:"start",alpha:i=n}),e=qn(l.tick)),l):i},l.start=function(){function n(n,r){if(!e){for(e=new Array(i),l=0;l<i;++l)e[l]=[];for(l=0;l<c;++l){var u=x[l];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var o,a=e[t],l=-1,f=a.length;++l<f;)if(!isNaN(o=a[l][n]))return o;return Math.random()*r}var t,e,r,i=M.length,c=x.length,s=f[0],v=f[1];for(t=0;t<i;++t)(r=M[t]).index=t,r.weight=0;for(t=0;t<c;++t)r=x[t],"number"==typeof r.source&&(r.source=M[r.source]),"number"==typeof r.target&&(r.target=M[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<i;++t)r=M[t],isNaN(r.x)&&(r.x=n("x",s)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof h)for(t=0;t<c;++t)u[t]=+h.call(this,x[t],t);else for(t=0;t<c;++t)u[t]=h;if(o=[],"function"==typeof p)for(t=0;t<c;++t)o[t]=+p.call(this,x[t],t);else for(t=0;t<c;++t)o[t]=p;if(a=[],"function"==typeof g)for(t=0;t<i;++t)a[t]=+g.call(this,M[t],t);else for(t=0;t<i;++t)a[t]=g;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=ao.behavior.drag().origin(m).on("dragstart.force",Qr).on("drag.force",t).on("dragend.force",ni)),arguments.length?void this.on("mouseover.force",ti).on("mouseout.force",ei).call(r):r},ao.rebind(l,c,"on")};var ml=20,Ml=1,xl=1/0;ao.layout.hierarchy=function(){function n(i){var u,o=[i],a=[];for(i.depth=0;null!=(u=o.pop());)if(a.push(u),(c=e.call(n,u,u.depth))&&(l=c.length)){for(var l,c,f;--l>=0;)o.push(f=c[l]),f.parent=u,f.depth=u.depth+1;r&&(u.value=0),u.children=c}else r&&(u.value=+r.call(n,u,u.depth)||0),delete u.children;return oi(i,function(n){var e,i;t&&(e=n.children)&&e.sort(t),r&&(i=n.parent)&&(i.value+=n.value)}),a}var t=ci,e=ai,r=li;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(ui(t,function(n){n.children&&(n.value=0)}),oi(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ao.layout.partition=function(){function n(t,e,r,i){var u=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,u&&(o=u.length)){var o,a,l,c=-1;for(r=t.value?r/t.value:0;++c<o;)n(a=u[c],e,l=a.value*r,i),e+=l}}function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,u=-1;++u<i;)r=Math.max(r,t(e[u]));return 1+r}function e(e,u){var o=r.call(this,e,u);return n(o[0],0,i[0],i[1]/t(o[0])),o}var r=ao.layout.hierarchy(),i=[1,1];return e.size=function(n){return arguments.length?(i=n,e):i},ii(e,r)},ao.layout.pie=function(){function n(o){var a,l=o.length,c=o.map(function(e,r){return+t.call(n,e,r)}),f=+("function"==typeof r?r.apply(this,arguments):r),s=("function"==typeof i?i.apply(this,arguments):i)-f,h=Math.min(Math.abs(s)/l,+("function"==typeof u?u.apply(this,arguments):u)),p=h*(s<0?-1:1),g=ao.sum(c),v=g?(s-l*p)/g:0,d=ao.range(l),y=[];return null!=e&&d.sort(e===bl?function(n,t){return c[t]-c[n]}:function(n,t){return e(o[n],o[t])}),d.forEach(function(n){y[n]={data:o[n],value:a=c[n],startAngle:f,endAngle:f+=a*v+p,padAngle:h}}),y}var t=Number,e=bl,r=0,i=Ho,u=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(i=t,n):i},n.padAngle=function(t){return arguments.length?(u=t,n):u},n};var bl={};ao.layout.stack=function(){function n(a,l){if(!(h=a.length))return a;var c=a.map(function(e,r){return t.call(n,e,r)}),f=c.map(function(t){return t.map(function(t,e){return[u.call(n,t,e),o.call(n,t,e)]})}),s=e.call(n,f,l);c=ao.permute(c,s),f=ao.permute(f,s);var h,p,g,v,d=r.call(n,f,l),y=c[0].length;for(g=0;g<y;++g)for(i.call(n,c[0][g],v=d[g],f[0][g][1]),p=1;p<h;++p)i.call(n,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return a}var t=m,e=gi,r=vi,i=pi,u=si,o=hi;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:_l.get(t)||gi,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:wl.get(t)||vi,n):r},n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(i=t,n):i},n};var _l=ao.map({"inside-out":function(n){var t,e,r=n.length,i=n.map(di),u=n.map(yi),o=ao.range(r).sort(function(n,t){return i[n]-i[t]}),a=0,l=0,c=[],f=[];for(t=0;t<r;++t)e=o[t],a<l?(a+=u[e],c.push(e)):(l+=u[e],f.push(e));return f.reverse().concat(c)},reverse:function(n){return ao.range(n.length).reverse()},"default":gi}),wl=ao.map({silhouette:function(n){var t,e,r,i=n.length,u=n[0].length,o=[],a=0,l=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;e<u;++e)l[e]=(a-o[e])/2;return l},wiggle:function(n){var t,e,r,i,u,o,a,l,c,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=l=c=0,e=1;e<h;++e){for(t=0,i=0;t<f;++t)i+=n[t][e][1];for(t=0,u=0,a=s[e][0]-s[e-1][0];t<f;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);r<t;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;u+=o*n[t][e][1]}p[e]=l-=i?u/i*a:0,l<c&&(c=l)}for(e=0;e<h;++e)p[e]-=c;return p},expand:function(n){var t,e,r,i=n.length,u=n[0].length,o=1/i,a=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];if(r)for(t=0;t<i;t++)n[t][e][1]/=r;else for(t=0;t<i;t++)n[t][e][1]=o}for(e=0;e<u;++e)a[e]=0;return a},zero:vi});ao.layout.histogram=function(){function n(n,u){for(var o,a,l=[],c=n.map(e,this),f=r.call(this,c,u),s=i.call(this,f,c,u),u=-1,h=c.length,p=s.length-1,g=t?1:1/h;++u<p;)o=l[u]=[],o.dx=s[u+1]-(o.x=s[u]),o.y=0;if(p>0)for(u=-1;++u<h;)a=c[u],a>=f[0]&&a<=f[1]&&(o=l[ao.bisect(s,a,1,p)-1],o.y+=g,o.push(n[u]));return l}var t=!0,e=Number,r=bi,i=Mi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=En(t),n):r},n.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return xi(n,t)}:En(t),n):i},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ao.layout.pack=function(){function n(n,u){var o=e.call(this,n,u),a=o[0],l=i[0],c=i[1],f=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,oi(a,function(n){n.r=+f(n.value)}),oi(a,Ni),r){var s=r*(t?1:Math.max(2*a.r/l,2*a.r/c))/2;oi(a,function(n){n.r+=s}),oi(a,Ni),oi(a,function(n){n.r-=s})}return Ci(a,l/2,c/2,t?1:1/Math.max(2*a.r/l,2*a.r/c)),o}var t,e=ao.layout.hierarchy().sort(_i),r=0,i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},ii(n,e)},ao.layout.tree=function(){function n(n,i){var f=o.call(this,n,i),s=f[0],h=t(s);if(oi(h,e),h.parent.m=-h.z,ui(h,r),c)ui(s,u);else{var p=s,g=s,v=s;ui(s,function(n){n.x<p.x&&(p=n),n.x>g.x&&(g=n),n.depth>v.depth&&(v=n)});var d=a(p,g)/2-p.x,y=l[0]/(g.x+a(g,p)/2+d),m=l[1]/(v.depth||1);ui(s,function(n){n.x=(n.x+d)*y,n.y=n.depth*m})}return f}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var i,u=t.children,o=0,a=u.length;o<a;++o)r.push((u[o]=i={_:u[o],parent:t,children:(i=u[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Di(n);var u=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-u):n.z=u}else r&&(n.z=r.z+a(n._,r._));n.parent.A=i(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function i(n,t,e){if(t){for(var r,i=n,u=n,o=t,l=i.parent.children[0],c=i.m,f=u.m,s=o.m,h=l.m;o=Ti(o),i=qi(i),o&&i;)l=qi(l),u=Ti(u),u.a=n,r=o.z+s-i.z-c+a(o._,i._),r>0&&(Ri(Pi(o,n,e),n,r),c+=r,f+=r),s+=o.m,c+=i.m,h+=l.m,f+=u.m;o&&!Ti(u)&&(u.t=o,u.m+=s-f),i&&!qi(l)&&(l.t=i,l.m+=c-h,e=n)}return e}function u(n){n.x*=l[0],n.y=n.depth*l[1]}var o=ao.layout.hierarchy().sort(null).value(null),a=Li,l=[1,1],c=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(c=null==(l=t)?u:null,n):c?null:l},n.nodeSize=function(t){return arguments.length?(c=null==(l=t)?null:u,n):c?l:null},ii(n,o)},ao.layout.cluster=function(){function n(n,u){var o,a=t.call(this,n,u),l=a[0],c=0;oi(l,function(n){var t=n.children;t&&t.length?(n.x=ji(t),n.y=Ui(t)):(n.x=o?c+=e(n,o):0,n.y=0,o=n)});var f=Fi(l),s=Hi(l),h=f.x-e(f,s)/2,p=s.x+e(s,f)/2;return oi(l,i?function(n){n.x=(n.x-l.x)*r[0],n.y=(l.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(p-h)*r[0],n.y=(1-(l.y?n.y/l.y:1))*r[1]}),a}var t=ao.layout.hierarchy().sort(null).value(null),e=Li,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},ii(n,t)},ao.layout.treemap=function(){function n(n,t){for(var e,r,i=-1,u=n.length;++i<u;)r=(e=n[i]).value*(t<0?0:t),e.area=isNaN(r)||r<=0?0:r}function t(e){var u=e.children;if(u&&u.length){var o,a,l,c=s(e),f=[],h=u.slice(),g=1/0,v="slice"===p?c.dx:"dice"===p?c.dy:"slice-dice"===p?1&e.depth?c.dy:c.dx:Math.min(c.dx,c.dy);for(n(h,c.dx*c.dy/e.value),f.area=0;(l=h.length)>0;)f.push(o=h[l-1]),f.area+=o.area,"squarify"!==p||(a=r(f,v))<=g?(h.pop(),g=a):(f.area-=f.pop().area,i(f,v,c,!1),v=Math.min(c.dx,c.dy),f.length=f.area=0,g=1/0);f.length&&(i(f,v,c,!0),f.length=f.area=0),u.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var u,o=s(t),a=r.slice(),l=[];for(n(a,o.dx*o.dy/t.value),l.area=0;u=a.pop();)l.push(u),l.area+=u.area,null!=u.z&&(i(l,u.z?o.dx:o.dy,o,!a.length),l.length=l.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,i=0,u=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(e<u&&(u=e),e>i&&(i=e));return r*=r,t*=t,r?Math.max(t*i*g/r,r/(t*u*g)):1/0}function i(n,t,e,r){var i,u=-1,o=n.length,a=e.x,c=e.y,f=t?l(n.area/t):0;
if(t==e.dx){for((r||f>e.dy)&&(f=e.dy);++u<o;)i=n[u],i.x=a,i.y=c,i.dy=f,a+=i.dx=Math.min(e.x+e.dx-a,f?l(i.area/f):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=f,e.dy-=f}else{for((r||f>e.dx)&&(f=e.dx);++u<o;)i=n[u],i.x=a,i.y=c,i.dx=f,c+=i.dy=Math.min(e.y+e.dy-c,f?l(i.area/f):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=f,e.dx-=f}}function u(r){var i=o||a(r),u=i[0];return u.x=u.y=0,u.value?(u.dx=c[0],u.dy=c[1]):u.dx=u.dy=0,o&&a.revalue(u),n([u],u.dx*u.dy/u.value),(o?e:t)(u),h&&(o=i),i}var o,a=ao.layout.hierarchy(),l=Math.round,c=[1,1],f=null,s=Oi,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return u.size=function(n){return arguments.length?(c=n,u):c},u.padding=function(n){function t(t){var e=n.call(u,t,t.depth);return null==e?Oi(t):Ii(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Ii(t,n)}if(!arguments.length)return f;var r;return s=null==(f=n)?Oi:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,u},u.round=function(n){return arguments.length?(l=n?Math.round:Number,u):l!=Number},u.sticky=function(n){return arguments.length?(h=n,o=null,u):h},u.ratio=function(n){return arguments.length?(g=n,u):g},u.mode=function(n){return arguments.length?(p=n+"",u):p},ii(u,a)},ao.random={normal:function(n,t){var e=arguments.length;return e<2&&(t=1),e<1&&(n=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return n+t*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=ao.random.normal.apply(ao,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ao.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t}}},ao.scale={};var Sl={floor:m,ceil:m};ao.scale.linear=function(){return Wi([0,1],[0,1],Mr,!1)};var kl={s:1,g:1,p:1,r:1,e:1};ao.scale.log=function(){return ru(ao.scale.linear().domain([0,1]),10,!0,[1,10])};var Nl=ao.format(".0e"),El={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ao.scale.pow=function(){return iu(ao.scale.linear(),1,[0,1])},ao.scale.sqrt=function(){return ao.scale.pow().exponent(.5)},ao.scale.ordinal=function(){return ou([],{t:"range",a:[[]]})},ao.scale.category10=function(){return ao.scale.ordinal().range(Al)},ao.scale.category20=function(){return ao.scale.ordinal().range(Cl)},ao.scale.category20b=function(){return ao.scale.ordinal().range(zl)},ao.scale.category20c=function(){return ao.scale.ordinal().range(Ll)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xn),Cl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xn),zl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xn),Ll=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xn);ao.scale.quantile=function(){return au([],[])},ao.scale.quantize=function(){return lu(0,1,[0,1])},ao.scale.threshold=function(){return cu([.5],[0,1])},ao.scale.identity=function(){return fu([0,1])},ao.svg={},ao.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),c=Math.max(0,+r.apply(this,arguments)),f=o.apply(this,arguments)-Io,s=a.apply(this,arguments)-Io,h=Math.abs(s-f),p=f>s?0:1;if(c<n&&(g=c,c=n,n=g),h>=Oo)return t(c,p)+(n?t(n,1-p):"")+"Z";var g,v,d,y,m,M,x,b,_,w,S,k,N=0,E=0,A=[];if((y=(+l.apply(this,arguments)||0)/2)&&(d=u===ql?Math.sqrt(n*n+c*c):+u.apply(this,arguments),p||(E*=-1),c&&(E=tn(d/c*Math.sin(y))),n&&(N=tn(d/n*Math.sin(y)))),c){m=c*Math.cos(f+E),M=c*Math.sin(f+E),x=c*Math.cos(s-E),b=c*Math.sin(s-E);var C=Math.abs(s-f-2*E)<=Fo?0:1;if(E&&yu(m,M,x,b)===p^C){var z=(f+s)/2;m=c*Math.cos(z),M=c*Math.sin(z),x=b=null}}else m=M=0;if(n){_=n*Math.cos(s-N),w=n*Math.sin(s-N),S=n*Math.cos(f+N),k=n*Math.sin(f+N);var L=Math.abs(f-s+2*N)<=Fo?0:1;if(N&&yu(_,w,S,k)===1-p^L){var q=(f+s)/2;_=n*Math.cos(q),w=n*Math.sin(q),S=k=null}}else _=w=0;if(h>Uo&&(g=Math.min(Math.abs(c-n)/2,+i.apply(this,arguments)))>.001){v=n<c^p?0:1;var T=g,R=g;if(h<Fo){var D=null==S?[_,w]:null==x?[m,M]:Re([m,M],[S,k],[x,b],[_,w]),P=m-D[0],U=M-D[1],j=x-D[0],F=b-D[1],H=1/Math.sin(Math.acos((P*j+U*F)/(Math.sqrt(P*P+U*U)*Math.sqrt(j*j+F*F)))/2),O=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(g,(n-O)/(H-1)),T=Math.min(g,(c-O)/(H+1))}if(null!=x){var I=mu(null==S?[_,w]:[S,k],[m,M],c,T,p),Y=mu([x,b],[_,w],c,T,p);g===T?A.push("M",I[0],"A",T,",",T," 0 0,",v," ",I[1],"A",c,",",c," 0 ",1-p^yu(I[1][0],I[1][1],Y[1][0],Y[1][1]),",",p," ",Y[1],"A",T,",",T," 0 0,",v," ",Y[0]):A.push("M",I[0],"A",T,",",T," 0 1,",v," ",Y[0])}else A.push("M",m,",",M);if(null!=S){var Z=mu([m,M],[S,k],n,-R,p),V=mu([_,w],null==x?[m,M]:[x,b],n,-R,p);g===R?A.push("L",V[0],"A",R,",",R," 0 0,",v," ",V[1],"A",n,",",n," 0 ",p^yu(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-p," ",Z[1],"A",R,",",R," 0 0,",v," ",Z[0]):A.push("L",V[0],"A",R,",",R," 0 0,",v," ",Z[0])}else A.push("L",_,",",w)}else A.push("M",m,",",M),null!=x&&A.push("A",c,",",c," 0 ",C,",",p," ",x,",",b),A.push("L",_,",",w),null!=S&&A.push("A",n,",",n," 0 ",L,",",1-p," ",S,",",k);return A.push("Z"),A.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=hu,r=pu,i=su,u=ql,o=gu,a=vu,l=du;return n.innerRadius=function(t){return arguments.length?(e=En(t),n):e},n.outerRadius=function(t){return arguments.length?(r=En(t),n):r},n.cornerRadius=function(t){return arguments.length?(i=En(t),n):i},n.padRadius=function(t){return arguments.length?(u=t==ql?ql:En(t),n):u},n.startAngle=function(t){return arguments.length?(o=En(t),n):o},n.endAngle=function(t){return arguments.length?(a=En(t),n):a},n.padAngle=function(t){return arguments.length?(l=En(t),n):l},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Io;return[Math.cos(t)*n,Math.sin(t)*n]},n};var ql="auto";ao.svg.line=function(){return Mu(m)};var Tl=ao.map({linear:xu,"linear-closed":bu,step:_u,"step-before":wu,"step-after":Su,basis:zu,"basis-open":Lu,"basis-closed":qu,bundle:Tu,cardinal:Eu,"cardinal-open":ku,"cardinal-closed":Nu,monotone:Fu});Tl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Rl=[0,2/3,1/3,0],Dl=[0,1/3,2/3,0],Pl=[0,1/6,2/3,1/6];ao.svg.line.radial=function(){var n=Mu(Hu);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},wu.reverse=Su,Su.reverse=wu,ao.svg.area=function(){return Ou(m)},ao.svg.area.radial=function(){var n=Ou(Hu);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ao.svg.chord=function(){function n(n,a){var l=t(this,u,n,a),c=t(this,o,n,a);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(e(l,c)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,c.r,c.p0)+r(c.r,c.p1,c.a1-c.a0)+i(c.r,c.p1,l.r,l.p0))+"Z"}function t(n,t,e,r){var i=t.call(n,e,r),u=a.call(n,i,r),o=l.call(n,i,r)-Io,f=c.call(n,i,r)-Io;return{r:u,a0:o,a1:f,p0:[u*Math.cos(o),u*Math.sin(o)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Fo)+",1 "+t}function i(n,t,e,r){return"Q 0,0 "+r}var u=Me,o=xe,a=Iu,l=gu,c=vu;return n.radius=function(t){return arguments.length?(a=En(t),n):a},n.source=function(t){return arguments.length?(u=En(t),n):u},n.target=function(t){return arguments.length?(o=En(t),n):o},n.startAngle=function(t){return arguments.length?(l=En(t),n):l},n.endAngle=function(t){return arguments.length?(c=En(t),n):c},n},ao.svg.diagonal=function(){function n(n,i){var u=t.call(this,n,i),o=e.call(this,n,i),a=(u.y+o.y)/2,l=[u,{x:u.x,y:a},{x:o.x,y:a},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=Me,e=xe,r=Yu;return n.source=function(e){return arguments.length?(t=En(e),n):t},n.target=function(t){return arguments.length?(e=En(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ao.svg.diagonal.radial=function(){var n=ao.svg.diagonal(),t=Yu,e=n.projection;return n.projection=function(n){return arguments.length?e(Zu(t=n)):t},n},ao.svg.symbol=function(){function n(n,r){return(Ul.get(t.call(this,n,r))||$u)(e.call(this,n,r))}var t=Xu,e=Vu;return n.type=function(e){return arguments.length?(t=En(e),n):t},n.size=function(t){return arguments.length?(e=En(t),n):e},n};var Ul=ao.map({circle:$u,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Fl)),e=t*Fl;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/jl),e=t*jl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ao.svg.symbolTypes=Ul.keys();var jl=Math.sqrt(3),Fl=Math.tan(30*Yo);Co.transition=function(n){for(var t,e,r=Hl||++Zl,i=Ku(n),u=[],o=Ol||{time:Date.now(),ease:Nr,delay:0,duration:250},a=-1,l=this.length;++a<l;){u.push(t=[]);for(var c=this[a],f=-1,s=c.length;++f<s;)(e=c[f])&&Qu(e,f,i,r,o),t.push(e)}return Wu(u,i,r)},Co.interrupt=function(n){return this.each(null==n?Il:Bu(Ku(n)))};var Hl,Ol,Il=Bu(Ku()),Yl=[],Zl=0;Yl.call=Co.call,Yl.empty=Co.empty,Yl.node=Co.node,Yl.size=Co.size,ao.transition=function(n,t){return n&&n.transition?Hl?n.transition(t):n:ao.selection().transition(n)},ao.transition.prototype=Yl,Yl.select=function(n){var t,e,r,i=this.id,u=this.namespace,o=[];n=A(n);for(var a=-1,l=this.length;++a<l;){o.push(t=[]);for(var c=this[a],f=-1,s=c.length;++f<s;)(r=c[f])&&(e=n.call(r,r.__data__,f,a))?("__data__"in r&&(e.__data__=r.__data__),Qu(e,f,u,i,r[u][i]),t.push(e)):t.push(null)}return Wu(o,u,i)},Yl.selectAll=function(n){var t,e,r,i,u,o=this.id,a=this.namespace,l=[];n=C(n);for(var c=-1,f=this.length;++c<f;)for(var s=this[c],h=-1,p=s.length;++h<p;)if(r=s[h]){u=r[a][o],e=n.call(r,r.__data__,h,c),l.push(t=[]);for(var g=-1,v=e.length;++g<v;)(i=e[g])&&Qu(i,g,a,o,u),t.push(i)}return Wu(l,a,o)},Yl.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=O(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]);for(var e=this[u],a=0,l=e.length;a<l;a++)(r=e[a])&&n.call(r,r.__data__,a,u)&&t.push(r)}return Wu(i,this.namespace,this.id)},Yl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(i){i[r][e].tween.set(n,t)})},Yl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function u(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?$r:Mr,a=ao.ns.qualify(n);return Ju(this,"attr."+n,t,a.local?u:i)},Yl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(i));return r&&function(n){this.setAttribute(i,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(i.space,i.local));return r&&function(n){this.setAttributeNS(i.space,i.local,r(n))}}var i=ao.ns.qualify(n);return this.tween("attr."+n,i.local?r:e)},Yl.style=function(n,e,r){function i(){this.style.removeProperty(n)}function u(e){return null==e?i:(e+="",function(){var i,u=t(this).getComputedStyle(this,null).getPropertyValue(n);return u!==e&&(i=Mr(u,e),function(t){this.style.setProperty(n,i(t),r)})})}var o=arguments.length;if(o<3){if("string"!=typeof n){o<2&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Ju(this,"style."+n,e,u)},Yl.styleTween=function(n,e,r){function i(i,u){var o=e.call(this,i,u,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,i)},Yl.text=function(n){return Ju(this,"text",n,Gu)},Yl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Yl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ao.ease.apply(ao,arguments)),Y(this,function(r){r[e][t].ease=n}))},Yl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,i,u){r[e][t].delay=+n.call(r,r.__data__,i,u)}:(n=+n,function(r){r[e][t].delay=n}))},Yl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,i,u){r[e][t].duration=Math.max(1,n.call(r,r.__data__,i,u))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Yl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var i=Ol,u=Hl;try{Hl=e,Y(this,function(t,i,u){Ol=t[r][e],n.call(t,t.__data__,i,u)})}finally{Ol=i,Hl=u}}else Y(this,function(i){var u=i[r][e];(u.event||(u.event=ao.dispatch("start","end","interrupt"))).on(n,t)});return this},Yl.transition=function(){for(var n,t,e,r,i=this.id,u=++Zl,o=this.namespace,a=[],l=0,c=this.length;l<c;l++){a.push(n=[]);for(var t=this[l],f=0,s=t.length;f<s;f++)(e=t[f])&&(r=e[o][i],Qu(e,f,o,u,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Wu(a,o,u)},ao.svg.axis=function(){function n(n){n.each(function(){var n,c=ao.select(this),f=this.__chart__||e,s=this.__chart__=e.copy(),h=null==l?s.ticks?s.ticks.apply(s,a):s.domain():l,p=null==t?s.tickFormat?s.tickFormat.apply(s,a):m:t,g=c.selectAll(".tick").data(h,s),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Uo),d=ao.transition(g.exit()).style("opacity",Uo).remove(),y=ao.transition(g.order()).style("opacity",1),M=Math.max(i,0)+o,x=Zi(s),b=c.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ao.transition(b));v.append("line"),v.append("text");var w,S,k,N,E=v.select("line"),A=y.select("line"),C=g.select("text").text(p),z=v.select("text"),L=y.select("text"),q="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=no,w="x",k="y",S="x2",N="y2",C.attr("dy",q<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+q*u+"V0H"+x[1]+"V"+q*u)):(n=to,w="y",k="x",S="y2",N="x2",C.attr("dy",".32em").style("text-anchor",q<0?"end":"start"),_.attr("d","M"+q*u+","+x[0]+"H0V"+x[1]+"H"+q*u)),E.attr(N,q*i),z.attr(k,q*M),A.attr(S,0).attr(N,q*i),L.attr(w,0).attr(k,q*M),s.rangeBand){var T=s,R=T.rangeBand()/2;f=s=function(n){return T(n)+R}}else f.rangeBand?f=s:d.call(n,s,f);v.call(n,f,s),y.call(n,s,s)})}var t,e=ao.scale.linear(),r=Vl,i=6,u=6,o=3,a=[10],l=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Xl?t+"":Vl,n):r},n.ticks=function(){return arguments.length?(a=co(arguments),n):a},n.tickValues=function(t){return arguments.length?(l=t,n):l},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(i=+t,u=+arguments[e-1],n):i},n.innerTickSize=function(t){return arguments.length?(i=+t,n):i},n.outerTickSize=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Vl="bottom",Xl={top:1,right:1,bottom:1,left:1};ao.svg.brush=function(){function n(t){t.each(function(){var t=ao.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,m);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return $l[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var l,s=ao.transition(t),h=ao.transition(o);c&&(l=Zi(c),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(s)),f&&(l=Zi(f),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(s)),e(s)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+s[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",s[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function i(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function u(){function u(){32==ao.event.keyCode&&(C||(M=null,L[0]-=s[1],L[1]-=h[1],C=2),S())}function v(){32==ao.event.keyCode&&2==C&&(L[0]+=s[1],L[1]+=h[1],C=0,S())}function d(){var n=ao.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ao.event.altKey?(M||(M=[(s[0]+s[1])/2,(h[0]+h[1])/2]),L[0]=s[+(n[0]<M[0])],L[1]=h[+(n[1]<M[1])]):M=null),E&&y(n,c,0)&&(r(k),t=!0),A&&y(n,f,1)&&(i(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function y(n,t,e){var r,i,u=Zi(t),l=u[0],c=u[1],f=L[e],v=e?h:s,d=v[1]-v[0];if(C&&(l-=f,c-=d+f),r=(e?g:p)?Math.max(l,Math.min(c,n[e])):n[e],C?i=(r+=f)+d:(M&&(f=Math.max(l,Math.min(c,2*M[e]-r))),f<r?(i=r,r=f):i=f),v[0]!=r||v[1]!=i)return e?a=null:o=null,v[0]=r,v[1]=i,!0}function m(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ao.select("body").style("cursor",null),q.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ao.select(ao.event.target),w=l.of(b,arguments),k=ao.select(b),N=_.datum(),E=!/^(n|s)$/.test(N)&&c,A=!/^(e|w)$/.test(N)&&f,C=_.classed("extent"),z=W(b),L=ao.mouse(b),q=ao.select(t(b)).on("keydown.brush",u).on("keyup.brush",v);if(ao.event.changedTouches?q.on("touchmove.brush",d).on("touchend.brush",m):q.on("mousemove.brush",d).on("mouseup.brush",m),k.interrupt().selectAll("*").interrupt(),C)L[0]=s[0]-L[0],L[1]=h[0]-L[1];else if(N){var T=+/w$/.test(N),R=+/^n/.test(N);x=[s[1-T]-L[0],h[1-R]-L[1]],L[0]=s[T],L[1]=h[R]}else ao.event.altKey&&(M=L.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ao.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,l=N(n,"brushstart","brush","brushend"),c=null,f=null,s=[0,0],h=[0,0],p=!0,g=!0,v=Bl[0];return n.event=function(n){n.each(function(){var n=l.of(this,arguments),t={x:s,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Hl?ao.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,s=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=xr(s,t.x),r=xr(h,t.y);return o=a=null,function(i){s=t.x=e(i),h=t.y=r(i),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,v=Bl[!c<<1|!f],n):c},n.y=function(t){return arguments.length?(f=t,v=Bl[!c<<1|!f],n):f},n.clamp=function(t){return arguments.length?(c&&f?(p=!!t[0],g=!!t[1]):c?p=!!t:f&&(g=!!t),n):c&&f?[p,g]:c?p:f?g:null},n.extent=function(t){var e,r,i,u,l;return arguments.length?(c&&(e=t[0],r=t[1],f&&(e=e[0],r=r[0]),o=[e,r],c.invert&&(e=c(e),r=c(r)),r<e&&(l=e,e=r,r=l),e==s[0]&&r==s[1]||(s=[e,r])),f&&(i=t[0],u=t[1],c&&(i=i[1],u=u[1]),a=[i,u],f.invert&&(i=f(i),u=f(u)),u<i&&(l=i,i=u,u=l),i==h[0]&&u==h[1]||(h=[i,u])),n):(c&&(o?(e=o[0],r=o[1]):(e=s[0],r=s[1],c.invert&&(e=c.invert(e),r=c.invert(r)),r<e&&(l=e,e=r,r=l))),f&&(a?(i=a[0],u=a[1]):(i=h[0],u=h[1],f.invert&&(i=f.invert(i),u=f.invert(u)),u<i&&(l=i,i=u,u=l))),c&&f?[[e,i],[r,u]]:c?[e,r]:f&&[i,u])},n.clear=function(){return n.empty()||(s=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!c&&s[0]==s[1]||!!f&&h[0]==h[1]},ao.rebind(n,l,"on")};var $l={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wl=ga.format=xa.timeFormat,Jl=Wl.utc,Gl=Jl("%Y-%m-%dT%H:%M:%S.%LZ");Wl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?eo:Gl,eo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},eo.toString=Gl.toString,ga.second=On(function(n){return new va(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ga.seconds=ga.second.range,ga.seconds.utc=ga.second.utc.range,ga.minute=On(function(n){return new va(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ga.minutes=ga.minute.range,ga.minutes.utc=ga.minute.utc.range,ga.hour=On(function(n){var t=n.getTimezoneOffset()/60;return new va(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ga.hours=ga.hour.range,ga.hours.utc=ga.hour.utc.range,ga.month=On(function(n){return n=ga.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ga.months=ga.month.range,ga.months.utc=ga.month.utc.range;var Kl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ql=[[ga.second,1],[ga.second,5],[ga.second,15],[ga.second,30],[ga.minute,1],[ga.minute,5],[ga.minute,15],[ga.minute,30],[ga.hour,1],[ga.hour,3],[ga.hour,6],[ga.hour,12],[ga.day,1],[ga.day,2],[ga.week,1],[ga.month,1],[ga.month,3],[ga.year,1]],nc=Wl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",zt]]),tc={range:function(n,t,e){return ao.range(Math.ceil(n/e)*e,+t,e).map(io)},floor:m,ceil:m};Ql.year=ga.year,ga.scale=function(){return ro(ao.scale.linear(),Ql,nc)};var ec=Ql.map(function(n){return[n[0].utc,n[1]]}),rc=Jl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",zt]]);ec.year=ga.year.utc,ga.scale.utc=function(){return ro(ao.scale.linear(),ec,rc)},ao.text=An(function(n){return n.responseText}),ao.json=function(n,t){return Cn(n,"application/json",uo,t)},ao.html=function(n,t){return Cn(n,"text/html",oo,t)},ao.xml=An(function(n){return n.responseXML}),"function"==typeof define&&define.amd?(this.d3=ao,define(ao)):"object"==typeof module&&module.exports?module.exports=ao:this.d3=ao}();
!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n,e,e.document)}:t(jQuery,window,document)}(function(t,e,n,a){"use strict";function r(e){var n,a,o="a aa ai ao as b fn i m o s ",i={};t.each(e,function(t,l){n=t.match(/^([^A-Z]+?)([A-Z])/),n&&o.indexOf(n[1]+" ")!==-1&&(a=t.replace(n[0],n[2].toLowerCase()),i[a]=t,"o"===n[1]&&r(e[t]))}),e._hungarianMap=i}function o(e,n,i){e._hungarianMap||r(e);var l;t.each(n,function(r,s){l=e._hungarianMap[r],l===a||!i&&n[l]!==a||("o"===l.charAt(0)?(n[l]||(n[l]={}),t.extend(!0,n[l],n[r]),o(e[l],n[l],i)):n[l]=n[r])})}function i(t){var e=$t.defaults.oLanguage,n=e.sDecimal;if(n&&Ut(n),t){var a=t.sZeroRecords;!t.sEmptyTable&&a&&"No data available in table"===e.sEmptyTable&&jt(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&a&&"Loading..."===e.sLoadingRecords&&jt(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands);var r=t.sDecimal;r&&n!==r&&Ut(r)}}function l(t){pe(t,"ordering","bSort"),pe(t,"orderMulti","bSortMulti"),pe(t,"orderClasses","bSortClasses"),pe(t,"orderCellsTop","bSortCellsTop"),pe(t,"order","aaSorting"),pe(t,"orderFixed","aaSortingFixed"),pe(t,"paging","bPaginate"),pe(t,"pagingType","sPaginationType"),pe(t,"pageLength","iDisplayLength"),pe(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":"");var e=t.aoSearchCols;if(e)for(var n=0,a=e.length;n<a;n++)e[n]&&o($t.models.oSearch,e[n])}function s(e){pe(e,"orderable","bSortable"),pe(e,"orderData","aDataSort"),pe(e,"orderSequence","asSorting"),pe(e,"orderDataType","sortDataType");var n=e.aDataSort;"number"!=typeof n||t.isArray(n)||(e.aDataSort=[n])}function u(n){if(!$t.__browser){var a={};$t.__browser=a;var r=t("<div/>").css({position:"fixed",top:0,left:t(e).scrollLeft()*-1,height:1,width:1,overflow:"hidden"}).append(t("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(t("<div/>").css({width:"100%",height:10}))).appendTo("body"),o=r.children(),i=o.children();a.barWidth=o[0].offsetWidth-o[0].clientWidth,a.bScrollOversize=100===i[0].offsetWidth&&100!==o[0].clientWidth,a.bScrollbarLeft=1!==Math.round(i.offset().left),a.bBounding=!!r[0].getBoundingClientRect().width,r.remove()}t.extend(n.oBrowser,$t.__browser),n.oScroll.iBarWidth=$t.__browser.barWidth}function c(t,e,n,r,o,i){var l,s=r,u=!1;for(n!==a&&(l=n,u=!0);s!==o;)t.hasOwnProperty(s)&&(l=u?e(l,t[s],s,t):t[s],u=!0,s+=i);return l}function f(e,a){var r=$t.defaults.column,o=e.aoColumns.length,i=t.extend({},$t.models.oColumn,r,{nTh:a?a:n.createElement("th"),sTitle:r.sTitle?r.sTitle:a?a.innerHTML:"",aDataSort:r.aDataSort?r.aDataSort:[o],mData:r.mData?r.mData:o,idx:o});e.aoColumns.push(i);var l=e.aoPreSearchCols;l[o]=t.extend({},$t.models.oSearch,l[o]),d(e,o,t(a).data())}function d(e,n,r){var i=e.aoColumns[n],l=e.oClasses,u=t(i.nTh);if(!i.sWidthOrig){i.sWidthOrig=u.attr("width")||null;var c=(u.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(i.sWidthOrig=c[1])}r!==a&&null!==r&&(s(r),o($t.defaults.column,r),r.mDataProp===a||r.mData||(r.mData=r.mDataProp),r.sType&&(i._sManualType=r.sType),r.className&&!r.sClass&&(r.sClass=r.className),r.sClass&&u.addClass(r.sClass),t.extend(i,r),jt(i,r,"sWidth","sWidthOrig"),r.iDataSort!==a&&(i.aDataSort=[r.iDataSort]),jt(i,r,"aDataSort"));var f=i.mData,d=I(f),h=i.mRender?I(i.mRender):null,p=function(t){return"string"==typeof t&&t.indexOf("@")!==-1};i._bAttrSrc=t.isPlainObject(f)&&(p(f.sort)||p(f.type)||p(f.filter)),i._setter=null,i.fnGetData=function(t,e,n){var r=d(t,e,a,n);return h&&e?h(r,e,t,n):r},i.fnSetData=function(t,e,n){return A(f)(t,e,n)},"number"!=typeof f&&(e._rowReadObject=!0),e.oFeatures.bSort||(i.bSortable=!1,u.addClass(l.sSortableNone));var g=t.inArray("asc",i.asSorting)!==-1,b=t.inArray("desc",i.asSorting)!==-1;i.bSortable&&(g||b)?g&&!b?(i.sSortingClass=l.sSortableAsc,i.sSortingClassJUI=l.sSortJUIAscAllowed):!g&&b?(i.sSortingClass=l.sSortableDesc,i.sSortingClassJUI=l.sSortJUIDescAllowed):(i.sSortingClass=l.sSortable,i.sSortingClassJUI=l.sSortJUI):(i.sSortingClass=l.sSortableNone,i.sSortingClassJUI="")}function h(t){if(t.oFeatures.bAutoWidth!==!1){var e=t.aoColumns;vt(t);for(var n=0,a=e.length;n<a;n++)e[n].nTh.style.width=e[n].sWidth}var r=t.oScroll;""===r.sY&&""===r.sX||gt(t),kt(t,null,"column-sizing",[t])}function p(t,e){var n=v(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function g(e,n){var a=v(e,"bVisible"),r=t.inArray(n,a);return r!==-1?r:null}function b(e){var n=0;return t.each(e.aoColumns,function(e,a){a.bVisible&&"none"!==t(a.nTh).css("display")&&n++}),n}function v(e,n){var a=[];return t.map(e.aoColumns,function(t,e){t[n]&&a.push(e)}),a}function S(t){var e,n,r,o,i,l,s,u,c,f=t.aoColumns,d=t.aoData,h=$t.ext.type.detect;for(e=0,n=f.length;e<n;e++)if(s=f[e],c=[],!s.sType&&s._sManualType)s.sType=s._sManualType;else if(!s.sType){for(r=0,o=h.length;r<o;r++){for(i=0,l=d.length;i<l&&(c[i]===a&&(c[i]=T(t,i,e,"type")),u=h[r](c[i],t),u||r===h.length-1)&&"html"!==u;i++);if(u){s.sType=u;break}}s.sType||(s.sType="string")}}function m(e,n,r,o){var i,l,s,u,c,d,h,p=e.aoColumns;if(n)for(i=n.length-1;i>=0;i--){h=n[i];var g=h.targets!==a?h.targets:h.aTargets;for(t.isArray(g)||(g=[g]),s=0,u=g.length;s<u;s++)if("number"==typeof g[s]&&g[s]>=0){for(;p.length<=g[s];)f(e);o(g[s],h)}else if("number"==typeof g[s]&&g[s]<0)o(p.length+g[s],h);else if("string"==typeof g[s])for(c=0,d=p.length;c<d;c++)("_all"==g[s]||t(p[c].nTh).hasClass(g[s]))&&o(c,h)}if(r)for(i=0,l=r.length;i<l;i++)o(i,r[i])}function D(e,n,r,o){var i=e.aoData.length,l=t.extend(!0,{},$t.models.oRow,{src:r?"dom":"data",idx:i});l._aData=n,e.aoData.push(l);for(var s=e.aoColumns,u=0,c=s.length;u<c;u++)s[u].sType=null;e.aiDisplayMaster.push(i);var f=e.rowIdFn(n);return f!==a&&(e.aIds[f]=l),!r&&e.oFeatures.bDeferRender||N(e,i,r,o),i}function y(e,n){var a;return n instanceof t||(n=t(n)),n.map(function(t,n){return a=j(e,n),D(e,a.data,n,a.cells)})}function _(t,e){return e._DT_RowIndex!==a?e._DT_RowIndex:null}function C(e,n,a){return t.inArray(a,e.aoData[n].anCells)}function T(t,e,n,r){var o=t.iDraw,i=t.aoColumns[n],l=t.aoData[e]._aData,s=i.sDefaultContent,u=i.fnGetData(l,r,{settings:t,row:e,col:n});if(u===a)return t.iDrawError!=o&&null===s&&(Pt(t,0,"Requested unknown parameter "+("function"==typeof i.mData?"{function}":"'"+i.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=o),s;if(u!==l&&null!==u||null===s||r===a){if("function"==typeof u)return u.call(l)}else u=s;return null===u&&"display"==r?"":u}function w(t,e,n,a){var r=t.aoColumns[n],o=t.aoData[e]._aData;r.fnSetData(o,a,{settings:t,row:e,col:n})}function x(e){return t.map(e.match(/(\\.|[^\.])+/g)||[""],function(t){return t.replace(/\\\./g,".")})}function I(e){if(t.isPlainObject(e)){var n={};return t.each(e,function(t,e){e&&(n[t]=I(e))}),function(t,e,r,o){var i=n[e]||n._;return i!==a?i(t,e,r,o):t}}if(null===e)return function(t){return t};if("function"==typeof e)return function(t,n,a,r){return e(t,n,a,r)};if("string"!=typeof e||e.indexOf(".")===-1&&e.indexOf("[")===-1&&e.indexOf("(")===-1)return function(t,n){return t[e]};var r=function(e,n,o){var i,l,s,u;if(""!==o)for(var c=x(o),f=0,d=c.length;f<d;f++){if(i=c[f].match(ge),l=c[f].match(be),i){if(c[f]=c[f].replace(ge,""),""!==c[f]&&(e=e[c[f]]),s=[],c.splice(0,f+1),u=c.join("."),t.isArray(e))for(var h=0,p=e.length;h<p;h++)s.push(r(e[h],n,u));var g=i[0].substring(1,i[0].length-1);e=""===g?s:s.join(g);break}if(l)c[f]=c[f].replace(be,""),e=e[c[f]]();else{if(null===e||e[c[f]]===a)return a;e=e[c[f]]}}return e};return function(t,n){return r(t,n,e)}}function A(e){if(t.isPlainObject(e))return A(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,a){e(t,"set",n,a)};if("string"!=typeof e||e.indexOf(".")===-1&&e.indexOf("[")===-1&&e.indexOf("(")===-1)return function(t,n){t[e]=n};var n=function(e,r,o){for(var i,l,s,u,c,f=x(o),d=f[f.length-1],h=0,p=f.length-1;h<p;h++){if(l=f[h].match(ge),s=f[h].match(be),l){if(f[h]=f[h].replace(ge,""),e[f[h]]=[],i=f.slice(),i.splice(0,h+1),c=i.join("."),t.isArray(r))for(var g=0,b=r.length;g<b;g++)u={},n(u,r[g],c),e[f[h]].push(u);else e[f[h]]=r;return}s&&(f[h]=f[h].replace(be,""),e=e[f[h]](r)),null!==e[f[h]]&&e[f[h]]!==a||(e[f[h]]={}),e=e[f[h]]}d.match(be)?e=e[d.replace(be,"")](r):e[d.replace(ge,"")]=r};return function(t,a){return n(t,a,e)}}function F(t){return le(t.aoData,"_aData")}function L(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function R(t,e,n){for(var r=-1,o=0,i=t.length;o<i;o++)t[o]==e?r=o:t[o]>e&&t[o]--;r!=-1&&n===a&&t.splice(r,1)}function P(t,e,n,r){var o,i,l=t.aoData[e],s=function(n,a){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=T(t,e,a,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==l.src)){var u=l.anCells;if(u)if(r!==a)s(u[r],r);else for(o=0,i=u.length;o<i;o++)s(u[o],o)}else l._aData=j(t,l,r,r===a?a:l._aData).data;l._aSortData=null,l._aFilterData=null;var c=t.aoColumns;if(r!==a)c[r].sType=null;else{for(o=0,i=c.length;o<i;o++)c[o].sType=null;H(t,l)}}function j(e,n,r,o){var i,l,s,u=[],c=n.firstChild,f=0,d=e.aoColumns,h=e._rowReadObject;o=o!==a?o:h?{}:[];var p=function(t,e){if("string"==typeof t){var n=t.indexOf("@");if(n!==-1){var a=t.substring(n+1),r=A(t);r(o,e.getAttribute(a))}}},g=function(e){if(r===a||r===f)if(l=d[f],s=t.trim(e.innerHTML),l&&l._bAttrSrc){var n=A(l.mData._);n(o,s),p(l.mData.sort,e),p(l.mData.type,e),p(l.mData.filter,e)}else h?(l._setter||(l._setter=A(l.mData)),l._setter(o,s)):o[f]=s;f++};if(c)for(;c;)i=c.nodeName.toUpperCase(),"TD"!=i&&"TH"!=i||(g(c),u.push(c)),c=c.nextSibling;else{u=n.anCells;for(var b=0,v=u.length;b<v;b++)g(u[b])}var S=n.firstChild?n:n.nTr;if(S){var m=S.getAttribute("id");m&&A(e.rowId)(o,m)}return{data:o,cells:u}}function N(e,a,r,o){var i,l,s,u,c,f=e.aoData[a],d=f._aData,h=[];if(null===f.nTr){for(i=r||n.createElement("tr"),f.nTr=i,f.anCells=h,i._DT_RowIndex=a,H(e,f),u=0,c=e.aoColumns.length;u<c;u++)s=e.aoColumns[u],l=r?o[u]:n.createElement(s.sCellType),l._DT_CellIndex={row:a,column:u},h.push(l),r&&!s.mRender&&s.mData===u||t.isPlainObject(s.mData)&&s.mData._===u+".display"||(l.innerHTML=T(e,a,u,"display")),s.sClass&&(l.className+=" "+s.sClass),s.bVisible&&!r?i.appendChild(l):!s.bVisible&&r&&l.parentNode.removeChild(l),s.fnCreatedCell&&s.fnCreatedCell.call(e.oInstance,l,T(e,a,u),d,a,u);kt(e,"aoRowCreatedCallback",null,[i,d,a,h])}f.nTr.setAttribute("role","row")}function H(e,n){var a=n.nTr,r=n._aData;if(a){var o=e.rowIdFn(r);if(o&&(a.id=o),r.DT_RowClass){var i=r.DT_RowClass.split(" ");n.__rowc=n.__rowc?he(n.__rowc.concat(i)):i,t(a).removeClass(n.__rowc.join(" ")).addClass(r.DT_RowClass)}r.DT_RowAttr&&t(a).attr(r.DT_RowAttr),r.DT_RowData&&t(a).data(r.DT_RowData)}}function O(e){var n,a,r,o,i,l=e.nTHead,s=e.nTFoot,u=0===t("th, td",l).length,c=e.oClasses,f=e.aoColumns;for(u&&(o=t("<tr/>").appendTo(l)),n=0,a=f.length;n<a;n++)i=f[n],r=t(i.nTh).addClass(i.sClass),u&&r.appendTo(o),e.oFeatures.bSort&&(r.addClass(i.sSortingClass),i.bSortable!==!1&&(r.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),xt(e,i.nTh,n))),i.sTitle!=r[0].innerHTML&&r.html(i.sTitle),Wt(e,"header")(e,r,i,c);if(u&&B(e.aoHeader,l),t(l).find(">tr").attr("role","row"),t(l).find(">tr>th, >tr>td").addClass(c.sHeaderTH),t(s).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==s){var d=e.aoFooter[0];for(n=0,a=d.length;n<a;n++)i=f[n],i.nTf=d[n].cell,i.sClass&&t(i.nTf).addClass(i.sClass)}}function k(e,n,r){var o,i,l,s,u,c,f,d,h,p=[],g=[],b=e.aoColumns.length;if(n){for(r===a&&(r=!1),o=0,i=n.length;o<i;o++){for(p[o]=n[o].slice(),p[o].nTr=n[o].nTr,l=b-1;l>=0;l--)e.aoColumns[l].bVisible||r||p[o].splice(l,1);g.push([])}for(o=0,i=p.length;o<i;o++){if(f=p[o].nTr)for(;c=f.firstChild;)f.removeChild(c);for(l=0,s=p[o].length;l<s;l++)if(d=1,h=1,g[o][l]===a){for(f.appendChild(p[o][l].cell),g[o][l]=1;p[o+d]!==a&&p[o][l].cell==p[o+d][l].cell;)g[o+d][l]=1,d++;for(;p[o][l+h]!==a&&p[o][l].cell==p[o][l+h].cell;){for(u=0;u<d;u++)g[o+u][l+h]=1;h++}t(p[o][l].cell).attr("rowspan",d).attr("colspan",h)}}}}function M(e){var n=kt(e,"aoPreDrawCallback","preDraw",[e]);if(t.inArray(!1,n)!==-1)return void ht(e,!1);var r=[],o=0,i=e.asStripeClasses,l=i.length,s=(e.aoOpenRows.length,e.oLanguage),u=e.iInitDisplayStart,c="ssp"==Et(e),f=e.aiDisplay;e.bDrawing=!0,u!==a&&u!==-1&&(e._iDisplayStart=c?u:u>=e.fnRecordsDisplay()?0:u,e.iInitDisplayStart=-1);var d=e._iDisplayStart,h=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,ht(e,!1);else if(c){if(!e.bDestroying&&!X(e))return}else e.iDraw++;if(0!==f.length)for(var p=c?0:d,g=c?e.aoData.length:h,v=p;v<g;v++){var S=f[v],m=e.aoData[S];null===m.nTr&&N(e,S);var D=m.nTr;if(0!==l){var y=i[o%l];m._sRowStripe!=y&&(t(D).removeClass(m._sRowStripe).addClass(y),m._sRowStripe=y)}kt(e,"aoRowCallback",null,[D,m._aData,o,v,S]),r.push(D),o++}else{var _=s.sZeroRecords;1==e.iDraw&&"ajax"==Et(e)?_=s.sLoadingRecords:s.sEmptyTable&&0===e.fnRecordsTotal()&&(_=s.sEmptyTable),r[0]=t("<tr/>",{"class":l?i[0]:""}).append(t("<td />",{valign:"top",colSpan:b(e),"class":e.oClasses.sRowEmpty}).html(_))[0]}kt(e,"aoHeaderCallback","header",[t(e.nTHead).children("tr")[0],F(e),d,h,f]),kt(e,"aoFooterCallback","footer",[t(e.nTFoot).children("tr")[0],F(e),d,h,f]);var C=t(e.nTBody);C.children().detach(),C.append(t(r)),kt(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}function W(t,e){var n=t.oFeatures,a=n.bSort,r=n.bFilter;a&&Ct(t),r?z(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),e!==!0&&(t._iDisplayStart=0),t._drawHold=e,M(t),t._drawHold=!1}function E(e){var n=e.oClasses,a=t(e.nTable),r=t("<div/>").insertBefore(a),o=e.oFeatures,i=t("<div/>",{id:e.sTableId+"_wrapper","class":n.sWrapper+(e.nTFoot?"":" "+n.sNoFooter)});e.nHolding=r[0],e.nTableWrapper=i[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var l,s,u,c,f,d,h=e.sDom.split(""),p=0;p<h.length;p++){if(l=null,s=h[p],"<"==s){if(u=t("<div/>")[0],c=h[p+1],"'"==c||'"'==c){for(f="",d=2;h[p+d]!=c;)f+=h[p+d],d++;if("H"==f?f=n.sJUIHeader:"F"==f&&(f=n.sJUIFooter),f.indexOf(".")!=-1){var g=f.split(".");u.id=g[0].substr(1,g[0].length-1),u.className=g[1]}else"#"==f.charAt(0)?u.id=f.substr(1,f.length-1):u.className=f;p+=d}i.append(u),i=t(u)}else if(">"==s)i=i.parent();else if("l"==s&&o.bPaginate&&o.bLengthChange)l=ut(e);else if("f"==s&&o.bFilter)l=$(e);else if("r"==s&&o.bProcessing)l=dt(e);else if("t"==s)l=pt(e);else if("i"==s&&o.bInfo)l=at(e);else if("p"==s&&o.bPaginate)l=ct(e);else if(0!==$t.ext.feature.length)for(var b=$t.ext.feature,v=0,S=b.length;v<S;v++)if(s==b[v].cFeature){l=b[v].fnInit(e);break}if(l){var m=e.aanFeatures;m[s]||(m[s]=[]),m[s].push(l),i.append(l)}}r.replaceWith(i),e.nHolding=null}function B(e,n){var a,r,o,i,l,s,u,c,f,d,h,p=t(n).children("tr"),g=function(t,e,n){for(var a=t[e];a[n];)n++;return n};for(e.splice(0,e.length),o=0,s=p.length;o<s;o++)e.push([]);for(o=0,s=p.length;o<s;o++)for(a=p[o],c=0,r=a.firstChild;r;){if("TD"==r.nodeName.toUpperCase()||"TH"==r.nodeName.toUpperCase())for(f=1*r.getAttribute("colspan"),d=1*r.getAttribute("rowspan"),f=f&&0!==f&&1!==f?f:1,d=d&&0!==d&&1!==d?d:1,u=g(e,o,c),h=1===f,l=0;l<f;l++)for(i=0;i<d;i++)e[o+i][u+l]={cell:r,unique:h},e[o+i].nTr=a;r=r.nextSibling}}function U(t,e,n){var a=[];n||(n=t.aoHeader,e&&(n=[],B(n,e)));for(var r=0,o=n.length;r<o;r++)for(var i=0,l=n[r].length;i<l;i++)!n[r][i].unique||a[i]&&t.bSortCellsTop||(a[i]=n[r][i].cell);return a}function V(e,n,a){if(kt(e,"aoServerParams","serverParams",[n]),n&&t.isArray(n)){var r={},o=/(.*?)\[\]$/;t.each(n,function(t,e){var n=e.name.match(o);if(n){var a=n[0];r[a]||(r[a]=[]),r[a].push(e.value)}else r[e.name]=e.value}),n=r}var i,l=e.ajax,s=e.oInstance,u=function(t){kt(e,null,"xhr",[e,t,e.jqXHR]),a(t)};if(t.isPlainObject(l)&&l.data){i=l.data;var c="function"==typeof i?i(n,e):i;n="function"==typeof i&&c?c:t.extend(!0,n,c),delete l.data}var f={data:n,success:function(t){var n=t.error||t.sError;n&&Pt(e,0,n),e.json=t,u(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(n,a,r){var o=kt(e,null,"xhr",[e,null,e.jqXHR]);t.inArray(!0,o)===-1&&("parsererror"==a?Pt(e,0,"Invalid JSON response",1):4===n.readyState&&Pt(e,0,"Ajax error",7)),ht(e,!1)}};e.oAjaxData=n,kt(e,null,"preXhr",[e,n]),e.fnServerData?e.fnServerData.call(s,e.sAjaxSource,t.map(n,function(t,e){return{name:e,value:t}}),u,e):e.sAjaxSource||"string"==typeof l?e.jqXHR=t.ajax(t.extend(f,{url:l||e.sAjaxSource})):"function"==typeof l?e.jqXHR=l.call(s,n,u,e):(e.jqXHR=t.ajax(t.extend(f,l)),l.data=i)}function X(t){return!t.bAjaxDataGet||(t.iDraw++,ht(t,!0),V(t,J(t),function(e){q(t,e)}),!1)}function J(e){var n,a,r,o,i=e.aoColumns,l=i.length,s=e.oFeatures,u=e.oPreviousSearch,c=e.aoPreSearchCols,f=[],d=_t(e),h=e._iDisplayStart,p=s.bPaginate!==!1?e._iDisplayLength:-1,g=function(t,e){f.push({name:t,value:e})};g("sEcho",e.iDraw),g("iColumns",l),g("sColumns",le(i,"sName").join(",")),g("iDisplayStart",h),g("iDisplayLength",p);var b={draw:e.iDraw,columns:[],order:[],start:h,length:p,search:{value:u.sSearch,regex:u.bRegex}};for(n=0;n<l;n++)r=i[n],o=c[n],a="function"==typeof r.mData?"function":r.mData,b.columns.push({data:a,name:r.sName,searchable:r.bSearchable,orderable:r.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),g("mDataProp_"+n,a),s.bFilter&&(g("sSearch_"+n,o.sSearch),g("bRegex_"+n,o.bRegex),g("bSearchable_"+n,r.bSearchable)),s.bSort&&g("bSortable_"+n,r.bSortable);s.bFilter&&(g("sSearch",u.sSearch),g("bRegex",u.bRegex)),s.bSort&&(t.each(d,function(t,e){b.order.push({column:e.col,dir:e.dir}),g("iSortCol_"+t,e.col),g("sSortDir_"+t,e.dir)}),g("iSortingCols",d.length));var v=$t.ext.legacy.ajax;return null===v?e.sAjaxSource?f:b:v?f:b}function q(t,e){var n=function(t,n){return e[t]!==a?e[t]:e[n]},r=G(t,e),o=n("sEcho","draw"),i=n("iTotalRecords","recordsTotal"),l=n("iTotalDisplayRecords","recordsFiltered");if(o){if(1*o<t.iDraw)return;t.iDraw=1*o}L(t),t._iRecordsTotal=parseInt(i,10),t._iRecordsDisplay=parseInt(l,10);for(var s=0,u=r.length;s<u;s++)D(t,r[s]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,M(t),t._bInitComplete||lt(t,e),t.bAjaxDataGet=!0,ht(t,!1)}function G(e,n){var r=t.isPlainObject(e.ajax)&&e.ajax.dataSrc!==a?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===r?n.aaData||n[r]:""!==r?I(r)(n):n}function $(e){var a=e.oClasses,r=e.sTableId,o=e.oLanguage,i=e.oPreviousSearch,l=e.aanFeatures,s='<input type="search" class="'+a.sFilterInput+'"/>',u=o.sSearch;u=u.match(/_INPUT_/)?u.replace("_INPUT_",s):u+s;var c=t("<div/>",{id:l.f?null:r+"_filter","class":a.sFilter}).append(t("<label/>").append(u)),f=function(){var t=(l.f,this.value?this.value:"");t!=i.sSearch&&(z(e,{sSearch:t,bRegex:i.bRegex,bSmart:i.bSmart,bCaseInsensitive:i.bCaseInsensitive}),e._iDisplayStart=0,M(e))},d=null!==e.searchDelay?e.searchDelay:"ssp"===Et(e)?400:0,h=t("input",c).val(i.sSearch).attr("placeholder",o.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",d?ye(f,d):f).on("keypress.DT",function(t){if(13==t.keyCode)return!1}).attr("aria-controls",r);return t(e.nTable).on("search.dt.DT",function(t,a){if(e===a)try{h[0]!==n.activeElement&&h.val(i.sSearch)}catch(r){}}),c[0]}function z(t,e,n){var r=t.oPreviousSearch,o=t.aoPreSearchCols,i=function(t){r.sSearch=t.sSearch,r.bRegex=t.bRegex,r.bSmart=t.bSmart,r.bCaseInsensitive=t.bCaseInsensitive},l=function(t){return t.bEscapeRegex!==a?!t.bEscapeRegex:t.bRegex};if(S(t),"ssp"!=Et(t)){K(t,e.sSearch,n,l(e),e.bSmart,e.bCaseInsensitive),i(e);for(var s=0;s<o.length;s++)Z(t,o[s].sSearch,s,l(o[s]),o[s].bSmart,o[s].bCaseInsensitive);Y(t)}else i(e);t.bFiltered=!0,kt(t,null,"search",[t])}function Y(e){for(var n,a,r=$t.ext.search,o=e.aiDisplay,i=0,l=r.length;i<l;i++){for(var s=[],u=0,c=o.length;u<c;u++)a=o[u],n=e.aoData[a],r[i](e,n._aFilterData,a,n._aData,u)&&s.push(a);o.length=0,t.merge(o,s)}}function Z(t,e,n,a,r,o){if(""!==e){for(var i,l=[],s=t.aiDisplay,u=Q(e,a,r,o),c=0;c<s.length;c++)i=t.aoData[s[c]]._aFilterData[n],u.test(i)&&l.push(s[c]);t.aiDisplay=l}}function K(t,e,n,a,r,o){var i,l,s,u=Q(e,a,r,o),c=t.oPreviousSearch.sSearch,f=t.aiDisplayMaster,d=[];if(0!==$t.ext.search.length&&(n=!0),l=tt(t),e.length<=0)t.aiDisplay=f.slice();else{for((l||n||c.length>e.length||0!==e.indexOf(c)||t.bSorted)&&(t.aiDisplay=f.slice()),i=t.aiDisplay,s=0;s<i.length;s++)u.test(t.aoData[i[s]]._sFilterRow)&&d.push(i[s]);t.aiDisplay=d}}function Q(e,n,a,r){if(e=n?e:ve(e),a){var o=t.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(t){if('"'===t.charAt(0)){var e=t.match(/^"(.*)"$/);t=e?e[1]:t}return t.replace('"',"")});e="^(?=.*?"+o.join(")(?=.*?")+").*$"}return new RegExp(e,r?"i":"")}function tt(t){var e,n,a,r,o,i,l,s,u=t.aoColumns,c=$t.ext.type.search,f=!1;for(n=0,r=t.aoData.length;n<r;n++)if(s=t.aoData[n],!s._aFilterData){for(i=[],a=0,o=u.length;a<o;a++)e=u[a],e.bSearchable?(l=T(t,n,a,"filter"),c[e.sType]&&(l=c[e.sType](l)),null===l&&(l=""),"string"!=typeof l&&l.toString&&(l=l.toString())):l="",l.indexOf&&l.indexOf("&")!==-1&&(Se.innerHTML=l,l=me?Se.textContent:Se.innerText),l.replace&&(l=l.replace(/[\r\n]/g,"")),i.push(l);s._aFilterData=i,s._sFilterRow=i.join("  "),f=!0}return f}function et(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function nt(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function at(e){var n=e.sTableId,a=e.aanFeatures.i,r=t("<div/>",{"class":e.oClasses.sInfo,id:a?null:n+"_info"});return a||(e.aoDrawCallback.push({fn:rt,sName:"information"}),r.attr("role","status").attr("aria-live","polite"),t(e.nTable).attr("aria-describedby",n+"_info")),r[0]}function rt(e){var n=e.aanFeatures.i;if(0!==n.length){var a=e.oLanguage,r=e._iDisplayStart+1,o=e.fnDisplayEnd(),i=e.fnRecordsTotal(),l=e.fnRecordsDisplay(),s=l?a.sInfo:a.sInfoEmpty;l!==i&&(s+=" "+a.sInfoFiltered),s+=a.sInfoPostFix,s=ot(e,s);var u=a.fnInfoCallback;null!==u&&(s=u.call(e.oInstance,e,r,o,i,l,s)),t(n).html(s)}}function ot(t,e){var n=t.fnFormatNumber,a=t._iDisplayStart+1,r=t._iDisplayLength,o=t.fnRecordsDisplay(),i=r===-1;return e.replace(/_START_/g,n.call(t,a)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,o)).replace(/_PAGE_/g,n.call(t,i?1:Math.ceil(a/r))).replace(/_PAGES_/g,n.call(t,i?1:Math.ceil(o/r)))}function it(t){var e,n,a,r=t.iInitDisplayStart,o=t.aoColumns,i=t.oFeatures,l=t.bDeferLoading;if(!t.bInitialised)return void setTimeout(function(){it(t)},200);for(E(t),O(t),k(t,t.aoHeader),k(t,t.aoFooter),ht(t,!0),i.bAutoWidth&&vt(t),e=0,n=o.length;e<n;e++)a=o[e],a.sWidth&&(a.nTh.style.width=yt(a.sWidth));kt(t,null,"preInit",[t]),W(t);var s=Et(t);("ssp"!=s||l)&&("ajax"==s?V(t,[],function(n){var a=G(t,n);for(e=0;e<a.length;e++)D(t,a[e]);t.iInitDisplayStart=r,W(t),ht(t,!1),lt(t,n)},t):(ht(t,!1),lt(t)))}function lt(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&h(t),kt(t,null,"plugin-init",[t,e]),kt(t,"aoInitComplete","init",[t,e])}function st(t,e){var n=parseInt(e,10);t._iDisplayLength=n,Mt(t),kt(t,null,"length",[t,n])}function ut(e){for(var n=e.oClasses,a=e.sTableId,r=e.aLengthMenu,o=t.isArray(r[0]),i=o?r[0]:r,l=o?r[1]:r,s=t("<select/>",{name:a+"_length","aria-controls":a,"class":n.sLengthSelect}),u=0,c=i.length;u<c;u++)s[0][u]=new Option("number"==typeof l[u]?e.fnFormatNumber(l[u]):l[u],i[u]);var f=t("<div><label/></div>").addClass(n.sLength);return e.aanFeatures.l||(f[0].id=a+"_length"),f.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",s[0].outerHTML)),t("select",f).val(e._iDisplayLength).on("change.DT",function(n){st(e,t(this).val()),M(e)}),t(e.nTable).on("length.dt.DT",function(n,a,r){e===a&&t("select",f).val(r)}),f[0]}function ct(e){var n=e.sPaginationType,a=$t.ext.pager[n],r="function"==typeof a,o=function(t){M(t)},i=t("<div/>").addClass(e.oClasses.sPaging+n)[0],l=e.aanFeatures;return r||a.fnInit(e,i,o),l.p||(i.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(t){if(r){var e,n,i=t._iDisplayStart,s=t._iDisplayLength,u=t.fnRecordsDisplay(),c=s===-1,f=c?0:Math.ceil(i/s),d=c?1:Math.ceil(u/s),h=a(f,d);for(e=0,n=l.p.length;e<n;e++)Wt(t,"pageButton")(t,l.p[e],e,h,f,d)}else a.fnUpdate(t,o)},sName:"pagination"})),i}function ft(t,e,n){var a=t._iDisplayStart,r=t._iDisplayLength,o=t.fnRecordsDisplay();0===o||r===-1?a=0:"number"==typeof e?(a=e*r,a>o&&(a=0)):"first"==e?a=0:"previous"==e?(a=r>=0?a-r:0,a<0&&(a=0)):"next"==e?a+r<o&&(a+=r):"last"==e?a=Math.floor((o-1)/r)*r:Pt(t,0,"Unknown paging action: "+e,5);var i=t._iDisplayStart!==a;return t._iDisplayStart=a,i&&(kt(t,null,"page",[t]),n&&M(t)),i}function dt(e){return t("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing","class":e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function ht(e,n){e.oFeatures.bProcessing&&t(e.aanFeatures.r).css("display",n?"block":"none"),kt(e,null,"processing",[e,n])}function pt(e){var n=t(e.nTable);n.attr("role","grid");var a=e.oScroll;if(""===a.sX&&""===a.sY)return e.nTable;var r=a.sX,o=a.sY,i=e.oClasses,l=n.children("caption"),s=l.length?l[0]._captionSide:null,u=t(n[0].cloneNode(!1)),c=t(n[0].cloneNode(!1)),f=n.children("tfoot"),d="<div/>",h=function(t){return t?yt(t):null};f.length||(f=null);var p=t(d,{"class":i.sScrollWrapper}).append(t(d,{"class":i.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:r?h(r):"100%"}).append(t(d,{"class":i.sScrollHeadInner}).css({"box-sizing":"content-box",width:a.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append("top"===s?l:null).append(n.children("thead"))))).append(t(d,{"class":i.sScrollBody}).css({position:"relative",overflow:"auto",width:h(r)}).append(n));f&&p.append(t(d,{"class":i.sScrollFoot}).css({overflow:"hidden",border:0,width:r?h(r):"100%"}).append(t(d,{"class":i.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===s?l:null).append(n.children("tfoot")))));var g=p.children(),b=g[0],v=g[1],S=f?g[2]:null;return r&&t(v).on("scroll.DT",function(t){var e=this.scrollLeft;b.scrollLeft=e,f&&(S.scrollLeft=e)}),t(v).css(o&&a.bCollapse?"max-height":"height",o),e.nScrollHead=b,e.nScrollBody=v,e.nScrollFoot=S,e.aoDrawCallback.push({fn:gt,sName:"scrolling"}),p[0]}function gt(e){var n,r,o,i,l,s,u,c,f,d=e.oScroll,g=d.sX,b=d.sXInner,v=d.sY,S=d.iBarWidth,m=t(e.nScrollHead),D=m[0].style,y=m.children("div"),_=y[0].style,C=y.children("table"),T=e.nScrollBody,w=t(T),x=T.style,I=t(e.nScrollFoot),A=I.children("div"),F=A.children("table"),L=t(e.nTHead),R=t(e.nTable),P=R[0],j=P.style,N=e.nTFoot?t(e.nTFoot):null,H=e.oBrowser,O=H.bScrollOversize,k=le(e.aoColumns,"nTh"),M=[],W=[],E=[],B=[],V=function(t){var e=t.style;e.paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0},X=T.scrollHeight>T.clientHeight;if(e.scrollBarVis!==X&&e.scrollBarVis!==a)return e.scrollBarVis=X,void h(e);e.scrollBarVis=X,R.children("thead, tfoot").remove(),N&&(s=N.clone().prependTo(R),r=N.find("tr"),i=s.find("tr")),l=L.clone().prependTo(R),n=L.find("tr"),o=l.find("tr"),l.find("th, td").removeAttr("tabindex"),g||(x.width="100%",m[0].style.width="100%"),t.each(U(e,l),function(t,n){u=p(e,t),n.style.width=e.aoColumns[u].sWidth}),N&&bt(function(t){t.style.width=""},i),f=R.outerWidth(),""===g?(j.width="100%",O&&(R.find("tbody").height()>T.offsetHeight||"scroll"==w.css("overflow-y"))&&(j.width=yt(R.outerWidth()-S)),f=R.outerWidth()):""!==b&&(j.width=yt(b),f=R.outerWidth()),bt(V,o),bt(function(e){E.push(e.innerHTML),M.push(yt(t(e).css("width")))},o),bt(function(e,n){t.inArray(e,k)!==-1&&(e.style.width=M[n])},n),t(o).height(0),N&&(bt(V,i),bt(function(e){B.push(e.innerHTML),W.push(yt(t(e).css("width")))},i),bt(function(t,e){t.style.width=W[e]},r),t(i).height(0)),bt(function(t,e){t.innerHTML='<div class="dataTables_sizing">'+E[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=M[e]},o),N&&bt(function(t,e){t.innerHTML='<div class="dataTables_sizing">'+B[e]+"</div>",t.childNodes[0].style.height="0",t.childNodes[0].style.overflow="hidden",t.style.width=W[e]},i),R.outerWidth()<f?(c=T.scrollHeight>T.offsetHeight||"scroll"==w.css("overflow-y")?f+S:f,O&&(T.scrollHeight>T.offsetHeight||"scroll"==w.css("overflow-y"))&&(j.width=yt(c-S)),""!==g&&""===b||Pt(e,1,"Possible column misalignment",6)):c="100%",x.width=yt(c),D.width=yt(c),N&&(e.nScrollFoot.style.width=yt(c)),v||O&&(x.height=yt(P.offsetHeight+S));var J=R.outerWidth();C[0].style.width=yt(J),_.width=yt(J);var q=R.height()>T.clientHeight||"scroll"==w.css("overflow-y"),G="padding"+(H.bScrollbarLeft?"Left":"Right");_[G]=q?S+"px":"0px",N&&(F[0].style.width=yt(J),A[0].style.width=yt(J),A[0].style[G]=q?S+"px":"0px"),R.children("colgroup").insertBefore(R.children("thead")),w.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(T.scrollTop=0)}function bt(t,e,n){for(var a,r,o=0,i=0,l=e.length;i<l;){for(a=e[i].firstChild,r=n?n[i].firstChild:null;a;)1===a.nodeType&&(n?t(a,r,o):t(a,o),o++),a=a.nextSibling,r=n?r.nextSibling:null;i++}}function vt(n){var a,r,o,i=n.nTable,l=n.aoColumns,s=n.oScroll,u=s.sY,c=s.sX,f=s.sXInner,d=l.length,g=v(n,"bVisible"),S=t("th",n.nTHead),m=i.getAttribute("width"),D=i.parentNode,y=!1,_=n.oBrowser,C=_.bScrollOversize,T=i.style.width;for(T&&T.indexOf("%")!==-1&&(m=T),a=0;a<g.length;a++)r=l[g[a]],null!==r.sWidth&&(r.sWidth=St(r.sWidthOrig,D),y=!0);if(C||!y&&!c&&!u&&d==b(n)&&d==S.length)for(a=0;a<d;a++){var w=p(n,a);null!==w&&(l[w].sWidth=yt(S.eq(a).width()))}else{var x=t(i).clone().css("visibility","hidden").removeAttr("id");x.find("tbody tr").remove();var I=t("<tr/>").appendTo(x.find("tbody"));for(x.find("thead, tfoot").remove(),x.append(t(n.nTHead).clone()).append(t(n.nTFoot).clone()),x.find("tfoot th, tfoot td").css("width",""),S=U(n,x.find("thead")[0]),a=0;a<g.length;a++)r=l[g[a]],S[a].style.width=null!==r.sWidthOrig&&""!==r.sWidthOrig?yt(r.sWidthOrig):"",r.sWidthOrig&&c&&t(S[a]).append(t("<div/>").css({width:r.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(a=0;a<g.length;a++)o=g[a],r=l[o],t(mt(n,o)).clone(!1).append(r.sContentPadding).appendTo(I);t("[name]",x).removeAttr("name");var A=t("<div/>").css(c||u?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(x).appendTo(D);c&&f?x.width(f):c?(x.css("width","auto"),x.removeAttr("width"),x.width()<D.clientWidth&&m&&x.width(D.clientWidth)):u?x.width(D.clientWidth):m&&x.width(m);var F=0;for(a=0;a<g.length;a++){var L=t(S[a]),R=L.outerWidth()-L.width(),P=_.bBounding?Math.ceil(S[a].getBoundingClientRect().width):L.outerWidth();F+=P,l[g[a]].sWidth=yt(P-R)}i.style.width=yt(F),A.remove()}if(m&&(i.style.width=yt(m)),(m||c)&&!n._reszEvt){var j=function(){t(e).on("resize.DT-"+n.sInstance,ye(function(){h(n)}))};C?setTimeout(j,1e3):j(),n._reszEvt=!0}}function St(e,a){if(!e)return 0;var r=t("<div/>").css("width",yt(e)).appendTo(a||n.body),o=r[0].offsetWidth;return r.remove(),o}function mt(e,n){var a=Dt(e,n);if(a<0)return null;var r=e.aoData[a];return r.nTr?r.anCells[n]:t("<td/>").html(T(e,a,n,"display"))[0]}function Dt(t,e){for(var n,a=-1,r=-1,o=0,i=t.aoData.length;o<i;o++)n=T(t,o,e,"display")+"",n=n.replace(De,""),n=n.replace(/&nbsp;/g," "),n.length>a&&(a=n.length,r=o);return r}function yt(t){return null===t?"0px":"number"==typeof t?t<0?"0px":t+"px":t.match(/\d$/)?t+"px":t}function _t(e){var n,r,o,i,l,s,u,c=[],f=e.aoColumns,d=e.aaSortingFixed,h=t.isPlainObject(d),p=[],g=function(e){e.length&&!t.isArray(e[0])?p.push(e):t.merge(p,e)};for(t.isArray(d)&&g(d),h&&d.pre&&g(d.pre),g(e.aaSorting),h&&d.post&&g(d.post),n=0;n<p.length;n++)for(u=p[n][0],i=f[u].aDataSort,r=0,o=i.length;r<o;r++)l=i[r],s=f[l].sType||"string",p[n]._idx===a&&(p[n]._idx=t.inArray(p[n][1],f[l].asSorting)),c.push({src:u,col:l,dir:p[n][1],index:p[n]._idx,type:s,formatter:$t.ext.type.order[s+"-pre"]});return c}function Ct(t){var e,n,a,r,o,i=[],l=$t.ext.type.order,s=t.aoData,u=(t.aoColumns,0),c=t.aiDisplayMaster;for(S(t),
o=_t(t),e=0,n=o.length;e<n;e++)r=o[e],r.formatter&&u++,At(t,r.col);if("ssp"!=Et(t)&&0!==o.length){for(e=0,a=c.length;e<a;e++)i[c[e]]=e;u===o.length?c.sort(function(t,e){var n,a,r,l,u,c=o.length,f=s[t]._aSortData,d=s[e]._aSortData;for(r=0;r<c;r++)if(u=o[r],n=f[u.col],a=d[u.col],l=n<a?-1:n>a?1:0,0!==l)return"asc"===u.dir?l:-l;return n=i[t],a=i[e],n<a?-1:n>a?1:0}):c.sort(function(t,e){var n,a,r,u,c,f,d=o.length,h=s[t]._aSortData,p=s[e]._aSortData;for(r=0;r<d;r++)if(c=o[r],n=h[c.col],a=p[c.col],f=l[c.type+"-"+c.dir]||l["string-"+c.dir],u=f(n,a),0!==u)return u;return n=i[t],a=i[e],n<a?-1:n>a?1:0})}t.bSorted=!0}function Tt(t){for(var e,n,a=t.aoColumns,r=_t(t),o=t.oLanguage.oAria,i=0,l=a.length;i<l;i++){var s=a[i],u=s.asSorting,c=s.sTitle.replace(/<.*?>/g,""),f=s.nTh;f.removeAttribute("aria-sort"),s.bSortable?(r.length>0&&r[0].col==i?(f.setAttribute("aria-sort","asc"==r[0].dir?"ascending":"descending"),n=u[r[0].index+1]||u[0]):n=u[0],e=c+("asc"===n?o.sSortAscending:o.sSortDescending)):e=c,f.setAttribute("aria-label",e)}}function wt(e,n,r,o){var i,l=e.aoColumns[n],s=e.aaSorting,u=l.asSorting,c=function(e,n){var r=e._idx;return r===a&&(r=t.inArray(e[1],u)),r+1<u.length?r+1:n?null:0};if("number"==typeof s[0]&&(s=e.aaSorting=[s]),r&&e.oFeatures.bSortMulti){var f=t.inArray(n,le(s,"0"));f!==-1?(i=c(s[f],!0),null===i&&1===s.length&&(i=0),null===i?s.splice(f,1):(s[f][1]=u[i],s[f]._idx=i)):(s.push([n,u[0],0]),s[s.length-1]._idx=0)}else s.length&&s[0][0]==n?(i=c(s[0]),s.length=1,s[0][1]=u[i],s[0]._idx=i):(s.length=0,s.push([n,u[0]]),s[0]._idx=0);W(e),"function"==typeof o&&o(e)}function xt(t,e,n,a){var r=t.aoColumns[n];Ht(e,{},function(e){r.bSortable!==!1&&(t.oFeatures.bProcessing?(ht(t,!0),setTimeout(function(){wt(t,n,e.shiftKey,a),"ssp"!==Et(t)&&ht(t,!1)},0)):wt(t,n,e.shiftKey,a))})}function It(e){var n,a,r,o=e.aLastSort,i=e.oClasses.sSortColumn,l=_t(e),s=e.oFeatures;if(s.bSort&&s.bSortClasses){for(n=0,a=o.length;n<a;n++)r=o[n].src,t(le(e.aoData,"anCells",r)).removeClass(i+(n<2?n+1:3));for(n=0,a=l.length;n<a;n++)r=l[n].src,t(le(e.aoData,"anCells",r)).addClass(i+(n<2?n+1:3))}e.aLastSort=l}function At(t,e){var n,a=t.aoColumns[e],r=$t.ext.order[a.sSortDataType];r&&(n=r.call(t.oInstance,t,e,g(t,e)));for(var o,i,l=$t.ext.type.order[a.sType+"-pre"],s=0,u=t.aoData.length;s<u;s++)o=t.aoData[s],o._aSortData||(o._aSortData=[]),o._aSortData[e]&&!r||(i=r?n[s]:T(t,s,e,"sort"),o._aSortData[e]=l?l(i):i)}function Ft(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var n={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:t.extend(!0,[],e.aaSorting),search:et(e.oPreviousSearch),columns:t.map(e.aoColumns,function(t,n){return{visible:t.bVisible,search:et(e.aoPreSearchCols[n])}})};kt(e,"aoStateSaveParams","stateSaveParams",[e,n]),e.oSavedState=n,e.fnStateSaveCallback.call(e.oInstance,e,n)}}function Lt(e,n,r){var o,i,l=e.aoColumns,s=function(n){if(!n||!n.time)return void r();var s=kt(e,"aoStateLoadParams","stateLoadParams",[e,n]);if(t.inArray(!1,s)!==-1)return void r();var u=e.iStateDuration;if(u>0&&n.time<+new Date-1e3*u)return void r();if(n.columns&&l.length!==n.columns.length)return void r();if(e.oLoadedState=t.extend(!0,{},n),n.start!==a&&(e._iDisplayStart=n.start,e.iInitDisplayStart=n.start),n.length!==a&&(e._iDisplayLength=n.length),n.order!==a&&(e.aaSorting=[],t.each(n.order,function(t,n){e.aaSorting.push(n[0]>=l.length?[0,n[1]]:n)})),n.search!==a&&t.extend(e.oPreviousSearch,nt(n.search)),n.columns)for(o=0,i=n.columns.length;o<i;o++){var c=n.columns[o];c.visible!==a&&(l[o].bVisible=c.visible),c.search!==a&&t.extend(e.aoPreSearchCols[o],nt(c.search))}kt(e,"aoStateLoaded","stateLoaded",[e,n]),r()};if(!e.oFeatures.bStateSave)return void r();var u=e.fnStateLoadCallback.call(e.oInstance,e,s);u!==a&&s(u)}function Rt(e){var n=$t.settings,a=t.inArray(e,le(n,"nTable"));return a!==-1?n[a]:null}function Pt(t,n,a,r){if(a="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+a,r&&(a+=". For more information about this error, please see http://datatables.net/tn/"+r),n)e.console&&console.log&&console.log(a);else{var o=$t.ext,i=o.sErrMode||o.errMode;if(t&&kt(t,null,"error",[t,r,a]),"alert"==i)alert(a);else{if("throw"==i)throw new Error(a);"function"==typeof i&&i(t,r,a)}}}function jt(e,n,r,o){return t.isArray(r)?void t.each(r,function(a,r){t.isArray(r)?jt(e,n,r[0],r[1]):jt(e,n,r)}):(o===a&&(o=r),void(n[r]!==a&&(e[o]=n[r])))}function Nt(e,n,a){var r;for(var o in n)n.hasOwnProperty(o)&&(r=n[o],t.isPlainObject(r)?(t.isPlainObject(e[o])||(e[o]={}),t.extend(!0,e[o],r)):a&&"data"!==o&&"aaData"!==o&&t.isArray(r)?e[o]=r.slice():e[o]=r);return e}function Ht(e,n,a){t(e).on("click.DT",n,function(n){t(e).blur(),a(n)}).on("keypress.DT",n,function(t){13===t.which&&(t.preventDefault(),a(t))}).on("selectstart.DT",function(){return!1})}function Ot(t,e,n,a){n&&t[e].push({fn:n,sName:a})}function kt(e,n,a,r){var o=[];if(n&&(o=t.map(e[n].slice().reverse(),function(t,n){return t.fn.apply(e.oInstance,r)})),null!==a){var i=t.Event(a+".dt");t(e.nTable).trigger(i,r),o.push(i.result)}return o}function Mt(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),a=t._iDisplayLength;e>=n&&(e=n-a),e-=e%a,(a===-1||e<0)&&(e=0),t._iDisplayStart=e}function Wt(e,n){var a=e.renderer,r=$t.ext.renderer[n];return t.isPlainObject(a)&&a[n]?r[a[n]]||r._:"string"==typeof a?r[a]||r._:r._}function Et(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Bt(t,e){var n=[],a=Xe.numbers_length,r=Math.floor(a/2);return e<=a?n=ue(0,e):t<=r?(n=ue(0,a-2),n.push("ellipsis"),n.push(e-1)):t>=e-1-r?(n=ue(e-(a-2),e),n.splice(0,0,"ellipsis"),n.splice(0,0,0)):(n=ue(t-r+2,t+r-1),n.push("ellipsis"),n.push(e-1),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Ut(e){t.each({num:function(t){return Je(t,e)},"num-fmt":function(t){return Je(t,e,te)},"html-num":function(t){return Je(t,e,Zt)},"html-num-fmt":function(t){return Je(t,e,Zt,te)}},function(t,n){Xt.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(Xt.type.search[t+e]=Xt.type.search.html)})}function Vt(t){return function(){var e=[Rt(this[$t.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return $t.ext.internal[t].apply(this,e)}}var Xt,Jt,qt,Gt,$t=function(e){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Jt(t?Rt(this[Xt.iApiIndex]):this)},this.fnAddData=function(e,n){var r=this.api(!0),o=t.isArray(e)&&(t.isArray(e[0])||t.isPlainObject(e[0]))?r.rows.add(e):r.row.add(e);return(n===a||n)&&r.draw(),o.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],r=n.oScroll;t===a||t?e.draw(!1):""===r.sX&&""===r.sY||gt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===a||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var r=this.api(!0),o=r.rows(t),i=o.settings()[0],l=i.aoData[o[0][0]];return o.remove(),e&&e.call(this,i,l),(n===a||n)&&r.draw(),l},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,r,o,i){var l=this.api(!0);null===e||e===a?l.search(t,n,r,i):l.column(e).search(t,n,r,i),l.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t!==a){var r=t.nodeName?t.nodeName.toLowerCase():"";return e!==a||"td"==r||"th"==r?n.cell(t,e).data():n.row(t).data()||null}return n.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==a?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();if("TR"==n)return e.row(t).index();if("TD"==n||"TH"==n){var a=e.cell(t).index();return[a.row,a.columnVisible,a.column]}return null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===a||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){var r=this.api(!0).column(t).visible(e);(n===a||n)&&r.columns.adjust().draw()},this.fnSettings=function(){return Rt(this[Xt.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,r,o){var i=this.api(!0);return n===a||null===n?i.row(e).data(t):i.cell(e,n).data(t),(o===a||o)&&i.columns.adjust(),(r===a||r)&&i.draw(),0},this.fnVersionCheck=Xt.fnVersionCheck;var n=this,r=e===a,c=this.length;r&&(e={}),this.oApi=this.internal=Xt.internal;for(var h in $t.ext.internal)h&&(this[h]=Vt(h));return this.each(function(){var h,p={},g=c>1?Nt(p,e,!0):e,b=0,v=this.getAttribute("id"),S=!1,_=$t.defaults,C=t(this);if("table"!=this.nodeName.toLowerCase())return void Pt(null,0,"Non-table node initialisation ("+this.nodeName+")",2);l(_),s(_.column),o(_,_,!0),o(_.column,_.column,!0),o(_,t.extend(g,C.data()));var T=$t.settings;for(b=0,h=T.length;b<h;b++){var w=T[b];if(w.nTable==this||w.nTHead&&w.nTHead.parentNode==this||w.nTFoot&&w.nTFoot.parentNode==this){var x=g.bRetrieve!==a?g.bRetrieve:_.bRetrieve,A=g.bDestroy!==a?g.bDestroy:_.bDestroy;if(r||x)return w.oInstance;if(A){w.oInstance.fnDestroy();break}return void Pt(w,0,"Cannot reinitialise DataTable",3)}if(w.sTableId==this.id){T.splice(b,1);break}}null!==v&&""!==v||(v="DataTables_Table_"+$t.ext._unique++,this.id=v);var F=t.extend(!0,{},$t.models.oSettings,{sDestroyWidth:C[0].style.width,sInstance:v,sTableId:v});F.nTable=this,F.oApi=n.internal,F.oInit=g,T.push(F),F.oInstance=1===n.length?n:C.dataTable(),l(g),i(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=t.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=Nt(t.extend(!0,{},_),g),jt(F.oFeatures,g,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),jt(F,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),jt(F.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),jt(F.oLanguage,g,"fnInfoCallback"),Ot(F,"aoDrawCallback",g.fnDrawCallback,"user"),Ot(F,"aoServerParams",g.fnServerParams,"user"),Ot(F,"aoStateSaveParams",g.fnStateSaveParams,"user"),Ot(F,"aoStateLoadParams",g.fnStateLoadParams,"user"),Ot(F,"aoStateLoaded",g.fnStateLoaded,"user"),Ot(F,"aoRowCallback",g.fnRowCallback,"user"),Ot(F,"aoRowCreatedCallback",g.fnCreatedRow,"user"),Ot(F,"aoHeaderCallback",g.fnHeaderCallback,"user"),Ot(F,"aoFooterCallback",g.fnFooterCallback,"user"),Ot(F,"aoInitComplete",g.fnInitComplete,"user"),Ot(F,"aoPreDrawCallback",g.fnPreDrawCallback,"user"),F.rowIdFn=I(g.rowId),u(F);var L=F.oClasses;if(t.extend(L,$t.ext.classes,g.oClasses),C.addClass(L.sTable),F.iInitDisplayStart===a&&(F.iInitDisplayStart=g.iDisplayStart,F._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading){F.bDeferLoading=!0;var R=t.isArray(g.iDeferLoading);F._iRecordsDisplay=R?g.iDeferLoading[0]:g.iDeferLoading,F._iRecordsTotal=R?g.iDeferLoading[1]:g.iDeferLoading}var P=F.oLanguage;t.extend(!0,P,g.oLanguage),P.sUrl&&(t.ajax({dataType:"json",url:P.sUrl,success:function(e){i(e),o(_.oLanguage,e),t.extend(!0,P,e),it(F)},error:function(){it(F)}}),S=!0),null===g.asStripeClasses&&(F.asStripeClasses=[L.sStripeOdd,L.sStripeEven]);var j=F.asStripeClasses,N=C.children("tbody").find("tr").eq(0);t.inArray(!0,t.map(j,function(t,e){return N.hasClass(t)}))!==-1&&(t("tbody tr",this).removeClass(j.join(" ")),F.asDestroyStripes=j.slice());var H,O=[],k=this.getElementsByTagName("thead");if(0!==k.length&&(B(F.aoHeader,k[0]),O=U(F)),null===g.aoColumns)for(H=[],b=0,h=O.length;b<h;b++)H.push(null);else H=g.aoColumns;for(b=0,h=H.length;b<h;b++)f(F,O?O[b]:null);if(m(F,g.aoColumnDefs,H,function(t,e){d(F,t,e)}),N.length){var M=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};t(N[0]).children("th, td").each(function(t,e){var n=F.aoColumns[t];if(n.mData===t){var r=M(e,"sort")||M(e,"order"),o=M(e,"filter")||M(e,"search");null===r&&null===o||(n.mData={_:t+".display",sort:null!==r?t+".@data-"+r:a,type:null!==r?t+".@data-"+r:a,filter:null!==o?t+".@data-"+o:a},d(F,t))}})}var W=F.oFeatures,E=function(){if(g.aaSorting===a){var e=F.aaSorting;for(b=0,h=e.length;b<h;b++)e[b][1]=F.aoColumns[b].asSorting[0]}It(F),W.bSort&&Ot(F,"aoDrawCallback",function(){if(F.bSorted){var e=_t(F),n={};t.each(e,function(t,e){n[e.src]=e.dir}),kt(F,null,"order",[F,e,n]),Tt(F)}}),Ot(F,"aoDrawCallback",function(){(F.bSorted||"ssp"===Et(F)||W.bDeferRender)&&It(F)},"sc");var n=C.children("caption").each(function(){this._captionSide=t(this).css("caption-side")}),r=C.children("thead");0===r.length&&(r=t("<thead/>").appendTo(C)),F.nTHead=r[0];var o=C.children("tbody");0===o.length&&(o=t("<tbody/>").appendTo(C)),F.nTBody=o[0];var i=C.children("tfoot");if(0===i.length&&n.length>0&&(""!==F.oScroll.sX||""!==F.oScroll.sY)&&(i=t("<tfoot/>").appendTo(C)),0===i.length||0===i.children().length?C.addClass(L.sNoFooter):i.length>0&&(F.nTFoot=i[0],B(F.aoFooter,F.nTFoot)),g.aaData)for(b=0;b<g.aaData.length;b++)D(F,g.aaData[b]);else(F.bDeferLoading||"dom"==Et(F))&&y(F,t(F.nTBody).children("tr"));F.aiDisplay=F.aiDisplayMaster.slice(),F.bInitialised=!0,S===!1&&it(F)};g.bStateSave?(W.bStateSave=!0,Ot(F,"aoDrawCallback",Ft,"state_save"),Lt(F,g,E)):E()}),n=null,this},zt={},Yt=/[\r\n]/g,Zt=/<.*?>/g,Kt=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,Qt=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),te=/[',$Â£â¬Â¥%\u2009\u202F\u20BD\u20a9\u20BArfkÉÎ]/gi,ee=function(t){return!t||t===!0||"-"===t},ne=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},ae=function(t,e){return zt[e]||(zt[e]=new RegExp(ve(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(zt[e],"."):t},re=function(t,e,n){var a="string"==typeof t;return!!ee(t)||(e&&a&&(t=ae(t,e)),n&&a&&(t=t.replace(te,"")),!isNaN(parseFloat(t))&&isFinite(t))},oe=function(t){return ee(t)||"string"==typeof t},ie=function(t,e,n){if(ee(t))return!0;var a=oe(t);return a?!!re(fe(t),e,n)||null:null},le=function(t,e,n){var r=[],o=0,i=t.length;if(n!==a)for(;o<i;o++)t[o]&&t[o][e]&&r.push(t[o][e][n]);else for(;o<i;o++)t[o]&&r.push(t[o][e]);return r},se=function(t,e,n,r){var o=[],i=0,l=e.length;if(r!==a)for(;i<l;i++)t[e[i]][n]&&o.push(t[e[i]][n][r]);else for(;i<l;i++)o.push(t[e[i]][n]);return o},ue=function(t,e){var n,r=[];e===a?(e=0,n=t):(n=e,e=t);for(var o=e;o<n;o++)r.push(o);return r},ce=function(t){for(var e=[],n=0,a=t.length;n<a;n++)t[n]&&e.push(t[n]);return e},fe=function(t){return t.replace(Zt,"")},de=function(t){if(t.length<2)return!0;for(var e=t.slice().sort(),n=e[0],a=1,r=e.length;a<r;a++){if(e[a]===n)return!1;n=e[a]}return!0},he=function(t){if(de(t))return t.slice();var e,n,a,r=[],o=t.length,i=0;t:for(n=0;n<o;n++){for(e=t[n],a=0;a<i;a++)if(r[a]===e)continue t;r.push(e),i++}return r};$t.util={throttle:function(t,e){var n,r,o=e!==a?e:200;return function(){var e=this,i=+new Date,l=arguments;n&&i<n+o?(clearTimeout(r),r=setTimeout(function(){n=a,t.apply(e,l)},o)):(n=i,t.apply(e,l))}},escapeRegex:function(t){return t.replace(Qt,"\\$1")}};var pe=function(t,e,n){t[e]!==a&&(t[n]=t[e])},ge=/\[.*?\]$/,be=/\(\)$/,ve=$t.util.escapeRegex,Se=t("<div>")[0],me=Se.textContent!==a,De=/<.*?>/g,ye=$t.util.throttle,_e=[],Ce=Array.prototype,Te=function(e){var n,a,r=$t.settings,o=t.map(r,function(t,e){return t.nTable});return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?(n=t.inArray(e,o),n!==-1?[r[n]]:null):e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?a=t(e):e instanceof t&&(a=e),a?a.map(function(e){return n=t.inArray(this,o),n!==-1?r[n]:null}).toArray():void 0):[]};Jt=function(e,n){if(!(this instanceof Jt))return new Jt(e,n);var a=[],r=function(t){var e=Te(t);e&&(a=a.concat(e))};if(t.isArray(e))for(var o=0,i=e.length;o<i;o++)r(e[o]);else r(e);this.context=he(a),n&&t.merge(this,n),this.selector={rows:null,cols:null,opts:null},Jt.extend(this,this,_e)},$t.Api=Jt,t.extend(Jt.prototype,{any:function(){return 0!==this.count()},concat:Ce.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Jt(e[t],this[t]):null},filter:function(t){var e=[];if(Ce.filter)e=Ce.filter.call(this,t,this);else for(var n=0,a=this.length;n<a;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new Jt(this.context,e)},flatten:function(){var t=[];return new Jt(this.context,t.concat.apply(t,this.toArray()))},join:Ce.join,indexOf:Ce.indexOf||function(t,e){for(var n=e||0,a=this.length;n<a;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,r){var o,i,l,s,u,c,f,d,h=[],p=this.context,g=this.selector;for("string"==typeof t&&(r=n,n=e,e=t,t=!1),i=0,l=p.length;i<l;i++){var b=new Jt(p[i]);if("table"===e)o=n.call(b,p[i],i),o!==a&&h.push(o);else if("columns"===e||"rows"===e)o=n.call(b,p[i],this[i],i),o!==a&&h.push(o);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(f=this[i],"column-rows"===e&&(c=Le(p[i],g.opts)),s=0,u=f.length;s<u;s++)d=f[s],o="cell"===e?n.call(b,p[i],d.row,d.column,i,s):n.call(b,p[i],d,i,s,c),o!==a&&h.push(o)}if(h.length||r){var v=new Jt(p,t?h.concat.apply([],h):h),S=v.selector;return S.rows=g.rows,S.cols=g.cols,S.opts=g.opts,v}return this},lastIndexOf:Ce.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(Ce.map)e=Ce.map.call(this,t,this);else for(var n=0,a=this.length;n<a;n++)e.push(t.call(this,this[n],n));return new Jt(this.context,e)},pluck:function(t){return this.map(function(e){return e[t]})},pop:Ce.pop,push:Ce.push,reduce:Ce.reduce||function(t,e){return c(this,t,e,0,this.length,1)},reduceRight:Ce.reduceRight||function(t,e){return c(this,t,e,this.length-1,-1,-1)},reverse:Ce.reverse,selector:null,shift:Ce.shift,slice:function(){return new Jt(this.context,this)},sort:Ce.sort,splice:Ce.splice,toArray:function(){return Ce.slice.call(this)},to$:function(){return t(this)},toJQuery:function(){return t(this)},unique:function(){return new Jt(this.context,he(this))},unshift:Ce.unshift}),Jt.extend=function(e,n,a){if(a.length&&n&&(n instanceof Jt||n.__dt_wrapper)){var r,o,i,l=function(t,e,n){return function(){var a=e.apply(t,arguments);return Jt.extend(a,a,n.methodExt),a}};for(r=0,o=a.length;r<o;r++)i=a[r],n[i.name]="function"==typeof i.val?l(e,i.val,i):t.isPlainObject(i.val)?{}:i.val,n[i.name].__dt_wrapper=!0,Jt.extend(e,n[i.name],i.propExt)}},Jt.register=qt=function(e,n){if(t.isArray(e))for(var a=0,r=e.length;a<r;a++)Jt.register(e[a],n);else{var o,i,l,s,u=e.split("."),c=_e,f=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n].name===e)return t[n];return null};for(o=0,i=u.length;o<i;o++){s=u[o].indexOf("()")!==-1,l=s?u[o].replace("()",""):u[o];var d=f(c,l);d||(d={name:l,val:{},methodExt:[],propExt:[]},c.push(d)),o===i-1?d.val=n:c=s?d.methodExt:d.propExt}}},Jt.registerPlural=Gt=function(e,n,r){Jt.register(e,r),Jt.register(n,function(){var e=r.apply(this,arguments);return e===this?this:e instanceof Jt?e.length?t.isArray(e[0])?new Jt(e.context,e[0]):e[0]:a:e})};var we=function(e,n){if("number"==typeof e)return[n[e]];var a=t.map(n,function(t,e){return t.nTable});return t(a).filter(e).map(function(e){var r=t.inArray(this,a);return n[r]}).toArray()};qt("tables()",function(t){return t?new Jt(we(t,this.context)):this}),qt("table()",function(t){var e=this.tables(t),n=e.context;return n.length?new Jt(n[0]):e}),Gt("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),Gt("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),Gt("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),Gt("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),Gt("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),qt("draw()",function(t){return this.iterator("table",function(e){"page"===t?M(e):("string"==typeof t&&(t="full-hold"!==t),W(e,t===!1))})}),qt("page()",function(t){return t===a?this.page.info().page:this.iterator("table",function(e){ft(e,t)})}),qt("page.info()",function(t){if(0===this.context.length)return a;var e=this.context[0],n=e._iDisplayStart,r=e.oFeatures.bPaginate?e._iDisplayLength:-1,o=e.fnRecordsDisplay(),i=r===-1;return{page:i?0:Math.floor(n/r),pages:i?1:Math.ceil(o/r),start:n,end:e.fnDisplayEnd(),length:r,recordsTotal:e.fnRecordsTotal(),recordsDisplay:o,serverSide:"ssp"===Et(e)}}),qt("page.len()",function(t){return t===a?0!==this.context.length?this.context[0]._iDisplayLength:a:this.iterator("table",function(e){st(e,t)})});var xe=function(t,e,n){if(n){var a=new Jt(t);a.one("draw",function(){n(a.ajax.json())})}if("ssp"==Et(t))W(t,e);else{ht(t,!0);var r=t.jqXHR;r&&4!==r.readyState&&r.abort(),V(t,[],function(n){L(t);for(var a=G(t,n),r=0,o=a.length;r<o;r++)D(t,a[r]);W(t,e),ht(t,!1)})}};qt("ajax.json()",function(){var t=this.context;if(t.length>0)return t[0].json}),qt("ajax.params()",function(){var t=this.context;if(t.length>0)return t[0].oAjaxData}),qt("ajax.reload()",function(t,e){return this.iterator("table",function(n){xe(n,e===!1,t)})}),qt("ajax.url()",function(e){var n=this.context;return e===a?0===n.length?a:(n=n[0],n.ajax?t.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource):this.iterator("table",function(n){t.isPlainObject(n.ajax)?n.ajax.url=e:n.ajax=e})}),qt("ajax.url().load()",function(t,e){return this.iterator("table",function(n){xe(n,e===!1,t)})});var Ie=function(e,n,r,o,i){var l,s,u,c,f,d,h=[],p=typeof n;for(n&&"string"!==p&&"function"!==p&&n.length!==a||(n=[n]),u=0,c=n.length;u<c;u++)for(s=n[u]&&n[u].split&&!n[u].match(/[\[\(:]/)?n[u].split(","):[n[u]],f=0,d=s.length;f<d;f++)l=r("string"==typeof s[f]?t.trim(s[f]):s[f]),l&&l.length&&(h=h.concat(l));var g=Xt.selector[e];if(g.length)for(u=0,c=g.length;u<c;u++)h=g[u](o,i,h);return he(h)},Ae=function(e){return e||(e={}),e.filter&&e.search===a&&(e.search=e.filter),t.extend({search:"none",order:"current",page:"all"},e)},Fe=function(t){for(var e=0,n=t.length;e<n;e++)if(t[e].length>0)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},Le=function(e,n){var a,r,o,i=[],l=e.aiDisplay,s=e.aiDisplayMaster,u=n.search,c=n.order,f=n.page;if("ssp"==Et(e))return"removed"===u?[]:ue(0,s.length);if("current"==f)for(a=e._iDisplayStart,r=e.fnDisplayEnd();a<r;a++)i.push(l[a]);else if("current"==c||"applied"==c){if("none"==u)i=s.slice();else if("applied"==u)i=l.slice();else if("removed"==u){for(var d={},a=0,r=l.length;a<r;a++)d[l[a]]=null;i=t.map(s,function(t){return d.hasOwnProperty(t)?null:t})}}else if("index"==c||"original"==c)for(a=0,r=e.aoData.length;a<r;a++)"none"==u?i.push(a):(o=t.inArray(a,l),(o===-1&&"removed"==u||o>=0&&"applied"==u)&&i.push(a));return i},Re=function(e,n,r){var o,i=function(n){var i=ne(n),l=e.aoData;if(null!==i&&!r)return[i];if(o||(o=Le(e,r)),null!==i&&t.inArray(i,o)!==-1)return[i];if(null===n||n===a||""===n)return o;if("function"==typeof n)return t.map(o,function(t){var e=l[t];return n(t,e._aData,e.nTr)?t:null});if(n.nodeName){var s=n._DT_RowIndex,u=n._DT_CellIndex;if(s!==a)return l[s]&&l[s].nTr===n?[s]:[];if(u)return l[u.row]&&l[u.row].nTr===n?[u.row]:[];var c=t(n).closest("*[data-dt-row]");return c.length?[c.data("dt-row")]:[]}if("string"==typeof n&&"#"===n.charAt(0)){var f=e.aIds[n.replace(/^#/,"")];if(f!==a)return[f.idx]}var d=ce(se(e.aoData,o,"nTr"));return t(d).filter(n).map(function(){return this._DT_RowIndex}).toArray()};return Ie("row",n,i,e,r)};qt("rows()",function(e,n){e===a?e="":t.isPlainObject(e)&&(n=e,e=""),n=Ae(n);var r=this.iterator("table",function(t){return Re(t,e,n)},1);return r.selector.rows=e,r.selector.opts=n,r}),qt("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||a},1)}),qt("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return se(t.aoData,e,"_aData")},1)}),Gt("rows().cache()","row().cache()",function(t){return this.iterator("row",function(e,n){var a=e.aoData[n];return"search"===t?a._aFilterData:a._aSortData},1)}),Gt("rows().invalidate()","row().invalidate()",function(t){return this.iterator("row",function(e,n){P(e,n,t)})}),Gt("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),Gt("rows().ids()","row().id()",function(t){for(var e=[],n=this.context,a=0,r=n.length;a<r;a++)for(var o=0,i=this[a].length;o<i;o++){var l=n[a].rowIdFn(n[a].aoData[this[a][o]]._aData);e.push((t===!0?"#":"")+l)}return new Jt(n,e)}),Gt("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(e,n,r){var o,i,l,s,u,c,f=e.aoData,d=f[n];for(f.splice(n,1),o=0,i=f.length;o<i;o++)if(u=f[o],c=u.anCells,null!==u.nTr&&(u.nTr._DT_RowIndex=o),null!==c)for(l=0,s=c.length;l<s;l++)c[l]._DT_CellIndex.row=o;R(e.aiDisplayMaster,n),R(e.aiDisplay,n),R(t[r],n,!1),e._iRecordsDisplay>0&&e._iRecordsDisplay--,Mt(e);var h=e.rowIdFn(d._aData);h!==a&&delete e.aIds[h]}),this.iterator("table",function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e}),this}),qt("rows.add()",function(e){var n=this.iterator("table",function(t){var n,a,r,o=[];for(a=0,r=e.length;a<r;a++)n=e[a],n.nodeName&&"TR"===n.nodeName.toUpperCase()?o.push(y(t,n)[0]):o.push(D(t,n));return o},1),a=this.rows(-1);return a.pop(),t.merge(a,n),a}),qt("row()",function(t,e){return Fe(this.rows(t,e))}),qt("row().data()",function(e){var n=this.context;if(e===a)return n.length&&this.length?n[0].aoData[this[0]]._aData:a;var r=n[0].aoData[this[0]];return r._aData=e,t.isArray(e)&&r.nTr.id&&A(n[0].rowId)(e,r.nTr.id),P(n[0],this[0],"data"),this}),qt("row().node()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]].nTr||null:null}),qt("row.add()",function(e){e instanceof t&&e.length&&(e=e[0]);var n=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?y(t,e)[0]:D(t,e)});return this.row(n[0])});var Pe=function(e,n,a,r){var o=[],i=function(n,a){if(t.isArray(n)||n instanceof t)for(var r=0,l=n.length;r<l;r++)i(n[r],a);else if(n.nodeName&&"tr"===n.nodeName.toLowerCase())o.push(n);else{var s=t("<tr><td/></tr>").addClass(a);t("td",s).addClass(a).html(n)[0].colSpan=b(e),o.push(s[0])}};i(a,r),n._details&&n._details.detach(),n._details=t(o),n._detailsShow&&n._details.insertAfter(n.nTr)},je=function(t,e){var n=t.context;if(n.length){var r=n[0].aoData[e!==a?e:t[0]];r&&r._details&&(r._details.remove(),r._detailsShow=a,r._details=a)}},Ne=function(t,e){var n=t.context;if(n.length&&t.length){var a=n[0].aoData[t[0]];a._details&&(a._detailsShow=e,e?a._details.insertAfter(a.nTr):a._details.detach(),He(n[0]))}},He=function(t){var e=new Jt(t),n=".dt.DT_details",a="draw"+n,r="column-visibility"+n,o="destroy"+n,i=t.aoData;e.off(a+" "+r+" "+o),le(i,"_details").length>0&&(e.on(a,function(n,a){t===a&&e.rows({page:"current"}).eq(0).each(function(t){var e=i[t];e._detailsShow&&e._details.insertAfter(e.nTr)})}),e.on(r,function(e,n,a,r){if(t===n)for(var o,l=b(n),s=0,u=i.length;s<u;s++)o=i[s],o._details&&o._details.children("td[colspan]").attr("colspan",l)}),e.on(o,function(n,a){if(t===a)for(var r=0,o=i.length;r<o;r++)i[r]._details&&je(e,r)}))},Oe="",ke=Oe+"row().child",Me=ke+"()";qt(Me,function(t,e){var n=this.context;return t===a?n.length&&this.length?n[0].aoData[this[0]]._details:a:(t===!0?this.child.show():t===!1?je(this):n.length&&this.length&&Pe(n[0],n[0].aoData[this[0]],t,e),this)}),qt([ke+".show()",Me+".show()"],function(t){return Ne(this,!0),this}),qt([ke+".hide()",Me+".hide()"],function(){return Ne(this,!1),this}),qt([ke+".remove()",Me+".remove()"],function(){return je(this),this}),qt(ke+".isShown()",function(){var t=this.context;return!(!t.length||!this.length)&&(t[0].aoData[this[0]]._detailsShow||!1)});var We=/^([^:]+):(name|visIdx|visible)$/,Ee=function(t,e,n,a,r){for(var o=[],i=0,l=r.length;i<l;i++)o.push(T(t,r[i],e));return o},Be=function(e,n,a){var r=e.aoColumns,o=le(r,"sName"),i=le(r,"nTh"),l=function(n){var l=ne(n);if(""===n)return ue(r.length);if(null!==l)return[l>=0?l:r.length+l];if("function"==typeof n){var s=Le(e,a);return t.map(r,function(t,a){return n(a,Ee(e,a,0,0,s),i[a])?a:null})}var u="string"==typeof n?n.match(We):"";if(u)switch(u[2]){case"visIdx":case"visible":var c=parseInt(u[1],10);if(c<0){var f=t.map(r,function(t,e){return t.bVisible?e:null});return[f[f.length+c]]}return[p(e,c)];case"name":return t.map(o,function(t,e){return t===u[1]?e:null});default:return[]}if(n.nodeName&&n._DT_CellIndex)return[n._DT_CellIndex.column];var d=t(i).filter(n).map(function(){return t.inArray(this,i)}).toArray();if(d.length||!n.nodeName)return d;var h=t(n).closest("*[data-dt-column]");return h.length?[h.data("dt-column")]:[]};return Ie("column",n,l,e,a)},Ue=function(e,n,r){var o,i,l,s,u=e.aoColumns,c=u[n],f=e.aoData;if(r===a)return c.bVisible;if(c.bVisible!==r){if(r){var d=t.inArray(!0,le(u,"bVisible"),n+1);for(i=0,l=f.length;i<l;i++)s=f[i].nTr,o=f[i].anCells,s&&s.insertBefore(o[n],o[d]||null)}else t(le(e.aoData,"anCells",n)).detach();c.bVisible=r,k(e,e.aoHeader),k(e,e.aoFooter),e.aiDisplay.length||t(e.nTBody).find("td[colspan]").attr("colspan",b(e)),Ft(e)}};qt("columns()",function(e,n){e===a?e="":t.isPlainObject(e)&&(n=e,e=""),n=Ae(n);var r=this.iterator("table",function(t){return Be(t,e,n)},1);return r.selector.cols=e,r.selector.opts=n,r}),Gt("columns().header()","column().header()",function(t,e){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),Gt("columns().footer()","column().footer()",function(t,e){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),Gt("columns().data()","column().data()",function(){return this.iterator("column-rows",Ee,1)}),Gt("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),Gt("columns().cache()","column().cache()",function(t){return this.iterator("column-rows",function(e,n,a,r,o){return se(e.aoData,o,"search"===t?"_aFilterData":"_aSortData",n)},1)}),Gt("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,n,a,r){return se(t.aoData,r,"anCells",e)},1)}),Gt("columns().visible()","column().visible()",function(t,e){var n=this.iterator("column",function(e,n){return t===a?e.aoColumns[n].bVisible:void Ue(e,n,t)});return t!==a&&(this.iterator("column",function(n,a){kt(n,null,"column-visibility",[n,a,t,e])}),(e===a||e)&&this.columns.adjust()),n}),Gt("columns().indexes()","column().index()",function(t){return this.iterator("column",function(e,n){return"visible"===t?g(e,n):n},1)}),qt("columns.adjust()",function(){return this.iterator("table",function(t){h(t)},1)}),qt("column.index()",function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return p(n,e);if("fromData"===t||"toVisible"===t)return g(n,e)}}),qt("column()",function(t,e){return Fe(this.columns(t,e))});var Ve=function(e,n,r){var o,i,l,s,u,c,f,d=e.aoData,h=Le(e,r),p=ce(se(d,h,"anCells")),g=t([].concat.apply([],p)),b=e.aoColumns.length,v=function(n){var r="function"==typeof n;if(null===n||n===a||r){for(i=[],l=0,s=h.length;l<s;l++)for(o=h[l],u=0;u<b;u++)c={row:o,column:u},r?(f=d[o],n(c,T(e,o,u),f.anCells?f.anCells[u]:null)&&i.push(c)):i.push(c);return i}if(t.isPlainObject(n))return n.column!==a&&n.row!==a&&t.inArray(n.row,h)!==-1?[n]:[];
var p=g.filter(n).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray();return p.length||!n.nodeName?p:(f=t(n).closest("*[data-dt-row]"),f.length?[{row:f.data("dt-row"),column:f.data("dt-column")}]:[])};return Ie("cell",n,v,e,r)};qt("cells()",function(e,n,r){if(t.isPlainObject(e)&&(e.row===a?(r=e,e=null):(r=n,n=null)),t.isPlainObject(n)&&(r=n,n=null),null===n||n===a)return this.iterator("table",function(t){return Ve(t,e,Ae(r))});var o,i,l,s,u,c=this.columns(n),f=this.rows(e);this.iterator("table",function(t,e){for(o=[],i=0,l=f[e].length;i<l;i++)for(s=0,u=c[e].length;s<u;s++)o.push({row:f[e][i],column:c[e][s]})},1);var d=this.cells(o,r);return t.extend(d.selector,{cols:n,rows:e,opts:r}),d}),Gt("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,n){var r=t.aoData[e];return r&&r.anCells?r.anCells[n]:a},1)}),qt("cells().data()",function(){return this.iterator("cell",function(t,e,n){return T(t,e,n)},1)}),Gt("cells().cache()","cell().cache()",function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",function(e,n,a){return e.aoData[n][t][a]},1)}),Gt("cells().render()","cell().render()",function(t){return this.iterator("cell",function(e,n,a){return T(e,n,a,t)},1)}),Gt("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,n){return{row:e,column:n,columnVisible:g(t,n)}},1)}),Gt("cells().invalidate()","cell().invalidate()",function(t){return this.iterator("cell",function(e,n,a){P(e,n,t,a)})}),qt("cell()",function(t,e,n){return Fe(this.cells(t,e,n))}),qt("cell().data()",function(t){var e=this.context,n=this[0];return t===a?e.length&&n.length?T(e[0],n[0].row,n[0].column):a:(w(e[0],n[0].row,n[0].column,t),P(e[0],n[0].row,"data",n[0].column),this)}),qt("order()",function(e,n){var r=this.context;return e===a?0!==r.length?r[0].aaSorting:a:("number"==typeof e?e=[[e,n]]:e.length&&!t.isArray(e[0])&&(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),qt("order.listener()",function(t,e,n){return this.iterator("table",function(a){xt(a,t,e,n)})}),qt("order.fixed()",function(e){if(!e){var n=this.context,r=n.length?n[0].aaSortingFixed:a;return t.isArray(r)?{pre:r}:r}return this.iterator("table",function(n){n.aaSortingFixed=t.extend(!0,{},e)})}),qt(["columns().order()","column().order()"],function(e){var n=this;return this.iterator("table",function(a,r){var o=[];t.each(n[r],function(t,n){o.push([n,e])}),a.aaSorting=o})}),qt("search()",function(e,n,r,o){var i=this.context;return e===a?0!==i.length?i[0].oPreviousSearch.sSearch:a:this.iterator("table",function(a){a.oFeatures.bFilter&&z(a,t.extend({},a.oPreviousSearch,{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===r||r,bCaseInsensitive:null===o||o}),1)})}),Gt("columns().search()","column().search()",function(e,n,r,o){return this.iterator("column",function(i,l){var s=i.aoPreSearchCols;return e===a?s[l].sSearch:void(i.oFeatures.bFilter&&(t.extend(s[l],{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===r||r,bCaseInsensitive:null===o||o}),z(i,i.oPreviousSearch,1)))})}),qt("state()",function(){return this.context.length?this.context[0].oSavedState:null}),qt("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),qt("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),qt("state.save()",function(){return this.iterator("table",function(t){Ft(t)})}),$t.versionCheck=$t.fnVersionCheck=function(t){for(var e,n,a=$t.version.split("."),r=t.split("."),o=0,i=r.length;o<i;o++)if(e=parseInt(a[o],10)||0,n=parseInt(r[o],10)||0,e!==n)return e>n;return!0},$t.isDataTable=$t.fnIsDataTable=function(e){var n=t(e).get(0),a=!1;return e instanceof $t.Api||(t.each($t.settings,function(e,r){var o=r.nScrollHead?t("table",r.nScrollHead)[0]:null,i=r.nScrollFoot?t("table",r.nScrollFoot)[0]:null;r.nTable!==n&&o!==n&&i!==n||(a=!0)}),a)},$t.tables=$t.fnTables=function(e){var n=!1;t.isPlainObject(e)&&(n=e.api,e=e.visible);var a=t.map($t.settings,function(n){if(!e||e&&t(n.nTable).is(":visible"))return n.nTable});return n?new Jt(a):a},$t.camelToHungarian=o,qt("$()",function(e,n){var a=this.rows(n).nodes(),r=t(a);return t([].concat(r.filter(e).toArray(),r.find(e).toArray()))}),t.each(["on","one","off"],function(e,n){qt(n+"()",function(){var e=Array.prototype.slice.call(arguments);e[0]=t.map(e[0].split(/\s/),function(t){return t.match(/\.dt\b/)?t:t+".dt"}).join(" ");var a=t(this.tables().nodes());return a[n].apply(a,e),this})}),qt("clear()",function(){return this.iterator("table",function(t){L(t)})}),qt("settings()",function(){return new Jt(this.context,this.context)}),qt("init()",function(){var t=this.context;return t.length?t[0].oInit:null}),qt("data()",function(){return this.iterator("table",function(t){return le(t.aoData,"_aData")}).flatten()}),qt("destroy()",function(n){return n=n||!1,this.iterator("table",function(a){var r,o=a.nTableWrapper.parentNode,i=a.oClasses,l=a.nTable,s=a.nTBody,u=a.nTHead,c=a.nTFoot,f=t(l),d=t(s),h=t(a.nTableWrapper),p=t.map(a.aoData,function(t){return t.nTr});a.bDestroying=!0,kt(a,"aoDestroyCallback","destroy",[a]),n||new Jt(a).columns().visible(!0),h.off(".DT").find(":not(tbody *)").off(".DT"),t(e).off(".DT-"+a.sInstance),l!=u.parentNode&&(f.children("thead").detach(),f.append(u)),c&&l!=c.parentNode&&(f.children("tfoot").detach(),f.append(c)),a.aaSorting=[],a.aaSortingFixed=[],It(a),t(p).removeClass(a.asStripeClasses.join(" ")),t("th, td",u).removeClass(i.sSortable+" "+i.sSortableAsc+" "+i.sSortableDesc+" "+i.sSortableNone),d.children().detach(),d.append(p);var g=n?"remove":"detach";f[g](),h[g](),!n&&o&&(o.insertBefore(l,a.nTableReinsertBefore),f.css("width",a.sDestroyWidth).removeClass(i.sTable),r=a.asDestroyStripes.length,r&&d.children().each(function(e){t(this).addClass(a.asDestroyStripes[e%r])}));var b=t.inArray(a,$t.settings);b!==-1&&$t.settings.splice(b,1)})}),t.each(["column","row","cell"],function(t,e){qt(e+"s().every()",function(t){var n=this.selector.opts,r=this;return this.iterator(e,function(o,i,l,s,u){t.call(r[e](i,"cell"===e?l:n,"cell"===e?n:a),i,l,s,u)})})}),qt("i18n()",function(e,n,r){var o=this.context[0],i=I(e)(o.oLanguage);return i===a&&(i=n),r!==a&&t.isPlainObject(i)&&(i=i[r]!==a?i[r]:i._),i.replace("%d",r)}),$t.version="1.10.18",$t.settings=[],$t.models={},$t.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},$t.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},$t.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},$t.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((t.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(t.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:t.extend({},$t.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},r($t.defaults),$t.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},r($t.defaults.column),$t.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:a,oAjaxData:a,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Et(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Et(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,a=this.aiDisplay.length,r=this.oFeatures,o=r.bPaginate;return r.bServerSide?o===!1||t===-1?e+a:Math.min(e+t,this._iRecordsDisplay):!o||n>a||t===-1?a:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},$t.ext=Xt={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:$t.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:$t.version},t.extend(Xt,{afnFiltering:Xt.search,aTypes:Xt.type.detect,ofnSearch:Xt.type.search,oSort:Xt.type.order,afnSortData:Xt.order,aoFeatures:Xt.feature,oApi:Xt.internal,oStdClasses:Xt.classes,oPagination:Xt.pager}),t.extend($t.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Xe=$t.ext.pager;t.extend(Xe,{simple:function(t,e){return["previous","next"]},full:function(t,e){return["first","previous","next","last"]},numbers:function(t,e){return[Bt(t,e)]},simple_numbers:function(t,e){return["previous",Bt(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Bt(t,e),"next","last"]},first_last_numbers:function(t,e){return["first",Bt(t,e),"last"]},_numbers:Bt,numbers_length:7}),t.extend(!0,$t.ext.renderer,{pageButton:{_:function(e,r,o,i,l,s){var u,c,f,d=e.oClasses,h=e.oLanguage.oPaginate,p=e.oLanguage.oAria.paginate||{},g=0,b=function(n,a){var r,i,f,v,S=function(t){ft(e,t.data.action,!0)};for(r=0,i=a.length;r<i;r++)if(v=a[r],t.isArray(v)){var m=t("<"+(v.DT_el||"div")+"/>").appendTo(n);b(m,v)}else{switch(u=null,c="",v){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":u=h.sFirst,c=v+(l>0?"":" "+d.sPageButtonDisabled);break;case"previous":u=h.sPrevious,c=v+(l>0?"":" "+d.sPageButtonDisabled);break;case"next":u=h.sNext,c=v+(l<s-1?"":" "+d.sPageButtonDisabled);break;case"last":u=h.sLast,c=v+(l<s-1?"":" "+d.sPageButtonDisabled);break;default:u=v+1,c=l===v?d.sPageButtonActive:""}null!==u&&(f=t("<a>",{"class":d.sPageButton+" "+c,"aria-controls":e.sTableId,"aria-label":p[v],"data-dt-idx":g,tabindex:e.iTabIndex,id:0===o&&"string"==typeof v?e.sTableId+"_"+v:null}).html(u).appendTo(n),Ht(f,{action:v},S),g++)}};try{f=t(r).find(n.activeElement).data("dt-idx")}catch(v){}b(t(r).empty(),i),f!==a&&t(r).find("[data-dt-idx="+f+"]").focus()}}}),t.extend($t.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return re(t,n)?"num"+n:null},function(t,e){if(t&&!(t instanceof Date)&&!Kt.test(t))return null;var n=Date.parse(t);return null!==n&&!isNaN(n)||ee(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return re(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ie(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ie(t,n,!0)?"html-num-fmt"+n:null},function(t,e){return ee(t)||"string"==typeof t&&t.indexOf("<")!==-1?"html":null}]),t.extend($t.ext.type.search,{html:function(t){return ee(t)?t:"string"==typeof t?t.replace(Yt," ").replace(Zt,""):""},string:function(t){return ee(t)?t:"string"==typeof t?t.replace(Yt," "):t}});var Je=function(t,e,n,a){return 0===t||t&&"-"!==t?(e&&(t=ae(t,e)),t.replace&&(n&&(t=t.replace(n,"")),a&&(t=t.replace(a,""))),1*t):-(1/0)};t.extend(Xt.type.order,{"date-pre":function(t){var e=Date.parse(t);return isNaN(e)?-(1/0):e},"html-pre":function(t){return ee(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return ee(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0}}),Ut(""),t.extend(!0,$t.ext.renderer,{header:{_:function(e,n,a,r){t(e.nTable).on("order.dt.DT",function(t,o,i,l){if(e===o){var s=a.idx;n.removeClass(a.sSortingClass+" "+r.sSortAsc+" "+r.sSortDesc).addClass("asc"==l[s]?r.sSortAsc:"desc"==l[s]?r.sSortDesc:a.sSortingClass)}})},jqueryui:function(e,n,a,r){t("<div/>").addClass(r.sSortJUIWrapper).append(n.contents()).append(t("<span/>").addClass(r.sSortIcon+" "+a.sSortingClassJUI)).appendTo(n),t(e.nTable).on("order.dt.DT",function(t,o,i,l){if(e===o){var s=a.idx;n.removeClass(r.sSortAsc+" "+r.sSortDesc).addClass("asc"==l[s]?r.sSortAsc:"desc"==l[s]?r.sSortDesc:a.sSortingClass),n.find("span."+r.sSortIcon).removeClass(r.sSortJUIAsc+" "+r.sSortJUIDesc+" "+r.sSortJUI+" "+r.sSortJUIAscAllowed+" "+r.sSortJUIDescAllowed).addClass("asc"==l[s]?r.sSortJUIAsc:"desc"==l[s]?r.sSortJUIDesc:a.sSortingClassJUI)}})}}});var qe=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t};return $t.render={number:function(t,e,n,a,r){return{display:function(o){if("number"!=typeof o&&"string"!=typeof o)return o;var i=o<0?"-":"",l=parseFloat(o);if(isNaN(l))return qe(o);l=l.toFixed(n),o=Math.abs(l);var s=parseInt(o,10),u=n?e+(o-s).toFixed(n).substring(2):"";return i+(a||"")+s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+u+(r||"")}}},text:function(){return{display:qe}}},t.extend($t.ext.internal,{_fnExternApiFunc:Vt,_fnBuildAjax:V,_fnAjaxUpdate:X,_fnAjaxParameters:J,_fnAjaxUpdateDraw:q,_fnAjaxDataSrc:G,_fnAddColumn:f,_fnColumnOptions:d,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:g,_fnVisbleColumns:b,_fnGetColumns:v,_fnColumnTypes:S,_fnApplyColumnDefs:m,_fnHungarianMap:r,_fnCamelToHungarian:o,_fnLanguageCompat:i,_fnBrowserDetect:u,_fnAddData:D,_fnAddTr:y,_fnNodeToDataIndex:_,_fnNodeToColumnIndex:C,_fnGetCellData:T,_fnSetCellData:w,_fnSplitObjNotation:x,_fnGetObjectDataFn:I,_fnSetObjectDataFn:A,_fnGetDataMaster:F,_fnClearTable:L,_fnDeleteIndex:R,_fnInvalidate:P,_fnGetRowElements:j,_fnCreateTr:N,_fnBuildHead:O,_fnDrawHead:k,_fnDraw:M,_fnReDraw:W,_fnAddOptionsHtml:E,_fnDetectHeader:B,_fnGetUniqueThs:U,_fnFeatureHtmlFilter:$,_fnFilterComplete:z,_fnFilterCustom:Y,_fnFilterColumn:Z,_fnFilter:K,_fnFilterCreateSearch:Q,_fnEscapeRegex:ve,_fnFilterData:tt,_fnFeatureHtmlInfo:at,_fnUpdateInfo:rt,_fnInfoMacros:ot,_fnInitialise:it,_fnInitComplete:lt,_fnLengthChange:st,_fnFeatureHtmlLength:ut,_fnFeatureHtmlPaginate:ct,_fnPageChange:ft,_fnFeatureHtmlProcessing:dt,_fnProcessingDisplay:ht,_fnFeatureHtmlTable:pt,_fnScrollDraw:gt,_fnApplyToChildren:bt,_fnCalculateColumnWidths:vt,_fnThrottle:ye,_fnConvertToWidth:St,_fnGetWidestNode:mt,_fnGetMaxLenString:Dt,_fnStringToCss:yt,_fnSortFlatten:_t,_fnSort:Ct,_fnSortAria:Tt,_fnSortListener:wt,_fnSortAttachListener:xt,_fnSortingClasses:It,_fnSortData:At,_fnSaveState:Ft,_fnLoadState:Lt,_fnSettingsFromNode:Rt,_fnLog:Pt,_fnMap:jt,_fnBindAction:Ht,_fnCallbackReg:Ot,_fnCallbackFire:kt,_fnLengthOverflow:Mt,_fnRenderer:Wt,_fnDataSource:Et,_fnRowAttributes:H,_fnExtend:Nt,_fnCalculateEnd:function(){}}),t.fn.dataTable=$t,$t.$=t,t.fn.dataTableSettings=$t.settings,t.fn.dataTableExt=$t.ext,t.fn.DataTable=function(e){return t(this).dataTable(e).api()},t.each($t,function(e,n){t.fn.DataTable[e]=n}),t.fn.dataTable});
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,e.i18next=t())}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function f(e,t){return h(e)||v(e,t)||m()}function p(e){return g(e)||d(e)||y()}function g(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function h(e){if(Array.isArray(e))return e}function d(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function v(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==s["return"]||s["return"]()}finally{if(o)throw i}}return n}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function b(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n}function k(e){return null==e?"":""+e}function x(e,t,n){e.forEach(function(e){t[e]&&(n[e]=t[e])})}function S(e,t,n){function r(e){return e&&e.indexOf("###")>-1?e.replace(/###/g,"."):e}function o(){return!e||"string"==typeof e}for(var i="string"!=typeof t?[].concat(t):t.split(".");i.length>1;){if(o())return{};var a=r(i.shift());!e[a]&&n&&(e[a]=new n),e=e[a]}return o()?{}:{obj:e,k:r(i.shift())}}function w(e,t,n){var r=S(e,t,Object),o=r.obj,i=r.k;o[i]=n}function O(e,t,n,r){var o=S(e,t,Object),i=o.obj,a=o.k;i[a]=i[a]||[],r&&(i[a]=i[a].concat(n)),r||i[a].push(n)}function R(e,t){var n=S(e,t),r=n.obj,o=n.k;if(r)return r[o]}function j(e,t,n){for(var r in t)r in e?"string"==typeof e[r]||e[r]instanceof String||"string"==typeof t[r]||t[r]instanceof String?n&&(e[r]=t[r]):j(e[r],t[r],n):e[r]=t[r];return e}function L(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function N(e){return"string"==typeof e?e.replace(/[&<>"'\/]/g,function(e){return H[e]}):e}function P(e){return e.charAt(0).toUpperCase()+e.slice(1)}function C(){var e={};return _.forEach(function(t){t.lngs.forEach(function(n){e[n]={numbers:t.nr,plurals:z[t.fc]}})}),e}function E(e,t){for(var n=e.indexOf(t);n!==-1;)e.splice(n,1),n=e.indexOf(t)}function F(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:function(){},parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var n={};if("object"===e(t[1])&&(n=t[1]),"string"==typeof t[1]&&(n.defaultValue=t[1]),"string"==typeof t[2]&&(n.tDescription=t[2]),"object"===e(t[2])||"object"===e(t[3])){var r=t[3]||t[2];Object.keys(r).forEach(function(e){n[e]=r[e]})}return n},interpolation:{escapeValue:!0,format:function(e,t,n){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",maxReplaces:1e3}}}function A(e){return"string"==typeof e.ns&&(e.ns=[e.ns]),"string"==typeof e.fallbackLng&&(e.fallbackLng=[e.fallbackLng]),"string"==typeof e.fallbackNS&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e}function T(){}var V={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){var n;console&&console[e]&&(n=console)[e].apply(n,p(t))}},U=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.init(n,r)}return r(e,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||V,this.options=t,this.debug=t.debug}},{key:"setDebug",value:function(e){this.debug=e}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}},{key:"deprecate",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(e,t,n,r){return r&&!this.debug?null:("string"==typeof e[0]&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}},{key:"create",value:function(t){return new e(this.logger,i({},{prefix:"".concat(this.prefix,":").concat(t,":")},this.options))}}]),e}(),K=new U,D=function(){function e(){t(this,e),this.observers={}}return r(e,[{key:"on",value:function(e,t){var n=this;return e.split(" ").forEach(function(e){n.observers[e]=n.observers[e]||[],n.observers[e].push(t)}),this}},{key:"off",value:function(e,t){var n=this;this.observers[e]&&this.observers[e].forEach(function(){if(t){var r=n.observers[e].indexOf(t);r>-1&&n.observers[e].splice(r,1)}else delete n.observers[e]})}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){var o=[].concat(this.observers[e]);o.forEach(function(e){e.apply(void 0,n)})}if(this.observers["*"]){var i=[].concat(this.observers["*"]);i.forEach(function(t){t.apply(t,[e].concat(n))})}}}]),e}(),H={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},I=function(e){function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};return t(this,n),r=c(this,s(n).call(this)),r.data=e||{},r.options=o,void 0===r.options.keySeparator&&(r.options.keySeparator="."),r}return a(n,e),r(n,[{key:"addNamespaces",value:function(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}},{key:"removeNamespaces",value:function(e){var t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,i=[e,t];return n&&"string"!=typeof n&&(i=i.concat(n)),n&&"string"==typeof n&&(i=i.concat(o?n.split(o):n)),e.indexOf(".")>-1&&(i=e.split(".")),R(this.data,i)}},{key:"addResource",value:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},i=this.options.keySeparator;void 0===i&&(i=".");var a=[e,t];n&&(a=a.concat(i?n.split(i):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),w(this.data,a,r),o.silent||this.emit("added",e,t,n,r)}},{key:"addResources",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(var o in n)"string"!=typeof n[o]&&"[object Array]"!==Object.prototype.toString.apply(n[o])||this.addResource(e,t,o,n[o],{silent:!0});r.silent||this.emit("added",e,t,n)}},{key:"addResourceBundle",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},s=[e,t];e.indexOf(".")>-1&&(s=e.split("."),r=n,n=t,t=s[1]),this.addNamespaces(t);var u=R(this.data,s)||{};r?j(u,n,o):u=i({},u,n),w(this.data,s,u),a.silent||this.emit("added",e,t,n)}},{key:"removeResourceBundle",value:function(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}},{key:"hasResourceBundle",value:function(e,t){return void 0!==this.getResource(e,t)}},{key:"getResourceBundle",value:function(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?i({},{},this.getResource(e,t)):this.getResource(e,t)}},{key:"getDataByLanguage",value:function(e){return this.data[e]}},{key:"toJSON",value:function(){return this.data}}]),n}(D),M={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,o){var i=this;return e.forEach(function(e){i.processors[e]&&(t=i.processors[e].process(t,n,r,o))}),t}},B=function(n){function o(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t(this,o),n=c(this,s(o).call(this)),x(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat"],e,l(l(n))),n.options=r,void 0===n.options.keySeparator&&(n.options.keySeparator="."),n.logger=K.create("translator"),n}return a(o,n),r(o,[{key:"changeLanguage",value:function(e){e&&(this.language=e)}},{key:"exists",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},n=this.resolve(e,t);return n&&void 0!==n.res}},{key:"extractFromKey",value:function(e,t){var n=t.nsSeparator||this.options.nsSeparator;void 0===n&&(n=":");var r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,o=t.ns||this.options.defaultNS;if(n&&e.indexOf(n)>-1){var i=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(i[0])>-1)&&(o=i.shift()),e=i.join(r)}return"string"==typeof o&&(o=[o]),{key:e,namespaces:o}}},{key:"translate",value:function(t,n){var r=this;if("object"!==e(n)&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),n||(n={}),void 0===t||null===t)return"";Array.isArray(t)||(t=[String(t)]);var o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=this.extractFromKey(t[t.length-1],n),s=a.key,u=a.namespaces,l=u[u.length-1],c=n.lng||this.language,f=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&"cimode"===c.toLowerCase()){if(f){var p=n.nsSeparator||this.options.nsSeparator;return l+p+s}return s}var g=this.resolve(t,n),h=g&&g.res,d=g&&g.usedKey||s,v=g&&g.exactUsedKey||s,y=Object.prototype.toString.apply(h),m=["[object Number]","[object Function]","[object RegExp]"],b=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,x="string"!=typeof h&&"boolean"!=typeof h&&"number"!=typeof h;if(k&&h&&x&&m.indexOf(y)<0&&("string"!=typeof b||"[object Array]"!==y)){if(!n.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(d,h,n):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");if(o){var S="[object Array]"===y,w=S?[]:{},O=S?v:d;for(var R in h)if(Object.prototype.hasOwnProperty.call(h,R)){var j="".concat(O).concat(o).concat(R);w[R]=this.translate(j,i({},n,{joinArrays:!1,ns:u})),w[R]===j&&(w[R]=h[R])}h=w}}else if(k&&"string"==typeof b&&"[object Array]"===y)h=h.join(b),h&&(h=this.extendTranslation(h,t,n));else{var L=!1,N=!1;if(!this.isValidLookup(h)&&void 0!==n.defaultValue){if(L=!0,void 0!==n.count){var P=this.pluralResolver.getSuffix(c,n.count);h=n["defaultValue".concat(P)]}h||(h=n.defaultValue)}this.isValidLookup(h)||(N=!0,h=s);var C=n.defaultValue&&n.defaultValue!==h&&this.options.updateMissing;if(N||L||C){this.logger.log(C?"updateKey":"missingKey",c,l,s,C?n.defaultValue:h);var E=[],F=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&F&&F[0])for(var A=0;A<F.length;A++)E.push(F[A]);else"all"===this.options.saveMissingTo?E=this.languageUtils.toResolveHierarchy(n.lng||this.language):E.push(n.lng||this.language);var T=function(e,t){r.options.missingKeyHandler?r.options.missingKeyHandler(e,l,t,C?n.defaultValue:h,C,n):r.backendConnector&&r.backendConnector.saveMissing&&r.backendConnector.saveMissing(e,l,t,C?n.defaultValue:h,C,n),r.emit("missingKey",e,l,t,h)};if(this.options.saveMissing){var V=void 0!==n.count&&"string"!=typeof n.count;this.options.saveMissingPlurals&&V?E.forEach(function(e){var t=r.pluralResolver.getPluralFormsOfKey(e,s);t.forEach(function(t){return T([e],t)})}):T(E,s)}}h=this.extendTranslation(h,t,n,g),N&&h===s&&this.options.appendNamespaceToMissingKey&&(h="".concat(l,":").concat(s)),N&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(h))}return h}},{key:"extendTranslation",value:function(e,t,n,r){var o=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,n,r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init(i({},n,{interpolation:i({},this.options.interpolation,n.interpolation)}));var a=n.replace&&"string"!=typeof n.replace?n.replace:n;this.options.interpolation.defaultVariables&&(a=i({},this.options.interpolation.defaultVariables,a)),e=this.interpolator.interpolate(e,a,n.lng||this.language,n),n.nest!==!1&&(e=this.interpolator.nest(e,function(){return o.translate.apply(o,arguments)},n)),n.interpolation&&this.interpolator.reset()}var s=n.postProcess||this.options.postProcess,u="string"==typeof s?[s]:s;return void 0!==e&&null!==e&&u&&u.length&&n.applyPostProcessor!==!1&&(e=M.handle(u,e,t,n,this)),e}},{key:"resolve",value:function(e){var t,n,r,o,i,a=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!a.isValidLookup(t)){var u=a.extractFromKey(e,s),l=u.key;n=l;var c=u.namespaces;a.options.fallbackNS&&(c=c.concat(a.options.fallbackNS));var f=void 0!==s.count&&"string"!=typeof s.count,p=void 0!==s.context&&"string"==typeof s.context&&""!==s.context,g=s.lngs?s.lngs:a.languageUtils.toResolveHierarchy(s.lng||a.language,s.fallbackLng);c.forEach(function(e){a.isValidLookup(t)||(i=e,g.forEach(function(n){if(!a.isValidLookup(t)){o=n;var i=l,u=[i];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(u,l,n,e,s);else{var c;f&&(c=a.pluralResolver.getSuffix(n,s.count)),f&&p&&u.push(i+c),p&&u.push(i+="".concat(a.options.contextSeparator).concat(s.context)),f&&u.push(i+=c)}for(var g;g=u.pop();)a.isValidLookup(t)||(r=g,t=a.getResource(n,e,g,s))}}))})}}),{res:t,usedKey:n,exactUsedKey:r,usedLng:o,usedNS:i}}},{key:"isValidLookup",value:function(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}},{key:"getResource",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}}]),o}(D),q=function(){function e(n){t(this,e),this.options=n,this.whitelist=this.options.whitelist||!1,this.logger=K.create("languageUtils")}return r(e,[{key:"getScriptPartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return null;var t=e.split("-");return 2===t.length?null:(t.pop(),this.formatLanguageCode(t.join("-")))}},{key:"getLanguagePartFromCode",value:function(e){if(!e||e.indexOf("-")<0)return e;var t=e.split("-");return this.formatLanguageCode(t[0])}},{key:"formatLanguageCode",value:function(e){if("string"==typeof e&&e.indexOf("-")>-1){var t=["hans","hant","latn","cyrl","cans","mong","arab"],n=e.split("-");return this.options.lowerCaseLng?n=n.map(function(e){return e.toLowerCase()}):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=P(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=P(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}},{key:"isWhitelisted",value:function(e){return("languageOnly"===this.options.load||this.options.nonExplicitWhitelist)&&(e=this.getLanguagePartFromCode(e)),!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(e)>-1}},{key:"getFallbackCodes",value:function(e,t){if(!e)return[];if("string"==typeof e&&(e=[e]),"[object Array]"===Object.prototype.toString.apply(e))return e;if(!t)return e["default"]||[];var n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e["default"]),n||[]}},{key:"toResolveHierarchy",value:function(e,t){var n=this,r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),o=[],i=function(e){e&&(n.isWhitelisted(e)?o.push(e):n.logger.warn("rejecting non-whitelisted language code: ".concat(e)))};return"string"==typeof e&&e.indexOf("-")>-1?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):"string"==typeof e&&i(this.formatLanguageCode(e)),r.forEach(function(e){o.indexOf(e)<0&&i(n.formatLanguageCode(e))}),o}}]),e}(),_=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he"],nr:[1,2,20,21],fc:22}],z={1:function(e){return Number(e>1)},2:function(e){return Number(1!=e)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(0===e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(1==e?0:e>=2&&e<=4?1:2)},7:function(e){return Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(1==e?0:2==e?1:8!=e&&11!=e?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(1==e?0:2==e?1:e<7?2:e<11?3:4)},11:function(e){return Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(0!==e)},14:function(e){return Number(1==e?0:2==e?1:3==e?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:0!==e?1:2)},17:function(e){return Number(1==e||e%10==1?0:1)},18:function(e){return Number(0==e?0:1==e?1:2)},19:function(e){return Number(1==e?0:0===e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(1==e?0:0===e||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(1===e?0:2===e?1:(e<0||e>10)&&e%10==0?2:3)}},$=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,e),this.languageUtils=n,this.options=r,this.logger=K.create("pluralResolver"),this.rules=C()}return r(e,[{key:"addRule",value:function(e,t){this.rules[e]=t}},{key:"getRule",value:function(e){return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}},{key:"needsPlural",value:function(e){var t=this.getRule(e);return t&&t.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(e,t){var n=this,r=[],o=this.getRule(e);return o?(o.numbers.forEach(function(o){var i=n.getSuffix(e,o);r.push("".concat(t).concat(i))}),r):r}},{key:"getSuffix",value:function(e,t){var n=this,r=this.getRule(e);if(r){var o=r.noAbs?r.plurals(t):r.plurals(Math.abs(t)),i=r.numbers[o];this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]&&(2===i?i="plural":1===i&&(i=""));var a=function(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};return"v1"===this.options.compatibilityJSON?1===i?"":"number"==typeof i?"_plural_".concat(i.toString()):a():"v2"===this.options.compatibilityJSON?a():this.options.simplifyPluralSuffix&&2===r.numbers.length&&1===r.numbers[0]?a():this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString()}return this.logger.warn("no plural rule found for: ".concat(e)),""}}]),e}(),J=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t(this,e),this.logger=K.create("interpolator"),this.init(n,!0)}return r(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t&&(this.options=e,this.format=e.interpolation&&e.interpolation.format||function(e){return e}),e.interpolation||(e.interpolation={escapeValue:!0});var n=e.interpolation;this.escape=void 0!==n.escape?n.escape:N,this.escapeValue=void 0===n.escapeValue||n.escapeValue,this.useRawValueToEscape=void 0!==n.useRawValueToEscape&&n.useRawValueToEscape,this.prefix=n.prefix?L(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?L(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?L(n.nestingPrefix):n.nestingPrefixEscaped||L("$t("),this.nestingSuffix=n.nestingSuffix?L(n.nestingSuffix):n.nestingSuffixEscaped||L(")"),this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var e="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(e,"g");var t="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(t,"g");var n="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(n,"g")}},{key:"interpolate",value:function(e,t,n,r){function o(e){return e.replace(/\$/g,"$$$$")}var i,a,s,u=this,l=function(e){if(e.indexOf(u.formatSeparator)<0)return R(t,e);var r=e.split(u.formatSeparator),o=r.shift().trim(),i=r.join(u.formatSeparator).trim();return u.format(R(t,o),i,n)};this.resetRegExp();var c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler;for(s=0;(i=this.regexpUnescape.exec(e))&&(a=l(i[1].trim()),e=e.replace(i[0],a),this.regexpUnescape.lastIndex=0,s++,!(s>=this.maxReplaces)););for(s=0;i=this.regexp.exec(e);){if(a=l(i[1].trim()),void 0===a)if("function"==typeof c){var f=c(e,i,r);a="string"==typeof f?f:""}else this.logger.warn("missed to pass in variable ".concat(i[1]," for interpolating ").concat(e)),a="";else"string"==typeof a||this.useRawValueToEscape||(a=k(a));if(a=o(this.escapeValue?this.escape(a):a),e=e.replace(i[0],a),this.regexp.lastIndex=0,s++,s>=this.maxReplaces)break}return e}},{key:"nest",value:function(e,t){function n(e,t){if(e.indexOf(",")<0)return e;var n=e.split(",");e=n.shift();var r=n.join(",");r=this.interpolate(r,s),r=r.replace(/'/g,'"');try{s=JSON.parse(r),t&&(s=i({},t,s))}catch(o){this.logger.error("failed parsing options string in nesting for key ".concat(e),o)}return e}var r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i({},a);for(s.applyPostProcessor=!1;r=this.nestingRegexp.exec(e);){if(o=t(n.call(this,r[1].trim(),s),s),o&&r[0]===e&&"string"!=typeof o)return o;"string"!=typeof o&&(o=k(o)),o||(this.logger.warn("missed to resolve ".concat(r[1]," for nesting ").concat(e)),o=""),e=e.replace(r[0],o),this.regexp.lastIndex=0}return e}}]),e}(),W=function(e){function n(e,r,o){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t(this,n),i=c(this,s(n).call(this)),i.backend=e,i.store=r,i.languageUtils=o.languageUtils,i.options=a,i.logger=K.create("backendConnector"),i.state={},i.queue=[],i.backend&&i.backend.init&&i.backend.init(o,a.backend,a),i}return a(n,e),r(n,[{key:"queueLoad",value:function(e,t,n,r){var o=this,i=[],a=[],s=[],u=[];return e.forEach(function(e){var r=!0;t.forEach(function(t){var s="".concat(e,"|").concat(t);!n.reload&&o.store.hasResourceBundle(e,t)?o.state[s]=2:o.state[s]<0||(1===o.state[s]?a.indexOf(s)<0&&a.push(s):(o.state[s]=1,r=!1,a.indexOf(s)<0&&a.push(s),i.indexOf(s)<0&&i.push(s),u.indexOf(t)<0&&u.push(t)))}),r||s.push(e)}),(i.length||a.length)&&this.queue.push({pending:a,loaded:{},errors:[],callback:r}),{toLoad:i,pending:a,toLoadLanguages:s,toLoadNamespaces:u}}},{key:"loaded",value:function o(e,t,n){var r=e.split("|"),i=f(r,2),a=i[0],s=i[1];t&&this.emit("failedLoading",a,s,t),n&&this.store.addResourceBundle(a,s,n),this.state[e]=t?-1:2;var o={};this.queue.forEach(function(n){O(n.loaded,[a],s),E(n.pending,e),t&&n.errors.push(t),0!==n.pending.length||n.done||(Object.keys(n.loaded).forEach(function(e){o[e]||(o[e]=[]),n.loaded[e].length&&n.loaded[e].forEach(function(t){o[e].indexOf(t)<0&&o[e].push(t)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(function(e){return!e.done})}},{key:"read",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,a=arguments.length>5?arguments[5]:void 0;return e.length?this.backend[n](e,t,function(s,u){return s&&u&&o<5?void setTimeout(function(){r.read.call(r,e,t,n,o+1,2*i,a)},i):void a(s,u)}):a(null,{})}},{key:"prepareLoading",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();"string"==typeof e&&(e=this.languageUtils.toResolveHierarchy(e)),"string"==typeof t&&(t=[t]);var i=this.queueLoad(e,t,r,o);return i.toLoad.length?void i.toLoad.forEach(function(e){n.loadOne(e)}):(i.pending.length||o(),null)}},{key:"load",value:function(e,t,n){this.prepareLoading(e,t,{},n)}},{key:"reload",value:function(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}},{key:"loadOne",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=e.split("|"),o=f(r,2),i=o[0],a=o[1];this.read(i,a,"read",null,null,function(r,o){r&&t.logger.warn("".concat(n,"loading namespace ").concat(a," for language ").concat(i," failed"),r),!r&&o&&t.logger.log("".concat(n,"loaded namespace ").concat(a," for language ").concat(i),o),t.loaded(e,r,o)})}},{key:"saveMissing",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.backend&&this.backend.create&&this.backend.create(e,t,n,r,null,i({},a,{isUpdate:o})),e&&e[0]&&this.store.addResource(e[0],t,n,r)}}]),n}(D),G=function(n){function o(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(t(this,o),e=c(this,s(o).call(this)),e.options=A(n),e.services={},e.logger=K,e.modules={external:[]},r&&!e.isInitialized&&!n.isClone){if(!e.options.initImmediate)return e.init(n,r),c(e,l(l(e)));setTimeout(function(){e.init(n,r)},0)}return e}return a(o,n),r(o,[{key:"init",value:function(){function e(e){return e?"function"==typeof e?new e:e:null}var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if("function"==typeof n&&(r=n,n={}),this.options=i({},F(),this.options,A(n)),this.format=this.options.interpolation.format,r||(r=T),!this.options.isClone){this.modules.logger?K.init(e(this.modules.logger),this.options):K.init(null,this.options);var o=new q(this.options);this.store=new I(this.options.resources,this.options);var a=this.services;a.logger=K,a.resourceStore=this.store,a.languageUtils=o,a.pluralResolver=new $(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),a.interpolator=new J(this.options),a.backendConnector=new W(e(this.modules.backend),a.resourceStore,a,this.options),a.backendConnector.on("*",function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit.apply(t,[e].concat(r))}),this.modules.languageDetector&&(a.languageDetector=e(this.modules.languageDetector),a.languageDetector.init(a,this.options.detection,this.options)),this.modules.i18nFormat&&(a.i18nFormat=e(this.modules.i18nFormat),a.i18nFormat.init&&a.i18nFormat.init(this)),this.translator=new B(this.services,this.options),this.translator.on("*",function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];t.emit.apply(t,[e].concat(r))}),this.modules.external.forEach(function(e){e.init&&e.init(t)})}var s=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle","getDataByLanguage"];s.forEach(function(e){t[e]=function(){var n;return(n=t.store)[e].apply(n,arguments)}});var u=b(),l=function(){t.changeLanguage(t.options.lng,function(e,n){t.isInitialized=!0,t.logger.log("initialized",t.options),t.emit("initialized",t.options),u.resolve(n),r(e,n)})};return this.options.resources||!this.options.initImmediate?l():setTimeout(l,0),u}},{key:"loadResources",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;if(!this.options.resources||this.options.partialBundledLanguages){if(this.language&&"cimode"===this.language.toLowerCase())return t();var n=[],r=function(t){if(t){var r=e.services.languageUtils.toResolveHierarchy(t);r.forEach(function(e){n.indexOf(e)<0&&n.push(e)})}};if(this.language)r(this.language);else{var o=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
o.forEach(function(e){return r(e)})}this.options.preload&&this.options.preload.forEach(function(e){return r(e)}),this.services.backendConnector.load(n,this.options.ns,t)}else t(null)}},{key:"reloadResources",value:function(e,t,n){var r=b();return e||(e=this.languages),t||(t=this.options.ns),n||(n=T),this.services.backendConnector.reload(e,t,function(){r.resolve(),n(null)}),r}},{key:"use",value:function(e){return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&M.addPostProcessor(e),"3rdParty"===e.type&&this.modules.external.push(e),this}},{key:"changeLanguage",value:function(e,t){var n=this,r=b(),o=function(e,o){n.translator.changeLanguage(o),o&&(n.emit("languageChanged",o),n.logger.log("languageChanged",o)),r.resolve(function(){return n.t.apply(n,arguments)}),t&&t(e,function(){return n.t.apply(n,arguments)})},i=function(e){e&&(n.language=e,n.languages=n.services.languageUtils.toResolveHierarchy(e),n.translator.language||n.translator.changeLanguage(e),n.services.languageDetector&&n.services.languageDetector.cacheUserLanguage(e)),n.loadResources(function(t){o(t,e)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(i):i(e):i(this.services.languageDetector.detect()),r}},{key:"getFixedT",value:function(t,n){var r=this,o=function a(t,n){var o=i({},n);if("object"!==e(n)){for(var s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];o=r.options.overloadTranslationOptionHandler([t,n].concat(u))}return o.lng=o.lng||a.lng,o.lngs=o.lngs||a.lngs,o.ns=o.ns||a.ns,r.t(t,o)};return"string"==typeof t?o.lng=t:o.lngs=t,o.ns=n,o}},{key:"t",value:function(){var e;return this.translator&&(e=this.translator).translate.apply(e,arguments)}},{key:"exists",value:function(){var e;return this.translator&&(e=this.translator).exists.apply(e,arguments)}},{key:"setDefaultNamespace",value:function(e){this.options.defaultNS=e}},{key:"loadNamespaces",value:function(e,t){var n=this,r=b();return this.options.ns?("string"==typeof e&&(e=[e]),e.forEach(function(e){n.options.ns.indexOf(e)<0&&n.options.ns.push(e)}),this.loadResources(function(e){r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}},{key:"loadLanguages",value:function(e,t){var n=b();"string"==typeof e&&(e=[e]);var r=this.options.preload||[],o=e.filter(function(e){return r.indexOf(e)<0});return o.length?(this.options.preload=r.concat(o),this.loadResources(function(e){n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}},{key:"dir",value:function(e){if(e||(e=this.languages&&this.languages.length>0?this.languages[0]:this.language),!e)return"rtl";var t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return t.indexOf(this.services.languageUtils.getLanguagePartFromCode(e))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new o(e,t)}},{key:"cloneInstance",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,r=i({},this.options,t,{isClone:!0}),a=new o(r),s=["store","services","language"];return s.forEach(function(t){a[t]=e[t]}),a.translator=new B(a.services,a.options),a.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];a.emit.apply(a,[e].concat(n))}),a.init(r,n),a.translator.options=a.options,a}}]),o}(D),Q=new G;return Q});
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):e.i18nextBrowserLanguageDetector=o()}(this,function(){"use strict";function e(e){return a.call(i.call(arguments,1),function(o){if(o)for(var t in o)void 0===e[t]&&(e[t]=o[t])}),e}function o(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function t(){return{order:["querystring","cookie","localStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}}var n=[],a=n.forEach,i=n.slice,r={create:function(e,o,t,n){var a=void 0;if(t){var i=new Date;i.setTime(i.getTime()+60*t*1e3),a="; expires="+i.toGMTString()}else a="";n=n?"domain="+n+";":"",document.cookie=e+"="+o+a+";"+n+"path=/"},read:function(e){for(var o=e+"=",t=document.cookie.split(";"),n=0;n<t.length;n++){for(var a=t[n];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(o))return a.substring(o.length,a.length)}return null},remove:function(e){this.create(e,"",-1)}},u={name:"cookie",lookup:function(e){var o=void 0;if(e.lookupCookie&&"undefined"!=typeof document){var t=r.read(e.lookupCookie);t&&(o=t)}return o},cacheUserLanguage:function(e,o){o.lookupCookie&&"undefined"!=typeof document&&r.create(o.lookupCookie,e,o.cookieMinutes,o.cookieDomain)}},c={name:"querystring",lookup:function(e){var o=void 0;if("undefined"!=typeof window)for(var t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var i=n[a].indexOf("=");if(i>0){var r=n[a].substring(0,i);r===e.lookupQuerystring&&(o=n[a].substring(i+1))}}return o}},l=void 0;try{l="undefined"!==window&&null!==window.localStorage;var s="i18next.translate.boo";window.localStorage.setItem(s,"foo"),window.localStorage.removeItem(s)}catch(d){l=!1}var f={name:"localStorage",lookup:function(e){var o=void 0;if(e.lookupLocalStorage&&l){var t=window.localStorage.getItem(e.lookupLocalStorage);t&&(o=t)}return o},cacheUserLanguage:function(e,o){o.lookupLocalStorage&&l&&window.localStorage.setItem(o.lookupLocalStorage,e)}},g={name:"navigator",lookup:function(e){var o=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var t=0;t<navigator.languages.length;t++)o.push(navigator.languages[t]);navigator.userLanguage&&o.push(navigator.userLanguage),navigator.language&&o.push(navigator.language)}return o.length>0?o:void 0}},p={name:"htmlTag",lookup:function(e){var o=void 0,t=e.htmlTag||("undefined"!=typeof document?document.documentElement:null);return t&&"function"==typeof t.getAttribute&&(o=t.getAttribute("lang")),o}},h={name:"path",lookup:function(e){var o=void 0;if("undefined"!=typeof window){var t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(t instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof t[e.lookupFromPathIndex])return;o=t[e.lookupFromPathIndex].replace("/","")}else o=t[0].replace("/","")}return o}},v={name:"subdomain",lookup:function(e){var o=void 0;if("undefined"!=typeof window){var t=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi);t instanceof Array&&(o="number"==typeof e.lookupFromSubdomainIndex?t[e.lookupFromSubdomainIndex].replace("http://","").replace("https://","").replace(".",""):t[0].replace("http://","").replace("https://","").replace(".",""))}return o}},m=function(){function e(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(o,t,n){return t&&e(o.prototype,t),n&&e(o,n),o}}(),k=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,n),this.type="languageDetector",this.detectors={},this.init(e,t)}return m(n,[{key:"init",value:function(o){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=o,this.options=e(n,this.options||{},t()),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(u),this.addDetector(c),this.addDetector(f),this.addDetector(g),this.addDetector(p),this.addDetector(h),this.addDetector(v)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var o=this;e||(e=this.options.order);var t=[];e.forEach(function(e){if(o.detectors[e]){var n=o.detectors[e].lookup(o.options);n&&"string"==typeof n&&(n=[n]),n&&(t=t.concat(n))}});var n=void 0;if(t.forEach(function(e){if(!n){var t=o.services.languageUtils.formatLanguageCode(e);o.services.languageUtils.isWhitelisted(t)&&(n=t)}}),!n){var a=this.i18nOptions.fallbackLng;"string"==typeof a&&(a=[a]),a||(a=[]),n="[object Array]"===Object.prototype.toString.apply(a)?a[0]:a[0]||a["default"]&&a["default"][0]}return n}},{key:"cacheUserLanguage",value:function(e,o){var t=this;o||(o=this.options.caches),o&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||o.forEach(function(o){t.detectors[o]&&t.detectors[o].cacheUserLanguage(e,t.options)}))}}]),n}();return k.type="languageDetector",k});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.i18nextXHRBackend=e()}(this,function(){"use strict";function t(t){return r.call(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t}function e(t,e){if(e&&"object"===("undefined"==typeof e?"undefined":l(e))){var n="",o=encodeURIComponent;for(var i in e)n+="&"+o(i)+"="+o(e[i]);if(!n)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+n.slice(1)}return t}function n(t,n,o,i,a){i&&"object"===("undefined"==typeof i?"undefined":l(i))&&(a||(i._t=new Date),i=e("",i).slice(1)),n.queryStringParams&&(t=e(t,n.queryStringParams));try{var r;r=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0"),r.open(i?"POST":"GET",t,1),n.crossDomain||r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.withCredentials=!!n.withCredentials,i&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.overrideMimeType&&r.overrideMimeType("application/json");var s=n.customHeaders;if(s)for(var u in s)r.setRequestHeader(u,s[u]);r.onreadystatechange=function(){r.readyState>3&&o&&o(r.responseText,r)},r.send(i)}catch(c){console&&console.log(c)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:n}}var a=[],r=a.forEach,s=a.slice,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),this.init(t,n),this.type="backend"}return u(e,[{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=t(n,this.options||{},i())}},{key:"readMulti",value:function(t,e,n){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath(t,e));var i=this.services.interpolator.interpolate(o,{lng:t.join("+"),ns:e.join("+")});this.loadUrl(i,n)}},{key:"read",value:function(t,e,n){var o=this.options.loadPath;"function"==typeof this.options.loadPath&&(o=this.options.loadPath([t],[e]));var i=this.services.interpolator.interpolate(o,{lng:t,ns:e});this.loadUrl(i,n)}},{key:"loadUrl",value:function(t,e){var n=this;this.options.ajax(t,this.options,function(o,i){if(i.status>=500&&i.status<600)return e("failed loading "+t,!0);if(i.status>=400&&i.status<500)return e("failed loading "+t,!1);var a=void 0,r=void 0;try{a=n.options.parse(o,t)}catch(s){r="failed parsing "+t+" to json"}return r?e(r,!1):void e(null,a)})}},{key:"create",value:function(t,e,n,o){var i=this;"string"==typeof t&&(t=[t]);var a={};a[n]=o||"",t.forEach(function(t){var n=i.services.interpolator.interpolate(i.options.addPath,{lng:t,ns:e});i.options.ajax(n,i.options,function(t,e){},a)})}}]),e}();return c.type="backend",c});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.jqueryI18next=e()}(this,function(){"use strict";function t(t,a){function i(n,a,i){function r(t,n){return f.parseDefaultValueFromContent?e({},t,{defaultValue:n}):t}if(0!==a.length){var o="text";if(0===a.indexOf("[")){var l=a.split("]");a=l[1],o=l[0].substr(1,l[0].length-1)}if(a.indexOf(";")===a.length-1&&(a=a.substr(0,a.length-2)),"html"===o)n.html(t.t(a,r(i,n.html())));else if("text"===o)n.text(t.t(a,r(i,n.text())));else if("prepend"===o)n.prepend(t.t(a,r(i,n.html())));else if("append"===o)n.append(t.t(a,r(i,n.html())));else if(0===o.indexOf("data-")){var s=o.substr("data-".length),d=t.t(a,r(i,n.data(s)));n.data(s,d),n.attr(o,d)}else n.attr(o,t.t(a,r(i,n.attr(o))))}}function r(t,n){var r=t.attr(f.selectorAttr);if(r||"undefined"==typeof r||r===!1||(r=t.text()||t.val()),r){var o=t,l=t.data(f.targetAttr);if(l&&(o=t.find(l)||t),n||f.useOptionsAttr!==!0||(n=t.data(f.optionsAttr)),n=n||{},r.indexOf(";")>=0){var s=r.split(";");a.each(s,function(t,e){""!==e&&i(o,e.trim(),n)})}else i(o,r,n);if(f.useOptionsAttr===!0){var d={};d=e({clone:d},n),delete d.lng,t.data(f.optionsAttr,d)}}}function o(t){return this.each(function(){r(a(this),t);var e=a(this).find("["+f.selectorAttr+"]");e.each(function(){r(a(this),t)})})}var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};f=e({},n,f),a[f.tName]=t.t.bind(t),a[f.i18nName]=t,a.fn[f.handleName]=o}var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},n={tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0},a={init:t};return a});
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";if(!e.jstree){var r=0,i=!1,s=!1,a=!1,n=[],o=e("script:last").attr("src"),d=window.document;e.jstree={version:"3.3.8",defaults:{plugins:[]},plugins:{},path:o&&o.indexOf("/")!==-1?o.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},e.jstree.create=function(t,i){var s=new e.jstree.core((++r)),a=i;return i=e.extend(!0,{},e.jstree.defaults,i),a&&a.plugins&&(i.plugins=a.plugins),e.each(i.plugins,function(e,t){"core"!==e&&(s=s.plugin(t,i[t]))}),e(t).data("jstree",s),s.init(t,i),s},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(d).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var r=null,i=null;if(!t||!t.id||t.tagName&&t.nodeType||(t=t.id),!i||!i.length)try{i=e(t)}catch(s){}if(!i||!i.length)try{i=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(s){}return i&&i.length&&(i=i.closest(".jstree")).length&&(i=i.data("jstree"))?r=i:e(".jstree").each(function(){var i=e(this).data("jstree");if(i&&i._model.data[t])return r=i,!1}),r},e.fn.jstree=function(r){var i="string"==typeof r,s=Array.prototype.slice.call(arguments,1),a=null;return!(r===!0&&!this.length)&&(this.each(function(){var n=e.jstree.reference(this),o=i&&n?n[r]:null;if(a=i&&o?o.apply(n,s):null,n||i||r!==t&&!e.isPlainObject(r)||e.jstree.create(this,r),(n&&!i||r===!0)&&(a=n||!1),null!==a&&a!==t)return!1}),null!==a&&a!==t?a:this)},e.expr.pseudos.jstree=e.expr.createPseudo(function(r){return function(r){return e(r).hasClass("jstree")&&e(r).data("jstree")!==t}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,keyboard:{"ctrl-space":function(t){t.type="click",e(t.currentTarget).trigger(t)},enter:function(t){t.type="click",e(t.currentTarget).trigger(t)},left:function(t){if(t.preventDefault(),this.is_open(t.currentTarget))this.close_node(t.currentTarget);else{var r=this.get_parent(t.currentTarget);r&&r.id!==e.jstree.root&&this.get_node(r,!0).children(".jstree-anchor").focus()}},up:function(e){e.preventDefault();var t=this.get_prev_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},right:function(t){if(t.preventDefault(),this.is_closed(t.currentTarget))this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()});else if(this.is_open(t.currentTarget)){var r=this.get_node(t.currentTarget,!0).children(".jstree-children")[0];r&&e(this._firstChild(r)).children(".jstree-anchor").focus()}},down:function(e){e.preventDefault();var t=this.get_next_dom(e.currentTarget);t&&t.length&&t.children(".jstree-anchor").focus()},"*":function(e){this.open_all()},home:function(t){t.preventDefault();var r=this._firstChild(this.get_container_ul()[0]);r&&e(r).children(".jstree-anchor").filter(":visible").focus()},end:function(e){e.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()},f2:function(e){e.preventDefault(),this.edit(e.currentTarget)}}},e.jstree.core.prototype={plugin:function(t,r){var i=e.jstree.plugins[t];return i?(this._data[t]={},i.prototype=this,new i(r,this)):this},init:function(t,r){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=r,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(e.jstree.root)},destroy:function(e){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},_create_prototype_node:function(){var e,t,r=d.createElement("LI");return r.setAttribute("role","treeitem"),e=d.createElement("I"),e.className="jstree-icon jstree-ocl",e.setAttribute("role","presentation"),r.appendChild(e),e=d.createElement("A"),e.className="jstree-anchor",e.setAttribute("href","#"),e.setAttribute("tabindex","-1"),t=d.createElement("I"),t.className="jstree-icon jstree-themeicon",t.setAttribute("role","presentation"),e.appendChild(t),r.appendChild(e),e=t=null,r},_kbevent_to_func:function(e){var t={8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},r=[];e.ctrlKey&&r.push("ctrl"),e.altKey&&r.push("alt"),e.shiftKey&&r.push("shift"),r.push(t[e.which]||e.which),r=r.sort().join("-").toLowerCase();var i,s,a=this.settings.core.keyboard;for(i in a)if(a.hasOwnProperty(i)&&(s=i,"-"!==s&&"+"!==s&&(s=s.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS"),s=s.split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),s===r))return a[i];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var t="",r=null,i=0;this.element.on("dblclick.jstree",function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;if(d.selection&&d.selection.empty)d.selection.empty();else if(window.getSelection){var t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(r){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),i=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){return!(!e.target.tagName||"input"!==e.target.tagName.toLowerCase())||void(this.settings.core.dblclick_toggle&&this.toggle_node(e.target))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==d.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(e){if(e.target.tagName&&"input"===e.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===e.which?e.which=39:39===e.which&&(e.which=37));var t=this._kbevent_to_func(e);if(t){var r=t.call(this,e);if(r===!1||r===!0)return r}},this)).on("load_node.jstree",e.proxy(function(t,r){r.status&&(r.node.id!==e.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t,r,i=[];for(t=0,r=this._data.core.selected.length;t<r;t++)i=i.concat(this._model.data[this._data.core.selected[t]].parents);for(i=e.vakata.array_unique(i),t=0,r=i.length;t<r;t++)this.open_node(i[t],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(i){if(i.target.tagName&&"input"===i.target.tagName.toLowerCase())return!0;r&&clearTimeout(r),r=setTimeout(function(){t=""},500);var s=String.fromCharCode(i.which).toLowerCase(),a=this.element.find(".jstree-anchor").filter(":visible"),n=a.index(d.activeElement)||0,o=!1;if(t+=s,t.length>1){if(a.slice(n).each(e.proxy(function(r,i){if(0===e(i).text().toLowerCase().indexOf(t))return e(i).focus(),o=!0,!1},this)),o)return;if(a.slice(0,n).each(e.proxy(function(r,i){if(0===e(i).text().toLowerCase().indexOf(t))return e(i).focus(),o=!0,!1},this)),o)return}if(new RegExp("^"+s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(t)){if(a.slice(n+1).each(e.proxy(function(t,r){if(e(r).text().toLowerCase().charAt(0)===s)return e(r).focus(),o=!0,!1},this)),o)return;if(a.slice(0,n+1).each(e.proxy(function(t,r){if(e(r).text().toLowerCase().charAt(0)===s)return e(r).focus(),o=!0,!1},this)),o)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this._data.core.themes.ellipsis=e.ellipsis,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").trigger("mouseleave"),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var r=this.get_node(t.currentTarget);r&&r.id&&(this._data.core.focused=r.id),this.element.find(".jstree-hovered").not(t.currentTarget).trigger("mouseleave"),e(t.currentTarget).trigger("mouseenter"),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+new Date-i>500&&!this._data.core.focused&&this.settings.core.restore_focus){i=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(d).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var r=this.settings.core.strings;return e.isFunction(r)?r.call(this,t):r&&r[t]?r[t]:t},_firstChild:function(e){for(e=e?e.firstChild:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_nextSibling:function(e){for(e=e?e.nextSibling:null;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},_previousSibling:function(e){for(e=e?e.previousSibling:null;null!==e&&1!==e.nodeType;)e=e.previousSibling;return e},get_node:function(t,r){t&&t.id&&(t=t.id),t instanceof e&&t.length&&t[0].id&&(t=t[0].id);var i;try{if(this._model.data[t])t=this._model.data[t];else if("string"==typeof t&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if("string"==typeof t&&(i=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else if((i=this.element.find(t)).length&&this._model.data[i.closest(".jstree-node").attr("id")])t=this._model.data[i.closest(".jstree-node").attr("id")];else{if(!(i=this.element.find(t)).length||!i.hasClass("jstree"))return!1;t=this._model.data[e.jstree.root]}return r&&(t=t.id===e.jstree.root?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(s){return!1}},get_path:function(t,r,i){if(t=t.parents?t:this.get_node(t),!t||t.id===e.jstree.root||!t.parents)return!1;var s,a,n=[];for(n.push(i?t.id:t.text),s=0,a=t.parents.length;s<a;s++)n.push(i?t.parents[s]:this.get_text(t.parents[s]));return n=n.reverse().slice(1),r?n.join(r):n},get_next_dom:function(t,r){var i;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(i=this._firstChild(this.get_container_ul()[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);return!!i&&e(i)}if(!t||!t.length)return!1;if(r){i=t[0];do i=this._nextSibling(i);while(i&&0===i.offsetHeight);return!!i&&e(i)}if(t.hasClass("jstree-open")){for(i=this._firstChild(t.children(".jstree-children")[0]);i&&0===i.offsetHeight;)i=this._nextSibling(i);if(null!==i)return e(i)}i=t[0];do i=this._nextSibling(i);while(i&&0===i.offsetHeight);return null!==i?e(i):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,r){var i;if(t=this.get_node(t,!0),t[0]===this.element[0]){for(i=this.get_container_ul()[0].lastChild;i&&0===i.offsetHeight;)i=this._previousSibling(i);return!!i&&e(i)}if(!t||!t.length)return!1;if(r){i=t[0];do i=this._previousSibling(i);while(i&&0===i.offsetHeight);return!!i&&e(i)}i=t[0];do i=this._previousSibling(i);while(i&&0===i.offsetHeight);if(null!==i){for(t=e(i);t.hasClass("jstree-open");)t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return i=t[0].parentNode.parentNode,!(!i||!i.className||i.className.indexOf("jstree-node")===-1)&&e(i)},get_parent:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!(!e||!e.length)&&e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,r){var i,s,a,n,o;if(e.isArray(t))return this._load_nodes(t.slice(),r),!0;if(t=this.get_node(t),!t)return r&&r.call(this,t,!1),!1;if(t.state.loaded){for(t.state.loaded=!1,a=0,n=t.parents.length;a<n;a++)this._model.data[t.parents[a]].children_d=e.vakata.array_filter(this._model.data[t.parents[a]].children_d,function(r){return e.inArray(r,t.children_d)===-1});for(i=0,s=t.children_d.length;i<s;i++)this._model.data[t.children_d[i]].state.selected&&(o=!0),delete this._model.data[t.children_d[i]];o&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(r){return e.inArray(r,t.children_d)===-1})),t.children=[],t.children_d=[],o&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var i=this.get_node(t,!0),s=0,a=0,n=this._model.data,o=!1;for(s=0,a=t.children.length;s<a;s++)if(n[t.children[s]]&&!n[t.children[s]].state.hidden){o=!0;break}t.state.loaded&&i&&i.length&&(i.removeClass("jstree-closed jstree-open jstree-leaf"),o?"#"!==t.id&&i.addClass(t.state.opened?"jstree-open":"jstree-closed"):i.addClass("jstree-leaf")),i.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),r&&r.call(this,t,e)},this)),!0},_load_nodes:function(e,t,r,i){var s,a,n=!0,o=function(){this._load_nodes(e,t,!0)},d=this._model.data,c=[];for(s=0,a=e.length;s<a;s++)d[e[s]]&&(!d[e[s]].state.loaded&&!d[e[s]].state.failed||!r&&i)&&(this.is_loading(e[s])||this.load_node(e[s],o),n=!1);if(n){for(s=0,a=e.length;s<a;s++)d[e[s]]&&d[e[s]].state.loaded&&c.push(e[s]);t&&!t.done&&(t.call(this,c),t.done=!0)}},load_all:function(t,r){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var i,s,a=[],n=this._model.data,o=n[t.id].children_d;for(t.state&&!t.state.loaded&&a.push(t.id),i=0,s=o.length;i<s;i++)n[o[i]]&&n[o[i]].state&&!n[o[i]].state.loaded&&a.push(o[i]);a.length?this._load_nodes(a,function(){this.load_all(t,r)}):(r&&r.call(this,t),this.trigger("load_all",{node:t}))},_load_node:function(t,r){var i,s=this.settings.core.data,a=function(){return 3!==this.nodeType&&8!==this.nodeType};return s?e.isFunction(s)?s.call(this,t,e.proxy(function(i){i===!1?r.call(this,!1):this["string"==typeof i?"_append_html_data":"_append_json_data"](t,"string"==typeof i?e(e.parseHTML(i)).filter(a):i,function(e){r.call(this,e)})},this)):"object"==typeof s?s.url?(s=e.extend(!0,{},s),e.isFunction(s.url)&&(s.url=s.url.call(this,t)),e.isFunction(s.data)&&(s.data=s.data.call(this,t)),e.ajax(s).done(e.proxy(function(i,s,n){var o=n.getResponseHeader("Content-Type");return o&&o.indexOf("json")!==-1||"object"==typeof i?this._append_json_data(t,i,function(e){r.call(this,e)}):o&&o.indexOf("html")!==-1||"string"==typeof i?this._append_html_data(t,e(e.parseHTML(i)).filter(a),function(e){r.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:n})},this.settings.core.error.call(this,this._data.core.last_error),r.call(this,!1))},this)).fail(e.proxy(function(e){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},r.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)},this))):(i=e.isArray(s)?e.extend(!0,[],s):e.isPlainObject(s)?e.extend(!0,{},s):s,t.id===e.jstree.root?this._append_json_data(t,i,function(e){r.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),r.call(this,!1))):"string"==typeof s?t.id===e.jstree.root?this._append_html_data(t,e(e.parseHTML(s)).filter(a),function(e){r.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),r.call(this,!1)):r.call(this,!1):t.id===e.jstree.root?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){r.call(this,e)}):r.call(this,!1)},_node_changed:function(t){t=this.get_node(t),t&&e.inArray(t.id,this._model.changed)===-1&&this._model.changed.push(t.id)},_append_html_data:function(t,r,i){t=this.get_node(t),t.children=[],t.children_d=[];var s,a,n,o=r.is("ul")?r.children():r,d=t.id,c=[],l=[],h=this._model.data,_=h[d],u=this._data.core.selected.length;for(o.each(e.proxy(function(t,r){s=this._parse_model_from_html(e(r),d,_.parents.concat()),s&&(c.push(s),l.push(s),h[s].children_d.length&&(l=l.concat(h[s].children_d)))},this)),_.children=c,_.children_d=l,a=0,n=_.parents.length;a<n;a++)h[_.parents[a]].children_d=h[_.parents[a]].children_d.concat(l);this.trigger("model",{nodes:l,parent:d}),d!==e.jstree.root?(this._node_changed(d),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==u&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)},_append_json_data:function(t,r,i,s){if(null!==this.element){t=this.get_node(t),t.children=[],t.children_d=[],r.d&&(r=r.d,"string"==typeof r&&(r=JSON.parse(r))),e.isArray(r)||(r=[r]);var a=null,n={df:this._model.default_state,dat:r,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},o=this,d=function(e,t){e.data&&(e=e.data);var r,i,s,a,n=e.dat,d=e.par,c=[],l=[],h=[],_=e.df,u=e.t_id,g=e.t_cnt,f=e.m,p=f[d],m=e.sel,v=function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d=e.id.toString(),c={id:d,text:e.text||"",icon:e.icon===t||e.icon,parent:r,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in _)_.hasOwnProperty(s)&&(c.state[s]=_[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(c.icon=e.data.jstree.icon),c.icon!==t&&null!==c.icon&&""!==c.icon||(c.icon=!0),e&&e.data&&(c.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(c.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(c.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(c.li_attr[s]=e.li_attr[s]);if(c.li_attr.id||(c.li_attr.id=d),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(c.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(c.state.loaded=!1,c.children=[],c.children_d=[]),f[c.id]=c,s=0,a=c.children.length;s<a;s++)n=v(f[c.children[s]],c.id,i),o=f[n],c.children_d.push(n),o.children_d.length&&(c.children_d=c.children_d.concat(o.children_d));return delete e.data,delete e.children,f[c.id].original=e,c.state.selected&&h.push(c.id),c.id},j=function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d,c=!1;do c="j"+u+"_"+ ++g;while(f[c]);d={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:r,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in _)_.hasOwnProperty(s)&&(d.state[s]=_[s]);if(e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=c),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=j(e.children[s],d.id,i),o=f[n],d.children.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,f[d.id]=d,d.state.selected&&h.push(d.id),d.id};if(n.length&&n[0].id!==t&&n[0].parent!==t){for(i=0,s=n.length;i<s;i++)n[i].children||(n[i].children=[]),n[i].state||(n[i].state={}),f[n[i].id.toString()]=n[i];for(i=0,s=n.length;i<s;i++)f[n[i].parent.toString()]?(f[n[i].parent.toString()].children.push(n[i].id.toString()),p.children_d.push(n[i].id.toString())):"undefined"!=typeof o&&(o._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:n[i].id.toString(),parent:n[i].parent.toString()})},o.settings.core.error.call(o,o._data.core.last_error));for(i=0,s=p.children.length;i<s;i++)r=v(f[p.children[i]],d,p.parents.concat()),l.push(r),f[r].children_d.length&&(l=l.concat(f[r].children_d));for(i=0,s=p.parents.length;i<s;i++)f[p.parents[i]].children_d=f[p.parents[i]].children_d.concat(l);a={cnt:g,mod:f,sel:m,par:d,dpc:l,add:h}}else{for(i=0,s=n.length;i<s;i++)r=j(n[i],d,p.parents.concat()),r&&(c.push(r),l.push(r),f[r].children_d.length&&(l=l.concat(f[r].children_d)));for(p.children=c,p.children_d=l,i=0,s=p.parents.length;i<s;i++)f[p.parents[i]].children_d=f[p.parents[i]].children_d.concat(l);a={cnt:g,mod:f,sel:m,par:d,dpc:l,add:h}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?a:void postMessage(a)},c=function(t,r){if(null!==this.element){this._cnt=t.cnt;var s,a=this._model.data;for(s in a)a.hasOwnProperty(s)&&a[s].state&&a[s].state.loading&&t.mod[s]&&(t.mod[s].state.loading=!0);if(this._model.data=t.mod,r){var n,o=t.add,d=t.sel,c=this._data.core.selected.slice();if(a=this._model.data,d.length!==c.length||e.vakata.array_unique(d.concat(c)).length!==d.length){for(s=0,n=d.length;s<n;s++)e.inArray(d[s],o)===-1&&e.inArray(d[s],c)===-1&&(a[d[s]].state.selected=!1);for(s=0,n=c.length;s<n;s++)e.inArray(c[s],d)===-1&&(a[c[s]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!==e.jstree.root?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),i.call(this,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+d.toString()],{type:"text/javascript"}))),!this._data.core.working||s?(this._data.core.working=!0,a=new window.Worker(this._wrk),a.onmessage=e.proxy(function(e){c.call(this,e.data,!0);try{a.terminate(),a=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),n.par?a.postMessage(n):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,r,i,!0])}catch(l){c.call(this,d(n),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else c.call(this,d(n),!1)}},_parse_model_from_html:function(r,i,s){s=s?[].concat(s):[],i&&s.unshift(i);var a,n,o,d,c,l=this._model.data,h={id:!1,text:!1,icon:!0,parent:i,parents:s,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in this._model.default_state)this._model.default_state.hasOwnProperty(o)&&(h.state[o]=this._model.default_state[o]);if(d=e.vakata.attributes(r,!0),e.each(d,function(t,r){return r=e.trim(r),!r.length||(h.li_attr[t]=r,void("id"===t&&(h.id=r.toString())))}),d=r.children("a").first(),d.length&&(d=e.vakata.attributes(d,!0),e.each(d,function(t,r){r=e.trim(r),r.length&&(h.a_attr[t]=r)})),d=r.children("a").first().length?r.children("a").first().clone():r.clone(),d.children("ins, i, ul").remove(),d=d.html(),d=e("<div />").html(d),h.text=this.settings.core.force_text?d.text():d.html(),d=r.data(),h.data=d?e.extend(!0,{},d):null,h.state.opened=r.hasClass("jstree-open"),h.state.selected=r.children("a").hasClass("jstree-clicked"),h.state.disabled=r.children("a").hasClass("jstree-disabled"),h.data&&h.data.jstree)for(o in h.data.jstree)h.data.jstree.hasOwnProperty(o)&&(h.state[o]=h.data.jstree[o]);d=r.children("a").children(".jstree-themeicon"),d.length&&(h.icon=!d.hasClass("jstree-themeicon-hidden")&&d.attr("rel")),h.state.icon!==t&&(h.icon=h.state.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),d=r.children("ul").children("li");do c="j"+this._id+"_"+ ++this._cnt;while(l[c]);return h.id=h.li_attr.id?h.li_attr.id.toString():c,d.length?(d.each(e.proxy(function(t,r){a=this._parse_model_from_html(e(r),h.id,s),n=this._model.data[a],h.children.push(a),n.children_d.length&&(h.children_d=h.children_d.concat(n.children_d))},this)),h.children_d=h.children_d.concat(h.children)):r.hasClass("jstree-closed")&&(h.state.loaded=!1),h.li_attr["class"]&&(h.li_attr["class"]=h.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),h.a_attr["class"]&&(h.a_attr["class"]=h.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),l[h.id]=h,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_flat_json:function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d=e.id.toString(),c=this._model.data,l=this._model.default_state,h={id:d,text:e.text||"",icon:e.icon===t||e.icon,parent:r,parents:i,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in l)l.hasOwnProperty(s)&&(h.state[s]=l[s]);if(e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon),h.icon!==t&&null!==h.icon&&""!==h.icon||(h.icon=!0),e&&e.data&&(h.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);if(h.li_attr.id||(h.li_attr.id=d),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);for(e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),c[h.id]=h,s=0,a=h.children.length;s<a;s++)n=this._parse_model_from_flat_json(c[h.children[s]],h.id,i),o=c[n],h.children_d.push(n),o.children_d.length&&(h.children_d=h.children_d.concat(o.children_d));return delete e.data,delete e.children,c[h.id].original=e,h.state.selected&&this._data.core.selected.push(h.id),h.id},_parse_model_from_json:function(e,r,i){i=i?i.concat():[],r&&i.unshift(r);var s,a,n,o,d,c=!1,l=this._model.data,h=this._model.default_state;do c="j"+this._id+"_"+ ++this._cnt;while(l[c]);d={id:!1,text:"string"==typeof e?e:"",icon:"object"!=typeof e||e.icon===t||e.icon,parent:r,parents:i,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in h)h.hasOwnProperty(s)&&(d.state[s]=h[s]);if(e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon),d.icon!==t&&null!==d.icon&&""!==d.icon||(d.icon=!0),e&&e.data&&(d.data=e.data,e.data.jstree))for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s]);if(e&&"object"==typeof e.state)for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&"object"==typeof e.li_attr)for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);if(d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),
d.id||(d.id=c),d.li_attr.id||(d.li_attr.id=d.id),e&&"object"==typeof e.a_attr)for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,a=e.children.length;s<a;s++)n=this._parse_model_from_json(e.children[s],d.id,i),o=l[n],d.children.push(n),o.children_d.length&&(d.children_d=d.children_d.concat(o.children_d));d.children_d=d.children.concat(d.children_d)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,l[d.id]=d,d.state.selected&&this._data.core.selected.push(d.id),d.id},_redraw:function(){var t,r,i,s=this._model.force_full_redraw?this._model.data[e.jstree.root].children.concat([]):this._model.changed.concat([]),a=d.createElement("UL"),n=this._data.core.focused;for(r=0,i=s.length;r<i;r++)t=this.redraw_node(s[r],!0,this._model.force_full_redraw),t&&this._model.force_full_redraw&&a.appendChild(t);this._model.force_full_redraw&&(a.className=this.get_container_ul()[0].className,a.setAttribute("role","group"),this.element.empty().append(a)),null!==n&&this.settings.core.restore_focus&&(t=this.get_node(n,!0),t&&t.length&&t.children(".jstree-anchor")[0]!==d.activeElement?t.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:s})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(t){var r=this.get_node(t),i=!1,s=!1,a=!1,n=d;if(!r)return!1;if(r.id===e.jstree.root)return this.redraw(!0);if(t=this.get_node(t,!0),!t||!t.length)return!1;if(t.children(".jstree-children").remove(),t=t[0],r.children.length&&r.state.loaded){for(a=n.createElement("UL"),a.setAttribute("role","group"),a.className="jstree-children",i=0,s=r.children.length;i<s;i++)a.appendChild(this.redraw_node(r.children[i],!0,!0));t.appendChild(a)}},redraw_node:function(t,r,i,s){var a=this.get_node(t),n=!1,o=!1,c=!1,l=!1,h=!1,_=!1,u="",g=d,f=this._model.data,p=!1,m=null,v=0,j=0,y=!1,k=!1;if(!a)return!1;if(a.id===e.jstree.root)return this.redraw(!0);if(r=r||0===a.children.length,t=d.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(a.id[0])!==-1?"\\3"+a.id[0]+" "+a.id.substr(1).replace(e.jstree.idregex,"\\$&"):a.id.replace(e.jstree.idregex,"\\$&"))):d.getElementById(a.id))t=e(t),i||(n=t.parent().parent()[0],n===this.element[0]&&(n=null),o=t.index()),r||!a.children.length||t.children(".jstree-children").length||(r=!0),r||(c=t.children(".jstree-children")[0]),p=t.children(".jstree-anchor")[0]===d.activeElement,t.remove();else if(r=!0,!i){if(n=a.parent!==e.jstree.root?e("#"+a.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===n||n&&f[a.parent].state.opened))return!1;o=e.inArray(a.id,null===n?f[e.jstree.root].children:f[a.parent].children)}t=this._data.core.node.cloneNode(!0),u="jstree-node ";for(l in a.li_attr)if(a.li_attr.hasOwnProperty(l)){if("id"===l)continue;"class"!==l?t.setAttribute(l,a.li_attr[l]):u+=a.li_attr[l]}for(a.a_attr.id||(a.a_attr.id=a.id+"_anchor"),t.setAttribute("aria-selected",!!a.state.selected),t.setAttribute("aria-level",a.parents.length),t.setAttribute("aria-labelledby",a.a_attr.id),a.state.disabled&&t.setAttribute("aria-disabled",!0),l=0,h=a.children.length;l<h;l++)if(!f[a.children[l]].state.hidden){y=!0;break}if(null!==a.parent&&f[a.parent]&&!a.state.hidden&&(l=e.inArray(a.id,f[a.parent].children),k=a.id,l!==-1))for(l++,h=f[a.parent].children.length;l<h&&(f[f[a.parent].children[l]].state.hidden||(k=f[a.parent].children[l]),k===a.id);l++);a.state.hidden&&(u+=" jstree-hidden"),a.state.loading&&(u+=" jstree-loading"),a.state.loaded&&!y?u+=" jstree-leaf":(u+=a.state.opened&&a.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",a.state.opened&&a.state.loaded)),k===a.id&&(u+=" jstree-last"),t.id=a.id,t.className=u,u=(a.state.selected?" jstree-clicked":"")+(a.state.disabled?" jstree-disabled":"");for(h in a.a_attr)if(a.a_attr.hasOwnProperty(h)){if("href"===h&&"#"===a.a_attr[h])continue;"class"!==h?t.childNodes[1].setAttribute(h,a.a_attr[h]):u+=" "+a.a_attr[h]}if(u.length&&(t.childNodes[1].className="jstree-anchor "+u),(a.icon&&a.icon!==!0||a.icon===!1)&&(a.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":a.icon.indexOf("/")===-1&&a.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+a.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage='url("'+a.icon+'")',t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?t.childNodes[1].appendChild(g.createTextNode(a.text)):t.childNodes[1].innerHTML+=a.text,r&&a.children.length&&(a.state.opened||s)&&a.state.loaded){for(_=g.createElement("UL"),_.setAttribute("role","group"),_.className="jstree-children",l=0,h=a.children.length;l<h;l++)_.appendChild(this.redraw_node(a.children[l],r,!0));t.appendChild(_)}if(c&&t.appendChild(c),!i){for(n||(n=this.element[0]),l=0,h=n.childNodes.length;l<h;l++)if(n.childNodes[l]&&n.childNodes[l].className&&n.childNodes[l].className.indexOf("jstree-children")!==-1){m=n.childNodes[l];break}m||(m=g.createElement("UL"),m.setAttribute("role","group"),m.className="jstree-children",n.appendChild(m)),n=m,o<n.childNodes.length?n.insertBefore(t,n.childNodes[o]):n.appendChild(t),p&&(v=this.element[0].scrollTop,j=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=v,this.element[0].scrollLeft=j)}return a.state.opened&&!a.state.loaded&&(a.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(a.id,!1,0)},this),0)),t},open_node:function(r,i,s){var a,n,o,d;if(e.isArray(r)){for(r=r.slice(),a=0,n=r.length;a<n;a++)this.open_node(r[a],i,s);return!0}return r=this.get_node(r),!(!r||r.id===e.jstree.root)&&(s=s===t?this.settings.core.animation:s,this.is_closed(r)?this.is_loaded(r)?(o=this.get_node(r,!0),d=this,o.length&&(s&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),r.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(r),s?(this.trigger("before_open",{node:r}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(s,function(){this.style.display="",d.element&&d.trigger("after_open",{node:r})})):(this.trigger("before_open",{node:r}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),r.state.opened=!0,i&&i.call(this,r,!0),o.length||this.trigger("before_open",{node:r}),this.trigger("open_node",{node:r}),s&&o.length||this.trigger("after_open",{node:r}),!0):this.is_loading(r)?setTimeout(e.proxy(function(){this.open_node(r,i,s)},this),500):void this.load_node(r,function(e,t){return t?this.open_node(e,i,s):!!i&&i.call(this,e,!1)}):(i&&i.call(this,r,!1),!1))},_open_to:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var r,i,s=t.parents;for(r=0,i=s.length;r<i;r+=1)r!==e.jstree.root&&this.open_node(s[r],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(r,i){var s,a,n,o;if(e.isArray(r)){for(r=r.slice(),s=0,a=r.length;s<a;s++)this.close_node(r[s],i);return!0}return r=this.get_node(r),!(!r||r.id===e.jstree.root)&&(!this.is_closed(r)&&(i=i===t?this.settings.core.animation:i,n=this,o=this.get_node(r,!0),r.state.opened=!1,this.trigger("close_node",{node:r}),void(o.length?i?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(i,function(){this.style.display="",o.children(".jstree-children").remove(),n.element&&n.trigger("after_close",{node:r})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove(),this.trigger("after_close",{node:r})):this.trigger("after_close",{node:r}))))},toggle_node:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.toggle_node(t[r]);return!0}return this.is_closed(t)?this.open_node(t):this.is_open(t)?this.close_node(t):void 0},open_all:function(t,r,i){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var s,a,n,o=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0);if(!o.length){for(s=0,a=t.children_d.length;s<a;s++)this.is_closed(this._model.data[t.children_d[s]])&&(this._model.data[t.children_d[s]].state.opened=!0);return this.trigger("open_all",{node:t})}i=i||o,n=this,o=this.is_closed(t)?o.find(".jstree-closed").addBack():o.find(".jstree-closed"),o.each(function(){n.open_node(this,function(e,t){t&&this.is_parent(e)&&this.open_all(e,r,i)},r||0)}),0===i.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(i)})},close_all:function(t,r){if(t||(t=e.jstree.root),t=this.get_node(t),!t)return!1;var i,s,a=t.id===e.jstree.root?this.get_container_ul():this.get_node(t,!0),n=this;for(a.length&&(a=this.is_open(t)?a.find(".jstree-open").addBack():a.find(".jstree-open"),e(a.get().reverse()).each(function(){n.close_node(this,r||0)})),i=0,s=t.children_d.length;i<s;i++)this._model.data[t.children_d[i]].state.opened=!1;this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.enable_node(t[r]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:t}))},disable_node:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.disable_node(t[r]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:t}))},is_hidden:function(e){return e=this.get_node(e),e.state.hidden===!0},hide_node:function(t,r){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.hide_node(t[i],!0);return r||this.redraw(),!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&void(t.state.hidden||(t.state.hidden=!0,this._node_changed(t.parent),r||this.redraw(),this.trigger("hide_node",{node:t})))},show_node:function(t,r){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.show_node(t[i],!0);return r||this.redraw(),!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&void(t.state.hidden&&(t.state.hidden=!1,this._node_changed(t.parent),r||this.redraw(),this.trigger("show_node",{node:t})))},hide_all:function(t){var r,i=this._model.data,s=[];for(r in i)i.hasOwnProperty(r)&&r!==e.jstree.root&&!i[r].state.hidden&&(i[r].state.hidden=!0,s.push(r));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("hide_all",{nodes:s}),s},show_all:function(t){var r,i=this._model.data,s=[];for(r in i)i.hasOwnProperty(r)&&r!==e.jstree.root&&i[r].state.hidden&&(i[r].state.hidden=!1,s.push(r));return this._model.force_full_redraw=!0,t||this.redraw(),this.trigger("show_all",{nodes:s}),s},activate_node:function(e,r){if(this.is_disabled(e))return!1;if(r&&"object"==typeof r||(r={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==t?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(r.metaKey||r.ctrlKey||r.shiftKey)&&(!r.shiftKey||this._data.core.last_clicked&&this.get_parent(e)&&this.get_parent(e)===this._data.core.last_clicked.parent))if(r.shiftKey){var i,s,a=this.get_node(e).id,n=this._data.core.last_clicked.id,o=this.get_node(this._data.core.last_clicked.parent).children,d=!1;for(i=0,s=o.length;i<s;i+=1)o[i]===a&&(d=!d),o[i]===n&&(d=!d),this.is_disabled(o[i])||!d&&o[i]!==a&&o[i]!==n?this.deselect_node(o[i],!0,r):this.is_hidden(o[i])||this.select_node(o[i],!0,!1,r);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:r})}else this.is_selected(e)?this.deselect_node(e,!1,r):this.select_node(e,!1,!1,r);else!this.settings.core.multiple&&(r.metaKey||r.ctrlKey||r.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,r):(this.deselect_all(!0),this.select_node(e,!1,!1,r),this._data.core.last_clicked=this.get_node(e));this.trigger("activate_node",{node:this.get_node(e),event:r})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),r=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){r.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){return e=this.get_node(e,!0),!!(e&&e.length&&e.children(".jstree-hovered").length)&&(e.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(e)}))},select_node:function(t,r,i,s){var a,n,o;if(e.isArray(t)){for(t=t.slice(),n=0,o=t.length;n<o;n++)this.select_node(t[n],r,i,s);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),i||(a=this._open_to(t)),a&&a.length&&a.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:s}),r||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:s}))))},deselect_node:function(t,r,i){var s,a,n;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.deselect_node(t[s],r,i);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(n=this.get_node(t,!0),void(t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),n.length&&n.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:i}),r||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:i}))))},select_all:function(t){var r,i,s=this._data.core.selected.concat([]);for(this._data.core.selected=this._model.data[e.jstree.root].children_d.concat(),r=0,i=this._data.core.selected.length;r<i;r++)this._model.data[this._data.core.selected[r]]&&(this._model.data[this._data.core.selected[r]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),t||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:s})},deselect_all:function(e){var t,r,i=this._data.core.selected.concat([]);for(t=0,r=this._data.core.selected.length;t<r;t++)this._model.data[this._data.core.selected[t]]&&(this._model.data[this._data.core.selected[t]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:i}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:i})},is_selected:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var r,i,s,a,n=this.get_selected(!0),o={};for(r=0,i=n.length;r<i;r++)o[n[r].id]=n[r];for(r=0,i=n.length;r<i;r++)for(s=0,a=n[r].children_d.length;s<a;s++)o[n[r].children_d[s]]&&delete o[n[r].children_d[s]];n=[];for(r in o)o.hasOwnProperty(r)&&n.push(r);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},get_bottom_selected:function(t){var r,i,s=this.get_selected(!0),a=[];for(r=0,i=s.length;r<i;r++)s[r].children.length||a.push(s[r].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},get_state:function(){var t,r={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}};for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!==e.jstree.root&&(this._model.data[t].state.loaded&&this.settings.core.loaded_state&&r.core.loaded.push(t),this._model.data[t].state.opened&&r.core.open.push(t),this._model.data[t].state.selected&&r.core.selected.push(t));return r},set_state:function(r,i){if(r){if(r.core&&r.core.selected&&r.core.initial_selection===t&&(r.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),r.core){var s,a;if(r.core.loaded)return this.settings.core.loaded_state&&e.isArray(r.core.loaded)&&r.core.loaded.length?this._load_nodes(r.core.loaded,function(e){delete r.core.loaded,this.set_state(r,i)}):(delete r.core.loaded,this.set_state(r,i)),!1;if(r.core.open)return e.isArray(r.core.open)&&r.core.open.length?this._load_nodes(r.core.open,function(e){this.open_node(e,!1,0),delete r.core.open,this.set_state(r,i)}):(delete r.core.open,this.set_state(r,i)),!1;if(r.core.scroll)return r.core.scroll&&r.core.scroll.left!==t&&this.element.scrollLeft(r.core.scroll.left),r.core.scroll&&r.core.scroll.top!==t&&this.element.scrollTop(r.core.scroll.top),delete r.core.scroll,this.set_state(r,i),!1;if(r.core.selected)return s=this,r.core.initial_selection!==t&&r.core.initial_selection!==this._data.core.selected.concat([]).sort().join(",")||(this.deselect_all(),e.each(r.core.selected,function(e,t){s.select_node(t,!1,!0)})),delete r.core.initial_selection,delete r.core.selected,this.set_state(r,i),!1;for(a in r)r.hasOwnProperty(a)&&"core"!==a&&e.inArray(a,this.settings.plugins)===-1&&delete r[a];if(e.isEmptyObject(r.core))return delete r.core,this.set_state(r,i),!1}return!e.isEmptyObject(r)||(r=null,i&&i.call(this),this.trigger("set_state"),!1)}return!1},refresh:function(t,r){this._data.core.state=r===!0?{}:this.get_state(),r&&e.isFunction(r)&&(this._data.core.state=r.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[e.jstree.root]={id:e.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var i=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+i+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(e.jstree.root,function(t,r){r&&(this.get_container_ul()[0].className=i,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var r=[],i=[],s=this._data.core.selected.concat([]);i.push(t.id),t.state.opened===!0&&r.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){i.push(this.id),r.push(this.id)}),this._load_nodes(i,e.proxy(function(e){this.open_node(r,!1,0),this.select_node(s),this.trigger("refresh_node",{node:t,nodes:e})},this),!1,!0)},set_id:function(t,r){if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;var i,s,a=this._model.data,n=t.id;for(r=r.toString(),a[t.parent].children[e.inArray(t.id,a[t.parent].children)]=r,i=0,s=t.parents.length;i<s;i++)a[t.parents[i]].children_d[e.inArray(t.id,a[t.parents[i]].children_d)]=r;for(i=0,s=t.children.length;i<s;i++)a[t.children[i]].parent=r;for(i=0,s=t.children_d.length;i<s;i++)a[t.children_d[i]].parents[e.inArray(t.id,a[t.children_d[i]].parents)]=r;return i=e.inArray(t.id,this._data.core.selected),i!==-1&&(this._data.core.selected[i]=r),i=this.get_node(t.id,!0),i&&(i.attr("id",r),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",r)),delete a[t.id],t.id=r,t.li_attr.id=r,a[r]=t,this.trigger("set_id",{node:t,"new":t.id,old:n}),!0},get_text:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.text},set_text:function(t,r){var i,s;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.set_text(t[i],r);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(t.text=r,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:r}),!0)},get_json:function(t,r,i){if(t=this.get_node(t||e.jstree.root),!t)return!1;r&&r.flat&&!i&&(i=[]);var s,a,n={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:(!r||!r.no_data)&&e.extend(!0,e.isArray(t.data)?[]:{},t.data)};if(r&&r.flat?n.parent=t.parent:n.children=[],r&&r.no_state)delete n.state;else for(s in t.state)t.state.hasOwnProperty(s)&&(n.state[s]=t.state[s]);if(r&&r.no_li_attr&&delete n.li_attr,r&&r.no_a_attr&&delete n.a_attr,r&&r.no_id&&(delete n.id,n.li_attr&&n.li_attr.id&&delete n.li_attr.id,n.a_attr&&n.a_attr.id&&delete n.a_attr.id),r&&r.flat&&t.id!==e.jstree.root&&i.push(n),!r||!r.no_children)for(s=0,a=t.children.length;s<a;s++)r&&r.flat?this.get_json(t.children[s],r,i):n.children.push(this.get_json(t.children[s],r));return r&&r.flat?i:t.id===e.jstree.root?n.children:n},create_node:function(r,i,s,a,n){if(null===r&&(r=e.jstree.root),r=this.get_node(r),!r)return!1;if(s=s===t?"last":s,!s.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(r))return this.load_node(r,function(){this.create_node(r,i,s,a,!0)});i||(i={text:this.get_string("New node")}),i="string"==typeof i?{text:i}:e.extend(!0,{},i),i.text===t&&(i.text=this.get_string("New node"));var o,d,c,l;switch(r.id===e.jstree.root&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":o=this.get_node(r.parent),s=e.inArray(r.id,o.children),r=o;break;case"after":o=this.get_node(r.parent),s=e.inArray(r.id,o.children)+1,r=o;break;case"inside":case"first":s=0;break;case"last":s=r.children.length;break;default:s||(s=0)}if(s>r.children.length&&(s=r.children.length),i.id||(i.id=!0),!this.check("create_node",i,r,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(i.id===!0&&delete i.id,i=this._parse_model_from_json(i,r.id,r.parents.concat()),!i)return!1;for(o=this.get_node(i),d=[],d.push(i),d=d.concat(o.children_d),this.trigger("model",{nodes:d,parent:r.id}),r.children_d=r.children_d.concat(d),c=0,l=r.parents.length;c<l;c++)this._model.data[r.parents[c]].children_d=this._model.data[r.parents[c]].children_d.concat(d);for(i=o,o=[],c=0,l=r.children.length;c<l;c++)o[c>=s?c+1:c]=r.children[c];return o[s]=i.id,r.children=o,this.redraw_node(r,!0),this.trigger("create_node",{node:this.get_node(i),parent:r.id,position:s}),a&&a.call(this,this.get_node(i)),i.id},rename_node:function(t,r){var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.rename_node(t[i],r);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(a=t.text,this.check("rename_node",t,this.get_parent(t),r)?(this.set_text(t,r),this.trigger("rename_node",{node:t,text:r,old:a}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var r,i,s,a,n,o,d,c,l,h,_,u;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.delete_node(t[r]);return!0}if(t=this.get_node(t),!t||t.id===e.jstree.root)return!1;if(s=this.get_node(t.parent),a=e.inArray(t.id,s.children),h=!1,!this.check("delete_node",t,s,a))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(a!==-1&&(s.children=e.vakata.array_remove(s.children,a)),n=t.children_d.concat([]),n.push(t.id),o=0,d=t.parents.length;o<d;o++)this._model.data[t.parents[o]].children_d=e.vakata.array_filter(this._model.data[t.parents[o]].children_d,function(t){return e.inArray(t,n)===-1});for(c=0,l=n.length;c<l;c++)if(this._model.data[n[c]].state.selected){h=!0;break}for(h&&(this._data.core.selected=e.vakata.array_filter(this._data.core.selected,function(t){return e.inArray(t,n)===-1})),this.trigger("delete_node",{node:t,parent:s.id}),h&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:s.id}),c=0,l=n.length;c<l;c++)delete this._model.data[n[c]];return e.inArray(this._data.core.focused,n)!==-1&&(this._data.core.focused=null,_=this.element[0].scrollTop,u=this.element[0].scrollLeft,s.id===e.jstree.root?this._model.data[e.jstree.root].children[0]&&this.get_node(this._model.data[e.jstree.root].children[0],!0).children(".jstree-anchor").focus():this.get_node(s,!0).children(".jstree-anchor").focus(),this.element[0].scrollTop=_,this.element[0].scrollLeft=u),this.redraw_node(s,!0),!0},check:function(t,r,i,s,a){r=r&&r.id?r:this.get_node(r),i=i&&i.id?i:this.get_node(i);var n=t.match(/^move_node|copy_node|create_node$/i)?i:r,o=this.settings.core.check_callback;if("move_node"===t||"copy_node"===t){if(!(a&&a.is_multi||"move_node"!==t||e.inArray(r.id,i.children)!==s))return this._data.core.last_error={error:"check",plugin:"core",id:"core_08",reason:"Moving node to its current position",data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})},!1;if(!(a&&a.is_multi||r.id!==i.id&&("move_node"!==t||e.inArray(r.id,i.children)!==s)&&e.inArray(i.id,r.children_d)===-1))return this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})},!1}return n&&n.data&&(n=n.data),n&&n.functions&&(n.functions[t]===!1||n.functions[t]===!0)?(n.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})}),n.functions[t]):!(o===!1||e.isFunction(o)&&o.call(this,t,r,i,s,a)===!1||o&&o[t]===!1)||(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:s,obj:!(!r||!r.id)&&r.id,par:!(!i||!i.id)&&i.id})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(r,i,s,a,n,o,d){var c,l,h,_,u,g,f,p,m,v,j,y,k,x;if(i=this.get_node(i),s=s===t?0:s,!i)return!1;if(!s.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(i))return this.load_node(i,function(){this.move_node(r,i,s,a,!0,!1,d)});if(e.isArray(r)){if(1!==r.length){for(c=0,l=r.length;c<l;c++)(m=this.move_node(r[c],i,s,a,n,!1,d))&&(i=m,s="after");return this.redraw(),!0}r=r[0]}if(r=r&&r.id?r:this.get_node(r),!r||r.id===e.jstree.root)return!1;if(h=(r.parent||e.jstree.root).toString(),u=s.toString().match(/^(before|after)$/)&&i.id!==e.jstree.root?this.get_node(i.parent):i,g=d?d:this._model.data[r.id]?this:e.jstree.reference(r.id),f=!g||!g._id||this._id!==g._id,_=g&&g._id&&h&&g._model.data[h]&&g._model.data[h].children?e.inArray(r.id,g._model.data[h].children):-1,g&&g._id&&(r=g._model.data[r.id]),f)return!!(m=this.copy_node(r,i,s,a,n,!1,d))&&(g&&g.delete_node(r),m);switch(i.id===e.jstree.root&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(i.id,u.children);break;case"after":s=e.inArray(i.id,u.children)+1;break;case"inside":case"first":s=0;break;case"last":s=u.children.length;break;default:s||(s=0)}if(s>u.children.length&&(s=u.children.length),!this.check("move_node",r,u,s,{core:!0,origin:d,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(r.parent===u.id){for(p=u.children.concat(),m=e.inArray(r.id,p),m!==-1&&(p=e.vakata.array_remove(p,m),s>m&&s--),m=[],v=0,j=p.length;v<j;v++)m[v>=s?v+1:v]=p[v];m[s]=r.id,u.children=m,this._node_changed(u.id),this.redraw(u.id===e.jstree.root)}else{for(m=r.children_d.concat(),m.push(r.id),v=0,j=r.parents.length;v<j;v++){for(p=[],x=g._model.data[r.parents[v]].children_d,y=0,k=x.length;y<k;y++)e.inArray(x[y],m)===-1&&p.push(x[y]);g._model.data[r.parents[v]].children_d=p}for(g._model.data[h].children=e.vakata.array_remove_item(g._model.data[h].children,r.id),v=0,j=u.parents.length;v<j;v++)this._model.data[u.parents[v]].children_d=this._model.data[u.parents[v]].children_d.concat(m);for(p=[],v=0,j=u.children.length;v<j;v++)p[v>=s?v+1:v]=u.children[v];for(p[s]=r.id,u.children=p,u.children_d.push(r.id),u.children_d=u.children_d.concat(r.children_d),r.parent=u.id,m=u.parents.concat(),m.unshift(u.id),x=r.parents.length,r.parents=m,m=m.concat(),v=0,j=r.children_d.length;v<j;v++)this._model.data[r.children_d[v]].parents=this._model.data[r.children_d[v]].parents.slice(0,x*-1),Array.prototype.push.apply(this._model.data[r.children_d[v]].parents,m);h!==e.jstree.root&&u.id!==e.jstree.root||(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(h),this._node_changed(u.id)),o||this.redraw()}return a&&a.call(this,r,u,s),this.trigger("move_node",{node:r,parent:u.id,position:s,old_parent:h,old_position:_,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id,old_instance:g,new_instance:this}),r.id},copy_node:function(r,i,s,a,n,o,d){var c,l,h,_,u,g,f,p,m,v,j;if(i=this.get_node(i),s=s===t?0:s,!i)return!1;if(!s.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(i))return this.load_node(i,function(){this.copy_node(r,i,s,a,!0,!1,d)});if(e.isArray(r)){if(1!==r.length){for(c=0,l=r.length;c<l;c++)(_=this.copy_node(r[c],i,s,a,n,!0,d))&&(i=_,s="after");return this.redraw(),!0}r=r[0]}if(r=r&&r.id?r:this.get_node(r),!r||r.id===e.jstree.root)return!1;switch(p=(r.parent||e.jstree.root).toString(),m=s.toString().match(/^(before|after)$/)&&i.id!==e.jstree.root?this.get_node(i.parent):i,v=d?d:this._model.data[r.id]?this:e.jstree.reference(r.id),j=!v||!v._id||this._id!==v._id,v&&v._id&&(r=v._model.data[r.id]),i.id===e.jstree.root&&("before"===s&&(s="first"),"after"===s&&(s="last")),s){case"before":s=e.inArray(i.id,m.children);break;case"after":s=e.inArray(i.id,m.children)+1;break;case"inside":case"first":s=0;break;case"last":s=m.children.length;break;default:s||(s=0)}if(s>m.children.length&&(s=m.children.length),!this.check("copy_node",r,m,s,{core:!0,origin:d,is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(f=v?v.get_json(r,{no_id:!0,no_data:!0,no_state:!0}):r,!f)return!1;if(f.id===!0&&delete f.id,f=this._parse_model_from_json(f,m.id,m.parents.concat()),!f)return!1;for(_=this.get_node(f),r&&r.state&&r.state.loaded===!1&&(_.state.loaded=!1),h=[],h.push(f),h=h.concat(_.children_d),this.trigger("model",{nodes:h,parent:m.id}),u=0,g=m.parents.length;u<g;u++)this._model.data[m.parents[u]].children_d=this._model.data[m.parents[u]].children_d.concat(h);for(h=[],u=0,g=m.children.length;u<g;u++)h[u>=s?u+1:u]=m.children[u];return h[s]=_.id,m.children=h,m.children_d.push(_.id),m.children_d=m.children_d.concat(_.children_d),m.id===e.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),o||this.redraw(m.id===e.jstree.root),a&&a.call(this,_,m,s),this.trigger("copy_node",{node:_,original:r,parent:m.id,position:s,old_parent:p,old_position:v&&v._id&&p&&v._model.data[p]&&v._model.data[p].children?e.inArray(r.id,v._model.data[p].children):-1,
is_multi:v&&v._id&&v._id!==this._id,is_foreign:!v||!v._id,old_instance:v,new_instance:this}),_.id},cut:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var r,n,o,d=[];for(n=0,o=t.length;n<o;n++)r=this.get_node(t[n]),r&&r.id&&r.id!==e.jstree.root&&d.push(r);return!!d.length&&(i=d,a=this,s="move_node",void this.trigger("cut",{node:t}))},copy:function(t){if(t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]),!t.length)return!1;var r,n,o,d=[];for(n=0,o=t.length;n<o;n++)r=this.get_node(t[n]),r&&r.id&&r.id!==e.jstree.root&&d.push(r);return!!d.length&&(i=d,a=this,s="copy_node",void this.trigger("copy",{node:t}))},get_buffer:function(){return{mode:s,node:i,inst:a}},can_paste:function(){return s!==!1&&i!==!1},paste:function(e,t){return e=this.get_node(e),!!(e&&s&&s.match(/^(copy_node|move_node)$/)&&i)&&(this[s](i,e,t,!1,!1,!1,a)&&this.trigger("paste",{parent:e.id,node:i,mode:s}),i=!1,s=!1,void(a=!1))},clear_buffer:function(){i=!1,s=!1,a=!1,this.trigger("clear_buffer")},edit:function(t,r,i){var s,a,n,o,c,l,h,_,u,g=!1;return!!(t=this.get_node(t))&&(this.check("edit",t,this.get_parent(t))?(u=t,r="string"==typeof r?r:t.text,this.set_text(t,""),t=this._open_to(t),u.text=r,s=this._data.core.rtl,a=this.element.width(),this._data.core.focused=u.id,n=t.children(".jstree-anchor").focus(),o=e("<span>"),c=r,l=e("<div />",{css:{position:"absolute",top:"-200px",left:s?"0px":"-1000px",visibility:"hidden"}}).appendTo(d.body),h=e("<input />",{value:c,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(r){r.stopImmediatePropagation(),r.preventDefault();var s,a=o.children(".jstree-rename-input"),d=a.val(),_=this.settings.core.force_text;""===d&&(d=c),l.remove(),o.replaceWith(n),o.remove(),c=_?c:e("<div></div>").append(e.parseHTML(c)).html(),t=this.get_node(t),this.set_text(t,c),s=!!this.rename_node(t,_?e("<div></div>").text(d).text():e("<div></div>").append(e.parseHTML(d)).html()),s||this.set_text(t,c),this._data.core.focused=u.id,setTimeout(e.proxy(function(){var e=this.get_node(u.id,!0);e.length&&(this._data.core.focused=u.id,e.children(".jstree-anchor").focus())},this),0),i&&i.call(this,u,s,g),h=null},this),keydown:function(e){var t=e.which;27===t&&(g=!0,this.value=c),27!==t&&13!==t&&37!==t&&38!==t&&39!==t&&40!==t&&32!==t||e.stopImmediatePropagation(),27!==t&&13!==t||(e.preventDefault(),this.blur())},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){h.width(Math.min(l.text("pW"+this.value).width(),a))},keypress:function(e){if(13===e.which)return!1}}),_={fontFamily:n.css("fontFamily")||"",fontSize:n.css("fontSize")||"",fontWeight:n.css("fontWeight")||"",fontStyle:n.css("fontStyle")||"",fontStretch:n.css("fontStretch")||"",fontVariant:n.css("fontVariant")||"",letterSpacing:n.css("letterSpacing")||"",wordSpacing:n.css("wordSpacing")||""},o.attr("class",n.attr("class")).append(n.contents().clone()).append(h),n.replaceWith(o),l.css(_),h.css(_).width(Math.min(l.text("pW"+h[0].value).width(),a))[0].select(),void e(d).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(t){h&&t.target!==h&&e(h).blur()})):(this.settings.core.error.call(this,this._data.core.last_error),!1))},set_theme:function(t,r){if(!t)return!1;if(r===!0){var i=this.settings.core.themes.dir;i||(i=e.jstree.path+"/themes"),r=i+"/"+t+"/style.css"}r&&e.inArray(r,n)===-1&&(e("head").append('<link rel="stylesheet" href="'+r+'" type="text/css" />'),n.push(r)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(r,i){var s,a,n,o;if(e.isArray(r)){for(r=r.slice(),s=0,a=r.length;s<a;s++)this.set_icon(r[s],i);return!0}return r=this.get_node(r),!(!r||r.id===e.jstree.root)&&(o=r.icon,r.icon=i===!0||null===i||i===t||""===i||i,n=this.get_node(r,!0).children(".jstree-anchor").children(".jstree-themeicon"),i===!1?(n.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),this.hide_icon(r)):i===!0||null===i||i===t||""===i?(n.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),o===!1&&this.show_icon(r)):i.indexOf("/")===-1&&i.indexOf(".")===-1?(n.removeClass(o).css("background",""),n.addClass(i+" jstree-themeicon-custom").attr("rel",i),o===!1&&this.show_icon(r)):(n.removeClass(o).css("background",""),n.addClass("jstree-themeicon-custom").css("background","url('"+i+"') center center no-repeat").attr("rel",i),o===!1&&this.show_icon(r)),!0)},get_icon:function(t){return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.icon},hide_icon:function(t){var r,i;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.hide_icon(t[r]);return!0}return t=this.get_node(t),!(!t||t===e.jstree.root)&&(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var r,i,s;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.show_icon(t[r]);return!0}return t=this.get_node(t),!(!t||t===e.jstree.root)&&(s=this.get_node(t,!0),t.icon=!s.length||s.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"),t.icon||(t.icon=!0),s.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,r){t=e(t)[0];var i=r?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,s){e.inArray(s.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])===-1&&null!==s.value&&""!==e.trim(s.value)&&(r?i[s.name]=s.value:i.push(s.name))}),i},e.vakata.array_unique=function(e){var r,i,s=[],a={};for(r=0,i=e.length;r<i;r++)a[e[r]]===t&&(s.push(e[r]),a[e[r]]=!0);return s},e.vakata.array_remove=function(e,t){return e.splice(t,1),e},e.vakata.array_remove_item=function(t,r){var i=e.inArray(r,t);return i!==-1?e.vakata.array_remove(t,i):t},e.vakata.array_filter=function(e,t,r,i,s){if(e.filter)return e.filter(t,r);i=[];for(s in e)~~s+""==s+""&&s>=0&&t.call(r,e[s],+s,e)&&i.push(e[s]);return i},e.jstree.plugins.changed=function(e,t){var r=[];this.trigger=function(e,i){var s,a;if(i||(i={}),"changed"===e.replace(".jstree","")){i.changed={selected:[],deselected:[]};var n={};for(s=0,a=r.length;s<a;s++)n[r[s]]=1;for(s=0,a=i.selected.length;s<a;s++)n[i.selected[s]]?n[i.selected[s]]=2:i.changed.selected.push(i.selected[s]);for(s=0,a=r.length;s<a;s++)1===n[r[s]]&&i.changed.deselected.push(r[s]);r=i.selected.slice()}t.trigger.call(this,e,i)},this.refresh=function(e,i){return r=[],t.refresh.apply(this,arguments)}};var c=d.createElement("I");c.className="jstree-icon jstree-checkbox",c.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},e.jstree.plugins.checkbox=function(r,i){this.bind=function(){i.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var r,i,s=this._model.data,a=(s[t.parent],t.nodes);for(r=0,i=a.length;r<i;r++)s[a[r]].state.checked=s[a[r]].state.checked||s[a[r]].original&&s[a[r]].original.state&&s[a[r]].original.state.checked,s[a[r]].state.checked&&this._data.checkbox.selected.push(a[r])},this)),this.settings.checkbox.cascade.indexOf("up")===-1&&this.settings.checkbox.cascade.indexOf("down")===-1||this.element.on("model.jstree",e.proxy(function(t,r){var i,s,a,n,o,d,c=this._model.data,l=c[r.parent],h=r.nodes,_=[],u=this.settings.checkbox.cascade,g=this.settings.checkbox.tie_selection;if(u.indexOf("down")!==-1)if(l.state[g?"selected":"checked"]){for(s=0,a=h.length;s<a;s++)c[h[s]].state[g?"selected":"checked"]=!0;this._data[g?"core":"checkbox"].selected=this._data[g?"core":"checkbox"].selected.concat(h)}else for(s=0,a=h.length;s<a;s++)if(c[h[s]].state[g?"selected":"checked"]){for(n=0,o=c[h[s]].children_d.length;n<o;n++)c[c[h[s]].children_d[n]].state[g?"selected":"checked"]=!0;this._data[g?"core":"checkbox"].selected=this._data[g?"core":"checkbox"].selected.concat(c[h[s]].children_d)}if(u.indexOf("up")!==-1){for(s=0,a=l.children_d.length;s<a;s++)c[l.children_d[s]].children.length||_.push(c[l.children_d[s]].parent);for(_=e.vakata.array_unique(_),n=0,o=_.length;n<o;n++)for(l=c[_[n]];l&&l.id!==e.jstree.root;){for(i=0,s=0,a=l.children.length;s<a;s++)i+=c[l.children[s]].state[g?"selected":"checked"];if(i!==a)break;l.state[g?"selected":"checked"]=!0,this._data[g?"core":"checkbox"].selected.push(l.id),d=this.get_node(l,!0),d&&d.length&&d.attr("aria-selected",!0).children(".jstree-anchor").addClass(g?"jstree-clicked":"jstree-checked"),l=this.get_node(l.parent)}}this._data[g?"core":"checkbox"].selected=e.vakata.array_unique(this._data[g?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,r){var i,s,a,n,o=r.node,d=this._model.data,c=this.get_node(o.parent),l=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection,_={},u=this._data[h?"core":"checkbox"].selected;for(i=0,s=u.length;i<s;i++)_[u[i]]=!0;if(l.indexOf("down")!==-1){var g=this._cascade_new_checked_state(o.id,!0),f=o.children_d.concat(o.id);for(i=0,s=f.length;i<s;i++)g.indexOf(f[i])>-1?_[f[i]]=!0:delete _[f[i]]}if(l.indexOf("up")!==-1)for(;c&&c.id!==e.jstree.root;){for(a=0,i=0,s=c.children.length;i<s;i++)a+=d[c.children[i]].state[h?"selected":"checked"];if(a!==s)break;c.state[h?"selected":"checked"]=!0,_[c.id]=!0,n=this.get_node(c,!0),n&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),c=this.get_node(c.parent)}u=[];for(i in _)_.hasOwnProperty(i)&&u.push(i);this._data[h?"core":"checkbox"].selected=u},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(t,r){var i,s,a,n=this.get_node(e.jstree.root),o=this._model.data;for(i=0,s=n.children_d.length;i<s;i++)a=o[n.children_d[i]],a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,r){var i,s,a,n=r.node,o=(this.get_node(n,!0),this.settings.checkbox.cascade),d=this.settings.checkbox.tie_selection,c=this._data[d?"core":"checkbox"].selected,l=n.children_d.concat(n.id);if(o.indexOf("down")!==-1){var h=this._cascade_new_checked_state(n.id,!1);c=e.vakata.array_filter(c,function(e){return l.indexOf(e)===-1||h.indexOf(e)>-1})}if(o.indexOf("up")!==-1&&c.indexOf(n.id)===-1){for(i=0,s=n.parents.length;i<s;i++)a=this._model.data[n.parents[i]],a.state[d?"selected":"checked"]=!1,a&&a.original&&a.original.state&&a.original.state.undetermined&&(a.original.state.undetermined=!1),a=this.get_node(n.parents[i],!0),a&&a.length&&a.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked");c=e.vakata.array_filter(c,function(e){return n.parents.indexOf(e)===-1})}this._data[d?"core":"checkbox"].selected=c},this)),this.settings.checkbox.cascade.indexOf("up")!==-1&&this.element.on("delete_node.jstree",e.proxy(function(t,r){for(var i,s,a,n,o=this.get_node(r.parent),d=this._model.data,c=this.settings.checkbox.tie_selection;o&&o.id!==e.jstree.root&&!o.state[c?"selected":"checked"];){for(a=0,i=0,s=o.children.length;i<s;i++)a+=d[o.children[i]].state[c?"selected":"checked"];if(!(s>0&&a===s))break;o.state[c?"selected":"checked"]=!0,this._data[c?"core":"checkbox"].selected.push(o.id),n=this.get_node(o,!0),n&&n.length&&n.attr("aria-selected",!0).children(".jstree-anchor").addClass(c?"jstree-clicked":"jstree-checked"),o=this.get_node(o.parent)}},this)).on("move_node.jstree",e.proxy(function(t,r){var i,s,a,n,o,d=r.is_multi,c=r.old_parent,l=this.get_node(r.parent),h=this._model.data,_=this.settings.checkbox.tie_selection;if(!d)for(i=this.get_node(c);i&&i.id!==e.jstree.root&&!i.state[_?"selected":"checked"];){for(s=0,a=0,n=i.children.length;a<n;a++)s+=h[i.children[a]].state[_?"selected":"checked"];if(!(n>0&&s===n))break;i.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(i.id),o=this.get_node(i,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}for(i=l;i&&i.id!==e.jstree.root;){for(s=0,a=0,n=i.children.length;a<n;a++)s+=h[i.children[a]].state[_?"selected":"checked"];if(s===n)i.state[_?"selected":"checked"]||(i.state[_?"selected":"checked"]=!0,this._data[_?"core":"checkbox"].selected.push(i.id),o=this.get_node(i,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(_?"jstree-clicked":"jstree-checked"));else{if(!i.state[_?"selected":"checked"])break;i.state[_?"selected":"checked"]=!1,this._data[_?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[_?"core":"checkbox"].selected,i.id),o=this.get_node(i,!0),o&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(_?"jstree-clicked":"jstree-checked")}i=this.get_node(i.parent)}},this))},this.get_undetermined=function(r){if(this.settings.checkbox.cascade.indexOf("undetermined")===-1)return[];var i,s,a,n,o={},d=this._model.data,c=this.settings.checkbox.tie_selection,l=this._data[c?"core":"checkbox"].selected,h=[],_=this,u=[];for(i=0,s=l.length;i<s;i++)if(d[l[i]]&&d[l[i]].parents)for(a=0,n=d[l[i]].parents.length;a<n&&o[d[l[i]].parents[a]]===t;a++)d[l[i]].parents[a]!==e.jstree.root&&(o[d[l[i]].parents[a]]=!0,h.push(d[l[i]].parents[a]));for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var r,c=_.get_node(this);if(c)if(c.state.loaded){for(i=0,s=c.children_d.length;i<s;i++)if(r=d[c.children_d[i]],!r.state.loaded&&r.original&&r.original.state&&r.original.state.undetermined&&r.original.state.undetermined===!0)for(o[r.id]===t&&r.id!==e.jstree.root&&(o[r.id]=!0,h.push(r.id)),a=0,n=r.parents.length;a<n;a++)o[r.parents[a]]===t&&r.parents[a]!==e.jstree.root&&(o[r.parents[a]]=!0,h.push(r.parents[a]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&c.original.state.undetermined===!0)for(o[c.id]===t&&c.id!==e.jstree.root&&(o[c.id]=!0,h.push(c.id)),a=0,n=c.parents.length;a<n;a++)o[c.parents[a]]===t&&c.parents[a]!==e.jstree.root&&(o[c.parents[a]]=!0,h.push(c.parents[a]))}),i=0,s=h.length;i<s;i++)d[h[i]].state[c?"selected":"checked"]||u.push(r?d[h[i]]:h[i]);return u},this._undetermined=function(){if(null!==this.element){var e,t,r,i=this.get_undetermined(!1);for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),e=0,t=i.length;e<t;e++)r=this.get_node(i[e],!0),r&&r.length&&r.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(t,r,s,a){if(t=i.redraw_node.apply(this,arguments)){var n,o,d=null,l=null;for(n=0,o=t.childNodes.length;n<o;n++)if(t.childNodes[n]&&t.childNodes[n].className&&t.childNodes[n].className.indexOf("jstree-anchor")!==-1){d=t.childNodes[n];break}d&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(d.className+=" jstree-checked"),l=c.cloneNode(!1),this._model.data[t.id].state.checkbox_disabled&&(l.className+=" jstree-checkbox-disabled"),d.insertBefore(l,d.childNodes[0]))}return s||this.settings.checkbox.cascade.indexOf("undetermined")===-1||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var r,i,s=this.settings.checkbox.cascade,a=this.settings.checkbox.tie_selection,n=this._data[a?"core":"checkbox"].selected,o=this._model.data;if(!t||t.state[a?"selected":"checked"]===!0||s.indexOf("undetermined")===-1||s.indexOf("down")===-1&&s.indexOf("up")===-1)return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(r=0,i=t.children_d.length;r<i;r++)if(e.inArray(t.children_d[r],n)!==-1||!o[t.children_d[r]].state.loaded&&o[t.children_d[r]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(t){var r,i,s;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.disable_checkbox(t[r]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(s=this.get_node(t,!0),void(t.state.checkbox_disabled||(t.state.checkbox_disabled=!0,s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:t}))))},this.enable_checkbox=function(t){var r,i,s;if(e.isArray(t)){for(t=t.slice(),r=0,i=t.length;r<i;r++)this.enable_checkbox(t[r]);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(s=this.get_node(t,!0),void(t.state.checkbox_disabled&&(t.state.checkbox_disabled=!1,s&&s.length&&s.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:t}))))},this.activate_node=function(t,r){return!e(r.target).hasClass("jstree-checkbox-disabled")&&(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(r.target).hasClass("jstree-checkbox"))&&(r.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(r.target).hasClass("jstree-checkbox")?i.activate_node.call(this,t,r):!this.is_disabled(t)&&(this.is_checked(t)?this.uncheck_node(t,r):this.check_node(t,r),void this.trigger("activate_node",{node:this.get_node(t)})))},this._cascade_new_checked_state=function(e,t){var r,i,s,a=this,n=this.settings.checkbox.tie_selection,o=this._model.data[e],d=[],c=[];if(!this.settings.checkbox.cascade_to_disabled&&o.state.disabled||!this.settings.checkbox.cascade_to_hidden&&o.state.hidden)s=this.get_checked_descendants(e),o.state[n?"selected":"checked"]&&s.push(o.id),d=d.concat(s);else{if(o.children)for(r=0,i=o.children.length;r<i;r++){var l=o.children[r];s=a._cascade_new_checked_state(l,t),d=d.concat(s),s.indexOf(l)>-1&&c.push(l)}var h=a.get_node(o,!0),_=c.length>0&&c.length<o.children.length;o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=_),_?(o.state[n?"selected":"checked"]=!1,h.attr("aria-selected",!1).children(".jstree-anchor").removeClass(n?"jstree-clicked":"jstree-checked")):t&&c.length===o.children.length?(o.state[n?"selected":"checked"]=t,d.push(o.id),h.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked")):(o.state[n?"selected":"checked"]=!1,h.attr("aria-selected",!1).children(".jstree-anchor").removeClass(n?"jstree-clicked":"jstree-checked"))}return d},this.get_checked_descendants=function(t){var r=this,i=r.settings.checkbox.tie_selection,s=r._model.data[t];return e.vakata.array_filter(s.children_d,function(e){return r._model.data[e].state[i?"selected":"checked"]})},this.check_node=function(t,r){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,r);var i,s,a;if(e.isArray(t)){for(t=t.slice(),s=0,a=t.length;s<a;s++)this.check_node(t[s],r);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(i=this.get_node(t,!0),void(t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),i&&i.length&&i.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:r}))))},this.uncheck_node=function(t,r){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,r);var i,s,a;if(e.isArray(t)){for(t=t.slice(),i=0,s=t.length;i<s;i++)this.uncheck_node(t[i],r);return!0}return t=this.get_node(t),!(!t||t.id===e.jstree.root)&&(a=this.get_node(t,!0),void(t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),a.length&&a.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:r}))))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var t,r;this._data.checkbox.selected.concat([]);for(this._data.checkbox.selected=this._model.data[e.jstree.root].children_d.concat(),t=0,r=this._data.checkbox.selected.length;t<r;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e,t,r=this._data.checkbox.selected.concat([]);for(e=0,t=this._data.checkbox.selected.length;e<t;e++)this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:r})},this.is_checked=function(t){return this.settings.checkbox.tie_selection?this.is_selected(t):(t=this.get_node(t),!(!t||t.id===e.jstree.root)&&t.state.checked)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected.slice()},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var r,i,s,a,n=this.get_checked(!0),o={};for(r=0,i=n.length;r<i;r++)o[n[r].id]=n[r];for(r=0,i=n.length;r<i;r++)for(s=0,a=n[r].children_d.length;s<a;s++)o[n[r].children_d[s]]&&delete o[n[r].children_d[s]];n=[];for(r in o)o.hasOwnProperty(r)&&n.push(r);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var r,i,s=this.get_checked(!0),a=[];for(r=0,i=s.length;r<i;r++)s[r].children.length||a.push(s[r].id);return t?e.map(a,e.proxy(function(e){return this.get_node(e)},this)):a},this.load_node=function(t,r){var s,a,n,o;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection&&(o=this.get_node(t),o&&o.state.loaded))for(s=0,a=o.children_d.length;s<a;s++)this._model.data[o.children_d[s]].state.checked&&(n=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,o.children_d[s]));return i.load_node.apply(this,arguments)},this.get_state=function(){var e=i.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,r){var s=i.set_state.apply(this,arguments);if(s&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var a=this;e.each(t.checkbox,function(e,t){a.check_node(t)})}return delete t.checkbox,this.set_state(t,r),!1}return s},this.refresh=function(e,t){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),i.refresh.apply(this,arguments)}},e.jstree.defaults.conditionalselect=function(){return!0},e.jstree.plugins.conditionalselect=function(e,t){this.activate_node=function(e,r){if(this.settings.conditionalselect.call(this,this.get_node(e),r))return t.activate_node.call(this,e,r)}},e.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(t,r){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.create_node(i,{},"last",function(e){try{r.edit(e)}catch(t){setTimeout(function(){r.edit(e)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.edit(i)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.is_selected(i)?r.delete_node(r.get_selected()):r.delete_node(i)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.is_selected(i)?r.cut(r.get_top_selected()):r.cut(i)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.is_selected(i)?r.copy(r.get_top_selected()):r.copy(i)}},paste:{separator_before:!1,icon:!1,_disabled:function(t){return!e.jstree.reference(t.reference).can_paste()},separator_after:!1,label:"Paste",action:function(t){var r=e.jstree.reference(t.reference),i=r.get_node(t.reference);r.paste(i)}}}}}}},e.jstree.plugins.contextmenu=function(r,i){this.bind=function(){i.bind.call(this);var t,r,s=0,a=null;this.element.on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-contextmenu")},this)).on("contextmenu.jstree",".jstree-anchor",e.proxy(function(e,t){"input"!==e.target.tagName.toLowerCase()&&(e.preventDefault(),s=e.ctrlKey?+new Date:0,(t||a)&&(s=+new Date+1e4),a&&clearTimeout(a),this.is_loading(e.currentTarget)||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY,e))},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){this._data.contextmenu.visible&&(!s||+new Date-s>250)&&e.vakata.context.hide(),s=0},this)).on("touchstart.jstree",".jstree-anchor",function(i){i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(t=i.originalEvent.changedTouches[0].clientX,r=i.originalEvent.changedTouches[0].clientY,a=setTimeout(function(){e(i.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(i){a&&i.originalEvent&&i.originalEvent.changedTouches&&i.originalEvent.changedTouches[0]&&(Math.abs(t-i.originalEvent.changedTouches[0].clientX)>10||Math.abs(r-i.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(a),e.vakata.context.hide())}).on("touchend.vakata.jstree",function(e){a&&clearTimeout(a)}),e(d).on("context_hide.vakata.jstree",e.proxy(function(t,r){this._data.contextmenu.visible=!1,e(r.reference).removeClass("jstree-context")},this))},this.teardown=function(){this._data.contextmenu.visible&&e.vakata.context.hide(),i.teardown.call(this)},this.show_contextmenu=function(r,i,s,a){if(r=this.get_node(r),!r||r.id===e.jstree.root)return!1;var n=this.settings.contextmenu,o=this.get_node(r,!0),d=o.children(".jstree-anchor"),c=!1,l=!1;(n.show_at_node||i===t||s===t)&&(c=d.offset(),i=c.left,s=c.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(r)&&this.activate_node(r,a),l=n.items,e.isFunction(l)&&(l=l.call(this,r,e.proxy(function(e){this._show_contextmenu(r,i,s,e)},this))),e.isPlainObject(l)&&this._show_contextmenu(r,i,s,l)},this._show_contextmenu=function(t,r,i,s){var a=this.get_node(t,!0),n=a.children(".jstree-anchor");e(d).one("context_show.vakata.jstree",e.proxy(function(t,r){var i="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";e(r.element).addClass(i),n.addClass("jstree-context")},this)),this._data.contextmenu.visible=!0,e.vakata.context.show(n,{x:r,y:i},s),this.trigger("show_contextmenu",{node:t,x:r,y:i})}},function(e){var t=!1,r={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(t){e(d).triggerHandler("context_"+t+".vakata",{reference:r.reference,element:r.element,position:{x:r.position_x,y:r.position_y}})},_execute:function(t){return t=r.items[t],!(!t||t._disabled&&(!e.isFunction(t._disabled)||t._disabled({item:t,reference:r.reference,element:r.element}))||!t.action)&&t.action.call(null,{item:t,reference:r.reference,element:r.element,position:{x:r.position_x,y:r.position_y}})},_parse:function(t,i){if(!t)return!1;i||(r.html="",r.items=[]);var s,a="",n=!1;return i&&(a+="<ul>"),e.each(t,function(t,i){return!i||(r.items.push(i),!n&&i.separator_before&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),n=!1,a+="<li class='"+(i._class||"")+(i._disabled===!0||e.isFunction(i._disabled)&&i._disabled({item:i,reference:r.reference,element:r.element})?" vakata-contextmenu-disabled ":"")+"' "+(i.shortcut?" data-shortcut='"+i.shortcut+"' ":"")+">",a+="<a href='#' rel='"+(r.items.length-1)+"' "+(i.title?"title='"+i.title+"'":"")+">",e.vakata.context.settings.icons&&(a+="<i ",i.icon&&(a+=i.icon.indexOf("/")!==-1||i.icon.indexOf(".")!==-1?" style='background:url(\""+i.icon+"\") center center no-repeat' ":" class='"+i.icon+"' "),
a+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),a+=(e.isFunction(i.label)?i.label({item:t,reference:r.reference,element:r.element}):i.label)+(i.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+i.shortcut+'">'+(i.shortcut_label||"")+"</span>":"")+"</a>",i.submenu&&(s=e.vakata.context._parse(i.submenu,!0),s&&(a+=s)),a+="</li>",void(i.separator_after&&(a+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",n=!0)))}),a=a.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),i&&(a+="</ul>"),i||(r.html=a,e.vakata.context._trigger("parse")),a.length>10&&a},_show_submenu:function(r){if(r=e(r),r.length&&r.children("ul").length){var i=r.children("ul"),s=r.offset().left,a=s+r.outerWidth(),n=r.offset().top,o=i.width(),d=i.height(),c=e(window).width()+e(window).scrollLeft(),l=e(window).height()+e(window).scrollTop();t?r[a-(o+10+r.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):r[a+o>c&&s>c-a?"addClass":"removeClass"]("vakata-context-right"),n+d+10>l&&i.css("bottom","-1px"),r.hasClass("vakata-context-right")?s<o&&i.css("margin-right",s-o):c-a<o&&i.css("margin-left",c-a-o),i.show()}},show:function(i,s,a){var n,o,c,l,h,_,u,g,f=!0;switch(r.element&&r.element.length&&r.element.width(""),f){case!s&&!i:return!1;case!!s&&!!i:r.reference=i,r.position_x=s.x,r.position_y=s.y;break;case!s&&!!i:r.reference=i,n=i.offset(),r.position_x=n.left+i.outerHeight(),r.position_y=n.top;break;case!!s&&!i:r.position_x=s.x,r.position_y=s.y}i&&!a&&e(i).data("vakata_contextmenu")&&(a=e(i).data("vakata_contextmenu")),e.vakata.context._parse(a)&&r.element.html(r.html),r.items.length&&(r.element.appendTo(d.body),o=r.element,c=r.position_x,l=r.position_y,h=o.width(),_=o.height(),u=e(window).width()+e(window).scrollLeft(),g=e(window).height()+e(window).scrollTop(),t&&(c-=o.outerWidth()-e(i).outerWidth(),c<e(window).scrollLeft()+20&&(c=e(window).scrollLeft()+20)),c+h+20>u&&(c=u-(h+20)),l+_+20>g&&(l=g-(_+20)),r.element.css({left:c,top:l}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),r.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){r.is_visible&&(r.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),r.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){t="rtl"===e(d.body).css("direction");var i=!1;r.element=e("<ul class='vakata-context'></ul>"),r.element.on("mouseenter","li",function(t){t.stopImmediatePropagation(),e.contains(this,t.relatedTarget)||(i&&clearTimeout(i),r.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(t){e.contains(this,t.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(t){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(i=setTimeout(function(t){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(t){t.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(t){var i=null;switch(t.which){case 13:case 32:t.type="click",t.preventDefault(),e(t.currentTarget).trigger(t);break;case 37:r.is_visible&&(r.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 38:r.is_visible&&(i=r.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),i.length||(i=r.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 39:r.is_visible&&(r.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 40:r.is_visible&&(i=r.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),i.length||(i=r.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),i.addClass("vakata-context-hover").children("a").focus(),t.stopImmediatePropagation(),t.preventDefault());break;case 27:e.vakata.context.hide(),t.preventDefault()}}).on("keydown",function(e){e.preventDefault();var t=r.element.find(".vakata-contextmenu-shortcut-"+e.which).parent();t.parent().not(".vakata-context-disabled")&&t.click()}),e(d).on("mousedown.vakata.jstree",function(t){r.is_visible&&r.element[0]!==t.target&&!e.contains(r.element[0],t.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(e,i){r.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),t&&r.element.addClass("vakata-context-rtl").css("direction","rtl"),r.element.find("ul").hide().end()})})}(e),e.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var l,h;e.jstree.plugins.dnd=function(t,r){this.init=function(e,t){r.init.call(this,e,t),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in d.createElement("span")},this.bind=function(){r.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",e.proxy(function(t){if(this.settings.dnd.large_drag_target&&e(t.target).closest(".jstree-node")[0]!==t.currentTarget)return!0;if("touchstart"===t.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var r=this.get_node(t.target),i=this.is_selected(r)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,s=i>1?i+" "+this.get_string("nodes"):this.get_text(t.currentTarget);if(this.settings.core.force_text&&(s=e.vakata.html.escape(s)),r&&r.id&&r.id!==e.jstree.root&&(1===t.which||"touchstart"===t.type||"dragstart"===t.type)&&(this.settings.dnd.is_draggable===!0||e.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,i>1?this.get_top_selected(!0):[r],t))){if(l={jstree:!0,origin:this,obj:this.get_node(r,!0),nodes:i>1?this.get_top_selected():[r.id]},h=t.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),e.vakata.dnd.start(t,l,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+s+'<ins class="jstree-copy" style="display:none;">+</ins></div>');e.vakata.dnd._trigger("start",t,{helper:e(),element:h,data:l})}},this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(t){return t.preventDefault(),e.vakata.dnd._trigger("move",t,{helper:e(),element:h,data:l}),!1}).on("drop.jstree",e.proxy(function(t){return t.preventDefault(),e.vakata.dnd._trigger("stop",t,{helper:e(),element:h,data:l}),!1},this))},this.redraw_node=function(e,t,i,s){if(e=r.redraw_node.apply(this,arguments),e&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)e.setAttribute("draggable",!0);else{var a,n,o=null;for(a=0,n=e.childNodes.length;a<n;a++)if(e.childNodes[a]&&e.childNodes[a].className&&e.childNodes[a].className.indexOf("jstree-anchor")!==-1){o=e.childNodes[a];break}o&&o.setAttribute("draggable",!0)}return e}},e(function(){var r=!1,i=!1,s=!1,a=!1,n=e('<div id="jstree-marker">&#160;</div>').hide();e(d).on("dragover.vakata.jstree",function(t){h&&e.vakata.dnd._trigger("move",t,{helper:e(),element:h,data:l})}).on("drop.vakata.jstree",function(t){h&&(e.vakata.dnd._trigger("stop",t,{helper:e(),element:h,data:l}),h=null,l=null)}).on("dnd_start.vakata.jstree",function(e,t){r=!1,s=!1,t&&t.data&&t.data.jstree&&n.appendTo(d.body)}).on("dnd_move.vakata.jstree",function(o,d){var c=d.event.target!==s.target;if(a&&(d.event&&"dragover"===d.event.type&&!c||clearTimeout(a)),d&&d.data&&d.data.jstree&&(!d.event.target.id||"jstree-marker"!==d.event.target.id)){s=d.event;var l,h,_,u,g,f,p,m,v,j,y,k,x,b,w,C,A=e.jstree.reference(d.event.target),T=!1,N=!1,O=!1;if(A&&A._data&&A._data.dnd)if(n.attr("class","jstree-"+A.get_theme()+(A.settings.core.themes.responsive?" jstree-dnd-responsive":"")),w=d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(d.event.metaKey||d.event.ctrlKey)),d.helper.children().attr("class","jstree-"+A.get_theme()+" jstree-"+A.get_theme()+"-"+A.get_theme_variant()+" "+(A.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[w?"show":"hide"](),d.event.target!==A.element[0]&&d.event.target!==A.get_container_ul()[0]||0!==A.get_container_ul().children().length){if(T=A.settings.dnd.large_drop_target?e(d.event.target).closest(".jstree-node").children(".jstree-anchor"):e(d.event.target).closest(".jstree-anchor"),T&&T.length&&T.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(N=T.offset(),O=(d.event.pageY!==t?d.event.pageY:d.event.originalEvent.pageY)-N.top,_=T.outerHeight(),f=O<_/3?["b","i","a"]:O>_-_/3?["a","i","b"]:O>_/2?["i","a","b"]:["i","b","a"],e.each(f,function(t,s){switch(s){case"b":l=N.left-6,h=N.top,u=A.get_parent(T),g=T.parent().index();break;case"i":x=A.settings.dnd.inside_pos,b=A.get_node(T.parent()),l=N.left-2,h=N.top+_/2+1,u=b.id,g="first"===x?0:"last"===x?b.children.length:Math.min(x,b.children.length);break;case"a":l=N.left-6,h=N.top+_,u=A.get_parent(T),g=T.parent().index()+1}for(p=!0,m=0,v=d.data.nodes.length;m<v;m++)if(j=d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(d.event.metaKey||d.event.ctrlKey))?"copy_node":"move_node",y=g,"move_node"===j&&"a"===s&&d.data.origin&&d.data.origin===A&&u===A.get_parent(d.data.nodes[m])&&(k=A.get_node(u),y>e.inArray(d.data.nodes[m],k.children)&&(y-=1)),p=p&&(A&&A.settings&&A.settings.dnd&&A.settings.dnd.check_while_dragging===!1||A.check(j,d.data.origin&&d.data.origin!==A?d.data.origin.get_node(d.data.nodes[m]):d.data.nodes[m],u,y,{dnd:!0,ref:A.get_node(T.parent()),pos:s,origin:d.data.origin,is_multi:d.data.origin&&d.data.origin!==A,is_foreign:!d.data.origin})),!p){A&&A.last_error&&(i=A.last_error());break}if("i"===s&&T.parent().is(".jstree-closed")&&A.settings.dnd.open_timeout&&(d.event&&"dragover"===d.event.type&&!c||(a&&clearTimeout(a),a=setTimeout(function(e,t){return function(){e.open_node(t)}}(A,T),A.settings.dnd.open_timeout))),p)return C=A.get_node(u,!0),C.hasClass(".jstree-dnd-parent")||(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),C.addClass("jstree-dnd-parent")),r={ins:A,par:u,pos:"i"!==s||"last"!==x||0!==g||A.is_loaded(b)?g:"last"},n.css({left:l+"px",top:h+"px"}).show(),d.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),d.event.originalEvent&&d.event.originalEvent.dataTransfer&&(d.event.originalEvent.dataTransfer.dropEffect=w?"copy":"move"),i={},f=!0,!1}),f===!0))return}else{for(p=!0,m=0,v=d.data.nodes.length;m<v&&(p=p&&A.check(d.data.origin&&(d.data.origin.settings.dnd.always_copy||d.data.origin.settings.dnd.copy&&(d.event.metaKey||d.event.ctrlKey))?"copy_node":"move_node",d.data.origin&&d.data.origin!==A?d.data.origin.get_node(d.data.nodes[m]):d.data.nodes[m],e.jstree.root,"last",{dnd:!0,ref:A.get_node(e.jstree.root),pos:"i",origin:d.data.origin,is_multi:d.data.origin&&d.data.origin!==A,is_foreign:!d.data.origin}),p);m++);if(p)return r={ins:A,par:e.jstree.root,pos:"last"},n.hide(),d.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(d.event.originalEvent&&d.event.originalEvent.dataTransfer&&(d.event.originalEvent.dataTransfer.dropEffect=w?"copy":"move"))}e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),r=!1,d.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),d.event.originalEvent&&d.event.originalEvent.dataTransfer,n.hide()}}).on("dnd_scroll.vakata.jstree",function(e,t){t&&t.data&&t.data.jstree&&(n.hide(),r=!1,s=!1,t.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(t,o){if(e(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),a&&clearTimeout(a),o&&o.data&&o.data.jstree){n.hide().detach();var d,c,l=[];if(r){for(d=0,c=o.data.nodes.length;d<c;d++)l[d]=o.data.origin?o.data.origin.get_node(o.data.nodes[d]):o.data.nodes[d];r.ins[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(o.event.metaKey||o.event.ctrlKey))?"copy_node":"move_node"](l,r.par,r.pos,!1,!1,!1,o.data.origin)}else d=e(o.event.target).closest(".jstree"),d.length&&i&&i.error&&"check"===i.error&&(d=d.jstree(!0),d&&d.settings.core.error.call(this,i));s=!1,r=!1}}).on("keyup.jstree keydown.jstree",function(t,o){o=e.vakata.dnd._get(),o&&o.data&&o.data.jstree&&("keyup"===t.type&&27===t.which?(a&&clearTimeout(a),r=!1,i=!1,s=!1,a=!1,n.hide().detach(),e.vakata.dnd._clean()):(o.helper.find(".jstree-copy").first()[o.data.origin&&(o.data.origin.settings.dnd.always_copy||o.data.origin.settings.dnd.copy&&(t.metaKey||t.ctrlKey))?"show":"hide"](),s&&(s.metaKey=t.metaKey,s.ctrlKey=t.ctrlKey,e.vakata.dnd._trigger("move",s))))})}),function(e){e.vakata.html={div:e("<div />"),escape:function(t){return e.vakata.html.div.text(t).html()},strip:function(t){return e.vakata.html.div.empty().append(e.parseHTML(t)).text()}};var r={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};e.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(r,i,s){s===t&&(s=e.vakata.dnd._get()),s.event=i,e(d).triggerHandler("dnd_"+r+".vakata",s)},_get:function(){return{data:r.data,element:r.element,helper:r.helper}},_clean:function(){r.helper&&r.helper.remove(),r.scroll_i&&(clearInterval(r.scroll_i),r.scroll_i=!1),r={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},e(d).off("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(d).off("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop)},_scroll:function(t){if(!r.scroll_e||!r.scroll_l&&!r.scroll_t)return r.scroll_i&&(clearInterval(r.scroll_i),r.scroll_i=!1),!1;if(!r.scroll_i)return r.scroll_i=setInterval(e.vakata.dnd._scroll,100),!1;if(t===!0)return!1;var i=r.scroll_e.scrollTop(),s=r.scroll_e.scrollLeft();r.scroll_e.scrollTop(i+r.scroll_t*e.vakata.dnd.settings.scroll_speed),r.scroll_e.scrollLeft(s+r.scroll_l*e.vakata.dnd.settings.scroll_speed),i===r.scroll_e.scrollTop()&&s===r.scroll_e.scrollLeft()||e.vakata.dnd._trigger("scroll",r.scroll_e)},start:function(t,i,s){"touchstart"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=d.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),r.is_drag&&e.vakata.dnd.stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.touchAction="none",t.currentTarget.style.msTouchAction="none",t.currentTarget.style.MozUserSelect="none")}catch(a){}return r.init_x=t.pageX,r.init_y=t.pageY,r.data=i,r.is_down=!0,r.element=t.currentTarget,r.target=t.target,r.is_touch="touchstart"===t.type,s!==!1&&(r.helper=e("<div id='vakata-dnd'></div>").html(s).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),e(d).on("mousemove.vakata.jstree touchmove.vakata.jstree",e.vakata.dnd.drag),e(d).on("mouseup.vakata.jstree touchend.vakata.jstree",e.vakata.dnd.stop),!1},drag:function(t){if("touchmove"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=d.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),r.is_down){if(!r.is_drag){if(!(Math.abs(t.pageX-r.init_x)>(r.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)||Math.abs(t.pageY-r.init_y)>(r.is_touch?e.vakata.dnd.settings.threshold_touch:e.vakata.dnd.settings.threshold)))return;r.helper&&(r.helper.appendTo(d.body),r.helper_w=r.helper.outerWidth()),r.is_drag=!0,e(r.target).one("click.vakata",!1),e.vakata.dnd._trigger("start",t)}var i=!1,s=!1,a=!1,n=!1,o=!1,c=!1,l=!1,h=!1,_=!1,u=!1;return r.scroll_t=0,r.scroll_l=0,r.scroll_e=!1,e(e(t.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(e(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var i=e(this),s=i.offset();if(this.scrollHeight>this.offsetHeight&&(s.top+i.height()-t.pageY<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=1),t.pageY-s.top<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(s.left+i.width()-t.pageX<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=1),t.pageX-s.left<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=-1)),r.scroll_t||r.scroll_l)return r.scroll_e=e(this),!1}),r.scroll_e||(i=e(d),s=e(window),a=i.height(),n=s.height(),o=i.width(),c=s.width(),l=i.scrollTop(),h=i.scrollLeft(),a>n&&t.pageY-l<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=-1),a>n&&n-(t.pageY-l)<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_t=1),o>c&&t.pageX-h<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=-1),o>c&&c-(t.pageX-h)<e.vakata.dnd.settings.scroll_proximity&&(r.scroll_l=1),(r.scroll_t||r.scroll_l)&&(r.scroll_e=i)),r.scroll_e&&e.vakata.dnd._scroll(!0),r.helper&&(_=parseInt(t.pageY+e.vakata.dnd.settings.helper_top,10),u=parseInt(t.pageX+e.vakata.dnd.settings.helper_left,10),a&&_+25>a&&(_=a-50),o&&u+r.helper_w>o&&(u=o-(r.helper_w+2)),r.helper.css({left:u+"px",top:_+"px"})),e.vakata.dnd._trigger("move",t),!1}},stop:function(t){if("touchend"===t.type&&t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches[0]&&(t.pageX=t.originalEvent.changedTouches[0].pageX,t.pageY=t.originalEvent.changedTouches[0].pageY,t.target=d.elementFromPoint(t.originalEvent.changedTouches[0].pageX-window.pageXOffset,t.originalEvent.changedTouches[0].pageY-window.pageYOffset)),r.is_drag)t.target!==r.target&&e(r.target).off("click.vakata"),e.vakata.dnd._trigger("stop",t);else if("touchend"===t.type&&t.target===r.target){var i=setTimeout(function(){e(t.target).click()},100);e(t.target).one("click",function(){i&&clearTimeout(i)})}return e.vakata.dnd._clean(),!1}}}(e),e.jstree.defaults.massload=null,e.jstree.plugins.massload=function(t,r){this.init=function(e,t){this._data.massload={},r.init.call(this,e,t)},this._load_nodes=function(t,i,s,a){var n,o,d,c=this.settings.massload,l=(JSON.stringify(t),[]),h=this._model.data;if(!s){for(n=0,o=t.length;n<o;n++)h[t[n]]&&(h[t[n]].state.loaded||h[t[n]].state.failed)&&!a||(l.push(t[n]),d=this.get_node(t[n],!0),d&&d.length&&d.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},l.length){if(e.isFunction(c))return c.call(this,l,e.proxy(function(e){var n,o;if(e)for(n in e)e.hasOwnProperty(n)&&(this._data.massload[n]=e[n]);for(n=0,o=t.length;n<o;n++)d=this.get_node(t[n],!0),d&&d.length&&d.removeClass("jstree-loading").attr("aria-busy",!1);r._load_nodes.call(this,t,i,s,a)},this));if("object"==typeof c&&c&&c.url)return c=e.extend(!0,{},c),e.isFunction(c.url)&&(c.url=c.url.call(this,l)),e.isFunction(c.data)&&(c.data=c.data.call(this,l)),e.ajax(c).done(e.proxy(function(e,n,o){var c,l;if(e)for(c in e)e.hasOwnProperty(c)&&(this._data.massload[c]=e[c]);for(c=0,l=t.length;c<l;c++)d=this.get_node(t[c],!0),d&&d.length&&d.removeClass("jstree-loading").attr("aria-busy",!1);r._load_nodes.call(this,t,i,s,a)},this)).fail(e.proxy(function(e){r._load_nodes.call(this,t,i,s,a)},this))}}return r._load_nodes.call(this,t,i,s,a)},this._load_node=function(t,i){var s,a=this._data.massload[t.id],n=null;return a?(n=this["string"==typeof a?"_append_html_data":"_append_json_data"](t,"string"==typeof a?e(e.parseHTML(a)).filter(function(){return 3!==this.nodeType}):a,function(e){i.call(this,e)}),s=this.get_node(t.id,!0),s&&s.length&&s.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[t.id],n):r._load_node.call(this,t,i)}},e.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},e.jstree.plugins.search=function(r,i){this.bind=function(){i.bind.call(this),this._data.search.str="",this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",e.proxy(function(t,r){if(this._data.search.som&&r.res.length){var i,s,a,n,o=this._model.data,d=[];for(i=0,s=r.res.length;i<s;i++)if(o[r.res[i]]&&!o[r.res[i]].state.hidden&&(d.push(r.res[i]),d=d.concat(o[r.res[i]].parents),this._data.search.smc))for(a=0,n=o[r.res[i]].children_d.length;a<n;a++)o[o[r.res[i]].children_d[a]]&&!o[o[r.res[i]].children_d[a]].state.hidden&&d.push(o[r.res[i]].children_d[a]);d=e.vakata.array_remove_item(e.vakata.array_unique(d),e.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(d,!0),this.redraw(!0)}},this)).on("clear_search.jstree",e.proxy(function(e,t){this._data.search.som&&t.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))},this))},this.search=function(r,i,s,a,n,o){if(r===!1||""===e.trim(r.toString()))return this.clear_search();a=this.get_node(a),a=a&&a.id?a.id:null,r=r.toString();var d,c,l=this.settings.search,h=!!l.ajax&&l.ajax,_=this._model.data,u=null,g=[],f=[];if(this._data.search.res.length&&!n&&this.clear_search(),s===t&&(s=l.show_only_matches),o===t&&(o=l.show_only_matches_children),!i&&h!==!1)return e.isFunction(h)?h.call(this,r,e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(r,!0,s,a,n,o)})},this),a):(h=e.extend({},h),h.data||(h.data={}),h.data.str=r,a&&(h.data.inside=a),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=e.ajax(h).fail(e.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(h)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(e.proxy(function(t){t&&t.d&&(t=t.d),this._load_nodes(e.isArray(t)?e.vakata.array_unique(t):[],function(){this.search(r,!0,s,a,n,o)})},this)),this._data.search.lastRequest);if(n||(this._data.search.str=r,this._data.search.dom=e(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=s,this._data.search.smc=o),u=new e.vakata.search(r,(!0),{caseSensitive:l.case_sensitive,fuzzy:l.fuzzy}),e.each(_[a?a:e.jstree.root].children_d,function(e,t){var i=_[t];i.text&&!i.state.hidden&&(!l.search_leaves_only||i.state.loaded&&0===i.children.length)&&(l.search_callback&&l.search_callback.call(this,r,i)||!l.search_callback&&u.search(i.text).isMatch)&&(g.push(t),f=f.concat(i.parents))}),g.length){for(f=e.vakata.array_unique(f),d=0,c=f.length;d<c;d++)f[d]!==e.jstree.root&&_[f[d]]&&this.open_node(f[d],null,0)===!0&&this._data.search.opn.push(f[d]);n?(this._data.search.dom=this._data.search.dom.add(e(this.element[0].querySelectorAll("#"+e.map(g,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=e.vakata.array_unique(this._data.search.res.concat(g))):(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(g,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=g),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:r,res:this._data.search.res,show_only_matches:s})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=e(this.element[0].querySelectorAll("#"+e.map(this._data.search.res,function(t){return"0123456789".indexOf(t[0])!==-1?"\\3"+t[0]+" "+t.substr(1).replace(e.jstree.idregex,"\\$&"):t.replace(e.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=e()},this.redraw_node=function(t,r,s,a){if(t=i.redraw_node.apply(this,arguments),t&&e.inArray(t.id,this._data.search.res)!==-1){var n,o,d=null;for(n=0,o=t.childNodes.length;n<o;n++)if(t.childNodes[n]&&t.childNodes[n].className&&t.childNodes[n].className.indexOf("jstree-anchor")!==-1){d=t.childNodes[n];break}d&&(d.className+=" jstree-search")}return t}},function(e){e.vakata.search=function(t,r,i){i=i||{},i=e.extend({},e.vakata.search.defaults,i),i.fuzzy!==!1&&(i.fuzzy=!0),t=i.caseSensitive?t:t.toLowerCase();var s,a,n,o,d=i.location,c=i.distance,l=i.threshold,h=t.length;return h>32&&(i.fuzzy=!1),i.fuzzy&&(s=1<<h-1,a=function(){var e={},r=0;for(r=0;r<h;r++)e[t.charAt(r)]=0;for(r=0;r<h;r++)e[t.charAt(r)]|=1<<h-r-1;return e}(),n=function(e,t){var r=e/h,i=Math.abs(d-t);return c?r+i/c:i?1:r}),o=function(e){if(e=i.caseSensitive?e:e.toLowerCase(),t===e||e.indexOf(t)!==-1)return{isMatch:!0,score:0};if(!i.fuzzy)return{isMatch:!1,score:1};var r,o,c,_,u,g,f,p,m,v=e.length,j=l,y=e.indexOf(t,d),k=h+v,x=1,b=[];for(y!==-1&&(j=Math.min(n(0,y),j),y=e.lastIndexOf(t,d+h),y!==-1&&(j=Math.min(n(0,y),j))),y=-1,r=0;r<h;r++){for(c=0,_=k;c<_;)n(r,d+_)<=j?c=_:k=_,_=Math.floor((k-c)/2+c);for(k=_,g=Math.max(1,d-_+1),f=Math.min(d+_,v)+h,p=new Array(f+2),p[f+1]=(1<<r)-1,o=f;o>=g;o--)if(m=a[e.charAt(o-1)],0===r?p[o]=(p[o+1]<<1|1)&m:p[o]=(p[o+1]<<1|1)&m|((u[o+1]|u[o])<<1|1)|u[o+1],p[o]&s&&(x=n(r,o-1),x<=j)){if(j=x,y=o-1,b.push(y),!(y>d))break;g=Math.max(1,2*d-y)}if(n(r+1,d)>j)break;u=p}return{isMatch:y>=0,score:x}},r===!0?{search:o}:o(r)},e.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(e),e.jstree.defaults.sort=function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},e.jstree.plugins.sort=function(t,r){this.bind=function(){r.bind.call(this),this.element.on("model.jstree",e.proxy(function(e,t){this.sort(t.parent,!0)},this)).on("rename_node.jstree create_node.jstree",e.proxy(function(e,t){this.sort(t.parent||t.node.parent,!1),this.redraw_node(t.parent||t.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",e.proxy(function(e,t){this.sort(t.parent,!1),this.redraw_node(t.parent,!0)},this))},this.sort=function(t,r){var i,s;if(t=this.get_node(t),t&&t.children&&t.children.length&&(t.children.sort(e.proxy(this.settings.sort,this)),r))for(i=0,s=t.children_d.length;i<s;i++)this.sort(t.children_d[i],!1)}};var _=!1;e.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},e.jstree.plugins.state=function(t,r){this.bind=function(){r.bind.call(this);var t=e.proxy(function(){this.element.on(this.settings.state.events,e.proxy(function(){_&&clearTimeout(_),_=setTimeout(e.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",e.proxy(function(e,r){this.element.one("restore_state.jstree",t),this.restore_state()||t()},this))},this.save_state=function(){var t=this.get_state();this.settings.state.preserve_loaded||delete t.core.loaded;var r={state:t,ttl:this.settings.state.ttl,sec:+new Date};e.vakata.storage.set(this.settings.state.key,JSON.stringify(r))},this.restore_state=function(){var t=e.vakata.storage.get(this.settings.state.key);if(t)try{t=JSON.parse(t)}catch(r){return!1}return!(t&&t.ttl&&t.sec&&+new Date-t.sec>t.ttl)&&(t&&t.state&&(t=t.state),t&&e.isFunction(this.settings.state.filter)&&(t=this.settings.state.filter.call(this,t)),!!t&&(this.settings.state.preserve_loaded||delete t.core.loaded,this.element.one("set_state.jstree",function(r,i){i.instance.trigger("restore_state",{state:e.extend(!0,{},t)})}),this.set_state(t),!0))},this.clear_state=function(){return e.vakata.storage.del(this.settings.state.key)}},function(e,t){e.vakata.storage={set:function(e,t){return window.localStorage.setItem(e,t)},get:function(e){return window.localStorage.getItem(e)},del:function(e){return window.localStorage.removeItem(e)}}}(e),e.jstree.defaults.types={"default":{}},e.jstree.defaults.types[e.jstree.root]={},e.jstree.plugins.types=function(r,i){this.init=function(r,s){var a,n;if(s&&s.types&&s.types["default"])for(a in s.types)if("default"!==a&&a!==e.jstree.root&&s.types.hasOwnProperty(a))for(n in s.types["default"])s.types["default"].hasOwnProperty(n)&&s.types[a][n]===t&&(s.types[a][n]=s.types["default"][n]);i.init.call(this,r,s),this._model.data[e.jstree.root].type=e.jstree.root},this.refresh=function(t,r){i.refresh.call(this,t,r),this._model.data[e.jstree.root].type=e.jstree.root},this.bind=function(){this.element.on("model.jstree",e.proxy(function(r,i){var s,a,n,o=this._model.data,d=i.nodes,c=this.settings.types,l="default";for(s=0,a=d.length;s<a;s++){if(l="default",o[d[s]].original&&o[d[s]].original.type&&c[o[d[s]].original.type]&&(l=o[d[s]].original.type),o[d[s]].data&&o[d[s]].data.jstree&&o[d[s]].data.jstree.type&&c[o[d[s]].data.jstree.type]&&(l=o[d[s]].data.jstree.type),o[d[s]].type=l,o[d[s]].icon===!0&&c[l].icon!==t&&(o[d[s]].icon=c[l].icon),c[l].li_attr!==t&&"object"==typeof c[l].li_attr)for(n in c[l].li_attr)if(c[l].li_attr.hasOwnProperty(n)){if("id"===n)continue;o[d[s]].li_attr[n]===t?o[d[s]].li_attr[n]=c[l].li_attr[n]:"class"===n&&(o[d[s]].li_attr["class"]=c[l].li_attr["class"]+" "+o[d[s]].li_attr["class"])}if(c[l].a_attr!==t&&"object"==typeof c[l].a_attr)for(n in c[l].a_attr)if(c[l].a_attr.hasOwnProperty(n)){if("id"===n)continue;o[d[s]].a_attr[n]===t?o[d[s]].a_attr[n]=c[l].a_attr[n]:"href"===n&&"#"===o[d[s]].a_attr[n]?o[d[s]].a_attr.href=c[l].a_attr.href:"class"===n&&(o[d[s]].a_attr["class"]=c[l].a_attr["class"]+" "+o[d[s]].a_attr["class"])}}o[e.jstree.root].type=e.jstree.root},this)),i.bind.call(this)},this.get_json=function(t,r,s){var a,n,o=this._model.data,d=r?e.extend(!0,{},r,{no_id:!1}):{},c=i.get_json.call(this,t,d,s);if(c===!1)return!1;if(e.isArray(c))for(a=0,n=c.length;a<n;a++)c[a].type=c[a].id&&o[c[a].id]&&o[c[a].id].type?o[c[a].id].type:"default",r&&r.no_id&&(delete c[a].id,c[a].li_attr&&c[a].li_attr.id&&delete c[a].li_attr.id,c[a].a_attr&&c[a].a_attr.id&&delete c[a].a_attr.id);else c.type=c.id&&o[c.id]&&o[c.id].type?o[c.id].type:"default",
r&&r.no_id&&(c=this._delete_ids(c));return c},this._delete_ids=function(t){if(e.isArray(t)){for(var r=0,i=t.length;r<i;r++)t[r]=this._delete_ids(t[r]);return t}return delete t.id,t.li_attr&&t.li_attr.id&&delete t.li_attr.id,t.a_attr&&t.a_attr.id&&delete t.a_attr.id,t.children&&e.isArray(t.children)&&(t.children=this._delete_ids(t.children)),t},this.check=function(r,s,a,n,o){if(i.check.call(this,r,s,a,n,o)===!1)return!1;s=s&&s.id?s:this.get_node(s),a=a&&a.id?a:this.get_node(a);var d,c,l,h,_=s&&s.id?o&&o.origin?o.origin:e.jstree.reference(s.id):null;switch(_=_&&_._model&&_._model.data?_._model.data:null,r){case"create_node":case"move_node":case"copy_node":if("move_node"!==r||e.inArray(s.id,a.children)===-1){if(d=this.get_rules(a),d.max_children!==t&&d.max_children!==-1&&d.max_children===a.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+r,data:JSON.stringify({chk:r,pos:n,obj:!(!s||!s.id)&&s.id,par:!(!a||!a.id)&&a.id})},!1;if(d.valid_children!==t&&d.valid_children!==-1&&e.inArray(s.type||"default",d.valid_children)===-1)return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+r,data:JSON.stringify({chk:r,pos:n,obj:!(!s||!s.id)&&s.id,par:!(!a||!a.id)&&a.id})},!1;if(_&&s.children_d&&s.parents){for(c=0,l=0,h=s.children_d.length;l<h;l++)c=Math.max(c,_[s.children_d[l]].parents.length);c=c-s.parents.length+1}(c<=0||c===t)&&(c=1);do{if(d.max_depth!==t&&d.max_depth!==-1&&d.max_depth<c)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+r,data:JSON.stringify({chk:r,pos:n,obj:!(!s||!s.id)&&s.id,par:!(!a||!a.id)&&a.id})},!1;a=this.get_node(a.parent),d=this.get_rules(a),c++}while(a)}}return!0},this.get_rules=function(e){if(e=this.get_node(e),!e)return!1;var r=this.get_type(e,!0);return r.max_depth===t&&(r.max_depth=-1),r.max_children===t&&(r.max_children=-1),r.valid_children===t&&(r.valid_children=-1),r},this.get_type=function(t,r){return t=this.get_node(t),!!t&&(r?e.extend({type:t.type},this.settings.types[t.type]):t.type)},this.set_type=function(r,i){var s,a,n,o,d,c,l,h,_=this._model.data;if(e.isArray(r)){for(r=r.slice(),a=0,n=r.length;a<n;a++)this.set_type(r[a],i);return!0}if(s=this.settings.types,r=this.get_node(r),!s[i]||!r)return!1;if(l=this.get_node(r,!0),l&&l.length&&(h=l.children(".jstree-anchor")),o=r.type,d=this.get_icon(r),r.type=i,(d===!0||!s[o]||s[o].icon!==t&&d===s[o].icon)&&this.set_icon(r,s[i].icon===t||s[i].icon),s[o]&&s[o].li_attr!==t&&"object"==typeof s[o].li_attr)for(c in s[o].li_attr)if(s[o].li_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(_[r.id].li_attr["class"]=(_[r.id].li_attr["class"]||"").replace(s[o].li_attr[c],""),l&&l.removeClass(s[o].li_attr[c])):_[r.id].li_attr[c]===s[o].li_attr[c]&&(_[r.id].li_attr[c]=null,l&&l.removeAttr(c))}if(s[o]&&s[o].a_attr!==t&&"object"==typeof s[o].a_attr)for(c in s[o].a_attr)if(s[o].a_attr.hasOwnProperty(c)){if("id"===c)continue;"class"===c?(_[r.id].a_attr["class"]=(_[r.id].a_attr["class"]||"").replace(s[o].a_attr[c],""),h&&h.removeClass(s[o].a_attr[c])):_[r.id].a_attr[c]===s[o].a_attr[c]&&("href"===c?(_[r.id].a_attr[c]="#",h&&h.attr("href","#")):(delete _[r.id].a_attr[c],h&&h.removeAttr(c)))}if(s[i].li_attr!==t&&"object"==typeof s[i].li_attr)for(c in s[i].li_attr)if(s[i].li_attr.hasOwnProperty(c)){if("id"===c)continue;_[r.id].li_attr[c]===t?(_[r.id].li_attr[c]=s[i].li_attr[c],l&&("class"===c?l.addClass(s[i].li_attr[c]):l.attr(c,s[i].li_attr[c]))):"class"===c&&(_[r.id].li_attr["class"]=s[i].li_attr[c]+" "+_[r.id].li_attr["class"],l&&l.addClass(s[i].li_attr[c]))}if(s[i].a_attr!==t&&"object"==typeof s[i].a_attr)for(c in s[i].a_attr)if(s[i].a_attr.hasOwnProperty(c)){if("id"===c)continue;_[r.id].a_attr[c]===t?(_[r.id].a_attr[c]=s[i].a_attr[c],h&&("class"===c?h.addClass(s[i].a_attr[c]):h.attr(c,s[i].a_attr[c]))):"href"===c&&"#"===_[r.id].a_attr[c]?(_[r.id].a_attr.href=s[i].a_attr.href,h&&h.attr("href",s[i].a_attr.href)):"class"===c&&(_[r.id].a_attr["class"]=s[i].a_attr["class"]+" "+_[r.id].a_attr["class"],h&&h.addClass(s[i].a_attr[c]))}return!0}},e.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(e,t){return e+" ("+t+")"}},e.jstree.plugins.unique=function(r,i){this.check=function(t,r,s,a,n){if(i.check.call(this,t,r,s,a,n)===!1)return!1;if(r=r&&r.id?r:this.get_node(r),s=s&&s.id?s:this.get_node(s),!s||!s.children)return!0;var o,d,c,l="rename_node"===t?a:r.text,h=[],_=this.settings.unique.case_sensitive,u=this.settings.unique.trim_whitespace,g=this._model.data;for(o=0,d=s.children.length;o<d;o++)c=g[s.children[o]].text,_||(c=c.toLowerCase()),u&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),h.push(c);switch(_||(l=l.toLowerCase()),u&&(l=l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),t){case"delete_node":return!0;case"rename_node":return c=r.text||"",_||(c=c.toLowerCase()),u&&(c=c.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),o=e.inArray(l,h)===-1||r.text&&c===l,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+l+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o;case"create_node":return o=e.inArray(l,h)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+l+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o;case"copy_node":return o=e.inArray(l,h)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+l+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o;case"move_node":return o=r.parent===s.id&&(!n||!n.is_multi)||e.inArray(l,h)===-1,o||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+l+" already exists. Preventing: "+t,data:JSON.stringify({chk:t,pos:a,obj:!(!r||!r.id)&&r.id,par:!(!s||!s.id)&&s.id})}),o}return!0},this.create_node=function(r,s,a,n,o){if(!s||s.text===t){if(null===r&&(r=e.jstree.root),r=this.get_node(r),!r)return i.create_node.call(this,r,s,a,n,o);if(a=a===t?"last":a,!a.toString().match(/^(before|after)$/)&&!o&&!this.is_loaded(r))return i.create_node.call(this,r,s,a,n,o);s||(s={});var d,c,l,h,_,u,g=this._model.data,f=this.settings.unique.case_sensitive,p=this.settings.unique.trim_whitespace,m=this.settings.unique.duplicate;for(c=d=this.get_string("New node"),l=[],h=0,_=r.children.length;h<_;h++)u=g[r.children[h]].text,f||(u=u.toLowerCase()),p&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),l.push(u);for(h=1,u=c,f||(u=u.toLowerCase()),p&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));e.inArray(u,l)!==-1;)c=m.call(this,d,++h).toString(),u=c,f||(u=u.toLowerCase()),p&&(u=u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));s.text=c}return i.create_node.call(this,r,s,a,n,o)}};var u=d.createElement("DIV");if(u.setAttribute("unselectable","on"),u.setAttribute("role","presentation"),u.className="jstree-wholerow",u.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,r){this.bind=function(){r.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var r,i,s=!1;for(r=0,i=t.selected.length;r<i;r++)s=this.get_node(t.selected[r],!0),s&&s.length&&s.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){"hover_node"===e.type&&this.is_disabled(t.node)||this.get_node(t.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){if(this._data.contextmenu){t.preventDefault();var r=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r)}},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var r=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r).focus()}).on("dblclick.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var r=e.Event("dblclick",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var r=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(r).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),r.teardown.call(this)},this.redraw_node=function(t,i,s,a){if(t=r.redraw_node.apply(this,arguments)){var n=u.cloneNode(!0);e.inArray(t.id,this._data.core.selected)!==-1&&(n.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(n.className+=" jstree-wholerow-hovered"),t.insertBefore(n,t.childNodes[0])}return t}},window.customElements&&Object&&Object.create){var g=Object.create(HTMLElement.prototype);g.createdCallback=function(){var t,r={core:{},plugins:[]};for(t in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(t)&&this.attributes[t]&&(r.plugins.push(t),this.getAttribute(t)&&JSON.parse(this.getAttribute(t))&&(r[t]=JSON.parse(this.getAttribute(t))));for(t in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(t)&&this.attributes[t]&&(r.core[t]=JSON.parse(this.getAttribute(t))||this.getAttribute(t));e(this).jstree(r)};try{window.customElements.define("vakata-jstree",function(){},{prototype:g})}catch(f){}}}});
this.L=this.L||{},this.L.Control=this.L.Control||{},this.L.Control.Geocoder=function(e){"use strict";function t(e){return w[e]}function o(e){return null==e?"":e?(e=""+e,k.test(e)?e.replace(C,t):e):e+""}function s(t,o,s,n,i){var a="_l_geocoder_"+U++;o[i||"callback"]=a,window[a]=e.Util.bind(s,n);var l=document.createElement("script");l.type="text/javascript",l.src=t+r(o),l.id=a,document.getElementsByTagName("head")[0].appendChild(l)}function n(e,t,o){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4===s.readyState){var e;if(200!==s.status&&304!==s.status)e="";else if("string"==typeof s.response)try{e=JSON.parse(s.response)}catch(t){e=s.response}else e=s.response;o(e)}},s.open("GET",e+r(t),!0),s.responseType="json",s.setRequestHeader("Accept","application/json"),s.send(null)}function i(e,t){return e.replace(/\{ *([\w_]+) *\}/g,function(e,s){var n=t[s];return void 0===n?n="":"function"==typeof n&&(n=n(t)),o(n)})}function r(t,o,s){var n=[];for(var i in t){var r=encodeURIComponent(s?i.toUpperCase():i),a=t[i];if(e.Util.isArray(a))for(var l=0;l<a.length;l++)n.push(r+"="+encodeURIComponent(a[l]));else n.push(r+"="+encodeURIComponent(a))}return(o&&o.indexOf("?")!==-1?"&":"?")+n.join("&")}function a(e,t){return new D(e,t)}function l(e){return new P(e)}function c(e,t){return new E(e,t)}function d(e){return new R(e)}function u(e){return new T(e)}function h(e,t){return new B(e,t)}function p(e,t){return new F(e,t)}function g(e){return new S(e)}function m(e){return new Q(e)}function f(e){return new M(e)}function v(e,t){return new j(e,t)}function _(e,t){return new N(e,t)}function b(e,t){return new A(e,t)}function y(e){return new q(e)}function L(e){return new W(e)}function x(e){return new K(e)}e=e&&e.hasOwnProperty("default")?e["default"]:e;var U=0,C=/[&<>"'`]/g,k=/[&<>"'`]/,w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},D=e.Class.extend({options:{service_url:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},initialize:function(t,o){e.setOptions(this,o),this._accessToken=t},geocode:function(t,o,s){var i={SingleLine:t,outFields:"Addr_Type",forStorage:!1,maxLocations:10,f:"json"};this._key&&this._key.length&&(i.token=this._key),n(this.options.service_url+"/findAddressCandidates",e.extend(i,this.options.geocodingQueryParams),function(t){var n,i,r,a=[];if(t.candidates&&t.candidates.length)for(var l=0;l<=t.candidates.length-1;l++)n=t.candidates[l],i=e.latLng(n.location.y,n.location.x),r=e.latLngBounds(e.latLng(n.extent.ymax,n.extent.xmax),e.latLng(n.extent.ymin,n.extent.xmin)),a[l]={name:n.address,bbox:r,center:i};o.call(s,a)})},suggest:function(e,t,o){return this.geocode(e,t,o)},reverse:function(t,o,s,i){var r={location:encodeURIComponent(t.lng)+","+encodeURIComponent(t.lat),distance:100,f:"json"};n(this.options.service_url+"/reverseGeocode",r,function(t){var o,n=[];t&&!t.error&&(o=e.latLng(t.location.y,t.location.x),n.push({name:t.address.Match_addr,center:o,bounds:e.latLngBounds(o,o)})),s.call(i,n)})}}),P=e.Class.extend({initialize:function(e){this.key=e},geocode:function(t,o,n){s("https://dev.virtualearth.net/REST/v1/Locations",{query:t,key:this.key},function(t){var s=[];if(t.resourceSets.length>0)for(var i=t.resourceSets[0].resources.length-1;i>=0;i--){var r=t.resourceSets[0].resources[i],a=r.bbox;s[i]={name:r.name,bbox:e.latLngBounds([a[0],a[1]],[a[2],a[3]]),center:e.latLng(r.point.coordinates)}}o.call(n,s)},this,"jsonp")},reverse:function(t,o,n,i){s("//dev.virtualearth.net/REST/v1/Locations/"+t.lat+","+t.lng,{key:this.key},function(t){for(var o=[],s=t.resourceSets[0].resources.length-1;s>=0;s--){var r=t.resourceSets[0].resources[s],a=r.bbox;o[s]={name:r.name,bbox:e.latLngBounds([a[0],a[1]],[a[2],a[3]]),center:e.latLng(r.point.coordinates)}}n.call(i,o)},this,"jsonp")}}),E=e.Class.extend({options:{serviceUrl:"https://maps.googleapis.com/maps/api/geocode/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,o){this._key=t,e.setOptions(this,o),this.options.serviceUrl=this.options.service_url||this.options.serviceUrl},geocode:function(t,o,s){var i={address:t};this._key&&this._key.length&&(i.key=this._key),i=e.Util.extend(i,this.options.geocodingQueryParams),n(this.options.serviceUrl,i,function(t){var n,i,r,a=[];if(t.results&&t.results.length)for(var l=0;l<=t.results.length-1;l++)n=t.results[l],i=e.latLng(n.geometry.location),r=e.latLngBounds(e.latLng(n.geometry.viewport.northeast),e.latLng(n.geometry.viewport.southwest)),a[l]={name:n.formatted_address,bbox:r,center:i,properties:n.address_components};o.call(s,a)})},reverse:function(t,o,s,i){var r={latlng:encodeURIComponent(t.lat)+","+encodeURIComponent(t.lng)};r=e.Util.extend(r,this.options.reverseQueryParams),this._key&&this._key.length&&(r.key=this._key),n(this.options.serviceUrl,r,function(t){var o,n,r,a=[];if(t.results&&t.results.length)for(var l=0;l<=t.results.length-1;l++)o=t.results[l],n=e.latLng(o.geometry.location),r=e.latLngBounds(e.latLng(o.geometry.viewport.northeast),e.latLng(o.geometry.viewport.southwest)),a[l]={name:o.formatted_address,bbox:r,center:n,properties:o.address_components};s.call(i,a)})}}),R=e.Class.extend({options:{geocodeUrl:"https://geocoder.api.here.com/6.2/geocode.json",reverseGeocodeUrl:"https://reverse.geocoder.api.here.com/6.2/reversegeocode.json",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",geocodingQueryParams:{},reverseQueryParams:{},reverseGeocodeProxRadius:null},initialize:function(t){e.setOptions(this,t)},geocode:function(t,o,s){var n={searchtext:t,gen:9,app_id:this.options.app_id,app_code:this.options.app_code,jsonattributes:1};n=e.Util.extend(n,this.options.geocodingQueryParams),this.getJSON(this.options.geocodeUrl,n,o,s)},reverse:function(t,o,s,n){var i=this.options.reverseGeocodeProxRadius?this.options.reverseGeocodeProxRadius:null,r=i?","+encodeURIComponent(i):"",a={prox:encodeURIComponent(t.lat)+","+encodeURIComponent(t.lng)+r,mode:"retrieveAddresses",app_id:this.options.app_id,app_code:this.options.app_code,gen:9,jsonattributes:1};a=e.Util.extend(a,this.options.reverseQueryParams),this.getJSON(this.options.reverseGeocodeUrl,a,s,n)},getJSON:function(t,o,s,i){n(t,o,function(t){var o,n,r,a=[];if(t.response.view&&t.response.view.length)for(var l=0;l<=t.response.view[0].result.length-1;l++)o=t.response.view[0].result[l].location,n=e.latLng(o.displayPosition.latitude,o.displayPosition.longitude),r=e.latLngBounds(e.latLng(o.mapView.topLeft.latitude,o.mapView.topLeft.longitude),e.latLng(o.mapView.bottomRight.latitude,o.mapView.bottomRight.longitude)),a[l]={name:o.address.label,properties:o.address,bbox:r,center:n};s.call(i,a)})}}),T=e.Class.extend({options:{next:void 0,sizeInMeters:1e4},initialize:function(t){e.Util.setOptions(this,t)},geocode:function(t,o,s){var n,i;if((n=t.match(/^([NS])\s*(\d{1,3}(?:\.\d*)?)\W*([EW])\s*(\d{1,3}(?:\.\d*)?)$/))?i=e.latLng((/N/i.test(n[1])?1:-1)*parseFloat(n[2]),(/E/i.test(n[3])?1:-1)*parseFloat(n[4])):(n=t.match(/^(\d{1,3}(?:\.\d*)?)\s*([NS])\W*(\d{1,3}(?:\.\d*)?)\s*([EW])$/))?i=e.latLng((/N/i.test(n[2])?1:-1)*parseFloat(n[1]),(/E/i.test(n[4])?1:-1)*parseFloat(n[3])):(n=t.match(/^([NS])\s*(\d{1,3})Â°?\s*(\d{1,3}(?:\.\d*)?)?['â²]?\W*([EW])\s*(\d{1,3})Â°?\s*(\d{1,3}(?:\.\d*)?)?['â²]?$/))?i=e.latLng((/N/i.test(n[1])?1:-1)*(parseFloat(n[2])+parseFloat(n[3]/60)),(/E/i.test(n[4])?1:-1)*(parseFloat(n[5])+parseFloat(n[6]/60))):(n=t.match(/^(\d{1,3})Â°?\s*(\d{1,3}(?:\.\d*)?)?['â²]?\s*([NS])\W*(\d{1,3})Â°?\s*(\d{1,3}(?:\.\d*)?)?['â²]?\s*([EW])$/))?i=e.latLng((/N/i.test(n[3])?1:-1)*(parseFloat(n[1])+parseFloat(n[2]/60)),(/E/i.test(n[6])?1:-1)*(parseFloat(n[4])+parseFloat(n[5]/60))):(n=t.match(/^([NS])\s*(\d{1,3})Â°?\s*(\d{1,2})['â²]?\s*(\d{1,3}(?:\.\d*)?)?["â³]?\W*([EW])\s*(\d{1,3})Â°?\s*(\d{1,2})['â²]?\s*(\d{1,3}(?:\.\d*)?)?["â³]?$/))?i=e.latLng((/N/i.test(n[1])?1:-1)*(parseFloat(n[2])+parseFloat(n[3]/60+parseFloat(n[4]/3600))),(/E/i.test(n[5])?1:-1)*(parseFloat(n[6])+parseFloat(n[7]/60)+parseFloat(n[8]/3600))):(n=t.match(/^(\d{1,3})Â°?\s*(\d{1,2})['â²]?\s*(\d{1,3}(?:\.\d*)?)?["â³]\s*([NS])\W*(\d{1,3})Â°?\s*(\d{1,2})['â²]?\s*(\d{1,3}(?:\.\d*)?)?["â³]?\s*([EW])$/))?i=e.latLng((/N/i.test(n[4])?1:-1)*(parseFloat(n[1])+parseFloat(n[2]/60+parseFloat(n[3]/3600))),(/E/i.test(n[8])?1:-1)*(parseFloat(n[5])+parseFloat(n[6]/60)+parseFloat(n[7]/3600))):(n=t.match(/^\s*([+-]?\d+(?:\.\d*)?)\s*[\s,]\s*([+-]?\d+(?:\.\d*)?)\s*$/))&&(i=e.latLng(parseFloat(n[1]),parseFloat(n[2]))),i){var r=[{name:t,center:i,bbox:i.toBounds(this.options.sizeInMeters)}];o.call(s,r)}else this.options.next&&this.options.next.geocode(t,o,s)}}),B=e.Class.extend({options:{serviceUrl:"https://api.mapbox.com/geocoding/v5/mapbox.places/",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,o){e.setOptions(this,o),this.options.geocodingQueryParams.access_token=t,this.options.reverseQueryParams.access_token=t},geocode:function(t,o,s){var i=this.options.geocodingQueryParams;void 0!==i.proximity&&void 0!==i.proximity.lat&&void 0!==i.proximity.lng&&(i.proximity=i.proximity.lng+","+i.proximity.lat),n(this.options.serviceUrl+encodeURIComponent(t)+".json",i,function(t){var n,i,r,a=[];if(t.features&&t.features.length)for(var l=0;l<=t.features.length-1;l++){n=t.features[l],i=e.latLng(n.center.reverse()),r=n.bbox?e.latLngBounds(e.latLng(n.bbox.slice(0,2).reverse()),e.latLng(n.bbox.slice(2,4).reverse())):e.latLngBounds(i,i);for(var c={text:n.text,address:n.address},d=0;d<(n.context||[]).length;d++){var u=n.context[d].id.split(".")[0];c[u]=n.context[d].text,n.context[d].short_code&&(c.countryShortCode=n.context[d].short_code)}a[l]={name:n.place_name,bbox:r,center:i,properties:c}}o.call(s,a)})},suggest:function(e,t,o){return this.geocode(e,t,o)},reverse:function(t,o,s,i){n(this.options.serviceUrl+encodeURIComponent(t.lng)+","+encodeURIComponent(t.lat)+".json",this.options.reverseQueryParams,function(t){var o,n,r,a=[];if(t.features&&t.features.length)for(var l=0;l<=t.features.length-1;l++)o=t.features[l],n=e.latLng(o.center.reverse()),r=o.bbox?e.latLngBounds(e.latLng(o.bbox.slice(0,2).reverse()),e.latLng(o.bbox.slice(2,4).reverse())):e.latLngBounds(n,n),a[l]={name:o.place_name,bbox:r,center:n};s.call(i,a)})}}),F=e.Class.extend({options:{serviceUrl:"https://www.mapquestapi.com/geocoding/v1"},initialize:function(t,o){this._key=decodeURIComponent(t),e.Util.setOptions(this,o)},_formatName:function(){var e,t=[];for(e=0;e<arguments.length;e++)arguments[e]&&t.push(arguments[e]);return t.join(", ")},geocode:function(t,o,s){n(this.options.serviceUrl+"/address",{key:this._key,location:t,limit:5,outFormat:"json"},e.bind(function(t){var n,i,r=[];if(t.results&&t.results[0].locations)for(var a=t.results[0].locations.length-1;a>=0;a--)n=t.results[0].locations[a],i=e.latLng(n.latLng),r[a]={name:this._formatName(n.street,n.adminArea4,n.adminArea3,n.adminArea1),bbox:e.latLngBounds(i,i),center:i};o.call(s,r)},this))},reverse:function(t,o,s,i){n(this.options.serviceUrl+"/reverse",{key:this._key,location:t.lat+","+t.lng,outputFormat:"json"},e.bind(function(t){var o,n,r=[];if(t.results&&t.results[0].locations)for(var a=t.results[0].locations.length-1;a>=0;a--)o=t.results[0].locations[a],n=e.latLng(o.latLng),r[a]={name:this._formatName(o.street,o.adminArea4,o.adminArea3,o.adminArea1),bbox:e.latLngBounds(n,n),center:n};s.call(i,r)},this))}}),S=e.Class.extend({options:{userId:"<insert your userId here>",apiKey:"<insert your apiKey here>",serviceUrl:"https://neutrinoapi.com/"},initialize:function(t){e.Util.setOptions(this,t)},geocode:function(t,o,s){n(this.options.serviceUrl+"geocode-address",{apiKey:this.options.apiKey,userId:this.options.userId,address:t.split(/\s+/).join(".")},function(t){var n,i,r=[];t.locations&&(t.geometry=t.locations[0],n=e.latLng(t.geometry.latitude,t.geometry.longitude),i=e.latLngBounds(n,n),r[0]={name:t.geometry.address,bbox:i,center:n}),o.call(s,r)})},suggest:function(e,t,o){return this.geocode(e,t,o)},reverse:function(t,o,s,i){n(this.options.serviceUrl+"geocode-reverse",{apiKey:this.options.apiKey,userId:this.options.userId,latitude:t.lat,longitude:t.lng},function(o){var n,r,a=[];200==o.status.status&&o.found&&(n=e.latLng(t.lat,t.lng),r=e.latLngBounds(n,n),a[0]={name:o.address,bbox:r,center:n}),s.call(i,a)})}}),Q=e.Class.extend({options:{serviceUrl:"https://nominatim.openstreetmap.org/",geocodingQueryParams:{},reverseQueryParams:{},htmlTemplate:function(e){var t,o=e.address,s=[];return(o.road||o.building)&&s.push("{building} {road} {house_number}"),(o.city||o.town||o.village||o.hamlet)&&(t=s.length>0?"leaflet-control-geocoder-address-detail":"",s.push('<span class="'+t+'">{postcode} {city} {town} {village} {hamlet}</span>')),(o.state||o.country)&&(t=s.length>0?"leaflet-control-geocoder-address-context":"",s.push('<span class="'+t+'">{state} {country}</span>')),i(s.join("<br/>"),o,!0)}},initialize:function(t){e.Util.setOptions(this,t)},geocode:function(t,o,s){n(this.options.serviceUrl+"search",e.extend({q:t,limit:5,format:"json",addressdetails:1},this.options.geocodingQueryParams),e.bind(function(t){for(var n=[],i=t.length-1;i>=0;i--){for(var r=t[i].boundingbox,a=0;a<4;a++)r[a]=parseFloat(r[a]);n[i]={icon:t[i].icon,name:t[i].display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t[i]):void 0,bbox:e.latLngBounds([r[0],r[2]],[r[1],r[3]]),center:e.latLng(t[i].lat,t[i].lon),properties:t[i]}}o.call(s,n)},this))},reverse:function(t,o,s,i){n(this.options.serviceUrl+"reverse",e.extend({lat:t.lat,lon:t.lng,zoom:Math.round(Math.log(o/256)/Math.log(2)),addressdetails:1,format:"json"},this.options.reverseQueryParams),e.bind(function(t){var o,n=[];t&&t.lat&&t.lon&&(o=e.latLng(t.lat,t.lon),n.push({name:t.display_name,html:this.options.htmlTemplate?this.options.htmlTemplate(t):void 0,center:o,bounds:e.latLngBounds(o,o),properties:t})),s.call(i,n)},this))}}),M=e.Class.extend({options:{OpenLocationCode:void 0,codeLength:void 0},initialize:function(t){e.setOptions(this,t)},geocode:function(t,o,s){try{var n=this.options.OpenLocationCode.decode(t),i={name:t,center:e.latLng(n.latitudeCenter,n.longitudeCenter),bbox:e.latLngBounds(e.latLng(n.latitudeLo,n.longitudeLo),e.latLng(n.latitudeHi,n.longitudeHi))};o.call(s,[i])}catch(r){console.warn(r),o.call(s,[])}},reverse:function(t,o,s,n){try{var i=this.options.OpenLocationCode.encode(t.lat,t.lng,this.options.codeLength),r={name:i,center:e.latLng(t.lat,t.lng),bbox:e.latLngBounds(e.latLng(t.lat,t.lng),e.latLng(t.lat,t.lng))};s.call(n,[r])}catch(a){console.warn(a),s.call(n,[])}}}),j=e.Class.extend({options:{serviceUrl:"https://api.opencagedata.com/geocode/v1/json",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,o){e.setOptions(this,o),this._accessToken=t},geocode:function(t,o,s){var i={key:this._accessToken,q:t};i=e.extend(i,this.options.geocodingQueryParams),n(this.options.serviceUrl,i,function(t){var n,i,r,a=[];if(t.results&&t.results.length)for(var l=0;l<t.results.length;l++)r=t.results[l],n=e.latLng(r.geometry),i=r.annotations&&r.annotations.bounds?e.latLngBounds(e.latLng(r.annotations.bounds.northeast),e.latLng(r.annotations.bounds.southwest)):e.latLngBounds(n,n),a.push({name:r.formatted,bbox:i,center:n});o.call(s,a)})},suggest:function(e,t,o){return this.geocode(e,t,o)},reverse:function(t,o,s,i){var r={key:this._accessToken,q:[t.lat,t.lng].join(",")};r=e.extend(r,this.options.reverseQueryParams),n(this.options.serviceUrl,r,function(t){var o,n,r,a=[];if(t.results&&t.results.length)for(var l=0;l<t.results.length;l++)r=t.results[l],o=e.latLng(r.geometry),n=r.annotations&&r.annotations.bounds?e.latLngBounds(e.latLng(r.annotations.bounds.northeast),e.latLng(r.annotations.bounds.southwest)):e.latLngBounds(o,o),a.push({name:r.formatted,bbox:n,center:o});s.call(i,a)})}}),N=e.Class.extend({options:{serviceUrl:"https://api.geocode.earth/v1",geocodingQueryParams:{},reverseQueryParams:{}},initialize:function(t,o){e.Util.setOptions(this,o),this._apiKey=t,this._lastSuggest=0},geocode:function(t,o,s){var i=this;n(this.options.serviceUrl+"/search",e.extend({api_key:this._apiKey,text:t},this.options.geocodingQueryParams),function(e){o.call(s,i._parseResults(e,"bbox"))})},suggest:function(t,o,s){var i=this;n(this.options.serviceUrl+"/autocomplete",e.extend({api_key:this._apiKey,text:t},this.options.geocodingQueryParams),e.bind(function(e){e.geocoding.timestamp>this._lastSuggest&&(this._lastSuggest=e.geocoding.timestamp,o.call(s,i._parseResults(e,"bbox")))},this))},reverse:function(t,o,s,i){var r=this;n(this.options.serviceUrl+"/reverse",e.extend({api_key:this._apiKey,"point.lat":t.lat,"point.lon":t.lng},this.options.reverseQueryParams),function(e){s.call(i,r._parseResults(e,"bounds"))})},_parseResults:function(t,o){var s=[];return e.geoJson(t,{pointToLayer:function(t,o){return e.circleMarker(o)},onEachFeature:function(t,n){var i,r,a={};n.getBounds?(i=n.getBounds(),r=i.getCenter()):n.feature.bbox?(r=n.getLatLng(),i=e.latLngBounds(e.GeoJSON.coordsToLatLng(n.feature.bbox.slice(0,2)),e.GeoJSON.coordsToLatLng(n.feature.bbox.slice(2,4)))):(r=n.getLatLng(),i=e.latLngBounds(r,r)),a.name=n.feature.properties.label,a.center=r,a[o]=i,a.properties=n.feature.properties,s.push(a)}}),s}}),O=N,I=_,z=N,G=_,A=z.extend({options:{serviceUrl:"https://api.openrouteservice.org/geocode"}}),q=e.Class.extend({options:{serviceUrl:"https://photon.komoot.de/api/",reverseUrl:"https://photon.komoot.de/reverse/",nameProperties:["name","street","suburb","hamlet","town","city","state","country"]},initialize:function(t){e.setOptions(this,t)},geocode:function(t,o,s){var i=e.extend({q:t},this.options.geocodingQueryParams);n(this.options.serviceUrl,i,e.bind(function(e){o.call(s,this._decodeFeatures(e))},this))},suggest:function(e,t,o){return this.geocode(e,t,o)},reverse:function(t,o,s,i){var r=e.extend({lat:t.lat,lon:t.lng},this.options.reverseQueryParams);n(this.options.reverseUrl,r,e.bind(function(e){s.call(i,this._decodeFeatures(e))},this))},_decodeFeatures:function(t){var o,s,n,i,r,a,l=[];if(t&&t.features)for(o=0;o<t.features.length;o++)s=t.features[o],n=s.geometry.coordinates,i=e.latLng(n[1],n[0]),r=s.properties.extent,a=r?e.latLngBounds([r[1],r[0]],[r[3],r[2]]):e.latLngBounds(i,i),l.push({name:this._decodeFeatureName(s),html:this.options.htmlTemplate?this.options.htmlTemplate(s):void 0,center:i,bbox:a,properties:s.properties});return l},_decodeFeatureName:function(e){return(this.options.nameProperties||[]).map(function(t){return e.properties[t]}).filter(function(e){return!!e}).join(", ")}}),W=e.Class.extend({options:{serviceUrl:"https://api.what3words.com/v2/"},initialize:function(e){this._accessToken=e},geocode:function(t,o,s){n(this.options.serviceUrl+"forward",{key:this._accessToken,addr:t.split(/\s+/).join(".")},function(t){var n,i,r=[];t.geometry&&(n=e.latLng(t.geometry.lat,t.geometry.lng),i=e.latLngBounds(n,n),r[0]={name:t.words,bbox:i,center:n}),o.call(s,r)})},suggest:function(e,t,o){return this.geocode(e,t,o)},reverse:function(t,o,s,i){n(this.options.serviceUrl+"reverse",{key:this._accessToken,coords:[t.lat,t.lng].join(",")},function(t){var o,n,r=[];200==t.status.status&&(o=e.latLng(t.geometry.lat,t.geometry.lng),n=e.latLngBounds(o,o),r[0]={name:t.words,bbox:n,center:o}),s.call(i,r)})}}),H=Object.freeze({ArcGis:D,arcgis:a,Bing:P,bing:l,Google:E,google:c,HERE:R,here:d,LatLng:T,latLng:u,Mapbox:B,mapbox:h,MapQuest:F,mapQuest:p,Neutrino:S,neutrino:g,Nominatim:Q,nominatim:m,OpenLocationCode:M,openLocationCode:f,OpenCage:j,opencage:v,Pelias:N,pelias:_,GeocodeEarth:O,geocodeEarth:I,Mapzen:z,mapzen:G,Openrouteservice:A,openrouteservice:b,Photon:q,photon:y,What3Words:W,what3words:L}),K=e.Control.extend({options:{showUniqueResult:!0,showResultIcons:!1,collapsed:!0,expand:"touch",position:"topright",placeholder:"Search...",errorMessage:"Nothing found.",iconLabel:"Initiate a new search",queryMinLength:1,suggestMinLength:3,suggestTimeout:250,defaultMarkGeocode:!0},includes:e.Evented.prototype||e.Mixin.Events,initialize:function(t){e.Util.setOptions(this,t),this.options.geocoder||(this.options.geocoder=new Q),this._requestCount=0},addThrobberClass:function(){e.DomUtil.addClass(this._container,"leaflet-control-geocoder-throbber")},removeThrobberClass:function(){e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-throbber")},onAdd:function(t){var o,s="leaflet-control-geocoder",n=e.DomUtil.create("div",s+" leaflet-bar"),i=e.DomUtil.create("button",s+"-icon",n),r=this._form=e.DomUtil.create("div",s+"-form",n);return this._map=t,this._container=n,i.innerHTML="&nbsp;",i.type="button",i.setAttribute("aria-label",this.options.iconLabel),o=this._input=e.DomUtil.create("input","",r),o.type="text",o.value=this.options.query||"",o.placeholder=this.options.placeholder,e.DomEvent.disableClickPropagation(o),this._errorElement=e.DomUtil.create("div",s+"-form-no-error",n),this._errorElement.innerHTML=this.options.errorMessage,this._alts=e.DomUtil.create("ul",s+"-alternatives leaflet-control-geocoder-alternatives-minimized",n),e.DomEvent.disableClickPropagation(this._alts),e.DomEvent.addListener(o,"keydown",this._keydown,this),this.options.geocoder.suggest&&e.DomEvent.addListener(o,"input",this._change,this),e.DomEvent.addListener(o,"blur",function(){this.options.collapsed&&!this._preventBlurCollapse&&this._collapse(),this._preventBlurCollapse=!1},this),this.options.collapsed?"click"===this.options.expand?e.DomEvent.addListener(n,"click",function(e){0===e.button&&2!==e.detail&&this._toggle()},this):"touch"===this.options.expand?e.DomEvent.addListener(n,e.Browser.touch?"touchstart mousedown":"mousedown",function(e){this._toggle(),e.preventDefault(),e.stopPropagation()},this):(e.DomEvent.addListener(n,"mouseover",this._expand,this),e.DomEvent.addListener(n,"mouseout",this._collapse,this),this._map.on("movestart",this._collapse,this)):(this._expand(),e.Browser.touch?e.DomEvent.addListener(n,"touchstart",function(){this._geocode()},this):e.DomEvent.addListener(n,"click",function(){this._geocode()},this)),this.options.defaultMarkGeocode&&this.on("markgeocode",this.markGeocode,this),this.on("startgeocode",this.addThrobberClass,this),this.on("finishgeocode",this.removeThrobberClass,this),this.on("startsuggest",this.addThrobberClass,this),this.on("finishsuggest",this.removeThrobberClass,this),e.DomEvent.disableClickPropagation(n),n},setQuery:function(e){return this._input.value=e,this},_geocodeResult:function(t,o){if(!o&&this.options.showUniqueResult&&1===t.length)this._geocodeResultSelected(t[0]);else if(t.length>0){this._alts.innerHTML="",this._results=t,e.DomUtil.removeClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),e.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-open");for(var s=0;s<t.length;s++)this._alts.appendChild(this._createAlt(t[s],s))}else e.DomUtil.addClass(this._container,"leaflet-control-geocoder-options-error"),e.DomUtil.addClass(this._errorElement,"leaflet-control-geocoder-error")},markGeocode:function(t){return t=t.geocode||t,this._map.fitBounds(t.bbox),this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker),this._geocodeMarker=new e.Marker(t.center).bindPopup(t.html||t.name).addTo(this._map).openPopup(),this},_geocode:function(e){var t=this._input.value;if(e||!(t.length<this.options.queryMinLength)){var o=++this._requestCount,s=e?"suggest":"geocode",n={input:t};this._lastGeocode=t,e||this._clearResults(),this.fire("start"+s,n),this.options.geocoder[s](t,function(t){o===this._requestCount&&(n.results=t,this.fire("finish"+s,n),this._geocodeResult(t,e))},this)}},_geocodeResultSelected:function(e){this.fire("markgeocode",{geocode:e})},_toggle:function(){e.DomUtil.hasClass(this._container,"leaflet-control-geocoder-expanded")?this._collapse():this._expand()},_expand:function(){e.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded"),this._input.select(),this.fire("expand")},_collapse:function(){e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-expanded"),e.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),e.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error"),this._input.blur(),this.fire("collapse")},_clearResults:function(){e.DomUtil.addClass(this._alts,"leaflet-control-geocoder-alternatives-minimized"),this._selection=null,e.DomUtil.removeClass(this._errorElement,"leaflet-control-geocoder-error"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-open"),e.DomUtil.removeClass(this._container,"leaflet-control-geocoder-options-error")},_createAlt:function(t,o){var s=e.DomUtil.create("li",""),n=e.DomUtil.create("a","",s),i=this.options.showResultIcons&&t.icon?e.DomUtil.create("img","",n):null,r=t.html?void 0:document.createTextNode(t.name),a=function(o){this._preventBlurCollapse=!0,e.DomEvent.stop(o),this._geocodeResultSelected(t),e.DomEvent.on(s,"click touchend",function(){this.options.collapsed?this._collapse():this._clearResults()},this)};return i&&(i.src=t.icon),s.setAttribute("data-result-index",o),t.html?n.innerHTML=n.innerHTML+t.html:n.appendChild(r),e.DomEvent.addListener(s,"mousedown touchstart",a,this),s},_keydown:function(t){var o=this,s=function(t){o._selection&&(e.DomUtil.removeClass(o._selection,"leaflet-control-geocoder-selected"),o._selection=o._selection[t>0?"nextSibling":"previousSibling"]),o._selection||(o._selection=o._alts[t>0?"firstChild":"lastChild"]),o._selection&&e.DomUtil.addClass(o._selection,"leaflet-control-geocoder-selected")};switch(t.keyCode){case 27:this.options.collapsed?this._collapse():this._clearResults();break;case 38:s(-1);break;case 40:s(1);break;case 13:if(this._selection){var n=parseInt(this._selection.getAttribute("data-result-index"),10);this._geocodeResultSelected(this._results[n]),this._clearResults()}else this._geocode();break;default:return}e.DomEvent.preventDefault(t)},_change:function(){var t=this._input.value;t!==this._lastGeocode&&(clearTimeout(this._suggestTimeout),t.length>=this.options.suggestMinLength?this._suggestTimeout=setTimeout(e.bind(function(){this._geocode(!0)},this),this.options.suggestTimeout):this._clearResults())}});return e.Util.extend(K,H),e.Util.extend(e.Control,{Geocoder:K,geocoder:x}),K}(L);
!function(){function t(t,e){this.title=t.title,this.stateName=t.stateName?t.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,"")),this.icon.innerHTML=i(t.icon),this.onClick=L.Util.bind(t.onClick?t.onClick:function(){},e)}function i(t){var i;return t.match(/[&;=<>"']/)?i=t:(t=t.replace(/(^\s*|\s*$)/g,""),i=L.DomUtil.create("span",""),0===t.indexOf("fa-")?L.DomUtil.addClass(i,"fa "+t):0===t.indexOf("glyphicon-")?L.DomUtil.addClass(i,"glyphicon "+t):L.DomUtil.addClass(i,t),i=i.outerHTML),i}L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(t,i){i&&L.Util.setOptions(this,i),this._buildContainer(),this._buttons=[];for(var e=0;e<t.length;e++)t[e]._bar=this,t[e]._container=t[e].button,this._buttons.push(t[e]),this.container.appendChild(t[e].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div",""),this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control"),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(t){this._map=t;for(var i=0;i<this._buttons.length;i++)this._buttons[i]._map=t;var e=this._container=this.onAdd(t),s=this.getPosition(),n=t._controlCorners[s];return L.DomUtil.addClass(e,"leaflet-control"),s.indexOf("bottom")!==-1?n.insertBefore(e,n.firstChild):n.appendChild(e),this}}),L.easyBar=function(){for(var t=[L.Control.EasyBar],i=0;i<arguments.length;i++)t.push(arguments[i]);return new(Function.prototype.bind.apply(L.Control.EasyBar,t))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0,tagName:"button"},initialize:function(i,e,s,n){this.options.states=[],null!=n&&(this.options.id=n),this.storage={},"object"==typeof arguments[arguments.length-1]&&L.Util.setOptions(this,arguments[arguments.length-1]),0===this.options.states.length&&"string"==typeof i&&"function"==typeof e&&this.options.states.push({icon:i,onClick:e,title:"string"==typeof s?s:""}),this._states=[];for(var o=0;o<this.options.states.length;o++)this._states.push(new t(this.options.states[o],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create(this.options.tagName,""),"button"===this.options.tagName&&this.button.setAttribute("type","button"),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part leaflet-interactive"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mouseup",L.DomEvent.stop),L.DomEvent.addListener(this.button,"click",function(t){L.DomEvent.stop(t),this._currentState.onClick(this,this._map?this._map:null),this._map&&this._map.getContainer().focus()},this),"replace"==this.options.type)this.button.appendChild(this._currentState.icon);else for(var t=0;t<this._states.length;t++)this.button.appendChild(this._states[t].icon)},_currentState:{stateName:"unnamed",icon:function(){return document.createElement("span")}()},_states:null,state:function(t){return 0===arguments.length?this._currentState.stateName:("string"==typeof t?this._activateStateNamed(t):"number"==typeof t&&this._activateState(this._states[t]),this)},_activateStateNamed:function(t){for(var i=0;i<this._states.length;i++)this._states[i].stateName==t&&this._activateState(this._states[i])},_activateState:function(t){if(t!==this._currentState){"replace"==this.options.type&&(this.button.appendChild(t.icon),this.button.removeChild(this._currentState.icon)),t.title?this.button.title=t.title:this.button.removeAttribute("title");for(var i=0;i<this._states.length;i++)L.DomUtil.removeClass(this._states[i].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[i].icon,t.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,t.stateName+"-active"),this._currentState=t}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},onAdd:function(t){var i=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._anonymousBar=i,this._container=i.container,this._anonymousBar.container},removeFrom:function(t){return this._map===t&&this.remove(),this}}),L.easyButton=function(){var t=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,t))}}();
"use strict";!function(t,e){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&(module.exports=t(require("leaflet"))),"undefined"!=typeof e&&e.L&&t(e.L)}(function(t){t.Editable=t.Evented.extend({statics:{FORWARD:1,BACKWARD:-1},options:{zIndex:1e3,polygonClass:t.Polygon,polylineClass:t.Polyline,markerClass:t.Marker,rectangleClass:t.Rectangle,circleClass:t.Circle,drawingCSSClass:"leaflet-editable-drawing",drawingCursor:"crosshair",editLayer:void 0,featuresLayer:void 0,polylineEditorClass:void 0,polygonEditorClass:void 0,markerEditorClass:void 0,rectangleEditorClass:void 0,circleEditorClass:void 0,lineGuideOptions:{},skipMiddleMarkers:!1},initialize:function(e,i){t.setOptions(this,i),this._lastZIndex=this.options.zIndex,this.map=e,this.editLayer=this.createEditLayer(),this.featuresLayer=this.createFeaturesLayer(),this.forwardLineGuide=this.createLineGuide(),this.backwardLineGuide=this.createLineGuide()},fireAndForward:function(t,e){e=e||{},e.editTools=this,this.fire(t,e),this.map.fire(t,e)},createLineGuide:function(){var e=t.extend({dashArray:"5,10",weight:1,interactive:!1},this.options.lineGuideOptions);return t.polyline([],e)},createVertexIcon:function(e){return t.Browser.mobile&&t.Browser.touch?new t.Editable.TouchVertexIcon(e):new t.Editable.VertexIcon(e)},createEditLayer:function(){return this.options.editLayer||(new t.LayerGroup).addTo(this.map)},createFeaturesLayer:function(){return this.options.featuresLayer||(new t.LayerGroup).addTo(this.map)},moveForwardLineGuide:function(t){this.forwardLineGuide._latlngs.length&&(this.forwardLineGuide._latlngs[1]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw())},moveBackwardLineGuide:function(t){this.backwardLineGuide._latlngs.length&&(this.backwardLineGuide._latlngs[1]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw())},anchorForwardLineGuide:function(t){this.forwardLineGuide._latlngs[0]=t,this.forwardLineGuide._bounds.extend(t),this.forwardLineGuide.redraw()},anchorBackwardLineGuide:function(t){this.backwardLineGuide._latlngs[0]=t,this.backwardLineGuide._bounds.extend(t),this.backwardLineGuide.redraw()},attachForwardLineGuide:function(){this.editLayer.addLayer(this.forwardLineGuide)},attachBackwardLineGuide:function(){this.editLayer.addLayer(this.backwardLineGuide)},detachForwardLineGuide:function(){this.forwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.forwardLineGuide)},detachBackwardLineGuide:function(){this.backwardLineGuide.setLatLngs([]),this.editLayer.removeLayer(this.backwardLineGuide)},blockEvents:function(){this._oldTargets||(this._oldTargets=this.map._targets,this.map._targets={})},unblockEvents:function(){this._oldTargets&&(this.map._targets=t.extend(this.map._targets,this._oldTargets),delete this._oldTargets)},registerForDrawing:function(e){this._drawingEditor&&this.unregisterForDrawing(this._drawingEditor),this.blockEvents(),e.reset(),this._drawingEditor=e,this.map.on("mousemove touchmove",e.onDrawingMouseMove,e),this.map.on("mousedown",this.onMousedown,this),this.map.on("mouseup",this.onMouseup,this),t.DomUtil.addClass(this.map._container,this.options.drawingCSSClass),this.defaultMapCursor=this.map._container.style.cursor,this.map._container.style.cursor=this.options.drawingCursor},unregisterForDrawing:function(e){this.unblockEvents(),t.DomUtil.removeClass(this.map._container,this.options.drawingCSSClass),this.map._container.style.cursor=this.defaultMapCursor,e=e||this._drawingEditor,e&&(this.map.off("mousemove touchmove",e.onDrawingMouseMove,e),this.map.off("mousedown",this.onMousedown,this),this.map.off("mouseup",this.onMouseup,this),e===this._drawingEditor&&(delete this._drawingEditor,e._drawing&&e.cancelDrawing()))},onMousedown:function(t){1==t.originalEvent.which&&(this._mouseDown=t,this._drawingEditor.onDrawingMouseDown(t))},onMouseup:function(e){if(this._mouseDown){var i=this._drawingEditor,n=this._mouseDown;if(this._mouseDown=null,i.onDrawingMouseUp(e),this._drawingEditor!==i)return;var r=t.point(n.originalEvent.clientX,n.originalEvent.clientY),a=t.point(e.originalEvent.clientX,e.originalEvent.clientY).distanceTo(r);Math.abs(a)<9*(window.devicePixelRatio||1)&&this._drawingEditor.onDrawingClick(e)}},drawing:function(){return this._drawingEditor&&this._drawingEditor.drawing()},stopDrawing:function(){this.unregisterForDrawing()},commitDrawing:function(t){this._drawingEditor&&this._drawingEditor.commitDrawing(t)},connectCreatedToMap:function(t){return this.featuresLayer.addLayer(t)},startPolyline:function(t,e){var i=this.createPolyline([],e);return i.enableEdit(this.map).newShape(t),i},startPolygon:function(t,e){var i=this.createPolygon([],e);return i.enableEdit(this.map).newShape(t),i},startMarker:function(t,e){t=t||this.map.getCenter().clone();var i=this.createMarker(t,e);return i.enableEdit(this.map).startDrawing(),i},startRectangle:function(e,i){var n=e||t.latLng([0,0]),r=new t.LatLngBounds(n,n),a=this.createRectangle(r,i);return a.enableEdit(this.map).startDrawing(),a},startCircle:function(t,e){t=t||this.map.getCenter().clone();var i=this.createCircle(t,e);return i.enableEdit(this.map).startDrawing(),i},startHole:function(t,e){t.newHole(e)},createLayer:function(e,i,n){n=t.Util.extend({editOptions:{editTools:this}},n);var r=new e(i,n);return this.fireAndForward("editable:created",{layer:r}),r},createPolyline:function(t,e){return this.createLayer(e&&e.polylineClass||this.options.polylineClass,t,e)},createPolygon:function(t,e){return this.createLayer(e&&e.polygonClass||this.options.polygonClass,t,e)},createMarker:function(t,e){return this.createLayer(e&&e.markerClass||this.options.markerClass,t,e)},createRectangle:function(t,e){return this.createLayer(e&&e.rectangleClass||this.options.rectangleClass,t,e)},createCircle:function(t,e){return this.createLayer(e&&e.circleClass||this.options.circleClass,t,e)}}),t.extend(t.Editable,{makeCancellable:function(t){t.cancel=function(){t._cancelled=!0}}}),t.Map.mergeOptions({editToolsClass:t.Editable,editable:!1,editOptions:{}}),t.Map.addInitHook(function(){this.whenReady(function(){this.options.editable&&(this.editTools=new this.options.editToolsClass(this,this.options.editOptions))})}),t.Editable.VertexIcon=t.DivIcon.extend({options:{iconSize:new t.Point(8,8)}}),t.Editable.TouchVertexIcon=t.Editable.VertexIcon.extend({options:{iconSize:new t.Point(20,20)}}),t.Editable.VertexMarker=t.Marker.extend({options:{draggable:!0,className:"leaflet-div-icon leaflet-vertex-icon"},initialize:function(e,i,n,r){this.latlng=e,this.latlngs=i,this.editor=n,t.Marker.prototype.initialize.call(this,e,r),this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(n.tools._lastZIndex+1)},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),this.on("drag",this.onDrag),this.on("dragstart",this.onDragStart),this.on("dragend",this.onDragEnd),this.on("mouseup",this.onMouseup),this.on("click",this.onClick),this.on("contextmenu",this.onContextMenu),this.on("mousedown touchstart",this.onMouseDown),this.on("mouseover",this.onMouseOver),this.on("mouseout",this.onMouseOut),this.addMiddleMarkers()},onRemove:function(e){this.middleMarker&&this.middleMarker["delete"](),delete this.latlng.__vertex,this.off("drag",this.onDrag),this.off("dragstart",this.onDragStart),this.off("dragend",this.onDragEnd),this.off("mouseup",this.onMouseup),this.off("click",this.onClick),this.off("contextmenu",this.onContextMenu),this.off("mousedown touchstart",this.onMouseDown),this.off("mouseover",this.onMouseOver),this.off("mouseout",this.onMouseOut),t.Marker.prototype.onRemove.call(this,e)},onDrag:function(e){e.vertex=this,this.editor.onVertexMarkerDrag(e);var i=t.DomUtil.getPosition(this._icon),n=this._map.layerPointToLatLng(i);this.latlng.update(n),this._latlng=this.latlng,this.editor.refresh(),this.middleMarker&&this.middleMarker.updateLatLng();var r=this.getNext();r&&r.middleMarker&&r.middleMarker.updateLatLng()},onDragStart:function(t){t.vertex=this,this.editor.onVertexMarkerDragStart(t)},onDragEnd:function(t){t.vertex=this,this.editor.onVertexMarkerDragEnd(t)},onClick:function(t){t.vertex=this,this.editor.onVertexMarkerClick(t)},onMouseup:function(e){t.DomEvent.stop(e),e.vertex=this,this.editor.map.fire("mouseup",e)},onContextMenu:function(t){t.vertex=this,this.editor.onVertexMarkerContextMenu(t)},onMouseDown:function(t){t.vertex=this,this.editor.onVertexMarkerMouseDown(t)},onMouseOver:function(t){t.vertex=this,this.editor.onVertexMarkerMouseOver(t)},onMouseOut:function(t){t.vertex=this,this.editor.onVertexMarkerMouseOut(t)},"delete":function(){var t=this.getNext();this.latlngs.splice(this.getIndex(),1),this.editor.editLayer.removeLayer(this),this.editor.onVertexDeleted({latlng:this.latlng,vertex:this}),this.latlngs.length||this.editor.deleteShape(this.latlngs),t&&t.resetMiddleMarker(),this.editor.refresh()},getIndex:function(){return this.latlngs.indexOf(this.latlng)},getLastIndex:function(){return this.latlngs.length-1},getPrevious:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t-1;0===t&&this.editor.CLOSED&&(e=this.getLastIndex());var i=this.latlngs[e];return i?i.__vertex:void 0}},getNext:function(){if(!(this.latlngs.length<2)){var t=this.getIndex(),e=t+1;t===this.getLastIndex()&&this.editor.CLOSED&&(e=0);var i=this.latlngs[e];return i?i.__vertex:void 0}},addMiddleMarker:function(t){this.editor.hasMiddleMarkers()&&(t=t||this.getPrevious(),t&&!this.middleMarker&&(this.middleMarker=this.editor.addMiddleMarker(t,this,this.latlngs,this.editor)))},addMiddleMarkers:function(){if(this.editor.hasMiddleMarkers()){var t=this.getPrevious();t&&this.addMiddleMarker(t);var e=this.getNext();e&&e.resetMiddleMarker()}},resetMiddleMarker:function(){this.middleMarker&&this.middleMarker["delete"](),this.addMiddleMarker()},split:function(){this.editor.splitShape&&this.editor.splitShape(this.latlngs,this.getIndex())},"continue":function(){if(this.editor.continueBackward){var t=this.getIndex();0===t?this.editor.continueBackward(this.latlngs):t===this.getLastIndex()&&this.editor.continueForward(this.latlngs)}}}),t.Editable.mergeOptions({vertexMarkerClass:t.Editable.VertexMarker}),t.Editable.MiddleMarker=t.Marker.extend({options:{opacity:.5,className:"leaflet-div-icon leaflet-middle-icon",draggable:!0},initialize:function(e,i,n,r,a){this.left=e,this.right=i,this.editor=r,this.latlngs=n,t.Marker.prototype.initialize.call(this,this.computeLatLng(),a),this._opacity=this.options.opacity,this.options.icon=this.editor.tools.createVertexIcon({className:this.options.className}),this.editor.editLayer.addLayer(this),this.setVisibility()},setVisibility:function(){var e=this._map.latLngToContainerPoint(this.left.latlng),i=this._map.latLngToContainerPoint(this.right.latlng),n=t.point(this.options.icon.options.iconSize);e.distanceTo(i)<3*n.x?this.hide():this.show()},show:function(){this.setOpacity(this._opacity)},hide:function(){this.setOpacity(0)},updateLatLng:function(){this.setLatLng(this.computeLatLng()),this.setVisibility()},computeLatLng:function(){var t=this.editor.map.latLngToContainerPoint(this.left.latlng),e=this.editor.map.latLngToContainerPoint(this.right.latlng),i=(t.y+e.y)/2,n=(t.x+e.x)/2;return this.editor.map.containerPointToLatLng([n,i])},onAdd:function(e){t.Marker.prototype.onAdd.call(this,e),t.DomEvent.on(this._icon,"mousedown touchstart",this.onMouseDown,this),e.on("zoomend",this.setVisibility,this)},onRemove:function(e){delete this.right.middleMarker,t.DomEvent.off(this._icon,"mousedown touchstart",this.onMouseDown,this),e.off("zoomend",this.setVisibility,this),t.Marker.prototype.onRemove.call(this,e)},onMouseDown:function(e){var i=t.DomUtil.getPosition(this._icon),n=this.editor.map.layerPointToLatLng(i);if(e={originalEvent:e,latlng:n},0!==this.options.opacity&&(t.Editable.makeCancellable(e),this.editor.onMiddleMarkerMouseDown(e),!e._cancelled)){this.latlngs.splice(this.index(),0,e.latlng),this.editor.refresh();var r=this._icon,a=this.editor.addVertexMarker(e.latlng,this.latlngs);this.editor.onNewVertex(a);var s=a._icon.parentNode;s.removeChild(a._icon),a._icon=r,s.appendChild(a._icon),a._initIcon(),a._initInteraction(),a.setOpacity(1),t.Draggable._dragging=!1,a.dragging._draggable._onDown(e.originalEvent),this["delete"]()}},"delete":function(){this.editor.editLayer.removeLayer(this)},index:function(){return this.latlngs.indexOf(this.right.latlng)}}),t.Editable.mergeOptions({middleMarkerClass:t.Editable.MiddleMarker}),t.Editable.BaseEditor=t.Handler.extend({initialize:function(e,i,n){t.setOptions(this,n),this.map=e,this.feature=i,this.feature.editor=this,this.editLayer=new t.LayerGroup,this.tools=this.options.editTools||e.editTools},addHooks:function(){this.isConnected()?this.onFeatureAdd():this.feature.once("add",this.onFeatureAdd,this),this.onEnable(),this.feature.on(this._getEvents(),this)},removeHooks:function(){this.feature.off(this._getEvents(),this),this.feature.dragging&&this.feature.dragging.disable(),this.editLayer.clearLayers(),this.tools.editLayer.removeLayer(this.editLayer),this.onDisable(),this._drawing&&this.cancelDrawing()},drawing:function(){return!!this._drawing},reset:function(){},onFeatureAdd:function(){this.tools.editLayer.addLayer(this.editLayer),this.feature.dragging&&this.feature.dragging.enable()},hasMiddleMarkers:function(){return!this.options.skipMiddleMarkers&&!this.tools.options.skipMiddleMarkers},fireAndForward:function(t,e){e=e||{},e.layer=this.feature,this.feature.fire(t,e),this.tools.fireAndForward(t,e)},onEnable:function(){this.fireAndForward("editable:enable")},onDisable:function(){this.fireAndForward("editable:disable")},onEditing:function(){this.fireAndForward("editable:editing")},onStartDrawing:function(){this.fireAndForward("editable:drawing:start")},onEndDrawing:function(){this.fireAndForward("editable:drawing:end")},onCancelDrawing:function(){this.fireAndForward("editable:drawing:cancel")},onCommitDrawing:function(t){this.fireAndForward("editable:drawing:commit",t)},onDrawingMouseDown:function(t){this.fireAndForward("editable:drawing:mousedown",t)},onDrawingMouseUp:function(t){this.fireAndForward("editable:drawing:mouseup",t)},startDrawing:function(){this._drawing||(this._drawing=t.Editable.FORWARD),this.tools.registerForDrawing(this),this.onStartDrawing()},commitDrawing:function(t){this.onCommitDrawing(t),this.endDrawing()},cancelDrawing:function(){t.Draggable._dragging=!1,this.onCancelDrawing(),this.endDrawing()},endDrawing:function(){this._drawing=!1,this.tools.unregisterForDrawing(this),this.onEndDrawing()},onDrawingClick:function(e){this.drawing()&&(t.Editable.makeCancellable(e),this.fireAndForward("editable:drawing:click",e),e._cancelled||(this.isConnected()||this.connect(e),this.processDrawingClick(e)))},isConnected:function(){return this.map.hasLayer(this.feature)},connect:function(){this.tools.connectCreatedToMap(this.feature),this.tools.editLayer.addLayer(this.editLayer)},onMove:function(t){this.fireAndForward("editable:drawing:move",t)},onDrawingMouseMove:function(t){this.onMove(t)},_getEvents:function(){return{dragstart:this.onDragStart,drag:this.onDrag,dragend:this.onDragEnd,remove:this.disable}},onDragStart:function(t){this.onEditing(),this.fireAndForward("editable:dragstart",t)},onDrag:function(t){this.onMove(t),this.fireAndForward("editable:drag",t)},onDragEnd:function(t){this.fireAndForward("editable:dragend",t)}}),t.Editable.MarkerEditor=t.Editable.BaseEditor.extend({onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&this.feature.setLatLng(e.latlng)},processDrawingClick:function(t){this.fireAndForward("editable:drawing:clicked",t),this.commitDrawing(t)},connect:function(e){e&&(this.feature._latlng=e.latlng),t.Editable.BaseEditor.prototype.connect.call(this,e)}}),t.Editable.PathEditor=t.Editable.BaseEditor.extend({CLOSED:!1,MIN_VERTEX:2,addHooks:function(){return t.Editable.BaseEditor.prototype.addHooks.call(this),this.feature&&this.initVertexMarkers(),this},initVertexMarkers:function(t){if(this.enabled())if(t=t||this.getLatLngs(),d(t))this.addVertexMarkers(t);else for(var e=0;e<t.length;e++)this.initVertexMarkers(t[e])},getLatLngs:function(){return this.feature.getLatLngs()},reset:function(){this.editLayer.clearLayers(),this.initVertexMarkers()},addVertexMarker:function(t,e){return new this.tools.options.vertexMarkerClass(t,e,this)},onNewVertex:function(t){this.fireAndForward("editable:vertex:new",{latlng:t.latlng,vertex:t})},addVertexMarkers:function(t){for(var e=0;e<t.length;e++)this.addVertexMarker(t[e],t)},refreshVertexMarkers:function(t){t=t||this.getDefaultLatLngs();for(var e=0;e<t.length;e++)t[e].__vertex.update()},addMiddleMarker:function(t,e,i){return new this.tools.options.middleMarkerClass(t,e,i,this)},onVertexMarkerClick:function(e){if(t.Editable.makeCancellable(e),this.fireAndForward("editable:vertex:click",e),!(e._cancelled||this.tools.drawing()&&this.tools._drawingEditor!==this)){var i,n=e.vertex.getIndex();e.originalEvent.ctrlKey?this.onVertexMarkerCtrlClick(e):e.originalEvent.altKey?this.onVertexMarkerAltClick(e):e.originalEvent.shiftKey?this.onVertexMarkerShiftClick(e):e.originalEvent.metaKey?this.onVertexMarkerMetaKeyClick(e):n===e.vertex.getLastIndex()&&this._drawing===t.Editable.FORWARD?n>=this.MIN_VERTEX-1&&(i=!0):0===n&&this._drawing===t.Editable.BACKWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX?i=!0:0===n&&this._drawing===t.Editable.FORWARD&&this._drawnLatLngs.length>=this.MIN_VERTEX&&this.CLOSED?i=!0:this.onVertexRawMarkerClick(e),this.fireAndForward("editable:vertex:clicked",e),i&&this.commitDrawing(e)}},onVertexRawMarkerClick:function(t){this.fireAndForward("editable:vertex:rawclick",t),t._cancelled||this.vertexCanBeDeleted(t.vertex)&&t.vertex["delete"]()},vertexCanBeDeleted:function(t){return t.latlngs.length>this.MIN_VERTEX},onVertexDeleted:function(t){this.fireAndForward("editable:vertex:deleted",t)},onVertexMarkerCtrlClick:function(t){this.fireAndForward("editable:vertex:ctrlclick",t)},onVertexMarkerShiftClick:function(t){this.fireAndForward("editable:vertex:shiftclick",t)},onVertexMarkerMetaKeyClick:function(t){this.fireAndForward("editable:vertex:metakeyclick",t)},onVertexMarkerAltClick:function(t){this.fireAndForward("editable:vertex:altclick",t)},onVertexMarkerContextMenu:function(t){this.fireAndForward("editable:vertex:contextmenu",t)},onVertexMarkerMouseDown:function(t){this.fireAndForward("editable:vertex:mousedown",t)},onVertexMarkerMouseOver:function(t){this.fireAndForward("editable:vertex:mouseover",t)},onVertexMarkerMouseOut:function(t){this.fireAndForward("editable:vertex:mouseout",t)},onMiddleMarkerMouseDown:function(t){this.fireAndForward("editable:middlemarker:mousedown",t)},onVertexMarkerDrag:function(t){this.onMove(t),this.feature._bounds&&this.extendBounds(t),this.fireAndForward("editable:vertex:drag",t)},onVertexMarkerDragStart:function(t){this.fireAndForward("editable:vertex:dragstart",t)},onVertexMarkerDragEnd:function(t){this.fireAndForward("editable:vertex:dragend",t)},setDrawnLatLngs:function(t){this._drawnLatLngs=t||this.getDefaultLatLngs()},startDrawing:function(){this._drawnLatLngs||this.setDrawnLatLngs(),t.Editable.BaseEditor.prototype.startDrawing.call(this)},startDrawingForward:function(){this.startDrawing()},endDrawing:function(){this.tools.detachForwardLineGuide(),this.tools.detachBackwardLineGuide(),this._drawnLatLngs&&this._drawnLatLngs.length<this.MIN_VERTEX&&this.deleteShape(this._drawnLatLngs),t.Editable.BaseEditor.prototype.endDrawing.call(this),delete this._drawnLatLngs},addLatLng:function(e){this._drawing===t.Editable.FORWARD?this._drawnLatLngs.push(e):this._drawnLatLngs.unshift(e),this.feature._bounds.extend(e);var i=this.addVertexMarker(e,this._drawnLatLngs);this.onNewVertex(i),this.refresh()},newPointForward:function(t){this.addLatLng(t),this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t)},newPointBackward:function(t){this.addLatLng(t),this.tools.anchorBackwardLineGuide(t)},push:function(e){return e?void(this._drawing===t.Editable.FORWARD?this.newPointForward(e):this.newPointBackward(e)):console.error("L.Editable.PathEditor.push expect a valid latlng as parameter")},removeLatLng:function(t){t.__vertex["delete"](),this.refresh()},pop:function(){if(!(this._drawnLatLngs.length<=1)){var e;return e=this._drawing===t.Editable.FORWARD?this._drawnLatLngs[this._drawnLatLngs.length-1]:this._drawnLatLngs[0],this.removeLatLng(e),this._drawing===t.Editable.FORWARD?this.tools.anchorForwardLineGuide(this._drawnLatLngs[this._drawnLatLngs.length-1]):this.tools.anchorForwardLineGuide(this._drawnLatLngs[0]),e}},processDrawingClick:function(e){e.vertex&&e.vertex.editor===this||(this._drawing===t.Editable.FORWARD?this.newPointForward(e.latlng):this.newPointBackward(e.latlng),this.fireAndForward("editable:drawing:clicked",e))},onDrawingMouseMove:function(e){t.Editable.BaseEditor.prototype.onDrawingMouseMove.call(this,e),this._drawing&&(this.tools.moveForwardLineGuide(e.latlng),this.tools.moveBackwardLineGuide(e.latlng))},refresh:function(){this.feature.redraw(),this.onEditing()},newShape:function(t){var e=this.addNewEmptyShape();e&&(this.setDrawnLatLngs(e[0]||e),this.startDrawingForward(),this.fireAndForward("editable:shape:new",{shape:e}),t&&this.newPointForward(t))},deleteShape:function(e,i){var n={shape:e};if(t.Editable.makeCancellable(n),this.fireAndForward("editable:shape:delete",n),!n._cancelled)return e=this._deleteShape(e,i),this.ensureNotFlat&&this.ensureNotFlat(),this.feature.setLatLngs(this.getLatLngs()),this.refresh(),this.reset(),this.fireAndForward("editable:shape:deleted",{shape:e}),e},_deleteShape:function(t,e){if(e=e||this.getLatLngs(),e.length){var i=this,n=function(t,e){return e=t.splice(0,Number.MAX_VALUE)},r=function(t,e){return t.splice(t.indexOf(e),1),t.length||i._deleteShape(t),e};if(e===t)return n(e,t);for(var a=0;a<e.length;a++){if(e[a]===t)return r(e,t);if(e[a].indexOf(t)!==-1)return r(e[a],t)}}},deleteShapeAt:function(t){var e=this.feature.shapeAt(t);if(e)return this.deleteShape(e)},appendShape:function(t){this.insertShape(t)},prependShape:function(t){this.insertShape(t,0)},insertShape:function(t,e){this.ensureMulti(),t=this.formatShape(t),"undefined"==typeof e&&(e=this.feature._latlngs.length),this.feature._latlngs.splice(e,0,t),this.feature.redraw(),this._enabled&&this.reset()},extendBounds:function(t){this.feature._bounds.extend(t.vertex.latlng)},onDragStart:function(e){this.editLayer.clearLayers(),t.Editable.BaseEditor.prototype.onDragStart.call(this,e)},onDragEnd:function(e){this.initVertexMarkers(),t.Editable.BaseEditor.prototype.onDragEnd.call(this,e)}}),t.Editable.PolylineEditor=t.Editable.PathEditor.extend({startDrawingBackward:function(){this._drawing=t.Editable.BACKWARD,this.startDrawing()},continueBackward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachBackwardLineGuide(),this.tools.anchorBackwardLineGuide(t[0])),this.startDrawingBackward())},continueForward:function(t){this.drawing()||(t=t||this.getDefaultLatLngs(),this.setDrawnLatLngs(t),t.length>0&&(this.tools.attachForwardLineGuide(),this.tools.anchorForwardLineGuide(t[t.length-1])),this.startDrawingForward())},getDefaultLatLngs:function(e){return e=e||this.feature._latlngs,!e.length||e[0]instanceof t.LatLng?e:this.getDefaultLatLngs(e[0])},ensureMulti:function(){this.feature._latlngs.length&&d(this.feature._latlngs)&&(this.feature._latlngs=[this.feature._latlngs])},addNewEmptyShape:function(){if(this.feature._latlngs.length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},formatShape:function(t){return d(t)?t:t[0]?this.formatShape(t[0]):void 0},splitShape:function(e,i){if(i&&!(i>=e.length-1)){this.ensureMulti();var n=this.feature._latlngs.indexOf(e);if(n!==-1){var r=e.slice(0,i+1),a=e.slice(i);a[0]=t.latLng(a[0].lat,a[0].lng,a[0].alt),this.feature._latlngs.splice(n,1,r,a),this.refresh(),this.reset()}}}}),t.Editable.PolygonEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:3,newPointForward:function(e){t.Editable.PathEditor.prototype.newPointForward.call(this,e),this.tools.backwardLineGuide._latlngs.length||this.tools.anchorBackwardLineGuide(e),2===this._drawnLatLngs.length&&this.tools.attachBackwardLineGuide()},addNewEmptyHole:function(t){this.ensureNotFlat();var e=this.feature.shapeAt(t);if(e){var i=[];return e.push(i),i}},newHole:function(t){var e=this.addNewEmptyHole(t);e&&(this.setDrawnLatLngs(e),this.startDrawingForward(),t&&this.newPointForward(t))},addNewEmptyShape:function(){if(this.feature._latlngs.length&&this.feature._latlngs[0].length){var t=[];return this.appendShape(t),t}return this.feature._latlngs},ensureMulti:function(){this.feature._latlngs.length&&d(this.feature._latlngs[0])&&(this.feature._latlngs=[this.feature._latlngs])},ensureNotFlat:function(){this.feature._latlngs.length&&!d(this.feature._latlngs)||(this.feature._latlngs=[this.feature._latlngs])},vertexCanBeDeleted:function(e){var i=this.feature.parentShape(e.latlngs),n=t.Util.indexOf(i,e.latlngs);return n>0||t.Editable.PathEditor.prototype.vertexCanBeDeleted.call(this,e)},getDefaultLatLngs:function(){return this.feature._latlngs.length||this.feature._latlngs.push([]),this.feature._latlngs[0]},formatShape:function(t){return!d(t)||t[0]&&0===t[0].length?t:[t]}}),t.Editable.RectangleEditor=t.Editable.PathEditor.extend({CLOSED:!0,MIN_VERTEX:4,options:{skipMiddleMarkers:!0},extendBounds:function(e){var i=e.vertex.getIndex(),n=e.vertex.getNext(),r=e.vertex.getPrevious(),a=(i+2)%4,s=e.vertex.latlngs[a],o=new t.LatLngBounds(e.latlng,s);r.latlng.update([e.latlng.lat,s.lng]),n.latlng.update([s.lat,e.latlng.lng]),this.updateBounds(o),this.refreshVertexMarkers()},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this.connect();var i=this.getDefaultLatLngs();3===i.length&&i.push(e.latlng);var n=new t.LatLngBounds(e.latlng,e.latlng);this.updateBounds(n),this.updateLatLngs(n),this.refresh(),this.reset(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),i[3].__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},getDefaultLatLngs:function(t){return t||this.feature._latlngs[0]},updateBounds:function(t){this.feature._bounds=t},updateLatLngs:function(t){for(var e=this.getDefaultLatLngs(),i=this.feature._boundsToLatLngs(t),n=0;n<e.length;n++)e[n].update(i[n])}}),t.Editable.CircleEditor=t.Editable.PathEditor.extend({MIN_VERTEX:2,options:{skipMiddleMarkers:!0},initialize:function(e,i,n){t.Editable.PathEditor.prototype.initialize.call(this,e,i,n),this._resizeLatLng=this.computeResizeLatLng()},computeResizeLatLng:function(){var t=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),e=this.map.project(this.feature._latlng);return this.map.unproject([e.x+t,e.y-t])},updateResizeLatLng:function(){this._resizeLatLng.update(this.computeResizeLatLng()),this._resizeLatLng.__vertex.update()},getLatLngs:function(){return[this.feature._latlng,this._resizeLatLng]},getDefaultLatLngs:function(){return this.getLatLngs()},onVertexMarkerDrag:function(e){1===e.vertex.getIndex()?this.resize(e):this.updateResizeLatLng(e),t.Editable.PathEditor.prototype.onVertexMarkerDrag.call(this,e)},resize:function(t){var e=this.feature._latlng.distanceTo(t.latlng);this.feature.setRadius(e)},onDrawingMouseDown:function(e){t.Editable.PathEditor.prototype.onDrawingMouseDown.call(this,e),this._resizeLatLng.update(e.latlng),this.feature._latlng.update(e.latlng),this.connect(),e.originalEvent._simulated=!1,this.map.dragging._draggable._onUp(e.originalEvent),this._resizeLatLng.__vertex.dragging._draggable._onDown(e.originalEvent)},onDrawingMouseUp:function(e){this.commitDrawing(e),e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,e)},onDrawingMouseMove:function(e){e.originalEvent._simulated=!1,t.Editable.PathEditor.prototype.onDrawingMouseMove.call(this,e)},onDrag:function(e){t.Editable.PathEditor.prototype.onDrag.call(this,e),this.feature.dragging.updateLatLng(this._resizeLatLng)}});var e={createEditor:function(t){t=t||this._map;var e=(this.options.editOptions||{}).editTools||t.editTools;if(!e)throw Error("Unable to detect Editable instance.");var i=this.options.editorClass||this.getEditorClass(e);return new i(t,this,this.options.editOptions)},enableEdit:function(t){return this.editor||this.createEditor(t),this.editor.enable(),this.editor},editEnabled:function(){return this.editor&&this.editor.enabled()},disableEdit:function(){this.editor&&(this.editor.disable(),delete this.editor)},toggleEdit:function(){this.editEnabled()?this.disableEdit():this.enableEdit()},_onEditableAdd:function(){this.editor&&this.enableEdit()}},i={getEditorClass:function(e){return e&&e.options.polylineEditorClass?e.options.polylineEditorClass:t.Editable.PolylineEditor},shapeAt:function(t,e){var i=null;if(e=e||this._latlngs,!e.length)return i;if(d(e)&&this.isInLatLngs(t,e))i=e;else for(var n=0;n<e.length;n++)if(this.isInLatLngs(t,e[n]))return e[n];return i},isInLatLngs:function(e,i){if(!i)return!1;var n,r,a,s,o=[],d=this._clickTolerance();if(this._projectLatlngs(i,o,this._pxBounds),o=o[0],s=this._map.latLngToLayerPoint(e),!this._pxBounds.contains(s))return!1;for(n=1,a=o.length,r=0;n<a;r=n++)if(t.LineUtil.pointToSegmentDistance(s,o[r],o[n])<=d)return!0;return!1}},n={getEditorClass:function(e){return e&&e.options.polygonEditorClass?e.options.polygonEditorClass:t.Editable.PolygonEditor},shapeAt:function(t,e){var i=null;if(e=e||this._latlngs,!e.length)return i;if(d(e)&&this.isInLatLngs(t,e))i=e;else if(d(e[0])&&this.isInLatLngs(t,e[0]))i=e;else for(var n=0;n<e.length;n++)if(this.isInLatLngs(t,e[n][0]))return e[n];return i},isInLatLngs:function(t,e){var i,n,r,a,s,o=!1;for(r=0,s=e.length,a=s-1;r<s;a=r++)i=e[r],n=e[a],i.lat>t.lat!=n.lat>t.lat&&t.lng<(n.lng-i.lng)*(t.lat-i.lat)/(n.lat-i.lat)+i.lng&&(o=!o);return o},parentShape:function(e,i){if(i=i||this._latlngs){var n=t.Util.indexOf(i,e);if(n!==-1)return i;for(var r=0;r<i.length;r++)if(n=t.Util.indexOf(i[r],e),n!==-1)return i[r]}}},r={getEditorClass:function(e){return e&&e.options.markerEditorClass?e.options.markerEditorClass:t.Editable.MarkerEditor}},a={getEditorClass:function(e){return e&&e.options.rectangleEditorClass?e.options.rectangleEditorClass:t.Editable.RectangleEditor}},s={getEditorClass:function(e){return e&&e.options.circleEditorClass?e.options.circleEditorClass:t.Editable.CircleEditor}},o=function(){this.on("add",this._onEditableAdd)},d=t.LineUtil.isFlat||t.LineUtil._flat||t.Polyline._flat;t.Polyline&&(t.Polyline.include(e),t.Polyline.include(i),t.Polyline.addInitHook(o)),t.Polygon&&(t.Polygon.include(e),t.Polygon.include(n)),t.Marker&&(t.Marker.include(e),t.Marker.include(r),t.Marker.addInitHook(o)),t.Rectangle&&(t.Rectangle.include(e),t.Rectangle.include(a)),t.Circle&&(t.Circle.include(e),t.Circle.include(s)),t.LatLng.prototype.update=function(e){e=t.latLng(e),this.lat=e.lat,this.lng=e.lng}},window);
L.Control.Elevation=L.Control.extend({options:{position:"topright",theme:"lime-theme",width:600,height:175,margins:{top:10,right:20,bottom:30,left:60},useHeightIndicator:!0,interpolation:"linear",defined:void 0,notDefinedLabel:"â",hoverNumber:{decimalsX:3,decimalsY:0,formatter:void 0},xTicks:void 0,yTicks:void 0,collapsed:!1,yAxisMin:void 0,yAxisMax:void 0,forceAxisBounds:!1,controlButton:{iconCssClass:"elevation-toggle-icon",title:"Elevation"},imperial:!1},__mileFactor:.621371,__footFactor:3.28084,onRemove:function(t){this._container=null},onAdd:function(t){this._map=t;var i=this.options,e=i.margins;i.xTicks=i.xTicks||Math.round(this._width()/75),i.yTicks=i.yTicks||Math.round(this._height()/30),i.hoverNumber.formatter=i.hoverNumber.formatter||this._formatter,i.defined=i.defined||this._defined;var a=this._x=d3.scale.linear().range([0,this._width()]),s=this._y=d3.scale.linear().range([this._height(),0]),o=(this._area=d3.svg.area().interpolate(i.interpolation).defined(i.defined).x(function(t){return a(t.dist)}).y0(this._height()).y1(function(t){return s(t.altitude)}),this._container=L.DomUtil.create("div","elevation"));L.DomUtil.addClass(o,i.theme),this._initToggle();var n=d3.select(o);n.attr("width",i.width);var r=n.append("svg");r.attr("width",i.width).attr("class","background").attr("height",i.height).append("g").attr("transform","translate("+e.left+","+e.top+")");var h=d3.svg.line();h=h.x(function(t){return d3.mouse(r.select("g"))[0]}).y(function(t){return this._height()});var l=d3.select(this._container).select("svg").select("g");this._areapath=l.append("path").attr("class","area");var d=this._background=l.append("rect").attr("width",this._width()).attr("height",this._height()).style("fill","none").style("stroke","none").style("pointer-events","all");L.Browser.touch?(d.on("touchmove.drag",this._dragHandler.bind(this)).on("touchstart.drag",this._dragStartHandler.bind(this)).on("touchstart.focus",this._mousemoveHandler.bind(this)),L.DomEvent.on(this._container,"touchend",this._dragEndHandler,this)):(d.on("mousemove.focus",this._mousemoveHandler.bind(this)).on("mouseout.focus",this._mouseoutHandler.bind(this)).on("mousedown.drag",this._dragStartHandler.bind(this)).on("mousemove.drag",this._dragHandler.bind(this)),L.DomEvent.on(this._container,"mouseup",this._dragEndHandler,this)),this._xaxisgraphicnode=l.append("g"),this._yaxisgraphicnode=l.append("g"),this._appendXaxis(this._xaxisgraphicnode),this._appendYaxis(this._yaxisgraphicnode);var c=this._focusG=l.append("g");return this._mousefocus=c.append("svg:line").attr("class","mouse-focus-line").attr("x2","0").attr("y2","0").attr("x1","0").attr("y1","0"),this._focuslabelX=c.append("svg:text").style("pointer-events","none").attr("class","mouse-focus-label-x"),this._focuslabelY=c.append("svg:text").style("pointer-events","none").attr("class","mouse-focus-label-y"),this._data&&this._applyData(),o},_dragHandler:function(){d3.event.preventDefault(),d3.event.stopPropagation(),this._gotDragged=!0,this._drawDragRectangle()},_drawDragRectangle:function(){if(this._dragStartCoords){var t=this._dragCurrentCoords=d3.mouse(this._background.node()),i=Math.min(this._dragStartCoords[0],t[0]),e=Math.max(this._dragStartCoords[0],t[0]);if(this._dragRectangle||this._dragRectangleG)this._dragRectangle.attr("width",e-i).attr("x",i);else{var a=d3.select(this._container).select("svg").select("g");this._dragRectangleG=a.append("g"),this._dragRectangle=this._dragRectangleG.append("rect").attr("width",e-i).attr("height",this._height()).attr("x",i).attr("class","mouse-drag").style("pointer-events","none")}}},_resetDrag:function(){this._dragRectangleG&&(this._dragRectangleG.remove(),this._dragRectangleG=null,this._dragRectangle=null,this._hidePositionMarker(),this._map.fitBounds(this._fullExtent))},_dragEndHandler:function(){if(!this._dragStartCoords||!this._gotDragged)return this._dragStartCoords=null,this._gotDragged=!1,void this._resetDrag();this._hidePositionMarker();var t=this._findItemForX(this._dragStartCoords[0]),i=this._findItemForX(this._dragCurrentCoords[0]);this._fitSection(t,i),this._dragStartCoords=null,this._gotDragged=!1},_dragStartHandler:function(){d3.event.preventDefault(),d3.event.stopPropagation(),this._gotDragged=!1,this._dragStartCoords=d3.mouse(this._background.node())},_findItemForX:function(t){var i=d3.bisector(function(t){return t.dist}).left,e=this._x.invert(t);return i(this._data,e)},_findItemForLatLng:function(t){var i=null,e=1/0;return this._data.forEach(function(a){var s=t.distanceTo(a.latlng);s<e&&(e=s,i=a)}),i},_fitSection:function(t,i){var e=Math.min(t,i),a=Math.max(t,i),s=this._calculateFullExtent(this._data.slice(e,a));this._map.fitBounds(s)},_initToggle:function(){var t=this._container;if(t.setAttribute("aria-haspopup",!0),L.Browser.touch?L.DomEvent.on(t,"click",L.DomEvent.stopPropagation):L.DomEvent.disableClickPropagation(t),this.options.collapsed){this._collapse(),L.Browser.android||L.DomEvent.on(t,"mouseover",this._expand,this).on(t,"mouseout",this._collapse,this);var i=this._button=L.DomUtil.create("a","elevation-toggle "+this.options.controlButton.iconCssClass,t);i.href="#",i.title=this.options.controlButton.title,L.Browser.touch?L.DomEvent.on(i,"click",L.DomEvent.stop).on(i,"click",this._expand,this):L.DomEvent.on(i,"focus",this._expand,this),this._map.on("click",this._collapse,this)}},_expand:function(){this._container.className=this._container.className.replace(" elevation-collapsed","")},_collapse:function(){L.DomUtil.addClass(this._container,"elevation-collapsed")},_width:function(){var t=this.options;return t.width-t.margins.left-t.margins.right},_height:function(){var t=this.options;return t.height-t.margins.top-t.margins.bottom},_formatter:function(t,i,e){var a;a=0===i?Math.round(t)+"":L.Util.formatNum(t,i)+"";var s=a.split(".");if(s[1]){for(var o=i-s[1].length;o>0;o--)s[1]+="0";a=s.join(e||".")}return a},_defined:function(t){return void 0!==t.altitude&&null!==t.altitude},_appendYaxis:function(t){var i=this.options;i.imperial?t.attr("class","y axis").call(d3.svg.axis().scale(this._y).ticks(this.options.yTicks).orient("left")).append("text").attr("x",-37).attr("y",3).style("text-anchor","end").text("ft"):t.attr("class","y axis").call(d3.svg.axis().scale(this._y).ticks(this.options.yTicks).orient("left")).append("text").attr("x",-45).attr("y",3).style("text-anchor","end").text("m")},_appendXaxis:function(t){var i=this.options;i.imperial?t.attr("class","x axis").attr("transform","translate(0,"+this._height()+")").call(d3.svg.axis().scale(this._x).ticks(this.options.xTicks).orient("bottom")).append("text").attr("x",this._width()+10).attr("y",15).style("text-anchor","end").text("mi"):t.attr("class","x axis").attr("transform","translate(0,"+this._height()+")").call(d3.svg.axis().scale(this._x).ticks(this.options.xTicks).orient("bottom")).append("text").attr("x",this._width()+20).attr("y",15).style("text-anchor","end").text("km")},_updateAxis:function(){this._xaxisgraphicnode.selectAll("g").remove(),this._xaxisgraphicnode.selectAll("path").remove(),this._xaxisgraphicnode.selectAll("text").remove(),this._yaxisgraphicnode.selectAll("g").remove(),this._yaxisgraphicnode.selectAll("path").remove(),this._yaxisgraphicnode.selectAll("text").remove(),this._appendXaxis(this._xaxisgraphicnode),this._appendYaxis(this._yaxisgraphicnode)},_mouseoutHandler:function(){this._hidePositionMarker()},_hidePositionMarker:function(){this._marker&&(this._map.removeLayer(this._marker),this._marker=null),this._mouseHeightFocus&&(this._mouseHeightFocus.style("visibility","hidden"),this._mouseHeightFocusLabel.style("visibility","hidden")),this._pointG&&this._pointG.style("visibility","hidden"),this._focusG.style("visibility","hidden")},_mousemoveHandler:function(t,i,e){if(this._data&&0!==this._data.length){var a=d3.mouse(this._background.node()),s=this.options,o=this._data[this._findItemForX(a[0])],n=o.altitude,r=o.dist,h=o.latlng,l=s.defined(o),d=l?s.hoverNumber.formatter(n,s.hoverNumber.decimalsY):s.notDefinedLabel;s.hoverNumber.formatter(r,s.hoverNumber.decimalsX);this._showDiagramIndicator(o,a[0]);var c=this._map.latLngToLayerPoint(h);if(s.useHeightIndicator){if(!this._mouseHeightFocus){var _=d3.select(".leaflet-overlay-pane svg").append("g");this._mouseHeightFocus=_.append("svg:line").attr("class",s.theme+" height-focus line").attr("x2",0).attr("y2",0).attr("x1",0).attr("y1",0);var u=this._pointG=_.append("g");u.append("svg:circle").attr("r",6).attr("cx",0).attr("cy",0).attr("class",s.theme+" height-focus circle-lower"),this._mouseHeightFocusLabel=_.append("svg:text").attr("class",s.theme+" height-focus-label").style("pointer-events","none")}var g=l?this._height()/this._maxElevation*n:0,m=c.y-g;this._mouseHeightFocus.attr("x1",c.x).attr("x2",c.x).attr("y1",c.y).attr("y2",m).style("visibility","visible"),this._pointG.attr("transform","translate("+c.x+","+c.y+")").style("visibility","visible"),s.imperial?this._mouseHeightFocusLabel.attr("x",c.x).attr("y",m).text(d+" ft").style("visibility","visible"):this._mouseHeightFocusLabel.attr("x",c.x).attr("y",m).text(d+" m").style("visibility","visible")}else this._marker?this._marker.setLatLng(h):this._marker=new L.Marker(h).addTo(this._map)}},_addGeoJSONData:function(t){var i=this.options;if(t){for(var e=this._data||[],a=this._dist||0,s=this._maxElevation||0,o=0;o<t.length;o++){var n=new L.LatLng(t[o][1],t[o][0]),r=new L.LatLng(t[o?o-1:0][1],t[o?o-1:0][0]),h=i.imperial?n.distanceTo(r)*this.__mileFactor:n.distanceTo(r);a+=Math.round(h/1e3*1e5)/1e5,s=s<t[o][2]?t[o][2]:s,e.push({dist:a,altitude:i.imperial&&t[o][2]?t[o][2]*this.__footFactor:t[o][2],x:t[o][0],y:t[o][1],latlng:n})}this._dist=a,this._data=e,s=i.imperial?s*this.__footFactor:s,this._maxElevation=s}},_addGPXdata:function(t){var i=this.options;if(t){for(var e=this._data||[],a=this._dist||0,s=this._maxElevation||0,o=0;o<t.length;o++){var n=t[o],r=t[o?o-1:0],h=i.imperial?n.distanceTo(r)*this.__mileFactor:n.distanceTo(r);a+=Math.round(h/1e3*1e5)/1e5,s=s<n.meta.ele?n.meta.ele:s,e.push({dist:a,altitude:i.imperial&&n.meta.ele?n.meta.ele*this.__footFactor:n.meta.ele,x:n.lng,y:n.lat,latlng:n})}this._dist=a,this._data=e,s=i.imperial?s*this.__footFactor:s,this._maxElevation=s}},_addData:function(t){var i,e=t&&t.geometry&&t.geometry;if(e)switch(e.type){case"LineString":this._addGeoJSONData(e.coordinates);break;case"MultiLineString":for(i=0;i<e.coordinates.length;i++)this._addGeoJSONData(e.coordinates[i]);break;default:throw new Error("Invalid GeoJSON object.")}var a=t&&"FeatureCollection"===t.type;if(a)for(i=0;i<t.features.length;i++)this._addData(t.features[i]);t&&t._latlngs&&this._addGPXdata(t._latlngs)},_calculateFullExtent:function(t){if(!t||t.length<1)throw new Error("no data in parameters");var i=new L.latLngBounds(t[0].latlng,t[0].latlng);return t.forEach(function(t){i.extend(t.latlng)}),i},addData:function(t,i){this._addData(t),this._container&&this._applyData(),null===i&&t.on&&(i=t),i&&i.on("mousemove",this._handleLayerMouseOver.bind(this))},_handleLayerMouseOver:function(t){if(this._data&&0!==this._data.length){var i=t.latlng,e=this._findItemForLatLng(i);if(e){void 0===e.xDiagCoord&&(e.xDiagCoord=this._x(e.dist));var a=e.xDiagCoord;this._showDiagramIndicator(e,a)}}},_showDiagramIndicator:function(t,i){var e=this.options;this._focusG.style("visibility","visible"),this._mousefocus.attr("x1",i).attr("y1",0).attr("x2",i).attr("y2",this._height()).classed("hidden",!1);var a=t.altitude,s=t.dist,o=(t.latlng,e.defined(t)),n=o?e.hoverNumber.formatter(a,e.hoverNumber.decimalsY):e.notDefinedLabel,r=e.hoverNumber.formatter(s,e.hoverNumber.decimalsX);e.imperial?(this._focuslabelX.attr("x",i).text(n+" ft"),this._focuslabelY.attr("y",this._height()-5).attr("x",i).text(r+" mi")):(this._focuslabelX.attr("x",i).text(n+" m"),this._focuslabelY.attr("y",this._height()-5).attr("x",i).text(r+" km"))},_applyData:function(){var t=d3.extent(this._data,function(t){return t.dist}),i=d3.extent(this._data,function(t){return t.altitude}),e=this.options;void 0!==e.yAxisMin&&(e.yAxisMin<i[0]||e.forceAxisBounds)&&(i[0]=e.yAxisMin),void 0!==e.yAxisMax&&(e.yAxisMax>i[1]||e.forceAxisBounds)&&(i[1]=e.yAxisMax),this._x.domain(t),this._y.domain(i),this._areapath.datum(this._data).attr("d",this._area),this._updateAxis(),this._fullExtent=this._calculateFullExtent(this._data)},_clearData:function(){this._data=null,this._dist=null,this._maxElevation=null},clear:function(){this._clearData(),this._areapath&&(this._areapath.attr("d","M0 0"),this._x.domain([0,1]),this._y.domain([0,1]),this._updateAxis())},hide:function(){this._container.style.display="none"},show:function(){this._container.style.display="block"}}),L.control.elevation=function(t){return new L.Control.Elevation(t)};
!function(e,t){"function"==typeof define&&define.amd&&t.toGeoJSON?define(["leaflet"],function(i){e(i,t.toGeoJSON)}):"object"==typeof module&&module.exports?module.exports=function(i,o,r){return void 0===o&&(o="undefined"!=typeof t?require("leaflet"):require("leaflet")(i)),void 0===r&&(r="undefined"!=typeof t?require("togeojson"):require("togeojson")(i)),e(o,r),o}:"undefined"!=typeof t&&t.L&&t.toGeoJSON&&e(t.L,t.toGeoJSON)}(function(e,t){var i=e.Layer.extend({options:{layer:e.geoJson,layerOptions:{},fileSizeLimit:1024},initialize:function(t,i){this._map=t,e.Util.setOptions(this,i),this._parsers={geojson:this._loadGeoJSON,json:this._loadGeoJSON,gpx:this._convertToGeoJSON,kml:this._convertToGeoJSON}},load:function(t,i){var o,r;return!this._isParameterMissing(t,"file")&&(!!this._isFileSizeOk(t.size)&&(!!(o=this._getParser(t.name,i))&&(r=new FileReader,r.onload=e.Util.bind(function(e){var i;try{this.fire("data:loading",{filename:t.name,format:o.ext}),i=o.processor.call(this,e.target.result,o.ext),this.fire("data:loaded",{layer:i,filename:t.name,format:o.ext})}catch(r){this.fire("data:error",{error:r})}},this),t.testing||r.readAsText(t),r)))},loadMultiple:function(e,t){var i=[];if(e[0])for(e=Array.prototype.slice.apply(e);e.length>0;)i.push(this.load(e.shift(),t));return i},loadData:function(e,t,i){var o,r;if(!this._isParameterMissing(e,"data")&&!this._isParameterMissing(t,"name")&&this._isFileSizeOk(e.length)&&(o=this._getParser(t,i)))try{this.fire("data:loading",{filename:t,format:o.ext}),r=o.processor.call(this,e,o.ext),this.fire("data:loaded",{layer:r,filename:t,format:o.ext})}catch(n){this.fire("data:error",{error:n})}},_isParameterMissing:function(e,t){return"undefined"==typeof e&&(this.fire("data:error",{error:new Error("Missing parameter: "+t)}),!0)},_getParser:function(e,t){var i;return t=t||e.split(".").pop(),i=this._parsers[t],i?{processor:i,ext:t}:void this.fire("data:error",{error:new Error("Unsupported file type ("+t+")")})},_isFileSizeOk:function(e){var t=(e/1024).toFixed(4);return!(t>this.options.fileSizeLimit)||(this.fire("data:error",{error:new Error("File size exceeds limit ("+t+" > "+this.options.fileSizeLimit+"kb)")}),!1)},_loadGeoJSON:function(e){var t;if("string"==typeof e&&(e=JSON.parse(e)),t=this.options.layer(e,this.options.layerOptions),0===t.getLayers().length)throw new Error("GeoJSON has no valid layers.");return this.options.addToMap&&t.addTo(this._map),t},_convertToGeoJSON:function(e,i){var o;return"string"==typeof e&&(e=(new window.DOMParser).parseFromString(e,"text/xml")),o=t[i](e),this._loadGeoJSON(o)}}),o=e.Control.extend({statics:{TITLE:"Load local file (GPX, KML, GeoJSON)",LABEL:"&#8965;"},options:{position:"topleft",fitBounds:!0,layerOptions:{},addToMap:!0,fileSizeLimit:1024},initialize:function(t){e.Util.setOptions(this,t),this.loader=null},onAdd:function(t){return this.loader=e.FileLayer.fileLoader(t,this.options),this.loader.on("data:loaded",function(e){this.options.fitBounds&&window.setTimeout(function(){t.fitBounds(e.layer.getBounds())},500)},this),this._initDragAndDrop(t),this._initContainer()},_initDragAndDrop:function(e){var t,i=this.loader,o=e._container,r={dragenter:function(){e.scrollWheelZoom.disable()},dragleave:function(){e.scrollWheelZoom.enable()},dragover:function(e){e.stopPropagation(),e.preventDefault()},drop:function(t){t.stopPropagation(),t.preventDefault(),i.loadMultiple(t.dataTransfer.files),e.scrollWheelZoom.enable()}};for(t in r)r.hasOwnProperty(t)&&o.addEventListener(t,r[t],!1)},_initContainer:function(){var t,i=this.loader,o="leaflet-control-filelayer leaflet-control-zoom",r="leaflet-bar",n=r+"-part",a=e.DomUtil.create("div",o+" "+r),l=e.DomUtil.create("a",o+"-in "+n,a);return l.innerHTML=e.Control.FileLayerLoad.LABEL,l.href="#",l.title=e.Control.FileLayerLoad.TITLE,t=e.DomUtil.create("input","hidden",a),t.type="file",t.multiple="multiple",this.options.formats?t.accept=this.options.formats.join(","):t.accept=".gpx,.kml,.json,.geojson",t.style.display="none",t.addEventListener("change",function(){i.loadMultiple(this.files),this.value=""},!1),e.DomEvent.disableClickPropagation(l),e.DomEvent.on(l,"click",function(e){t.click(),e.preventDefault()}),a}});e.FileLayer={},e.FileLayer.FileLoader=i,e.FileLayer.fileLoader=function(t,i){return new e.FileLayer.FileLoader(t,i)},e.Control.FileLayerLoad=o,e.Control.fileLayerLoad=function(t){return new e.Control.FileLayerLoad(t)}},window);
!function(t){var e;if("function"==typeof define&&define.amd)define(["leaflet"],t);else if("undefined"!=typeof module)e=require("leaflet"),module.exports=t(e);else{if("undefined"==typeof window.L)throw"Leaflet must be loaded first";t(window.L)}}(function(t){"use strict";return t.Polyline._flat=t.LineUtil.isFlat||t.Polyline._flat||function(e){return!t.Util.isArray(e[0])||"object"!=typeof e[0][0]&&"undefined"!=typeof e[0][0]},t.GeometryUtil=t.extend(t.GeometryUtil||{},{distance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))},distanceSegment:function(e,n,r,a){var i=e.latLngToLayerPoint(n),o=e.latLngToLayerPoint(r),l=e.latLngToLayerPoint(a);return t.LineUtil.pointToSegmentDistance(i,o,l)},readableDistance:function(t,e){var n,r="imperial"!==e;return r?n=t>1e3?(t/1e3).toFixed(2)+" km":Math.ceil(t)+" m":(t*=1.09361,n=t>1760?(t/1760).toFixed(2)+" miles":Math.ceil(t)+" yd"),n},belongsSegment:function(t,e,n,r){r=void 0===r?.2:r;var a=e.distanceTo(n),i=e.distanceTo(t)+t.distanceTo(n)-a;return i/a<r},length:function(e){var n=t.GeometryUtil.accumulatedLengths(e);return n.length>0?n[n.length-1]:0},accumulatedLengths:function(t){if("function"==typeof t.getLatLngs&&(t=t.getLatLngs()),0===t.length)return[];for(var e=0,n=[0],r=0,a=t.length-1;r<a;r++)e+=t[r].distanceTo(t[r+1]),n.push(e);return n},closestOnSegment:function(e,n,r,a){var i=e.getMaxZoom();i===1/0&&(i=e.getZoom());var o=e.project(n,i),l=e.project(r,i),s=e.project(a,i),c=t.LineUtil.closestPointOnSegment(o,l,s);return e.unproject(c,i)},closest:function(e,n,r,a){var i,o,l,s,c,u=1/0,g=null;if(n instanceof Array){if(n[0]instanceof Array&&"number"!=typeof n[0][0]){for(o=0;o<n.length;o++)c=t.GeometryUtil.closest(e,n[o],r,a),c.distance<u&&(u=c.distance,g=c);return g}if(!(n[0]instanceof t.LatLng||"number"==typeof n[0][0]||"number"==typeof n[0].lat))return g;n=t.polyline(n)}if(!(n instanceof t.Polyline))return g;if(i=JSON.parse(JSON.stringify(n.getLatLngs().slice(0))),n instanceof t.Polygon){var f=function(e){if(t.Polyline._flat(e))e.push(e[0]);else for(var n=0;n<e.length;n++)f(e[n])};f(i)}if(t.Polyline._flat(i)){if(a){for(o=0,l=i.length;o<l;o++){var y=i[o];s=t.GeometryUtil.distance(e,r,y),s<u&&(u=s,g=y,g.distance=s)}return g}for(o=0,l=i.length;o<l-1;o++){var L=i[o],h=i[o+1];s=t.GeometryUtil.distanceSegment(e,r,L,h),s<=u&&(u=s,g=t.GeometryUtil.closestOnSegment(e,r,L,h),g.distance=s)}return g}for(o=0;o<i.length;o++)c=t.GeometryUtil.closest(e,i[o],r,a),c.distance<u&&(u=c.distance,g=c);return g},closestLayer:function(e,n,r){for(var a=1/0,i=null,o=null,l=1/0,s=0,c=n.length;s<c;s++){var u=n[s];if(u instanceof t.LayerGroup){var g=t.GeometryUtil.closestLayer(e,u.getLayers(),r);g.distance<a&&(a=g.distance,i=g)}else"function"==typeof u.getLatLng?(o=u.getLatLng(),l=t.GeometryUtil.distance(e,r,o)):(o=t.GeometryUtil.closest(e,u,r),o&&(l=o.distance)),l<a&&(a=l,i={layer:u,latlng:o,distance:l})}return i},nClosestLayers:function(e,n,r,a){if(a="number"==typeof a?a:n.length,a<1||n.length<1)return null;for(var i,o,l=[],s=0,c=n.length;s<c;s++){var u=n[s];if(u instanceof t.LayerGroup){var g=t.GeometryUtil.closestLayer(e,u.getLayers(),r);l.push(g)}else"function"==typeof u.getLatLng?(o=u.getLatLng(),i=t.GeometryUtil.distance(e,r,o)):(o=t.GeometryUtil.closest(e,u,r),o&&(i=o.distance)),l.push({layer:u,latlng:o,distance:i})}return l.sort(function(t,e){return t.distance-e.distance}),l.length>a?l.slice(0,a):l},layersWithin:function(e,n,r,a){a="number"==typeof a?a:1/0;for(var i=[],o=null,l=0,s=0,c=n.length;s<c;s++){var u=n[s];"function"==typeof u.getLatLng?(o=u.getLatLng(),l=t.GeometryUtil.distance(e,r,o)):(o=t.GeometryUtil.closest(e,u,r),o&&(l=o.distance)),o&&l<a&&i.push({layer:u,latlng:o,distance:l})}var g=i.sort(function(t,e){return t.distance-e.distance});return g},closestLayerSnap:function(e,n,r,a,i){a="number"==typeof a?a:1/0,i="boolean"!=typeof i||i;var o=t.GeometryUtil.closestLayer(e,n,r);if(!o||o.distance>a)return null;if(i&&"function"==typeof o.layer.getLatLngs){var l=t.GeometryUtil.closest(e,o.layer,o.latlng,!0);l.distance<a&&(o.latlng=l,o.distance=t.GeometryUtil.distance(e,l,r))}return o},interpolateOnPointSegment:function(e,n,r){return t.point(e.x*(1-r)+r*n.x,e.y*(1-r)+r*n.y)},interpolateOnLine:function(e,n,r){n=n instanceof t.Polyline?n.getLatLngs():n;var a=n.length;if(a<2)return null;if(r=Math.max(Math.min(r,1),0),0===r)return{latLng:n[0]instanceof t.LatLng?n[0]:t.latLng(n[0]),predecessor:-1};if(1==r)return{latLng:n[n.length-1]instanceof t.LatLng?n[n.length-1]:t.latLng(n[n.length-1]),predecessor:n.length-2};var i=e.getMaxZoom();i===1/0&&(i=e.getZoom());for(var o=[],l=0,s=0;s<a;s++)o[s]=e.project(n[s],i),s>0&&(l+=o[s-1].distanceTo(o[s]));for(var c=l*r,u=0,g=0,s=0;g<c;s++){var f=o[s],y=o[s+1];u=g,g+=f.distanceTo(y)}if(void 0==f&&void 0==y)var f=o[0],y=o[1],s=1;var L=g-u!==0?(c-u)/(g-u):0,h=t.GeometryUtil.interpolateOnPointSegment(f,y,L);return{latLng:e.unproject(h,i),predecessor:s-1}},locateOnLine:function(e,n,r){var a=n.getLatLngs();if(r.equals(a[0]))return 0;if(r.equals(a[a.length-1]))return 1;for(var i=t.GeometryUtil.closest(e,n,r,!1),o=t.GeometryUtil.accumulatedLengths(a),l=o[o.length-1],s=0,c=!1,u=0,g=a.length-1;u<g;u++){var f=a[u],y=a[u+1];if(s=o[u],t.GeometryUtil.belongsSegment(i,f,y,1e-4)){s+=f.distanceTo(i),c=!0;break}}if(!c)throw"Could not interpolate "+r.toString()+" within "+n.toString();return s/l},reverse:function(e){return t.polyline(e.getLatLngs().slice(0).reverse())},extract:function(e,n,r,a){if(r>a)return t.GeometryUtil.extract(e,t.GeometryUtil.reverse(n),1-r,1-a);r=Math.max(Math.min(r,1),0),a=Math.max(Math.min(a,1),0);var i=n.getLatLngs(),o=t.GeometryUtil.interpolateOnLine(e,n,r),l=t.GeometryUtil.interpolateOnLine(e,n,a);if(r==a){var s=t.GeometryUtil.interpolateOnLine(e,n,a);return[s.latLng]}o.predecessor==-1&&(o.predecessor=0),l.predecessor==-1&&(l.predecessor=0);var c=i.slice(o.predecessor+1,l.predecessor+1);return c.unshift(o.latLng),c.push(l.latLng),c},isBefore:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs();return n[n.length-1].equals(r[0])},isAfter:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs();return n[0].equals(r[r.length-1])},startsAtExtremity:function(t,e){if(!e)return!1;var n=t.getLatLngs(),r=e.getLatLngs(),a=n[0];return a.equals(r[0])||a.equals(r[r.length-1])},computeAngle:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},computeSlope:function(t,e){var n=(e.y-t.y)/(e.x-t.x),r=t.y-n*t.x;return{a:n,b:r}},rotatePoint:function(e,n,r,a){var i=e.getMaxZoom();i===1/0&&(i=e.getZoom());var o=r*Math.PI/180,l=e.project(n,i),s=e.project(a,i),c=Math.cos(o)*(l.x-s.x)-Math.sin(o)*(l.y-s.y)+s.x,u=Math.sin(o)*(l.x-s.x)+Math.cos(o)*(l.y-s.y)+s.y;return e.unproject(new t.Point(c,u),i)},bearing:function(t,e){var n=Math.PI/180,r=t.lat*n,a=e.lat*n,i=t.lng*n,o=e.lng*n,l=Math.sin(o-i)*Math.cos(a),s=Math.cos(r)*Math.sin(a)-Math.sin(r)*Math.cos(a)*Math.cos(o-i),c=(180*Math.atan2(l,s)/Math.PI+360)%360;return c>=180?c-360:c},destination:function(e,n,r){n=(n+360)%360;var a=Math.PI/180,i=180/Math.PI,o=6378137,l=e.lng*a,s=e.lat*a,c=n*a,u=Math.sin(s),g=Math.cos(s),f=Math.cos(r/o),y=Math.sin(r/o),L=Math.asin(u*f+g*y*Math.cos(c)),h=l+Math.atan2(Math.sin(c)*y*g,f-u*Math.sin(L));return h*=i,h=h>180?h-360:h<-180?h+360:h,t.latLng([L*i,h])},angle:function(t,e,n){var r=t.latLngToContainerPoint(e),a=t.latLngToContainerPoint(n),i=180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI+90;return i+=i<0?360:0},destinationOnSegment:function(e,n,r,a){var i=t.GeometryUtil.angle(e,n,r),o=t.GeometryUtil.destination(n,i,a);return t.GeometryUtil.closestOnSegment(e,o,n,r)}}),t.GeometryUtil});
!function(t,i){"function"==typeof define&&define.amd?define(["leaflet"],i):"object"==typeof exports?module.exports=i:i(t.L)}(this,function(t){if(t.Hotline)return t;var i=function(t){if(!(this instanceof i))return new i(t);var e={0:"green",.5:"yellow",1:"red"};this._canvas=t="string"==typeof t?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._weight=5,this._outlineWidth=1,this._outlineColor="black",this._min=0,this._max=1,this._data=[],this.palette(e)};i.prototype={width:function(t){return this._width=t,this},height:function(t){return this._height=t,this},weight:function(t){return this._weight=t,this},outlineWidth:function(t){return this._outlineWidth=t,this},outlineColor:function(t){return this._outlineColor=t,this},palette:function(t){var i=document.createElement("canvas"),e=i.getContext("2d"),n=e.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var o in t)n.addColorStop(o,t[o]);return e.fillStyle=n,e.fillRect(0,0,1,256),this._palette=e.getImageData(0,0,1,256).data,this},min:function(t){return this._min=t,this},max:function(t){return this._max=t,this},data:function(t){return this._data=t,this},add:function(t){return this._data.push(t),this},draw:function(){var t=this._ctx;return t.globalCompositeOperation="source-over",t.lineCap="round",this._drawOutline(t),this._drawHotline(t),this},getRGBForValue:function(t){var i=Math.min(Math.max((t-this._min)/(this._max-this._min),0),.999),e=4*Math.floor(256*i);return[this._palette[e],this._palette[e+1],this._palette[e+2]]},_drawOutline:function(t){var i,e,n,o,h,r,s;if(this._outlineWidth)for(i=0,n=this._data.length;i<n;i++)for(o=this._data[i],t.lineWidth=this._weight+2*this._outlineWidth,e=1,h=o.length;e<h;e++)r=o[e-1],s=o[e],t.strokeStyle=this._outlineColor,t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(s.x,s.y),t.stroke()},_drawHotline:function(t){var i,e,n,o,h,r,s,l,a,u;for(t.lineWidth=this._weight,i=0,n=this._data.length;i<n;i++)for(o=this._data[i],e=1,h=o.length;e<h;e++)r=o[e-1],s=o[e],l=t.createLinearGradient(r.x,r.y,s.x,s.y),a=this.getRGBForValue(r.z),u=this.getRGBForValue(s.z),l.addColorStop(0,"rgb("+a.join(",")+")"),l.addColorStop(1,"rgb("+u.join(",")+")"),t.strokeStyle=l,t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(s.x,s.y),t.stroke()}};var e=t.Canvas.extend({_initContainer:function(){t.Canvas.prototype._initContainer.call(this),this._hotline=new i(this._container)},_update:function(){t.Canvas.prototype._update.call(this),this._hotline.width(this._container.width),this._hotline.height(this._container.height)},_updatePoly:function(t){if(this._drawing){var i=t._parts;i.length&&(this._updateOptions(t),this._hotline.data(i).draw())}},_updateOptions:function(t){null!=t.options.min&&this._hotline.min(t.options.min),null!=t.options.max&&this._hotline.max(t.options.max),null!=t.options.weight&&this._hotline.weight(t.options.weight),null!=t.options.outlineWidth&&this._hotline.outlineWidth(t.options.outlineWidth),null!=t.options.outlineColor&&this._hotline.outlineColor(t.options.outlineColor),t.options.palette&&this._hotline.palette(t.options.palette)}}),n=function(i){return t.Browser.canvas?new e(i):null},o={clipSegment:function(i,e,n,o,h){var r,s,l,a=o?this._lastCode:t.LineUtil._getBitCode(i,n),u=t.LineUtil._getBitCode(e,n);for(this._lastCode=u;;){if(!(a|u))return[i,e];if(a&u)return!1;r=a||u,s=t.LineUtil._getEdgeIntersection(i,e,r,n,h),l=t.LineUtil._getBitCode(s,n),r===a?(s.z=i.z,i=s,a=l):(s.z=e.z,e=s,u=l)}}};return t.Hotline=t.Polyline.extend({statics:{Renderer:e,renderer:n},options:{renderer:n(),min:0,max:1,palette:{0:"green",.5:"yellow",1:"red"},weight:5,outlineColor:"black",outlineWidth:1},getRGBForValue:function(t){return this._renderer._hotline.getRGBForValue(t)},_projectLatlngs:function(i,e,n){var o,h,r=i[0]instanceof t.LatLng,s=i.length;if(r){for(h=[],o=0;o<s;o++)h[o]=this._map.latLngToLayerPoint(i[o]),h[o].z=i[o].alt,n.extend(h[o]);e.push(h)}else for(o=0;o<s;o++)this._projectLatlngs(i[o],e,n)},_clipPoints:function(){if(this.options.noClip)return void(this._parts=this._rings);this._parts=[];var t,i,e,n,h,r,s,l=this._parts,a=this._renderer._bounds;for(t=0,e=0,n=this._rings.length;t<n;t++)for(s=this._rings[t],i=0,h=s.length;i<h-1;i++)r=o.clipSegment(s[i],s[i+1],a,i,!0),r&&(l[e]=l[e]||[],l[e].push(r[0]),r[1]===s[i+1]&&i!==h-2||(l[e].push(r[1]),e++))},_clickTolerance:function(){return this.options.weight/2+this.options.outlineWidth+(t.Browser.touch?10:0)}}),t.hotline=function(i,e){return new t.Hotline(i,e)},t});
L.BingLayer=L.TileLayer.extend({options:{subdomains:[0,1,2,3],type:"Aerial",attribution:"Bing",culture:""},initialize:function(t,i){L.Util.setOptions(this,i),this._key=t,this._url=null,this._providers=[],this.metaRequested=!1},tile2quad:function(t,i,e){for(var o="",a=e;a>0;a--){var r=0,n=1<<a-1;0!==(t&n)&&(r+=1),0!==(i&n)&&(r+=2),o+=r}return o},getTileUrl:function(t){var i=this._getZoomForUrl(),e=this.options.subdomains,o=this.options.subdomains[Math.abs((t.x+t.y)%e.length)];return this._url.replace("{subdomain}",o).replace("{quadkey}",this.tile2quad(t.x,t.y,i)).replace("{culture}",this.options.culture)},loadMetadata:function(){if(!this.metaRequested){this.metaRequested=!0;var t=this,i="_bing_metadata_"+L.Util.stamp(this);window[i]=function(e){window[i]=void 0;var o=document.getElementById(i);if(o.parentNode.removeChild(o),e.errorDetails)throw new Error(e.errorDetails);t.initMetadata(e)};var e="file:"===document.location.protocol?"http":document.location.protocol.slice(0,-1),o=e+"://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.options.type+"?include=ImageryProviders&jsonp="+i+"&key="+this._key+"&UriScheme="+e,a=document.createElement("script");a.type="text/javascript",a.src=o,a.id=i,document.getElementsByTagName("head")[0].appendChild(a)}},initMetadata:function(t){var i=t.resourceSets[0].resources[0];if(this.options.subdomains=i.imageUrlSubdomains,this._url=i.imageUrl,i.imageryProviders)for(var e=0;e<i.imageryProviders.length;e++)for(var o=i.imageryProviders[e],a=0;a<o.coverageAreas.length;a++){var r=o.coverageAreas[a],n={zoomMin:r.zoomMin,zoomMax:r.zoomMax,active:!1},s=new L.LatLngBounds(new L.LatLng(r.bbox[0]+.01,r.bbox[1]+.01),new L.LatLng(r.bbox[2]-.01,r.bbox[3]-.01));n.bounds=s,n.attrib=o.attribution,this._providers.push(n)}this._update()},_update:function(){null!==this._url&&this._map&&(this._update_attribution(),L.TileLayer.prototype._update.apply(this,[]))},_update_attribution:function(){for(var t=L.latLngBounds(this._map.getBounds().getSouthWest().wrap(),this._map.getBounds().getNorthEast().wrap()),i=this._map.getZoom(),e=0;e<this._providers.length;e++){var o=this._providers[e];i<=o.zoomMax&&i>=o.zoomMin&&t.intersects(o.bounds)?(!o.active&&this._map.attributionControl&&this._map.attributionControl.addAttribution(o.attrib),o.active=!0):(o.active&&this._map.attributionControl&&this._map.attributionControl.removeAttribution(o.attrib),o.active=!1)}},onAdd:function(t){this.loadMetadata(),L.TileLayer.prototype.onAdd.apply(this,[t])},onRemove:function(t){for(var i=0;i<this._providers.length;i++){var e=this._providers[i];e.active&&this._map.attributionControl&&(this._map.attributionControl.removeAttribution(e.attrib),e.active=!1)}L.TileLayer.prototype.onRemove.apply(this,[t])}}),L.bingLayer=function(t,i){return new L.BingLayer(t,i)};
!function(a,t){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof modules&&module.exports?module.exports=t(require("leaflet")):t(L)}(this,function(a){"use strict";return a.TileLayer.Provider=a.TileLayer.extend({initialize:function(t,e){var o=a.TileLayer.Provider.providers,r=t.split("."),i=r[0],n=r[1];if(!o[i])throw"No such provider ("+i+")";var s={url:o[i].url,options:o[i].options};if(n&&"variants"in o[i]){if(!(n in o[i].variants))throw"No such variant of "+i+" ("+n+")";var p,l=o[i].variants[n];p="string"==typeof l?{variant:l}:l.options,s={url:l.url||s.url,options:a.Util.extend({},s.options,p)}}var m=function(a){return a.indexOf("{attribution.")===-1?a:a.replace(/\{attribution.(\w*)\}/g,function(a,t){return m(o[t].options.attribution)})};s.options.attribution=m(s.options.attribution);var y=a.Util.extend({},s.options,e);a.TileLayer.prototype.initialize.call(this,s.url,y)}}),a.TileLayer.Provider.providers={OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},variants:{Mapnik:{},DE:{url:"https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},CH:{url:"https://tile.osm.ch/switzerland/{z}/{x}/{y}.png",options:{maxZoom:18,bounds:[[45,5],[48,11]]}},France:{url:"https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}},BZH:{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a>',bounds:[[46.2,-5.5],[50,.7]]}}}},OpenSeaMap:{url:"https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OpenPtMap:{url:"http://openptmap.org/tiles/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: &copy; <a href="http://www.openptmap.org">OpenPtMap</a> contributors'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Stadia:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",options:{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'},variants:{AlidadeSmooth:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png"},AlidadeSmoothDark:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png"},OSMBright:{url:"https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png"},Outdoors:{url:"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png"}}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}",options:{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',variant:"cycle",apikey:"<insert your api key here>",maxZoom:22},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport"}},TransportDark:{options:{variant:"transport-dark"}},SpinalMap:{options:{variant:"spinal-map"}},Landscape:"landscape",Outdoors:"outdoors",Pioneer:"pioneer",MobileAtlas:"mobile-atlas",Neighbourhood:"neighbourhood"}},CyclOSM:{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: {attribution.OpenStreetMap}'}},Hydda:{url:"https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxZoom:20,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},Jawg:{url:"https://{s}.tile.jawg.io/{variant}/{z}/{x}/{y}{r}.png?access-token={accessToken}",options:{attribution:'<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> {attribution.OpenStreetMap}',minZoom:0,maxZoom:22,subdomains:"abcd",variant:"jawg-terrain",accessToken:"<insert your access token here>"},variants:{Streets:"jawg-streets",Terrain:"jawg-terrain",Sunny:"jawg-sunny",Dark:"jawg-dark",Light:"jawg-light",Matrix:"jawg-matrix"}},MapBox:{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}{r}?access_token={accessToken}",options:{attribution:'&copy; <a href="https://www.mapbox.com/about/maps/" target="_blank">Mapbox</a> {attribution.OpenStreetMap} <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',tileSize:512,maxZoom:18,zoomOffset:-1,id:"mapbox/streets-v11",accessToken:"<insert your access token here>"}},MapTiler:{url:"https://api.maptiler.com/maps/{variant}/{z}/{x}/{y}{r}.{ext}?key={key}",options:{attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',variant:"streets",ext:"png",key:"<insert your MapTiler Cloud API key here>",tileSize:512,zoomOffset:-1,minZoom:0,maxZoom:21},variants:{Streets:"streets",Basic:"basic",Bright:"bright",Pastel:"pastel",Positron:"positron",Hybrid:{options:{variant:"hybrid",ext:"jpg"}},Toner:"toner",Topo:"topo",Voyager:"voyager"}},Stamen:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"watercolor",ext:"jpg",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:0,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:0,maxZoom:18}},TerrainLabels:{options:{variant:"terrain-labels",minZoom:0,maxZoom:18}},TopOSMRelief:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},TomTom:{url:"https://{s}.api.tomtom.com/map/1/tile/{variant}/{style}/{z}/{x}/{y}.{ext}?key={apikey}",options:{variant:"basic",maxZoom:22,attribution:'<a href="https://tomtom.com" target="_blank">&copy;  1992 - '+(new Date).getFullYear()+" TomTom.</a> ",subdomains:"abcd",style:"main",ext:"png",apikey:"<insert your API key here>"},variants:{Basic:"basic",Hybrid:"hybrid",Labels:"labels"}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',apiKey:"<insert your api key here>",opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:"Map &copy; 1987-"+(new Date).getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalDayTraffic:{options:{variant:"normal.traffic.day",base:"traffic",type:"traffictile"}},normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},hybridDayTraffic:{options:{variant:"hybrid.traffic.day",base:"traffic",type:"traffictile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},HEREv3:{url:"https://{s}.{base}.maps.ls.hereapi.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?apiKey={apiKey}&lg={language}",options:{attribution:"Map &copy; 1987-"+(new Date).getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",apiKey:"<insert your apiKey here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},FreeMapSK:{url:"https://{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"abcd",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels",Voyager:"rastertiles/voyager",VoyagerNoLabels:"rastertiles/voyager_nolabels",VoyagerOnlyLabels:"rastertiles/voyager_only_labels",VoyagerLabelsUnder:"rastertiles/voyager_labels_under"}},HikeBike:{url:"https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://maps{s}.wien.gv.at/basemap/{variant}/{type}/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],type:"normal",format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:{options:{maxZoom:20,variant:"geolandbasemap"}},grau:"bmapgrau",overlay:"bmapoverlay",terrain:{options:{variant:"bmapgelaende",type:"grau",format:"jpeg"}},surface:{options:{variant:"bmapoberflaeche",type:"grau",format:"jpeg"}},highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{maxZoom:20,variant:"bmaporthofoto30cm",format:"jpeg"}}}},nlmaps:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png",options:{minZoom:6,maxZoom:19,bounds:[[50.5,3.25],[54,7.6]],attribution:'Kaartgegevens &copy; <a href="kadaster.nl">Kadaster</a>'},variants:{standaard:"brtachtergrondkaart",pastel:"brtachtergrondkaartpastel",grijs:"brtachtergrondkaartgrijs",luchtfoto:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts/2018_ortho25/EPSG:3857/{z}/{x}/{y}.png"}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"}},JusticeMap:{url:"http://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png",options:{attribution:'<a href="http://www.justicemap.org/terms.php">Justice Map</a>',size:"county",bounds:[[14,-180],[72,-56]]},variants:{income:"income",americanIndian:"indian",asian:"asian",black:"black",hispanic:"hispanic",multi:"multi",nonWhite:"nonwhite",white:"white",plurality:"plural"}},Wikimedia:{url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",options:{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',minZoom:1,maxZoom:19}},GeoportailFrance:{url:"https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER={variant}&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",options:{attribution:'<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',bounds:[[-75,-180],[81,180]],minZoom:2,maxZoom:18,apikey:"choisirgeoportail",format:"image/jpeg",style:"normal",variant:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD"},variants:{parcels:{options:{variant:"CADASTRALPARCELS.PARCELS",maxZoom:20,style:"bdparcellaire",format:"image/png"}},ignMaps:"GEOGRAPHICALGRIDSYSTEMS.MAPS",maps:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD",orthos:{options:{maxZoom:19,variant:"ORTHOIMAGERY.ORTHOPHOTOS"}}}},OneMapSG:{url:"https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png",options:{variant:"Default",minZoom:11,maxZoom:18,bounds:[[1.56073,104.11475],[1.16,103.502]],attribution:'<img src="https://docs.onemap.sg/maps/images/oneMap64-01.png" style="height:20px;width:20px;"/> New OneMap | Map data &copy; contributors, <a href="http://SLA.gov.sg">Singapore Land Authority</a>'},variants:{Default:"Default",Night:"Night",Original:"Original",Grey:"Grey",LandLot:"LandLot"}}},a.tileLayer.provider=function(t,e){return new a.TileLayer.Provider(t,e)},a});
L.Util.extend(L.LineUtil,{snapToLayers:function(n,t,i){var e,s,o,l,a,r,y,g,u,m,p;if(r=i.sensitivity||10,y=i.vertexonly||!1,g=i.layers||[],u=1/0,m=n,m._feature=null,!i||!i.layers||!i.layers.length)return m;for(p=i.layers[0]._map,e=0;e<i.layers.length;e++)for(o=Object.keys(i.layers[e]._layers),s=0;s<o.length;s++)if(l=i.layers[e]._layers[o[s]],t!==l._leaflet_id){if(l._layers){var P=this.snapToLayers(n,t,{sensitivity:r,vertexonly:y,layers:[l]});a={minDist:n.distanceTo(P),minPoint:P}}else l instanceof L.Marker?a=this._snapToLatlngs(n,[l.getLatLng()],p,r,y,u):l instanceof L.Polyline?a=this._snapToLatlngs(n,l.getLatLngs(),p,r,y,u):l instanceof L.MultiPolyline?(console.error("Snapping to MultiPolyline is currently unsupported",l),a={minDist:u,minPoint:m}):l instanceof L.Polygon?a=this._snapToPolygon(n,l,p,r,y,u):l instanceof L.MultiPolygon?a=this._snapToMultiPolygon(n,l,p,r,y,u):(console.error("Unsupported snapping feature",l),a={minDist:u,minPoint:m});a.minDist<u&&(u=a.minDist,m=a.minPoint,m._feature=l)}return m},_snapToPolygon:function(n,t,i,e,s,o){var l,a,r,y,g;for(g=null,r=t.getLatLngs(),r.push(r[0]),l=this._snapToLatlngs(n,t.getLatLngs(),i,e,s,o),l.minDist<o&&(o=l.minDist,g=l.minPoint),a=Object.keys(t._holes),y=0;y<a.length;y++)r=t._holes[a[y]],r.push(r[0]),l=this._snapToLatlngs(n,t._holes[a[y]],i,e,s,o),l.minDist<o&&(o=l.minDist,g=l.minPoint);return{minDist:o,minPoint:g}},_snapToMultiPolygon:function(n,t,i,e,s,o){var l,a,r,y;for(y=null,a=Object.keys(t._layers),l=0;l<a.length;l++)r=this._snapToPolygon(n,t._layers[a[l]],i,e,s,o),r.minDist<o&&(o=r.minDist,y=r.minPoint);return{minDist:o,minPoint:y}},_snapToLatlngs:function(n,t,i,e,s,o){var l,a,r,y,g,u,m;for(y=i.latLngToLayerPoint(n),g=r=null,l=0;l<t.length;l++)u=i.latLngToLayerPoint(t[l]),s||null===g?(m=y.distanceTo(u))&&m<=e&&m<o&&(o=m,r=t[l]):(a=L.LineUtil.pointToSegmentDistance(y,g,u),a<o&&a<=e&&(o=a,r=i.layerPointToLatLng(L.LineUtil.closestPointOnSegment(y,g,u)))),g=u;return{minDist:o,minPoint:r}}});
L.Marker.include({snapTo:function(n){return L.LineUtil.snapToLayers(n,this._leaflet_id,this.options.snapping)}});
L.Routing=L.Control.extend({includes:[L.Evented.prototype],statics:{VERSION:"0.1.1-dev"},options:{position:"topleft",tooltips:{waypoint:"Waypoint. Drag to move; Click to remove.",segment:"Drag to create a new waypoint"},icons:{start:new L.Icon.Default,end:new L.Icon.Default,normal:new L.Icon.Default,draw:new L.Icon.Default},styles:{trailer:{},track:{},nodata:{}},zIndexOffset:2e3,routing:{router:null},snapping:{layers:[],sensitivity:10,vertexonly:!1},shortcut:{draw:{enable:68,disable:81}}},initialize:function(t){this._editing=!1,this._drawing=!1,L.Util.setOptions(this,t)},onAdd:function(t){this._map=t,this._container=this._map._container,this._overlayPane=this._map._panes.overlayPane,this._popupPane=this._map._panes.popupPane,this._router=this.options.routing.router,this._segments=(new L.FeatureGroup).addTo(t),this._waypoints=(new L.FeatureGroup).addTo(t),this._waypoints._first=null,this._waypoints._last=null,this.options.shortcut&&L.DomEvent.addListener(this._container,"keyup",this._keyupListener,this),this._draw=new L.Routing.Draw(this,this.options),this._edit=new L.Routing.Edit(this,this.options),this._edit.enable(),this.on("waypoint:click",this._waypointClickHandler,this),this._segments.on("mouseover",this._fireSegmentEvent,this),this._edit.on("segment:mouseout",this._fireSegmentEvent,this),this._edit.on("segment:dragstart",this._fireSegmentEvent,this),this._edit.on("segment:dragend",this._fireSegmentEvent,this);var e=L.DomUtil.create("div","leaflet-routing");return e},onRemove:function(t){this.off("waypoint:click",this._waypointClickHandler,this),this._segments.off("mouseover",this._fireSegmentEvent,this),this._edit.off("segment:mouseout",this._fireSegmentEvent,this),this._edit.off("segment:dragstart",this._fireSegmentEvent,this),this._edit.off("segment:dragend",this._fireSegmentEvent,this),this._edit.disable(),this._draw.disable(),L.DomUtil.enableTextSelection(),L.DomEvent.removeListener(this._container,"keyup",this._keyupListener),delete this._draw,delete this._edit,delete this._map,delete this._router,delete this._segments,delete this._waypoints,delete this.options},_waypointClickHandler:function(t){this.removeWaypoint(t.marker,function(){})},addWaypoint:function(t,e,n,i){t instanceof L.LatLng&&(t=new L.Marker(t,{title:this.options.tooltips.waypoint,draggable:!0})),t._routing={prevMarker:e,nextMarker:n,prevLine:null,nextLine:null,timeoutID:null};var o=this.options.icons;e?n?t.setIcon(o.normal):t.setIcon(o.end):t.setIcon(o.start);var r=n&&this.getFirst()&&n._leaflet_id===this.getFirst()._leaflet_id,s=e&&this.getFirst()&&e._leaflet_id===this.getFirst()._leaflet_id,a=e&&this.getLast()&&e._leaflet_id===this.getLast()._leaflet_id;r&&n.setIcon(o.normal),a&&!s&&e.setIcon(o.normal),null===this.getFirst()&&null===this.getLast()?(this._waypoints._first=t,this._waypoints._last=t):null===n?this._waypoints._last=t:null===e&&(this._waypoints._first=t),null!==t._routing.prevMarker&&(t._routing.prevMarker._routing.nextMarker=t,t._routing.prevLine=t._routing.prevMarker._routing.nextLine,null!==t._routing.prevLine&&(t._routing.prevLine._routing.nextMarker=t)),null!==t._routing.nextMarker&&(t._routing.nextMarker._routing.prevMarker=t,t.nextLine=t._routing.nextMarker._routing.prevLine,null!==t._routing.nextLine&&(t._routing.nextLine._routing.prevMarker=t)),t.on("mouseover",this._fireWaypointEvent,this),t.on("mouseout",this._fireWaypointEvent,this),t.on("dragstart",this._fireWaypointEvent,this),t.on("dragend",this._fireWaypointEvent,this),t.on("drag",this._fireWaypointEvent,this),t.on("click",this._fireWaypointEvent,this),this.routeWaypoint(t,i),this._waypoints.addLayer(t)},removeWaypoint:function(t,e){t.off("mouseover",this._fireWaypointEvent,this),t.off("mouseout",this._fireWaypointEvent,this),t.off("dragstart",this._fireWaypointEvent,this),t.off("dragend",this._fireWaypointEvent,this),t.off("drag",this._fireWaypointEvent,this),t.off("click",this._fireWaypointEvent,this);var n=t._routing.prevMarker,i=t._routing.nextMarker,o=this.getFirst()&&t._leaflet_id===this.getFirst()._leaflet_id,r=this.getLast()&&t._leaflet_id===this.getLast()._leaflet_id;o&&(this._waypoints._first=i,i&&i.setIcon(this.options.icons.start)),r&&(this._waypoints._last=n,n&&n._leaflet_id!==this.getFirst()._leaflet_id&&n.setIcon(this.options.icons.end)),null!==n&&(n._routing.nextMarker=i,n._routing.nextLine=null),null!==i&&(i._routing.prevMarker=n,i._routing.prevLine=null),null!==t._routing.nextLine&&this._segments.removeLayer(t._routing.nextLine),null!==t._routing.prevLine&&this._segments.removeLayer(t._routing.prevLine),this._waypoints.removeLayer(t),null!==n?this.routeWaypoint(n,e):null!==i?this.routeWaypoint(i,e):(this._draw.enable(),e(null,null))},routeWaypoint:function(t,e){var n,i=0,o=this,r=function(r,s){i++,n=n||r,2===i&&(o.fire("routing:routeWaypointEnd",{err:n}),e(n,t))};this.fire("routing:routeWaypointStart"),this._routeSegment(t._routing.prevMarker,t,r),this._routeSegment(t,t._routing.nextMarker,r)},rerouteAllSegments:function(t){var e,n=this.getWaypoints().length-1,i=0,o=this,r=function(r,s){i++,e=e||r,i>=n&&(o.fire("routing:rerouteAllSegmentsEnd",{err:e}),t&&t(e))};return o.fire("routing:rerouteAllSegmentsStart"),n<1?r(null,!0):void this._eachSegment(function(t,e){this._routeSegment(t,e,r)})},_routeSegment:function(t,e,n){var i=this;return null===t||null===e?n(null,!0):void this._router(t.getLatLng(),e.getLatLng(),function(o,r){if("undefined"==typeof r)var r=new L.Polyline([t.getLatLng(),e.getLatLng()],i.options.styles.nodata);else r.setStyle(i.options.styles.track);return r._routing={prevMarker:t,nextMarker:e},null!==t._routing.nextLine&&i._segments.removeLayer(t._routing.nextLine),i._segments.addLayer(r),t._routing.nextLine=r,e._routing.prevLine=r,n(o,r)})},_eachSegment:function(t,e){var n=e||this,i=this.getFirst();if(null!==i)for(;null!==i._routing.nextMarker;){var o=i,r=i._routing.nextMarker,s=i._routing.nextLine;t.call(n,o,r,s),i=i._routing.nextMarker}},_fireWaypointEvent:function(t){this.fire("waypoint:"+t.type,{marker:t.target})},_fireSegmentEvent:function(t){2===t.type.split(":").length?this.fire(t.type):this.fire("segment:"+t.type)},getFirst:function(){return this._waypoints._first},getLast:function(){return this._waypoints._last},getWaypoints:function(){var t=[];return this._eachSegment(function(e){t.push(e.getLatLng())}),this.getLast()&&t.push(this.getLast().getLatLng()),t},toPolyline:function(){var t=[];return this._eachSegment(function(e,n,i){t=t.concat(i.getLatLngs())}),L.polyline(t)},toGeoJSON:function(t){var e={type:"LineString",properties:{waypoints:[]},coordinates:[]},n=this._waypoints._first;if(null===n)return e;for(e.properties.waypoints.push({coordinates:[n.getLatLng().lng,n.getLatLng().lat],_index:0});n._routing.nextMarker;){for(var i=n._routing.nextMarker,o=n._routing.nextLine.getLatLngs(),r=0;r<o.length;r++)!o[r].alt||"undefined"!=typeof t&&t!==!1?e.coordinates.push([o[r].lng,o[r].lat]):e.coordinates.push([o[r].lng,o[r].lat,o[r].alt]);e.properties.waypoints.push({coordinates:[i.getLatLng().lng,i.getLatLng().lat],_index:e.coordinates.length-1}),n=n._routing.nextMarker}return e},loadGeoJSON:function(t,e,n){var i,o,r,s;if(i=this,"function"!=typeof e&&"undefined"!=typeof e||(n=e,e={}),e.waypointDistance=e.waypointDistance||50,e.fitBounds=e.fitBounds||!0,!t.properties||!t.properties.waypoints){t.properties||(t.properties={}),t.properties.waypoints=[];for(var a=0;a<t.coordinates.length;a+=e.waypointDistance)t.properties.waypoints.push({_index:a,coordinates:t.coordinates[a].slice(0,2)});a>t.coordinates.length-1&&t.properties.waypoints.push({_index:t.coordinates.length-1,coordinates:t.coordinates[t.coordinates.length-1].slice(0,2)})}r=0,o=i._router,s=t.properties.waypoints,i._router=function(e,n,i){var o=s[r-1]._index,a=s[r]._index+1;return i(null,L.GeoJSON.geometryToLayer({type:"LineString",coordinates:t.coordinates.slice(o,a)}))},end=function(){i._router=o,setTimeout(function(){e.fitBounds&&i._map.fitBounds(L.polyline(L.GeoJSON.coordsToLatLngs(t.coordinates)).getBounds()),"function"==typeof n&&n(null)},0)},add=function(){if(!s[r])return end();var t=s[r].coordinates,e=i._waypoints._last;i.addWaypoint(L.latLng(t[1],t[0]),e,null,function(t,e){add(++r)})},add()},draw:function(t){if("undefined"==typeof t)var t=!0;t?this._draw.enable():this._draw.disable()},routing:function(t){throw new Error("Not implemented")},snapping:function(t){throw new Error("Not implemented")},_keyupListener:function(t){t.keyCode===this.options.shortcut.draw.disable?this._draw.disable():t.keyCode===this.options.shortcut.draw.enable&&this._draw.enable()}});
L.Routing.Draw=L.Handler.extend({includes:[L.Evented.prototype],options:{},initialize:function(t,i){this._parent=t,this._map=t._map,this._enabled=!1,L.Util.setOptions(this,i)},enable:function(){this._enabled||(this._enabled=!0,this._hidden=!1,this._dragging=!1,this._addHooks(),this.fire("enabled"),this._map.fire("routing:draw-start"),0===this._parent._segments._layers.length?this._map.fire("routing:draw-new"):this._map.fire("routing:draw-continue"))},disable:function(){this._enabled&&(this._enabled=!1,this._removeHooks(),this.fire("disabled"),this._map.fire("routing:draw-end"))},_addHooks:function(){if(this._map){if(this._marker||(this._marker=new L.Marker(this._map.getCenter(),{icon:this.options.icons.draw?this.options.icons.draw:new L.Icon.Default,opacity:this.options.icons.draw?1:0,zIndexOffset:this.options.zIndexOffset,interactive:!1})),!this._trailer){var t=this._map.getCenter();this._trailerOpacity=this.options.styles.trailer.opacity||.2;var i=L.extend({},this.options.styles.trailer,{opacity:0,interactive:!1});this._trailer=new L.Polyline([t,t],i)}this._parent.on("waypoint:mouseover",this._catchWaypointEvent,this),this._parent.on("waypoint:mouseout",this._catchWaypointEvent,this),this._parent.on("waypoint:dragstart",this._catchWaypointEvent,this),this._parent.on("waypoint:dragend",this._catchWaypointEvent,this),this._parent.on("segment:mouseover",this._catchWaypointEvent,this),this._parent.on("segment:mouseout",this._catchWaypointEvent,this),this._parent.on("segment:dragstart",this._catchWaypointEvent,this),this._parent.on("segment:dragend",this._catchWaypointEvent,this),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onMouseClick,this),this._marker.addTo(this._map),this._trailer.addTo(this._map)}},_removeHooks:function(){this._map&&(this._parent.off("waypoint:mouseover",this._catchWaypointEvent,this),this._parent.off("waypoint:mouseout",this._catchWaypointEvent,this),this._parent.off("waypoint:dragstart",this._catchWaypointEvent,this),this._parent.off("waypoint:dragend",this._catchWaypointEvent,this),this._parent.off("segment:mouseover",this._catchWaypointEvent,this),this._parent.off("segment:mouseout",this._catchWaypointEvent,this),this._parent.off("segment:dragstart",this._catchWaypointEvent,this),this._parent.off("segment:dragend",this._catchWaypointEvent,this),this._map.off("click",this._onMouseClick,this),this._map.off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._marker),this._map.removeLayer(this._trailer),delete this._marker,delete this._trailer)},_catchWaypointEvent:function(t){var i=t.type.split(":")[1];this._hidden?this._dragging?"dragend"===i&&(this._dragging=!1):"mouseout"===i?this._show():"dragstart"===i&&(this._dragging=!0):"mouseover"===i&&this._hide()},_hide:function(){this._hidden=!0,this._marker.setOpacity(0),this._trailer.setStyle({opacity:0})},_show:function(){this._hidden=!1,this._marker.setOpacity(this.options.icons.draw?1:0),this._showTrailer()},_showTrailer:function(){0===this._trailer.options.opacity&&this._trailer.setStyle({opacity:this._trailerOpacity})},_setTrailer:function(t,i){this._trailer.setLatLngs([t,i]),this._showTrailer()},_onMouseMove:function(t){if(!this._hidden){var i=t.latlng,s=this._parent.getLast();this.options.snapping&&(i=L.LineUtil.snapToLayers(i,null,this.options.snapping)),this._marker.setLatLng(i),null!==s&&this._setTrailer(s.getLatLng(),i)}},_onMouseClick:function(t){if(!this._hidden){var i,s;i=t.latlng,this.options.snapping&&(i=L.LineUtil.snapToLayers(i,null,this.options.snapping)),s=this._parent.getLast(),this._setTrailer(i,i),this._parent.addWaypoint(i,s,null,function(t,i){})}}});
L.Routing.Edit=L.Handler.extend({includes:[L.Evented.prototype],options:{},initialize:function(t,e){this._parent=t,this._map=t._map,this._enabled=!1,L.Util.setOptions(this,e)},enable:function(){this._enabled||(this._enabled=!0,this._addHooks(),this.fire("enabled"),this._map.fire("routing:edit-start"))},disable:function(){this._enabled&&(this._enabled=!1,this._removeHooks(),this.fire("disabled"),this._map.fire("routing:edit-end"))},_addHooks:function(){if(this._map){if(this._mouseMarker||(this._mouseMarker=new L.Marker(this._map.getCenter(),{icon:L.divIcon({className:"line-mouse-marker",iconAnchor:[5,5],iconSize:[10,10]}),interactive:!0,draggable:!0,opacity:0,zIndexOffset:this.options.zIndexOffset,title:this.options.tooltips.segment})),this._mouseMarker.addTo(this._map),!this._trailer1){var t=this._map.getCenter();this._trailerOpacity=this.options.styles.trailer.opacity||.2;var e=L.extend({},this.options.styles.trailer,{opacity:0,interactive:!1});this._trailer1=new L.Polyline([t,t],e),this._trailer2=new L.Polyline([t,t],e)}this._trailer1.addTo(this._map),this._trailer2.addTo(this._map),this._parent.on("segment:mouseover",this._segmentOnMouseover,this),this._mouseMarker.on("dragstart",this._segmentOnDragstart,this),this._mouseMarker.on("drag",this._segmentOnDrag,this),this._mouseMarker.on("dragend",this._segmentOnDragend,this),this._parent.on("waypoint:dragstart",this._waypointOnDragstart,this),this._parent.on("waypoint:drag",this._waypointOnDrag,this),this._parent.on("waypoint:dragend",this._waypointOnDragend,this)}},_removeHooks:function(){this._map&&(this._parent.off("segment:mouseover",this._segmentOnMouseover,this),this._mouseMarker.off("dragstart",this._segmentOnDragstart,this),this._mouseMarker.off("drag",this._segmentOnDrag,this),this._mouseMarker.off("dragend",this._segmentOnDragend,this),this._parent.off("waypoint:dragstart",this._waypointOnDragstart,this),this._parent.off("waypoint:drag",this._waypointOnDrag,this),this._parent.off("waypoint:dragend",this._waypointOnDragend,this))},_segmentOnMouseover:function(t){this._mouseMarker.setOpacity(1),this._map.on("mousemove",this._segmentOnMousemove,this)},_segmentOnMouseout:function(t){this._dragging||(this._mouseMarker.setOpacity(0),this._map.off("mousemove",this._segmentOnMousemove,this),this.fire("segment:mouseout"))},_segmentOnMousemove:function(t){if(!this._dragging){var e=L.LineUtil.snapToLayers(t.latlng,null,{layers:[this._parent._segments],sensitivity:40,vertexonly:!1});null===e._feature?this._segmentOnMouseout(t):(this._mouseMarker._snapping=e._feature._routing,this._mouseMarker.setLatLng(e))}},_segmentOnDragstart:function(t){var e=t.target.getLatLng(),i=t.target._snapping.nextMarker,s=t.target._snapping.prevMarker;this._setTrailers(e,i,s,!0),this._dragging=!0,this.fire("segment:dragstart")},_segmentOnDrag:function(t){var e=t.target.getLatLng(),i=t.target._snapping.nextMarker,s=t.target._snapping.prevMarker;this.options.snapping&&(e=L.LineUtil.snapToLayers(e,null,this.options.snapping)),t.target.setLatLng(e),this._setTrailers(e,i,s)},_segmentOnDragend:function(t){var e=this._mouseMarker._snapping.nextMarker,i=this._mouseMarker._snapping.prevMarker,s=this._mouseMarker.getLatLng();this._parent.addWaypoint(s,i,e,function(t,e){}),this._dragging=!1,this._setTrailers(null,null,null,!1),this.fire("segment:dragend")},_waypointOnDragstart:function(t){var e=t.marker._routing.nextMarker,i=t.marker._routing.prevMarker;this._setTrailers(t.marker.getLatLng(),e,i,!0)},_waypointOnDrag:function(t){var e=t.marker._latlng,i=t.marker._routing.nextMarker,s=t.marker._routing.prevMarker;this.options.snapping&&(e=L.LineUtil.snapToLayers(e,null,this.options.snapping)),t.marker.setLatLng(e),this._setTrailers(e,i,s)},_waypointOnDragend:function(t){this._setTrailers(null,null,null,!1),this._parent.routeWaypoint(t.marker,function(t,e){})},_waypointOnClick:function(t){this._parent.removeWaypoint(t.layer,function(t,e){})},_setTrailers:function(t,e,i,s){if("undefined"!=typeof s){if(s===!1)return this._trailer1.setStyle({opacity:0}),void this._trailer2.setStyle({opacity:0});null!==e&&this._trailer1.setStyle({opacity:this._trailerOpacity}),null!==i&&this._trailer2.setStyle({opacity:this._trailerOpacity})}e&&this._trailer1.setLatLngs([t,e.getLatLng()]),i&&this._trailer2.setLatLngs([t,i.getLatLng()])}});
L.Control.Sidebar=L.Control.extend({includes:L.Evented?L.Evented.prototype:L.Mixin.Events,options:{autopan:!1,closeButton:!0,container:"",position:"left"},initialize:function(t,e){return"string"==typeof t&&(console.warn("this syntax is deprecated. please use L.control.sidebar({ container }) now"),t={container:t}),"object"==typeof t&&t.id&&(console.warn("this syntax is deprecated. please use L.control.sidebar({ container }) now"),t.container=t.id),this._tabitems=[],this._panes=[],this._closeButtons=[],this._expandButtons=[],L.setOptions(this,Object.assign({},t,e)),this},onAdd:function(t){var e,i,s,a,n;for(n="string"==typeof this.options.container?L.DomUtil.get(this.options.container):this.options.container,n||(n=L.DomUtil.create("div","leaflet-sidebar collapsed")),this._paneContainer=n.querySelector("div.leaflet-sidebar-content"),null===this._paneContainer&&(this._paneContainer=L.DomUtil.create("div","leaflet-sidebar-content",n)),this._tabContainer=this.options.tabContainer?L.DomUtil.get(this.options.tabContainer):n,s=this._tabContainer.querySelectorAll("ul.leaflet-sidebar-tabs, div.leaflet-sidebar-tabs > ul"),this._tabContainerTop=s[0]||null,this._tabContainerBottom=s[1]||null,null===this._tabContainerTop&&(a=L.DomUtil.create("div","leaflet-sidebar-tabs",n),a.setAttribute("role","tablist"),this._tabContainerTop=L.DomUtil.create("ul","",a)),null===this._tabContainerBottom&&(a=this._tabContainerTop.parentNode,this._tabContainerBottom=L.DomUtil.create("ul","",a)),e=0;e<this._tabContainerTop.children.length;e++)i=this._tabContainerTop.children[e],i._sidebar=this,i._id=i.querySelector("a").hash.slice(1),this._tabitems.push(i);for(e=0;e<this._tabContainerBottom.children.length;e++)i=this._tabContainerBottom.children[e],i._sidebar=this,i._id=i.querySelector("a").hash.slice(1),this._tabitems.push(i);for(e=0;e<this._paneContainer.children.length;e++)if(i=this._paneContainer.children[e],"DIV"===i.tagName&&L.DomUtil.hasClass(i,"leaflet-sidebar-pane")){this._panes.push(i);var o=i.querySelectorAll(".leaflet-sidebar-close");o.length&&(this._closeButtons.push(o[o.length-1]),this._closeClick(o[o.length-1],"on"));var l=i.querySelectorAll(".leaflet-sidebar-expand");l.length&&(this._expandButtons.push(l[l.length-1]),this._expandClick(l[l.length-1],"on"))}for(e=0;e<this._tabitems.length;e++)this._tabClick(this._tabitems[e],"on");return n},onRemove:function(t){var e;for(this._map=null,this._tabitems=[],this._panes=[],this._closeButtons=[],this._expandButtons=[],e=0;e<this._tabitems.length;e++)this._tabClick(this._tabitems[e],"off");for(e=0;e<this._closeButtons.length;e++)this._closeClick(this._closeButtons[e],"off");for(e=0;e<this._expandButtons.length;e++)this._expandClick(this._expandButtons[e],"off");return this},addTo:function(t){return this.onRemove(),this._map=t,this._container=this.onAdd(t),L.DomUtil.addClass(this._container,"leaflet-sidebar-"+this.getPosition()),L.DomUtil.addClass(this._tabContainer,"leaflet-sidebar-"+this.getPosition()),L.Browser.touch&&(L.DomUtil.addClass(this._container,"leaflet-touch"),L.DomUtil.addClass(this._tabContainer,"leaflet-touch")),L.DomEvent.disableScrollPropagation(this._container),L.DomEvent.disableClickPropagation(this._container),L.DomUtil.hasClass(this._map.getContainer(),"leaflet-sidebar-map")||(L.DomUtil.addClass(this._map.getContainer(),"leaflet-sidebar-map"),this._map.invalidateSize()),this.options.autopan&&this._container.addEventListener("transitionend",L.bind(function(t){this._map.invalidateSize({animate:!1})},this),!0),this},removeFrom:function(t){return console.warn("removeFrom() has been deprecated, please use remove() instead as support for this function will be ending soon."),this._map._container.removeChild(this._container),this.onRemove(t),this},open:function(t){var e,i,s;if(s=this._getTab(t),L.DomUtil.hasClass(s,"disabled"))return this;for(e=0;e<this._panes.length;e++)i=this._panes[e],i.id===t?L.DomUtil.addClass(i,"active"):L.DomUtil.hasClass(i,"active")&&L.DomUtil.removeClass(i,"active");for(e=0;e<this._tabitems.length;e++)i=this._tabitems[e],i.querySelector("a").hash==="#"+t?L.DomUtil.addClass(i,"active"):L.DomUtil.hasClass(i,"active")&&L.DomUtil.removeClass(i,"active");return this.fire("content",{id:t}),L.DomUtil.hasClass(this._container,"collapsed")&&(this.fire("opening"),L.DomUtil.removeClass(this._container,"collapsed"),L.DomUtil.removeClass(this._tabContainer,"collapsed")),this._map.invalidateSize(),this},close:function(){var t;for(t=0;t<this._tabitems.length;t++){var e=this._tabitems[t];L.DomUtil.hasClass(e,"active")&&L.DomUtil.removeClass(e,"active")}return L.DomUtil.hasClass(this._container,"collapsed")||(this.fire("closing"),L.DomUtil.addClass(this._container,"collapsed"),L.DomUtil.addClass(this._tabContainer,"collapsed"),this._map.invalidateSize()),this},toggleExpand:function(t){var e=L.DomUtil.hasClass(this._map.getContainer(),"sidebar-expanded");if(e)for(L.DomUtil.removeClass(this._map.getContainer(),"sidebar-expanded"),i=0;i<this._expandButtons.length;i++)L.DomUtil.removeClass(this._expandButtons[i],"active");else for(L.DomUtil.addClass(this._map.getContainer(),"sidebar-expanded"),i=0;i<this._expandButtons.length;i++)L.DomUtil.addClass(this._expandButtons[i],"active");return this._map.invalidateSize(),this.fire("toggleExpand",{expanded:!e}),this},addPanel:function(t){var e,i,s,a,n;return i=L.DomUtil.create("li",t.disabled?"disabled":""),s=L.DomUtil.create("a","",i),s.href="#"+t.id,s.setAttribute("role","tab"),s.innerHTML=t.tab,i._sidebar=this,i._id=t.id,i._button=t.button,t.title&&"<"!==t.title[0]&&(i.title=t.title),"bottom"===t.position?this._tabContainerBottom.appendChild(i):this._tabContainerTop.appendChild(i),this._tabitems.push(i),t.pane&&("string"==typeof t.pane?(e=L.DomUtil.create("DIV","leaflet-sidebar-pane",this._paneContainer),n="",t.title&&(n+='<h1 class="leaflet-sidebar-header">'+t.title),this.options.closeButton&&(n+='<span class="leaflet-sidebar-close"><i class="fa fa-caret-left"></i></span>'),t.title&&(n+="</h1>"),e.innerHTML=n+t.pane):(e=t.pane,this._paneContainer.appendChild(e)),e.id=t.id,this._panes.push(e),a=e.querySelectorAll(".leaflet-sidebar-close"),a.length&&(this._closeButtons.push(a[a.length-1]),this._closeClick(a[a.length-1],"on"))),this._tabClick(i,"on"),this},removePanel:function(t){var e,i,s,a,n;for(e=0;e<this._tabitems.length;e++)if(this._tabitems[e]._id===t){s=this._tabitems[e],this._tabClick(s,"off"),s.remove(),this._tabitems.slice(e,1);break}for(e=0;e<this._panes.length;e++)if(this._panes[e].id===t){for(a=this._panes[e],n=a.querySelectorAll(".leaflet-sidebar-close"),i=0;e<n.length;i++)this._closeClick(n[i],"off");a.remove(),this._panes.slice(e,1);break}return this},enablePanel:function(t){var e=this._getTab(t);return L.DomUtil.removeClass(e,"disabled"),this},disablePanel:function(t){var e=this._getTab(t);return L.DomUtil.addClass(e,"disabled"),this},_tabClick:function(t,e){var i=t.querySelector("a");if(i.hasAttribute("href")&&"#"===i.getAttribute("href")[0]){var s=function(t){L.DomUtil.hasClass(this,"active")?this._sidebar.close():L.DomUtil.hasClass(this,"disabled")||("string"==typeof this._button?window.location.href=this._button:"function"==typeof this._button?this._button(t):this._sidebar.open(this.querySelector("a").hash.slice(1)))};"on"===e?L.DomEvent.on(t.querySelector("a"),"click",L.DomEvent.preventDefault).on(t.querySelector("a"),"click",s,t):L.DomEvent.off(t.querySelector("a"),"click",s)}},onCloseClick:function(){this.close()},_closeClick:function(t,e){"on"===e?L.DomEvent.on(t,"click",this.onCloseClick,this):L.DomEvent.off(t,"click",this.onCloseClick)},onExpandClick:function(t){var e=t.target||t.srcElement;this.toggleExpand(e)},_expandClick:function(t,e){"on"===e?L.DomEvent.on(t,"click",this.onExpandClick,this):L.DomEvent.off(t,"click",this.onExpandClick)},_getTab:function(t){for(var e=0;e<this._tabitems.length;e++)if(this._tabitems[e]._id===t)return this._tabitems[e];return null},_panMap:function(t){var e=Number.parseInt(L.DomUtil.getStyle(this._container,"max-width"))/2;("open"===t&&"left"===this.options.position||"close"===t&&"right"===this.options.position)&&(e*=-1),this._map.panBy([e,0],{duration:.25})}}),L.control.sidebar=function(t,e){return new L.Control.Sidebar(t,e)};
L.Canvas.prototype._updateTriangle=function(t){var i,n;return!this._drawing||t._empty()?null:(i=t._point,n=this._ctx,wh=t._width/2,hh=t._height/2,r=0!==t._rotation?t._rotation*(2*Math.PI)/360:0,n.save(),n.translate(i.x,i.y),n.rotate(r),n.beginPath(),n.moveTo(0,-hh),n.lineTo(wh,2*hh),n.lineTo(-wh,2*hh),n.closePath(),n.restore(),void this._fillStroke(n,t))},L.TriangleMarker=L.Path.extend({options:{fill:!0,width:12,height:12,rotation:0,renderer:L.canvas()},initialize:function(t,i){L.setOptions(this,i),this._latlng=L.latLng(t),this._width=this.options.width,this._height=this.options.height,this._rotation=this.options.rotation,this._renderer=this.options.renderer},setLatLng:function(t){return this._latlng=L.latLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setWidth:function(t){return this.options.width=this._width=t,this.redraw()},setHeight:function(t){return this.options.height=this._height=t,this.redraw()},setRotation:function(t){return this.options.rotation=this._rotation=t,this.redraw()},getWidth:function(){return this._width},getHeight:function(){return this._height},getRotation:function(){return this._rotation},setStyle:function(t){var i=t&&t.width||this._width,n=t&&t.height||this._height;return L.Path.prototype.setStyle.call(this,t),this.setWidth(i),this.setHeight(n),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._width/2,i=this._height/2,n=this._clickTolerance(),h=[t+n,i+n];this._pxBounds=new L.Bounds(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateTriangle(this)},_empty:function(){return this._width&&this._height&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return this._pxBounds&&this._pxBounds.contains(t)}}),L.triangleMarker=function(t,i){return new L.TriangleMarker(t,i)};
!function(t,i){"function"==typeof define&&define.amd?define(["leaflet"],t):"object"==typeof exports&&("undefined"!=typeof i&&i.L?module.exports=t(L):module.exports=t(require("leaflet"))),"undefined"!=typeof i&&i.L&&(i.L.Control.Locate=t(L))}(function(t){var i=t.Control.extend({options:{position:"topleft",layer:void 0,setView:"untilPan",keepCurrentZoomLevel:!1,flyTo:!1,clickBehavior:{inView:"stop",outOfView:"setView"},returnToPrevBounds:!1,cacheLocation:!0,drawCircle:!0,drawMarker:!0,markerClass:t.CircleMarker,circleStyle:{color:"#136AEC",fillColor:"#136AEC",fillOpacity:.15,weight:2,opacity:.5},markerStyle:{color:"#136AEC",fillColor:"#2A93EE",fillOpacity:.7,weight:2,opacity:.9,radius:5},followCircleStyle:{},followMarkerStyle:{},icon:"fa fa-map-marker",iconLoading:"fa fa-spinner fa-spin",iconElementTag:"span",circlePadding:[0,0],metric:!0,onLocationError:function(t,i){alert(t.message)},onLocationOutsideMapBounds:function(t){t.stop(),alert(t.options.strings.outsideMapBoundsMsg)},showPopup:!0,strings:{title:"Show me where I am",metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point",outsideMapBoundsMsg:"You seem located outside the boundaries of the map"},locateOptions:{maxZoom:1/0,watch:!0,setView:!1}},initialize:function(i){for(var s in i)"object"==typeof this.options[s]?t.extend(this.options[s],i[s]):this.options[s]=i[s];this.options.followMarkerStyle=t.extend({},this.options.markerStyle,this.options.followMarkerStyle),this.options.followCircleStyle=t.extend({},this.options.circleStyle,this.options.followCircleStyle)},onAdd:function(i){var s=t.DomUtil.create("div","leaflet-control-locate leaflet-bar leaflet-control");return this._layer=this.options.layer||new t.LayerGroup,this._layer.addTo(i),this._event=void 0,this._prevBounds=null,this._link=t.DomUtil.create("a","leaflet-bar-part leaflet-bar-part-single",s),this._link.title=this.options.strings.title,this._icon=t.DomUtil.create(this.options.iconElementTag,this.options.icon,this._link),t.DomEvent.on(this._link,"click",t.DomEvent.stopPropagation).on(this._link,"click",t.DomEvent.preventDefault).on(this._link,"click",this._onClick,this).on(this._link,"dblclick",t.DomEvent.stopPropagation),this._resetVariables(),this._map.on("unload",this._unload,this),s},_onClick:function(){if(this._justClicked=!0,this._userPanned=!1,this._active&&!this._event)this.stop();else if(this._active&&void 0!==this._event){var t=this._map.getBounds().contains(this._event.latlng)?this.options.clickBehavior.inView:this.options.clickBehavior.outOfView;switch(t){case"setView":this.setView();break;case"stop":if(this.stop(),this.options.returnToPrevBounds){var i=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;i.bind(this._map)(this._prevBounds)}}}else this.options.returnToPrevBounds&&(this._prevBounds=this._map.getBounds()),this.start();this._updateContainerStyle()},start:function(){this._activate(),this._event&&(this._drawMarker(this._map),this.options.setView&&this.setView()),this._updateContainerStyle()},stop:function(){this._deactivate(),this._cleanClasses(),this._resetVariables(),this._removeMarker()},_activate:function(){this._active||(this._map.locate(this.options.locateOptions),this._active=!0,this._map.on("locationfound",this._onLocationFound,this),this._map.on("locationerror",this._onLocationError,this),this._map.on("dragstart",this._onDrag,this))},_deactivate:function(){this._map.stopLocate(),this._active=!1,this.options.cacheLocation||(this._event=void 0),this._map.off("locationfound",this._onLocationFound,this),this._map.off("locationerror",this._onLocationError,this),this._map.off("dragstart",this._onDrag,this)},setView:function(){if(this._drawMarker(),this._isOutsideMapBounds())this._event=void 0,this.options.onLocationOutsideMapBounds(this);else if(this.options.keepCurrentZoomLevel){var t=this.options.flyTo?this._map.flyTo:this._map.panTo;t.bind(this._map)([this._event.latitude,this._event.longitude])}else{var t=this.options.flyTo?this._map.flyToBounds:this._map.fitBounds;t.bind(this._map)(this._event.bounds,{padding:this.options.circlePadding,maxZoom:this.options.locateOptions.maxZoom})}},_drawMarker:function(){void 0===this._event.accuracy&&(this._event.accuracy=0);var i=this._event.accuracy,s=this._event.latlng;if(this.options.drawCircle){var o=this._isFollowing()?this.options.followCircleStyle:this.options.circleStyle;this._circle?this._circle.setLatLng(s).setRadius(i).setStyle(o):this._circle=t.circle(s,i,o).addTo(this._layer)}var e,n;if(this.options.metric?(e=i.toFixed(0),n=this.options.strings.metersUnit):(e=(3.2808399*i).toFixed(0),n=this.options.strings.feetUnit),this.options.drawMarker){var a=this._isFollowing()?this.options.followMarkerStyle:this.options.markerStyle;this._marker?(this._marker.setLatLng(s),this._marker.setStyle&&this._marker.setStyle(a)):this._marker=new this.options.markerClass(s,a).addTo(this._layer)}var l=this.options.strings.popup;this.options.showPopup&&l&&this._marker&&this._marker.bindPopup(t.Util.template(l,{distance:e,unit:n}))._popup.setLatLng(s)},_removeMarker:function(){this._layer.clearLayers(),this._marker=void 0,this._circle=void 0},_unload:function(){this.stop(),this._map.off("unload",this._unload,this)},_onLocationError:function(t){3==t.code&&this.options.locateOptions.watch||(this.stop(),this.options.onLocationError(t,this))},_onLocationFound:function(t){if((!this._event||this._event.latlng.lat!==t.latlng.lat||this._event.latlng.lng!==t.latlng.lng||this._event.accuracy!==t.accuracy)&&this._active){switch(this._event=t,this._drawMarker(),this._updateContainerStyle(),this.options.setView){case"once":this._justClicked&&this.setView();break;case"untilPan":this._userPanned||this.setView();break;case"always":this.setView();break;case!1:}this._justClicked=!1}},_onDrag:function(){this._event&&(this._userPanned=!0,this._updateContainerStyle(),this._drawMarker())},_isFollowing:function(){return!!this._active&&("always"===this.options.setView||("untilPan"===this.options.setView?!this._userPanned:void 0))},_isOutsideMapBounds:function(){return void 0!==this._event&&(this._map.options.maxBounds&&!this._map.options.maxBounds.contains(this._event.latlng))},_updateContainerStyle:function(){this._container&&(this._active&&!this._event?this._setClasses("requesting"):this._isFollowing()?this._setClasses("following"):this._active?this._setClasses("active"):this._cleanClasses())},_setClasses:function(i){"requesting"==i?(t.DomUtil.removeClasses(this._container,"active following"),t.DomUtil.addClasses(this._container,"requesting"),t.DomUtil.removeClasses(this._icon,this.options.icon),t.DomUtil.addClasses(this._icon,this.options.iconLoading)):"active"==i?(t.DomUtil.removeClasses(this._container,"requesting following"),t.DomUtil.addClasses(this._container,"active"),t.DomUtil.removeClasses(this._icon,this.options.iconLoading),t.DomUtil.addClasses(this._icon,this.options.icon)):"following"==i&&(t.DomUtil.removeClasses(this._container,"requesting"),t.DomUtil.addClasses(this._container,"active following"),t.DomUtil.removeClasses(this._icon,this.options.iconLoading),t.DomUtil.addClasses(this._icon,this.options.icon))},_cleanClasses:function(){t.DomUtil.removeClass(this._container,"requesting"),t.DomUtil.removeClass(this._container,"active"),t.DomUtil.removeClass(this._container,"following"),t.DomUtil.removeClasses(this._icon,this.options.iconLoading),t.DomUtil.addClasses(this._icon,this.options.icon)},_resetVariables:function(){this._active=!1,this._justClicked=!1,this._userPanned=!1}});return t.control.locate=function(i){return new t.Control.Locate(i)},function(){var i=function(i,s,o){o=o.split(" "),o.forEach(function(o){t.DomUtil[i].call(this,s,o)})};t.DomUtil.addClasses=function(t,s){i("addClass",t,s)},t.DomUtil.removeClasses=function(t,s){i("removeClass",t,s)}}(),i},window);
!function(){function t(t){var i=[t.latLng([90,180]),t.latLng([90,-180]),t.latLng([-90,-180]),t.latLng([-90,180])];if(t.version<"1.0.0")t.extend(t.Polygon.prototype,{initialize:function(n,o){if(i=o.worldLatLngs?o.worldLatLngs:i,o&&o.invert&&!o.invertMultiPolygon){var s=[];s.push(i),s.push(n[0]),n=s}t.Polyline.prototype.initialize.call(this,n,o),this._initWithHoles(n)},getBounds:function(){return this.options.invert?new t.LatLngBounds(this._holes):new t.LatLngBounds(this.getLatLngs())}}),t.extend(t.MultiPolygon.prototype,{initialize:function(t,n){if(i=n.worldLatLngs?n.worldLatLngs:i,this._layers={},this._options=n,n.invert){n.invertMultiPolygon=!0;var o=[];o.push(i);for(var s in t)o.push(t[s][0]);t=[o]}this.setLatLngs(t)}});else{var o={toGeoJSON:t.Polygon.prototype.toGeoJSON};t.extend(t.Polygon.prototype,{_setLatLngs:function(o){if(this._originalLatLngs=o,n(this._originalLatLngs)&&(this._originalLatLngs=[this._originalLatLngs]),this.options.invert){i=this.options.worldLatLngs?this.options.worldLatLngs:i;var s=[];s.push(i);for(var e in o)s.push(o[e]);o=[s]}t.Polyline.prototype._setLatLngs.call(this,o)},getBounds:function(){return this._originalLatLngs?new t.LatLngBounds(this._originalLatLngs):new t.LatLngBounds(this.getLatLngs())},getLatLngs:function(){return this._originalLatLngs},toGeoJSON:function(i){if(!this.options.invert)return o.toGeoJSON.call(this,i);var s=!n(this._originalLatLngs),e=s&&!n(this._originalLatLngs[0]),a=t.GeoJSON.latLngsToCoords(this._originalLatLngs,e?2:s?1:0,!0,i);return s||(a=[a]),t.GeoJSON.getFeature(this,{type:(e?"Multi":"")+"Polygon",coordinates:a})}})}}var n=L.LineUtil.isFlat?L.LineUtil.isFlat:L.LineUtil._flat;"function"==typeof define&&define.amd?define(["leaflet"],function(n){t(n)}):t(L)}();
"use strict";L.Control.StravaSegments=L.Control.extend({options:{runningIcon:"fa-trophy",runningTitle:"Show Strava running segments",bikingIcon:"fa-bicycle",bikingTitle:"Show Strava biking segments",loadingIcon:"fa-spinner fa-pulse",loadingTitle:"Loadingâ¦",stravaToken:null},onError:function(t){console.warn("Error getting Strava segments:",t)},onAdd:function(t){var e=this;return this.stravaLayer=new L.LayerGroup([],{attribution:'<a href="https://strava.com">Strava</a>'}),this.runningButton=new L.easyButton({states:[{stateName:"default",icon:e.options.runningIcon,onClick:function(){e.showSegments(t,this,"running")},title:e.options.runningTitle},{stateName:"loading",icon:e.options.loadingIcon,title:e.options.loadingTitle}]}),this.bikingButton=new L.easyButton({states:[{stateName:"default",icon:e.options.bikingIcon,onClick:function(){e.showSegments(t,this,"biking")},title:e.options.bikingTitle},{stateName:"loading",icon:e.options.loadingIcon,title:e.options.loadingTitle}]}),new L.easyBar([this.bikingButton,this.runningButton]).addTo(t),t.on("zoom",function(t){var n=t.target;e.toggleButtonsState(n)}),this.toggleButtonsState(t),new L.DomUtil.create("div")},toggleButtonsState:function(t){var e=t.getZoom()<13;e?(this.bikingButton.disable(),this.runningButton.disable()):(this.bikingButton.enable(),this.runningButton.enable())},computeAngle:function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},showSegments:function(t,e,n){e.state("loading"),this.fetchSegments(t,e,n,t.getBounds())},fetchSegments:function(t,e,n,o){var a=this,i="https://www.strava.com/api/v3/segments/explore?bounds="+o.getSouth()+","+o.getWest()+","+o.getNorth()+","+o.getEast()+"&activity_type="+n;this.stravaLayer.addTo(t),this.get(i,L.bind(function(i,r){if(i)return e.state("default"),void a.onError(i);var s=JSON.parse(r).segments;10===s.length?(a.fetchSegments(t,e,n,L.latLngBounds(o.getSouthWest(),o.getCenter())),a.fetchSegments(t,e,n,L.latLngBounds(o.getSouthEast(),o.getCenter())),a.fetchSegments(t,e,n,L.latLngBounds(o.getNorthEast(),o.getCenter())),a.fetchSegments(t,e,n,L.latLngBounds(o.getNorthWest(),o.getCenter()))):e.state("default");var g=!0,u=!1,l=void 0;try{for(var c,d=s[Symbol.iterator]();!(g=(c=d.next()).done);g=!0){var h=c.value;if(a.stravaLayer.getLayers().map(function(t){return t.options.id}).indexOf(h.id)===-1){var f=polyline.decode(h.points),v="running"===n?"red":"blue",m=new L.TriangleMarker(f[0],{width:12,height:10,rotation:a.computeAngle(L.point(f[0]),L.point(f[1])),color:v}),p=new L.Circle(f[f.length-1],{radius:30,color:v}),y=new L.Polyline(f,{id:h.id,weight:3,color:v});y.on("mouseover",function(t){t.target.setStyle({weight:5})}),y.on("mouseout",function(t){t.target.setStyle({weight:3})});var S="<h4>"+h.name+"</h4>";S+="Distance: "+h.distance+"m, hill","NC"!=h.climb_category_desc&&(S+=" (cat. "+h.climb_category_desc+")"),S+=": "+h.elev_difference+"m (avg "+h.avg_grade+"%)",a.stravaLayer.addLayer(m),a.stravaLayer.addLayer(p),a.stravaLayer.addLayer(y.bindTooltip(S))}}}catch(w){u=!0,l=w}finally{try{!g&&d["return"]&&d["return"]()}finally{if(u)throw l}}}))},get:function(t,e){var n=this;if(!this.options.stravaToken)return void e("Strava API token no set.");var o=new XMLHttpRequest;o.open("GET",t,!0),o.setRequestHeader("Authorization","Bearer "+this.options.stravaToken),o.onload=function(){200!==o.status&&0!==o.status||!o.responseText?e(n.getError(o)):e(null,o.responseText)},o.onerror=function(){e(n.getError(o))};try{o.send()}catch(a){e(a)}},getError:function(t){var e="no response from server";return t.responseText?e=t.responseText:(t.status||t.statusText)&&(e=t.status+": "+t.statusText),e}}),L.control.stravaSegments=function(t){return new L.Control.StravaSegments(t)};
L.Control.StandardAttribution=L.Control.Attribution,L.Control.PermalinkAttribution=L.Control.Attribution.extend({onAdd:function(t){var o=L.Control.StandardAttribution.prototype.onAdd.call(this,t);return t.on("moveend",this._update,this),o},onRemove:function(t){t.off("moveend",this._update),L.Control.StandardAttribution.prototype.onRemove.call(this,t)},_update:function(){if(this._map){var t=[];for(var o in this._attributions)if(this._attributions[o]){if(o.indexOf("/openstreetmap.org")>0||o.indexOf("/www.openstreetmap.org")>0){var i="http://www.openstreetmap.org/#map={zoom}/{lat}/{lon}";if(o=o.replace(/(['"])http[^'"]+openstreetmap.org[^'"]*(['"])/,"$1"+i+"$2"),this._map.options.attributionEditLink){var n=i.replace("#","edit#");o=o.replace(/(openstreetmap.org[^'"]*(['"])[^>]*>[^<]+<\/a>)/,"$1 (<a href=$2"+n+"$2 target=$2osmedit$2>Edit</a>)")}}var r=this._map.getCenter();o=o.replace(/\{zoom\}/g,this._map.getZoom()).replace(/\{lat\}/g,L.Util.formatNum(r.lat,4)).replace(/\{lon\}/g,L.Util.formatNum(r.lng,4)),t.push(o)}var e=[];this.options.prefix&&e.push(this.options.prefix),t.length&&e.push(t.join(", ")),this._container.innerHTML=e.join(" | ")}}}),L.control.permalinkAttribution=function(t){return new L.Control.PermalinkAttribution(t)},L.Map.mergeOptions({attributionEditLink:!1}),L.Control.Attribution=L.Control.PermalinkAttribution,L.control.standardAttribution=L.control.attribution,L.control.attribution=L.control.permalinkAttribution;
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(this,function(){"use strict";function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e,n){return function(){e.apply(n,arguments)}}function o(e){if(!(this instanceof o))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function r(e,n){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(n):(e._handled=!0,void o._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._state?i:f)(n.promise,e._value);var o;try{o=t(e._value)}catch(r){return void f(n.promise,r)}i(n.promise,o)}))}function i(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var r=n.then;if(n instanceof o)return e._state=3,e._value=n,void u(e);if("function"==typeof r)return void l(t(r,n),e)}e._state=1,e._value=n,u(e)}catch(i){f(e,i)}}function f(e,n){e._state=2,e._value=n,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&o._immediateFn(function(){e._handled||o._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;n<t;n++)r(e,e._deferreds[n]);e._deferreds=null}function c(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function l(e,n){var t=!1;try{e(function(e){t||(t=!0,i(n,e))},function(e){t||(t=!0,f(n,e))})}catch(o){if(t)return;t=!0,f(n,o)}}var a=setTimeout;o.prototype["catch"]=function(e){return this.then(null,e)},o.prototype.then=function(e,t){var o=new this.constructor(n);return r(this,new c(e,t,o)),o},o.prototype["finally"]=e,o.all=function(e){return new o(function(n,t){function o(e,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0===--i&&n(r)}catch(c){t(c)}}if(!e||"undefined"==typeof e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;f<r.length;f++)o(f,r[f])})},o.resolve=function(e){return e&&"object"==typeof e&&e.constructor===o?e:new o(function(n){n(e)})},o.reject=function(e){return new o(function(n,t){t(e)})},o.race=function(e){return new o(function(n,t){for(var o=0,r=e.length;o<r;o++)e[o].then(n,t)})},o._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){a(e,0)},o._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var s=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"Promise"in s?s.Promise.prototype["finally"]||(s.Promise.prototype["finally"]=e):s.Promise=o});
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.WHATWGFetch={})}(this,function(t){"use strict";function e(t){return t&&DataView.prototype.isPrototypeOf(t)}function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function o(t){return"string"!=typeof t&&(t=String(t)),t}function n(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function s(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function f(t){var e=new FileReader,r=a(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=a(e);return e.readAsText(t),r}function h(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join("")}function d(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:v.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:v.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():v.arrayBuffer&&v.blob&&e(t)?(this._bodyArrayBuffer=d(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):v.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||A(t))?this._bodyArrayBuffer=d(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob&&(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(h(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function l(t,e){e=e||{};var r=e.body;if(t instanceof l){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=y(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function b(t){var e=new i,r=t.replace(/\r?\n[\t ]+/g," ");return r.split(/\r?\n/).forEach(function(t){var r=t.split(":"),o=r.shift().trim();if(o){var n=r.join(":").trim();e.append(o,n)}}),e}function m(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}function w(e,r){return new Promise(function(o,n){function i(){a.abort()}var s=new l(e,r);if(s.signal&&s.signal.aborted)return n(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:b(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;o(new m(e,t))},a.onerror=function(){n(new TypeError("Network request failed"))},a.ontimeout=function(){n(new TypeError("Network request failed"))},a.onabort=function(){n(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&v.blob&&(a.responseType="blob"),s.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),s.signal&&(s.signal.addEventListener("abort",i),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",i)}),a.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})}var v={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(v.arrayBuffer)var E=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],A=ArrayBuffer.isView||function(t){return t&&E.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,e){t=r(t),e=o(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},i.prototype["delete"]=function(t){delete this.map[r(t)]},i.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},i.prototype.set=function(t,e){this.map[r(t)]=o(e)},i.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),n(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),n(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),n(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];l.prototype.clone=function(){return new l(this,{body:this._bodyInit})},c.call(l.prototype),c.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(x.indexOf(e)===-1)throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.DOMException=self.DOMException;try{new t.DOMException}catch(g){t.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=i,self.Request=l,self.Response=m),t.Headers=i,t.Request=l,t.Response=m,t.fetch=w,Object.defineProperty(t,"__esModule",{value:!0})});
!function(){var n=function(){var n=null;return"maxTouchPoints"in navigator?n=navigator.maxTouchPoints>0:window.matchMedia&&window.matchMedia("(any-pointer:coarse),(any-pointer:fine),(any-pointer:none)").matches?n=window.matchMedia("(any-pointer:coarse)").matches:"msMaxTouchPoints"in navigator&&(n=navigator.msMaxTouchPoints>0),n}(),o=null!==n,a=o?n:L.Browser.touch;BR.Browser={touchScreen:n,touchScreenDetectable:o,touch:a}}();
BR.Util={get:function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onload=function(){200!==n.status&&0!==n.status||!n.responseText?t(BR.Util.getError(n)):t(null,n.responseText)},n.onerror=function(){t(BR.Util.getError(n))};try{n.send()}catch(r){t(r)}},getError:function(e){var t=i18next.t("warning.no-response");return e.responseText?t=e.responseText:(e.status||e.statusText)&&(t=e.status+": "+e.statusText),new Error(t)},localStorageAvailable:function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),!0}catch(n){return!1}},getResponsiveBreakpoint:function(){var e={"1xs":"d-none","2sm":"d-sm-none","3md":"d-md-none","4lg":"d-lg-none","5xl":"d-xl-none"},t="",n=$("<div>");n.appendTo($("body"));for(var r=Object.keys(e).length-1;r>=0&&(t=Object.keys(e)[r],n.addClass(e[t]),!n.is(":hidden"));r--);return n.remove(),t},keyboardShortcutsAllowed:function(e){return!e.repeat&&("number"!=document.activeElement.type&&"text"!=document.activeElement.type&&"textarea"!=document.activeElement.type&&(!(e.ctrlKey||e.metaKey||e.altKey)&&(!$(".modal.show").length&&!$(".dropdown.show").length)))},sanitizeHTMLContent:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}};
BR.Map={initMap:function(){var t,e;L.setOptions(this,{shortcut:{locate:76}}),BR.keys=BR.keys||{};var o=19;t=new L.Map("map",{zoomControl:!1,worldCopyJump:!0,minZoom:0,maxZoom:o,tap:!1}),BR.Util.getResponsiveBreakpoint()>="3md"&&L.control.zoom({zoomInTitle:i18next.t("keyboard.generic-shortcut",{action:"$t(map.zoomInTitle)",key:"+"}),zoomOutTitle:i18next.t("keyboard.generic-shortcut",{action:"$t(map.zoomOutTitle)",key:"-"})}).addTo(t),t.restoreView()||t.setView(BR.conf.initialMapLocation||[50.99,9.86],BR.conf.initialMapZoom||5);var a=$(t.getContainer()).outerWidth()>=400?i18next.t("map.attribution-osm-long"):i18next.t("map.attribution-osm-short"),r=BR.conf.privacyPolicyUrl||"https://brouter.de/privacypolicy.html";t.attributionControl.setPrefix('&copy; <a target="_blank" href="https://www.openstreetmap.org/copyright">'+a+'</a> &middot; <a href="" data-toggle="modal" data-target="#credits">'+i18next.t("map.copyright")+'</a> &middot; <a target="_blank" href="'+r+'">'+i18next.t("map.privacy")+"</a>"),$("#credits").on("show.bs.modal",function(t){BR.Map._renderLayerCredits(e._layers)}),(new L.Control.PermalinkAttribution).addTo(t),t.attributionControl.setPrefix(!1);var n=BR.layersConfig(t),s=n.getBaseLayers(),l=n.getOverlays();if(BR.keys.bing&&(s[i18next.t("map.layer.bing")]=new BR.BingLayer(BR.keys.bing)),BR.keys.digitalGlobe){var c=new L.tileLayer("https://{s}.tiles.mapbox.com/v4/digitalglobe.nal0g75k/{z}/{x}/{y}.png?access_token="+BR.keys.digitalGlobe,{minZoom:1,maxZoom:19,attribution:'&copy; <a href="https://www.digitalglobe.com/platforms/mapsapi">DigitalGlobe</a> (<a href="https://bit.ly/mapsapiview">Terms of Use</a>)'});s[i18next.t("map.layer.digitalglobe")]=c}BR.conf.clearBaseLayers&&(s={});for(i in BR.conf.baseLayers)BR.conf.baseLayers.hasOwnProperty(i)&&(s[i]=L.tileLayer(BR.conf.baseLayers[i]));for(i in BR.conf.overlays)BR.conf.overlays.hasOwnProperty(i)&&(l[i]=L.tileLayer(BR.conf.overlays[i]));e=BR.layersTab(n,s,l).addTo(t);var p="isSecureContext"in window?isSecureContext:"https:"===location.protocol;if(p){var d=L.control.locate({strings:{title:i18next.t("keyboard.generic-shortcut",{action:"$t(map.locate-me)",key:"L"})},icon:"fa fa-location-arrow",iconLoading:"fa fa-spinner fa-pulse"}).addTo(t);L.DomEvent.addListener(document,"keydown",function(t){BR.Util.keyboardShortcutsAllowed(t)&&t.keyCode===this.options.shortcut.locate&&d.start()},this)}return L.control.scale().addTo(t),(new BR.Layers).init(t,e,s,l),BR.debug=BR.debug||{},BR.debug.map=t,{map:t,layersControl:e}},_renderLayerCredits:function(t){var e,o,a,i,r,n=document.getElementById("credits-maps");for(L.DomUtil.empty(n),e=0;e<t.length;e++)o=t[e],r=o.layer.options.attribution,r&&(a=document.createElement("dt"),a.innerHTML=o.name,i=document.createElement("dd"),i.innerHTML=o.layer.options.attribution,n.appendChild(a),n.appendChild(i))}};
BR.LayersConfig=L.Class.extend({defaultBaseLayers:BR.confLayers.defaultBaseLayers,defaultOverlays:BR.confLayers.defaultOverlays,legacyNameToIdMap:BR.confLayers.legacyNameToIdMap,builtInLayers:["route-quality"],initialize:function(e){this._map=e,this._addLeafletProvidersLayers(),this._customizeLayers(),this.loadDefaultLayers(),this._addLanguageDefaultLayer()},loadDefaultLayers:function(){if(BR.Util.localStorageAvailable()){var e=localStorage.getItem("map/defaultLayers");if(e){var a=JSON.parse(e);this.defaultBaseLayers=a.baseLayers,this.defaultOverlays=a.overlays}}},storeDefaultLayers:function(e,a){if(BR.Util.localStorageAvailable()){var r={baseLayers:e,overlays:a};localStorage.setItem("map/defaultLayers",JSON.stringify(r))}},_addLeafletProvidersLayers:function(){for(var e=BR.confLayers.leafletProvidersIncludeList,a=0;a<e.length;a++){var r=e[a],t={geometry:null,properties:{id:r,name:r.replace("."," "),dataSource:"leaflet-providers"},type:"Feature"};BR.layerIndex[r]=t}},_customizeLayers:function(){var e=BR.confLayers.getPropertyOverrides();for(id in e){var a=BR.layerIndex[id];if(a){var r=e[id];for(key in r){var t=r[key];a.properties[key]=t}}else console.error("Layer not found: "+id)}BR.layerIndex.MtbMap.geometry=BR.confLayers.europeGeofabrik,BR.layerIndex[1069].geometry=BR.confLayers.europeGeofabrik,BR.layerIndex["OpenStreetMap.CH"].geometry=BR.confLayers.switzerlandPadded,BR.layerIndex[1017].geometry=BR.confLayers.osmapaPl},_addLanguageDefaultLayer:function(){var e,a={};for(e=0;e<BR.confLayers.languageDefaultLayers.length;e++){var r=BR.confLayers.languageDefaultLayers[e],t=BR.layerIndex[r];if(t){var o=t.properties.language_code||t.properties.pseudo_language_code;o&&(a[o]=r)}}for(e=0;e<i18next.languages.length;e++){var n=i18next.languages[e],i=a[n];if(i){this.defaultBaseLayers.unshift(i);break}}},isDefaultLayer:function(e,a){var r=!1;return r=a?this.defaultOverlays.indexOf(e)>-1:this.defaultBaseLayers.indexOf(e)>-1},getBaseLayers:function(){return this._getLayers(this.defaultBaseLayers)},getOverlays:function(){return this._getLayers(this.defaultOverlays)},_getLayers:function(e){for(var a={},r=0;r<e.length;r++){var t=e[r],o=BR.layerIndex[t];if(o){var n=this.getKeyName(o.properties.url);(!n||n&&BR.keys[n.name])&&(a[o.properties.name]=this.createLayer(o))}else console.error("Layer not found: "+t)}return a},getKeyName:function(e){var a,r,t=null,o="keys_",n=new RegExp("{"+o+"([^}]*)}");return e?(a=e.match(n),a&&(r=a[1],t={name:r,urlVar:o+r}),t):t},createLayer:function(e){function a(e){var a=/{switch:[^}]*}/,r=/{zoom}/g,t=e.replace(a,"{s}");return t=t.replace(r,"{z}")}function r(e){var a="abc",r=/{switch:([^}]*)}/,t=e.match(r);return t&&(a=t[1].split(",")),a}function t(e){var a="",r=e.attribution;return r&&(r.html?a=r.html:r.url&&r.text?a='<a href="'+r.url+'" target="_blank" rel="noopener">'+r.text+"</a>":r.text&&(a=r.text)),a||console.warn("No attribution: "+e.id),a}var o,n=e.properties,i=n.url,s={maxZoom:this._map.getMaxZoom(),bounds:e.geometry&&!n.worldTiles?L.geoJson(e.geometry).getBounds():null};n.mapUrl&&(s.mapLink='<a target="_blank" href="'+n.mapUrl+'">'+(n.nameShort||n.name)+"</a>"),n.attribution&&(s.attribution=n.attribution);var l=this.getKeyName(i);if(l&&BR.keys[l.name]&&(s[l.urlVar]=BR.keys[l.name]),"leaflet-providers"===n.dataSource){o=L.tileLayer.provider(n.id);var u=L.Util.extend(s,{maxNativeZoom:o.options.maxZoom});L.setOptions(o,u)}else if("LayersCollection"===n.dataSource)o=L.tileLayer(i,L.Util.extend(s,{minZoom:n.minZoom||0,maxNativeZoom:n.maxZoom})),n.subdomains&&(o.subdomains=n.subdomains);else{var y=i,i=a(y),f=L.Util.extend(s,{minZoom:n.min_zoom||0,maxNativeZoom:n.max_zoom,subdomains:r(y),attribution:t(n)});o=n.type&&"wms"===n.type?L.tileLayer.wms(i,L.Util.extend(f,{layers:n.layers,format:n.format})):L.tileLayer(i,f)}var d=function(){return this.options.mapLink};return o.getAttribution=d,o.id=n.id,o}}),BR.layersConfig=function(e){return new BR.LayersConfig(e)};
L.BRouter=L.Class.extend({statics:{URL_TEMPLATE:"/brouter?lonlats={lonlats}&profile={profile}&alternativeidx={alternativeidx}&format={format}&nogos={nogos}&polylines={polylines}&polygons={polygons}",URL_PROFILE_UPLOAD:BR.conf.host+"/brouter/profile",PRECISION:6,NUMBER_SEPARATOR:",",GROUP_SEPARATOR:"|",ABORTED_ERROR:"aborted",CUSTOM_PREFIX:"custom_",isCustomProfile:function(t){return t&&t.substring(0,7)===L.BRouter.CUSTOM_PREFIX}},options:{},initialize:function(t){L.setOptions(this,t),this.queue=async.queue(L.bind(function(t,e){this.getRoute(t.segment,e)},this),1),this.queue.kill=function(){var t=this.tasks;this.drain=null,this.tasks=[],t.forEach(function(t){t.callback(L.BRouter.ABORTED_ERROR)})}},setOptions:function(t){L.setOptions(this,t)},getUrlParams:function(t,e,o,n){return params={},null!=this._getLonLatsString(t)&&(params.lonlats=this._getLonLatsString(t)),this.options.nogos&&this._getNogosString(this.options.nogos).length>0&&(params.nogos=this._getNogosString(this.options.nogos)),this.options.polylines&&this._getNogosPolylinesString(this.options.polylines).length>0&&(params.polylines=this._getNogosPolylinesString(this.options.polylines)),this.options.polygons&&this._getNogosPolygonsString(this.options.polygons).length>0&&(params.polygons=this._getNogosPolygonsString(this.options.polygons)),null!=this.options.profile&&(params.profile=this.options.profile),e&&null!=this._getLonLatsNameString(e)&&(params.pois=this._getLonLatsNameString(e)),o&&(params.circlego=o),params.alternativeidx=this.options.alternative,null!=n?params.format=n:(params.profile===BR.conf.profiles[0]&&delete params.profile,0==params.alternativeidx&&delete params.alternativeidx,params.profile&&L.BRouter.isCustomProfile(params.profile)&&delete params.profile),params},parseUrlParams:function(t){var e={};if(t.lonlats&&(e.lonlats=this._parseLonLats(t.lonlats)),t.nogos&&(e.nogos=this._parseNogos(t.nogos)),t.polylines&&(e.polylines=this._parseNogosPolylines(t.polylines)),t.polygons&&(e.polygons=this._parseNogosPolygons(t.polygons)),t.alternativeidx&&(e.alternative=t.alternativeidx),t.profile&&(e.profile=t.profile),t.pois&&(e.pois=this._parseLonLatNames(t.pois)),t.circlego){var o=t.circlego.split(",");3==o.length&&(o=[Number.parseFloat(o[0]),Number.parseFloat(o[1]),Number.parseInt(o[2])],e.circlego=o)}return e},getUrl:function(t,e,o,n,r,s){var i=this.getUrlParams(t,e,o,n),l=[];null!=i.lonlats&&i.lonlats.length>0&&l.push(L.Util.template("lonlats={lonlats}",i)),null!=i.pois&&i.pois.length>0&&l.push(L.Util.template("pois={pois}",i)),null!=i.circlego&&l.push(L.Util.template("circlego={circlego}",i)),null!=i.nogos&&l.push(L.Util.template("nogos={nogos}",i)),null!=i.polylines&&l.push(L.Util.template("polylines={polylines}",i)),null!=i.polygons&&l.push(L.Util.template("polygons={polygons}",i)),null!=i.profile&&l.push(L.Util.template("profile={profile}",i)),null!=i.alternativeidx&&l.push(L.Util.template("alternativeidx={alternativeidx}",i)),null!=i.format&&l.push(L.Util.template("format={format}",i)),r&&l.push(L.Util.template("trackname={trackname}",{trackname:r})),s&&l.push("exportWaypoints=1");var a=null!=n;return(a?BR.conf.host:"")+"/brouter?"+l.join("&")},getRoute:function(t,e){var o=this.getUrl(t,null,null,"geojson"),n=new XMLHttpRequest;return o?(n.open("GET",o,!0),n.onload=L.bind(this._handleRouteResponse,this,n,e),n.onerror=L.bind(function(t,e){e(BR.Util.getError(t))},this,n,e),void n.send()):e(new Error(i18next.t("warning.cannot-get-route")))},_handleRouteResponse:function(t,e){var o,n;if(200===t.status&&t.responseText&&"application/vnd.geo+json"===t.getResponseHeader("Content-Type").split(";")[0])try{return n=JSON.parse(t.responseText),o=this._assignFeatures(L.geoJSON(n).getLayers()[0]),e(null,o)}catch(r){return console.error(r,t.responseText),e(r)}else e(BR.Util.getError(t))},getRouteSegment:function(t,e,o){this.queue.push({segment:[t,e]},o)},uploadProfile:function(t,e,o){var n=L.BRouter.URL_PROFILE_UPLOAD;xhr=new XMLHttpRequest,t&&(n+="/"+t),xhr.open("POST",n,!0),xhr.onload=L.bind(this._handleProfileResponse,this,xhr,o),xhr.onerror=function(t){var e=this;o(i18next.t("warning.upload-error",{error:e.statusText}))},xhr.send(e)},_assignFeatures:function(t){if(t.feature.properties.messages)for(var e=t.feature.properties.messages,o=t.getLatLngs(),n=o.length,r=0,s=1;s<e.length;s++)for(var i=this._getFeatureLatLng(e[s]),l=r;l<n;l++){var a=o[l],g=e[s];if(a.feature=this._getFeature(g),a.message=g,i.equals(o[l])){r=l+1;break}}return t},_getFeature:function(t){return{cost:{perKm:parseInt(t[4]),elev:parseInt(t[5]),turn:parseInt(t[6]),node:parseInt(t[7]),initial:parseInt(t[8])},distance:parseInt(t[3]),wayTags:t[9],nodeTags:t[10]}},_getFeatureLatLng:function(t){var e=t[0]/1e6,o=t[1]/1e6;return L.latLng(o,e)},_handleProfileResponse:function(t,e){var o;200===t.status&&t.responseText&&t.responseText.length>0?(o=JSON.parse(t.responseText),e(o.error,o.profileid)):e(i18next.t("warning.profile-error"))},_getLonLatsString:function(t){for(var e="",o=0;o<t.length;o++)e+=this._formatLatLng(t[o]),o<t.length-1&&(e+=L.BRouter.GROUP_SEPARATOR);return e},_parseLonLats:function(t){var e,o,n=[];if(!t)return n;e=t.split(L.BRouter.GROUP_SEPARATOR);for(var r=0;r<e.length;r++)o=e[r].split(L.BRouter.NUMBER_SEPARATOR),n.push(L.latLng(o[1],o[0]));return n},_getLonLatsNameString:function(t){for(var e="",o=0;o<t.length;o++)e+=this._formatLatLng(t[o].latlng),e+=L.BRouter.NUMBER_SEPARATOR,e+=encodeURIComponent(t[o].name),o<t.length-1&&(e+=L.BRouter.GROUP_SEPARATOR);return e},_parseLonLatNames:function(t){var e,o,n=[];if(!t)return n;e=t.split(L.BRouter.GROUP_SEPARATOR);for(var r=0;r<e.length;r++)o=e[r].split(L.BRouter.NUMBER_SEPARATOR),n.push({latlng:L.latLng(o[1],o[0]),name:decodeURIComponent(o[2])});return n},_getNogosString:function(t){for(var e,o="",n=0;n<t.length;n++)e=t[n],o+=this._formatLatLng(e.getLatLng()),o+=L.BRouter.NUMBER_SEPARATOR,o+=Math.round(e.getRadius()),void 0!==e.options.nogoWeight&&null!==e.options.nogoWeight&&e.options.nogoWeight!==-1&&(o+=L.BRouter.NUMBER_SEPARATOR,o+=e.options.nogoWeight),n<t.length-1&&(o+=L.BRouter.GROUP_SEPARATOR);return o},_parseNogos:function(t){var e,o,n=[];if(!t)return n;e=t.split(L.BRouter.GROUP_SEPARATOR);for(var r=0;r<e.length;r++){o=e[r].split(L.BRouter.NUMBER_SEPARATOR);var s={radius:o[2]};o.length>3&&(s.nogoWeight=o[3]),n.push(L.circle([o[1],o[0]],s))}return n},_getNogosPolylinesString:function(t){for(var e,o,n="",r=0;r<t.length;r++){e=t[r],o=e.getLatLngs();for(var s=0;s<o.length;s++)s>0&&(n+=L.BRouter.NUMBER_SEPARATOR),n+=this._formatLatLng(o[s]);void 0!==e.options.nogoWeight&&null!==e.options.nogoWeight&&e.options.nogoWeight!==-1&&(n+=L.BRouter.NUMBER_SEPARATOR,n+=e.options.nogoWeight),r<t.length-1&&(n+=L.BRouter.GROUP_SEPARATOR)}return n},_parseNogosPolylines:function(t){var e,o,n,r=[];e=t.split(L.BRouter.GROUP_SEPARATOR);for(var s=0;s<e.length;s++)if(o=e[s].split(L.BRouter.NUMBER_SEPARATOR),o.length>1){n=[];for(var i=0;i<o.length-1;){var l=Number.parseFloat(o[i++]),a=Number.parseFloat(o[i++]);n.push([a,l])}var g;i<o.length&&(g=Number.parseFloat(o[i++])),r.push(L.polyline(n,{nogoWeight:g}))}return r},_getNogosPolygonsString:function(t){for(var e,o,n="",r=0;r<t.length;r++){e=t[r],o=e.getLatLngs()[0];for(var s=0;s<o.length;s++)s>0&&(n+=L.BRouter.NUMBER_SEPARATOR),n+=this._formatLatLng(o[s]);void 0!==e.options.nogoWeight&&null!==e.options.nogoWeight&&e.options.nogoWeight!==-1&&(n+=L.BRouter.NUMBER_SEPARATOR,n+=e.options.nogoWeight),r<t.length-1&&(n+=L.BRouter.GROUP_SEPARATOR)}return n},_parseNogosPolygons:function(t){var e,o,n,r=[];e=t.split(L.BRouter.GROUP_SEPARATOR);for(var s=0;s<e.length;s++)if(o=e[s].split(L.BRouter.NUMBER_SEPARATOR),o.length>1){n=[];for(var i=0;i<o.length-1;){var l=Number.parseFloat(o[i++]),a=Number.parseFloat(o[i++]);n.push([a,l])}var g;i<o.length&&(g=Number.parseFloat(o[i++])),r.push(L.polygon(n,{nogoWeight:g}))}return r},_formatLatLng:function(t){var e="";return e+=L.Util.formatNum(t.lng||t[1],L.BRouter.PRECISION),e+=L.BRouter.NUMBER_SEPARATOR,e+=L.Util.formatNum(t.lat||t[0],L.BRouter.PRECISION)}}),L.bRouter=function(t){return new L.BRouter(t)};
BR.Track={getGeoJsonOptions:function(t){return{style:function(e){var r=t.getActiveBaseLayer().layer.id;return{color:"cyclosm"===r?"yellow":"blue",weight:4}},interactive:!1,filter:function(t){return!BR.Track.isPoiPoint(t)},pointToLayer:function(t,e){return L.marker(e,{interactive:!1,opacity:.7,zIndexOffset:-1e3})}}},addPoiMarkers:function(t,e){turf.featureEach(e,function(e,r){if(BR.Track.isPoiPoint(e)){var i=turf.getCoord(e),o=L.GeoJSON.coordsToLatLng(i),n="";e.properties&&e.properties.name&&(n=e.properties.name),t.addMarker(o,n)}})},isRouteWaypoint:function(t){var e=t.properties;if(e&&e.type){var r=e.type;if("from"===r||"via"===r||"to"===r)return!0}return!1},isPoiPoint:function(t){return"Point"===turf.getType(t)&&!BR.Track.isRouteWaypoint(t)}};
BR.TrackEdges=L.Class.extend({edges:[],initialize:function(e){this.edges=this.getTrackEdges(e)},getTrackEdges:function(e){var t,s,g,n,a,r,i,L,u=0,f=[];for(n=0;n<e.length;n++){for(t=e[n].feature.properties.messages,s=e[n].getLatLngs(),g=s.length,L=0,a=1;a<t.length;a++){for(r=this.getMessageLatLng(t[a]),i=L;i<g&&!r.equals(s[i]);i++);i===g&&(i=g-1),L=i+1,f.push(u+i)}u+=g}return f},getMessageLatLng:function(e){var t=e[0]/1e6,s=e[1]/1e6;return L.latLng(s,t)}});
BR.BingLayer=L.BingLayer.extend({options:{maxZoom:19,attribution:'<a target="_blank" href="https://www.bing.com/maps/">Bing Maps</a> (<a target="_blank" href="https://go.microsoft.com/?linkid=9710837">TOU</a>)'},initialize:function(o,i){L.BingLayer.prototype.initialize.call(this,o,i),this._logo=L.control({position:"bottomleft"}),this._logo.onAdd=function(o){return this._div=L.DomUtil.create("div","bing-logo"),this._div.innerHTML='<img src="https://www.microsoft.com/maps/images/branding/Bing%20logo%20white_50px-19px.png">',this._div}},onAdd:function(o){L.BingLayer.prototype.onAdd.call(this,o),o.addControl(this._logo)},onRemove:function(o){L.BingLayer.prototype.onRemove.call(this,o),o.removeControl(this._logo)}});
BR.CircleGoArea=L.Control.extend({circleLayer:null,outsideAreaRenderer:L.svg({padding:1}),options:{radius:1e3,shortcut:{draw:{enable:73,disable:27}}},initialize:function(t,e,i){this.routing=t,this.nogos=e,this.pois=i},onAdd:function(t){var e=this;this.map=t,this.circleLayer=L.layerGroup([]).addTo(t);var i=(this.options.radius/1e3).toFixed();this.drawButton=L.easyButton({states:[{stateName:"activate-circlego",icon:"fa-circle-o",onClick:function(){e.draw(!0)},title:i18next.t("keyboard.generic-shortcut",{action:i18next.t("map.draw-circlego-start",{radius:i}),key:"I"})},{stateName:"deactivate-circlego",icon:"fa-circle-o active",onClick:function(){e.draw(!1)},title:i18next.t("keyboard.generic-shortcut",{action:i18next.t("map.draw-circlego-stop",{radius:i}),key:"$t(keyboard.escape)"})}]}),t.on("routing:draw-start",function(){e.draw(!1)}),L.DomEvent.addListener(document,"keydown",this._keydownListener,this);var o=new L.DomUtil.create("div");return o},draw:function(t){this.drawButton.state(t?"deactivate-circlego":"activate-circlego"),t?(this.routing.draw(!1),this.pois.draw(!1),this.map.on("click",this.onMapClick,this),L.DomUtil.addClass(this.map.getContainer(),"circlego-draw-enabled")):(this.map.off("click",this.onMapClick,this),L.DomUtil.removeClass(this.map.getContainer(),"circlego-draw-enabled"))},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&(t.keyCode===this.options.shortcut.draw.disable?this.draw(!1):t.keyCode===this.options.shortcut.draw.enable&&this.draw(!0))},setNogoCircle:function(t){if(t){var e=this.circleToPolygon(t,this.options.radius),i=JSON.stringify(e);$("#nogoJSON").val(i),$("#nogoBuffer").val(0),this.nogos.uploadNogos();var o=JSON.parse(i);this.setOutsideArea(o)}else this.nogos.clear(),this.map.removeLayer(this.outsideArea)},setOutsideArea:function(t){var e=t.features[0].geometry.coordinates.concat(t.features[1].geometry.coordinates),i=[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]];t.features[0].geometry.coordinates=[i,e],t.features[0].geometry.type="Polygon",t.features.pop(),this.outsideArea&&this.map.removeLayer(this.outsideArea),this.outsideArea=L.geoJson(t,{renderer:this.outsideAreaRenderer,style:function(t){return{weight:2,color:"black",opacity:.4,fillColor:"black",fillOpacity:.4,className:"circlego-outside"}}}).on("click",L.DomEvent.stop).addTo(this.map)},onMapClick:function(t){this.setCircle([t.latlng.lng,t.latlng.lat],!1)},setCircle:function(t,e){var i=this,o=L.VectorMarkers.icon({icon:"home",markerColor:BR.conf.markerColors.circlego}),r=L.marker([t[1],t[0]],{icon:o,draggable:!0,name:name}).on("dragend",function(t){i.setNogoCircle([t.target.getLatLng().lng,t.target.getLatLng().lat])}).on("click",function(){var t="deactivate-circlego"==i.drawButton.state();t&&(i.circleLayer.removeLayer(r),i.setNogoCircle(void 0))});if(this.clear(),r.addTo(this.circleLayer),e){var a=this.circleToPolygon(t,this.options.radius);this.setOutsideArea(a)}else this.setNogoCircle(t);this.draw(!1)},clear:function(){this.circleLayer.clearLayers()},getButton:function(){return this.drawButton},getCircle:function(){var t=this.circleLayer.getLayers().map(function(t){return t.getLatLng()});return t&&t.length?[t[0].lng.toFixed(6),t[0].lat.toFixed(6),this.options.radius].join(","):null},toRadians:function(t){return t*Math.PI/180},toDegrees:function(t){return 180*t/Math.PI},offset:function(t,e,i){var o=this.toRadians(t[0]),r=this.toRadians(t[1]),a=e/6378137,s=Math.asin(Math.sin(r)*Math.cos(a)+Math.cos(r)*Math.sin(a)*Math.cos(i)),n=o+Math.atan2(Math.sin(i)*Math.sin(a)*Math.cos(r),Math.cos(a)-Math.sin(r)*Math.sin(s));return[this.toDegrees(n),this.toDegrees(s)]},circleToPolygon:function(t,e,i){for(var o=i?i:32,r=[],a=0;a<o;++a)r.push(this.offset(t,e,2*Math.PI*-a/o));return r.push(r[0]),{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r.slice(o/2-1)}},{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:r.slice(0,o/2+1)}}]}}}),BR.CircleGoArea.include(L.Evented.prototype);
BR.Elevation=L.Control.Elevation.extend({options:{width:$("#map").outerWidth(),margins:{top:20,right:30,bottom:30,left:60},theme:"steelblue-theme",shortcut:{toggle:69}},onAdd:function(t){var e=L.Control.Elevation.prototype.onAdd.call(this,t);return L.Browser.touch&&BR.Browser.touchScreenDetectable&&!BR.Browser.touchScreen&&(this._background.on("touchmove.drag",null).on("touchstart.drag",null).on("touchstart.focus",null),L.DomEvent.off(this._container,"touchend",this._dragEndHandler,this),this._background.on("mousemove.focus",this._mousemoveHandler.bind(this)).on("mouseout.focus",this._mouseoutHandler.bind(this)).on("mousedown.drag",this._dragStartHandler.bind(this)).on("mousemove.drag",this._dragHandler.bind(this)),L.DomEvent.on(this._container,"mouseup",this._dragEndHandler,this)),L.DomEvent.addListener(document,"keydown",this._keydownListener,this),e},addBelow:function(t){function e(t,e){e.appendChild(t)}this.options.width=$("#content").outerWidth(),null!=this.getContainer()&&this.remove(t),this.addTo(t),e(this.getContainer(),document.getElementById("elevation-chart"))},initCollapse:function(t){var e=this,o=function(){$("#elevation-btn").removeClass("active"),t._onResize(),this.id&&BR.Util.localStorageAvailable()&&!e.shouldRestoreChart&&localStorage.removeItem(this.id)},i=function(){$("#elevation-btn").addClass("active"),this.id&&BR.Util.localStorageAvailable()&&(localStorage[this.id]="true")};$("#elevation-chart").on("hidden.bs.collapse",o).on("shown.bs.collapse",i).each(function(){this.id&&BR.Util.localStorageAvailable()&&"true"===localStorage[this.id]&&(e.shouldRestoreChart=!0)})},update:function(t,e){if(this.clear(),this._mouseHeightFocus){var o=this._mouseHeightFocus[0][0].parentNode;o.parentNode.appendChild(o)}t&&t.getLatLngs().length>0?(this.shouldRestoreChart===!0&&$("#elevation-chart").collapse("show"),this.shouldRestoreChart=void 0,this.addData(t.toGeoJSON(),e),e.on("mouseout",this._hidePositionMarker.bind(this))):($("#elevation-chart").hasClass("show")&&(this.shouldRestoreChart=!0),$("#elevation-chart").collapse("hide"))},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&t.keyCode===this.options.shortcut.toggle&&$("#elevation-btn").click()}});
BR.NogoAreas=L.Control.extend({options:{shortcut:{draw:{enable:78,disable:27}}},statics:{MSG_BUTTON:"Draw no-go area (circle)",MSG_BUTTON_CANCEL:"Cancel drawing no-go area",MSG_CREATE:"Click and drag to draw circle",MSG_DISABLED:"Click to edit",MSG_ENABLED:'&square; = move / resize, <span class="fa fa-trash-o"></span> = delete,<br>click nogo to quit editing',STATE_CREATE:"no-go-create",STATE_CANCEL:"cancel-no-go-create"},style:{color:"#f06eaa",weight:4,opacity:.5,fillColor:null,fillOpacity:.2,dashArray:null},editStyle:{color:"#fe57a1",opacity:.6,dashArray:"10, 10",fillOpacity:.1},initialize:function(){this._wasRouteDrawing=!1},onAdd:function(t){var e=this;$("#submitNogos").on("click",L.bind(this.uploadNogos,this)),this.drawnItems=(new L.FeatureGroup).addTo(t),this.drawnItems.on("click",function(t){L.DomEvent.stop(t),t.layer.toggleEdit()});var i=this.editTools=t.editTools=new BR.Editable(t,{circleEditorClass:BR.DeletableCircleEditor,editLayer:(new L.FeatureGroup).addTo(t),featuresLayer:this.drawnItems});return this.startDrawing=function(t){var o=L.extend({radius:0},e.style);i.startCircle(null,o),t.state("cancel-no-go-create")},this.stopDrawing=function(t){i.stopDrawing(),t.state("no-go-create")},this.button=L.easyButton({states:[{stateName:BR.NogoAreas.STATE_CREATE,icon:"fa-ban",title:BR.NogoAreas.MSG_BUTTON,onClick:this.startDrawing},{stateName:BR.NogoAreas.STATE_CANCEL,icon:"fa-ban active",title:BR.NogoAreas.MSG_BUTTON_CANCEL,onClick:this.stopDrawing}]}),L.DomEvent.addListener(this.button.button,"pointerdown",L.DomEvent.stop),L.DomEvent.addListener(document,"keydown",this._keydownListener,this),this.editTools.on("editable:drawing:end",function(t){e.button.state(BR.NogoAreas.STATE_CREATE),setTimeout(L.bind(function(){t.layer.disableEdit()},this),0)},this),this.editTools.on("editable:vertex:dragend editable:deleted",function(t){this._fireUpdate()},this),this.editTools.on("editable:enable",function(t){t.layer.setStyle(this.editStyle)},this),this.editTools.on("editable:disable",function(t){t.layer.setStyle(this.style)},this),this.tooltip=new BR.EditingTooltip(t,i,this.button),this.tooltip.enable(),L.DomUtil.create("div")},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&(t.keyCode===this.options.shortcut.draw.disable&&this.button.state()===BR.NogoAreas.STATE_CANCEL?this.stopDrawing(this.button):t.keyCode===this.options.shortcut.draw.enable&&this.button.state()===BR.NogoAreas.STATE_CREATE&&this.startDrawing(this.button))},displayUploadError:function(t){$("#nogoError").text(t?t:""),$("#nogoError").css("display",t?"block":"none")},uploadNogos:function(){var t,e=this,i=$("#nogoJSON").val(),o=$("#nogoURL").val(),n=$("#nogoFile")[0].files[0];if(i)t=Promise.resolve(JSON.parse(i)),$("#nogoJSON").val(void 0);else if(o)t=fetch(o).then(function(t){t.json()});else{if(!n)return e.displayUploadError("Missing file or URL."),!1;t=new Promise(function(t,i){var o=new FileReader;o.onload=function(){t(o.result)},o.onerror=function(){e.displayUploadError("Could not load file: "+o.error.message)},o.readAsText(n)}).then(function(t){return JSON.parse(t)})}var a=parseFloat($("#nogoWeight").val());if(isNaN(a))return e.displayUploadError("Missing default nogo weight."),!1;var s=parseFloat($("#nogoRadius").val());if(isNaN(s)||s<0)return e.displayUploadError("Invalid default nogo radius."),!1;var r=parseFloat($("#nogoBuffer").val());return isNaN(r)?(e.displayUploadError("Invalid nogo buffering radius."),!1):(t.then(function(t){var i=[];if(turf.flattenEach(t,function(t){if(turf.getGeom(t)){var e=t;0!==r&&(e=turf.buffer(e,r,{units:"meters"})),i.push(e)}}),0===i.length)return e.displayUploadError("No valid area found in provided input."),!1;var o=L.geoJson(turf.featureCollection(i),{onEachFeature:function(t,e){e.options.nogoWeight=t.properties.nogoWeight||a}}),n=o.getLayers().filter(function(t){return"Point"===t.feature.geometry.type});n=n.map(function(t){var e=t.feature.properties.radius||s;return e>0?L.circle(t.getLatLng(),{radius:e}):null}),n=n.filter(function(t){return t}),e.setOptions({nogos:n,polygons:o.getLayers().filter(function(t){return"Polygon"===t.feature.geometry.type}),polylines:o.getLayers().filter(function(t){return"LineString"===t.feature.geometry.type})}),e._fireUpdate(),e.displayUploadError(void 0),$("#loadNogos").modal("hide")}),!1)},preventRoutePointOnCreate:function(t){this.editTools.on("editable:drawing:start",function(e){this._wasRouteDrawing=t.isDrawing(),t.draw(!1)},this),this.editTools.on("editable:drawing:end",function(e){this._wasRouteDrawing&&setTimeout(function(){t.draw(!0)},0)},this)},getOptions:function(){return{nogos:this.drawnItems.getLayers().filter(function(t){return t instanceof L.Circle}),polygons:this.drawnItems.getLayers().filter(function(t){return t instanceof L.Polygon}),polylines:this.drawnItems.getLayers().filter(function(t){return t instanceof L.Polyline&&!(t instanceof L.Polygon)})}},setOptions:function(t){var e=t.nogos,i=t.polylines,o=t.polygons;if(this._clear(),e)for(var n=0;n<e.length;n++)e[n].setStyle(this.style),this.drawnItems.addLayer(e[n]);if(i)for(var n=0;n<i.length;n++)i[n].setStyle(this.style),this.drawnItems.addLayer(i[n]);if(o)for(var n=0;n<o.length;n++)o[n].setStyle(this.style),this.drawnItems.addLayer(o[n])},_clear:function(){this.drawnItems.clearLayers()},clear:function(){this._clear(),this._fireUpdate()},_fireUpdate:function(){this.fire("update",{options:this.getOptions()})},getFeatureGroup:function(){return this.drawnItems},getEditGroup:function(){return this.editTools.editLayer},getButton:function(){return this.button}}),BR.NogoAreas.include(L.Evented.prototype),BR.Editable=L.Editable.extend({initialize:function(t,e){L.Editable.prototype.initialize.call(this,t,e),this.map.tap||(this.map.addHandler("tap",L.Map.Tap),this.map.tap.disable())},registerForDrawing:function(t){this._tapEnabled=this.map.tap.enabled(),this._tapEnabled||this.map.tap.enable(),L.Editable.prototype.registerForDrawing.call(this,t)},unregisterForDrawing:function(t){this._tapEnabled||this.map.tap.disable(),L.Editable.prototype.unregisterForDrawing.call(this,t)},createVertexIcon:function(t){return BR.Browser.touch?new L.Editable.TouchVertexIcon(t):new L.Editable.VertexIcon(t)}}),BR.EditingTooltip=L.Handler.extend({options:{closeTimeout:2e3},initialize:function(t,e,i){this.map=t,this.editTools=e,this.button=i},addHooks:function(){L.DomEvent.addListener(this.button.button,"click",this._addCreate,this),this.editTools.featuresLayer.on("layeradd",this._bind,this),this.editTools.on("editable:drawing:end",this._postCreate,this),this.editTools.on("editable:enable",this._enable,this),this.editTools.on("editable:disable",this._disable,this)},removeHooks:function(){L.DomEvent.removeListener(this.button.button,"click",this._addCreate,this),this.editTools.featuresLayer.off("layeradd",this._bind,this),this.editTools.off("editable:drawing:end",this._postCreate,this),this.editTools.off("editable:enable",this._enable,this),this.editTools.off("editable:disable",this._disable,this)},_bind:function(t){var e=t.layer;e.bindTooltip(BR.NogoAreas.MSG_DISABLED,{direction:"bottom",className:"editing-tooltip"}),e.openTooltip=function(t,e){!e&&t instanceof L.Layer&&(e=L.latLng(t.getBounds().getSouth(),.5*(t.getBounds().getWest()+t.getBounds().getEast()))),L.Layer.prototype.openTooltip.call(this,t,e)}},_addCreate:function(t){if(this.editTools.drawing()){var e=this.map.mouseEventToLatLng(t),i=L.tooltip({sticky:!0,direction:"right",offset:L.point(5,28),className:"editing-tooltip-create"});i._tooltip=i;var o=function(t){var e="tooltipclose"===t.type?"off":"on";this._map[e]("mousemove",this._moveTooltip,this)};this.map.on("tooltipopen",o,i),this.map.on("tooltipclose",o,i);var n=function(t){this.map.off("tooltipopen",o,t.tooltip),this.map.off("tooltipclose",o,t.tooltip),this.map.off("tooltipclose",n,this),t.tooltip._tooltip=null};this.map.on("tooltipclose",n,this),i.setTooltipContent(BR.NogoAreas.MSG_CREATE),this.map.openTooltip(i,e);var a=function(){this.map.closeTooltip(i)};this.editTools.once("editable:editing editable:drawing:cancel",a,this),BR.Browser.touch&&setTimeout(L.bind(a,this),this.options.closeTimeout)}},_setCloseTimeout:function(t){var e=setTimeout(function(){t.closeTooltip()},this.options.closeTimeout);t.once("tooltipopen",function(t){clearTimeout(e)})},_postCreate:function(){this.editTools.once("editable:disable",function(t){t.layer.openTooltip(t.layer),this._setCloseTimeout(t.layer)},this)},_enable:function(t){t.layer.setTooltipContent(BR.NogoAreas.MSG_ENABLED),this.editTools.once("editable:editing",function(t){t.layer.closeTooltip()},this)},_disable:function(t){t.layer.setTooltipContent(BR.NogoAreas.MSG_DISABLED),this._setCloseTimeout(t.layer)}}),BR.DeletableCircleEditor=L.Editable.CircleEditor.extend({_computeDeleteLatLng:function(){var t=(this.feature._radius||this.feature._mRadius)*Math.cos(Math.PI/4),e=this.map.project(this.feature._latlng);return this.map.unproject([e.x-t,e.y-t])},_updateDeleteLatLng:function(){this._deleteLatLng.update(this._computeDeleteLatLng()),this._deleteLatLng.__vertex.update()},_addDeleteMarker:function(){if(this.enabled())return this._deleteLatLng=this._computeDeleteLatLng(),new BR.DeleteMarker(this._deleteLatLng,this)},_delete:function(){this.disable(),this.tools.featuresLayer.removeLayer(this.feature)},"delete":function(){this._delete(),this.fireAndForward("editable:deleted")},initialize:function(t,e,i){L.Editable.CircleEditor.prototype.initialize.call(this,t,e,i),this._deleteLatLng=this._computeDeleteLatLng(),this.editLayer=new L.FeatureGroup},addHooks:function(){return L.Editable.CircleEditor.prototype.addHooks.call(this),this.feature&&this._addDeleteMarker(),this},reset:function(){L.Editable.CircleEditor.prototype.reset.call(this),this._addDeleteMarker()},onDrawingMouseDown:function(t){this._deleteLatLng.update(t.latlng),L.Editable.CircleEditor.prototype.onDrawingMouseDown.call(this,t)},onDrawingMouseUp:function(t){this.feature.getRadius()>0?this.commitDrawing(t):(this.cancelDrawing(t),this._delete()),t.originalEvent._simulated=!1,L.Editable.PathEditor.prototype.onDrawingMouseUp.call(this,t)},onVertexMarkerDrag:function(t){this._updateDeleteLatLng(),L.Editable.CircleEditor.prototype.onVertexMarkerDrag.call(this,t)}}),BR.DeleteMarker=L.Marker.extend({options:{draggable:!1,icon:L.divIcon({iconSize:BR.Browser.touch?new L.Point(24,24):new L.Point(16,16),className:"leaflet-div-icon fa fa-trash-o nogo-delete-marker"})},initialize:function(t,e,i){this.latlng=t,this.editor=e,L.Marker.prototype.initialize.call(this,t,i),this.latlng.__vertex=this,this.editor.editLayer.addLayer(this),this.setZIndexOffset(e.tools._lastZIndex)},onAdd:function(t){L.Marker.prototype.onAdd.call(this,t),this.on("click",this.onClick)},onRemove:function(t){delete this.latlng.__vertex,this.off("click",this.onClick),L.Marker.prototype.onRemove.call(this,t)},onClick:function(t){this.editor["delete"]()}});
BR.PoiMarkers=L.Control.extend({markersLayer:null,circlego:null,options:{shortcut:{draw:{enable:80,disable:27}}},initialize:function(t){this.routing=t,this.circlego=null},onAdd:function(t){var e=this;this.map=t,this.markersLayer=L.layerGroup([]).addTo(t),this.drawButton=L.easyButton({states:[{stateName:"activate-poi",icon:"fa-hand-o-right",onClick:function(){e.draw(!0)},title:i18next.t("keyboard.generic-shortcut",{action:"$t(map.draw-poi-start)",key:"P"})},{stateName:"deactivate-poi",icon:"fa-hand-o-right active",onClick:function(){e.draw(!1)},title:i18next.t("keyboard.generic-shortcut",{action:"$t(map.draw-poi-stop)",key:"$t(keyboard.escape)"})}]}).addTo(t),t.on("routing:draw-start",function(){e.draw(!1)}),L.DomEvent.addListener(document,"keydown",this._keydownListener,this);var a=new L.DomUtil.create("div");return a},draw:function(t){this.drawButton.state(t?"deactivate-poi":"activate-poi"),t?(this.routing.draw(!1),this.circlego&&this.circlego.draw(!1),this.map.on("click",this.onMapClick,this),L.DomUtil.addClass(this.map.getContainer(),"pois-draw-enabled")):(this.map.off("click",this.onMapClick,this),L.DomUtil.removeClass(this.map.getContainer(),"pois-draw-enabled"))},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&(t.keyCode===this.options.shortcut.draw.disable?this.draw(!1):t.keyCode===this.options.shortcut.draw.enable&&this.draw(!0))},onMapClick:function(t){var e=this;bootbox.prompt({title:i18next.t("map.enter-poi-name"),callback:function(a){null!==a&&e.addMarker(t.latlng,a)}})},addMarker:function(t,e){var a=L.VectorMarkers.icon({icon:"star",markerColor:BR.conf.markerColors.poi}),r=BR.Util.sanitizeHTMLContent(e)+"<br>";r+="<button id='remove-poi-marker' class='btn btn-secondary'><i class='fa fa-trash'></i></button>";var i=this,o=L.marker(t,{icon:a,draggable:!0,name:e}).bindPopup(r).on("dragend",function(){i.fire("update")}).on("popupopen",function(){$("#remove-poi-marker").on("click",function(t){i.markersLayer.removeLayer(o),t.preventDefault(),i.fire("update")})}).addTo(this.markersLayer)},clear:function(){this.markersLayer.clearLayers()},setMarkers:function(t){if(this.clear(),t)for(var e=0;e<t.length;e++){var a=t[e];this.addMarker(a.latlng,a.name)}},getMarkers:function(){return this.markersLayer.getLayers().map(function(t){return{latlng:t.getLatLng(),name:t.options.name}})}}),BR.PoiMarkers.include(L.Evented.prototype);
BR.routeLoader=function(t,e,o,i){RouteLoader=L.Control.extend({_layerName:"Tracklayer",_trackLayer:void 0,_bounds:void 0,_testLayer:L.layerGroup().addTo(t),_trackPoints:[],_maxTrackPoints:200,_closeCanceled:!0,_currentGeoJSON:{},_options:{format:void 0,showTrackLayer:!0,showPointAsPoi:!0,simplifyTolerance:-1,isTestMode:!1,simplifyLastKnownGood:.001},setDialogDraggable:function(t){t.on("mousedown",function(t){var e=$(this),o=t.pageX-e.offset().left,i=t.pageY-e.offset().top;$("body").on("mousemove.draggable",function(t){e.closest(".modal-dialog").offset({left:t.pageX-o,top:t.pageY-i})}),$("body").one("mouseup",function(){$("body").off("mousemove.draggable")}),e.closest(".modal").one("bs.modal.hide",function(){$("body").off("mousemove.draggable")})})},getSimplifiedCoords:function(t){var e=turf.simplify(this._trackPoints.geometry,{tolerance:t,highQuality:!0});return e.coordinates},refreshTestLayer:function(){this.onBusyChanged(!0),this._testLayer.clearLayers();var t=L.GeoJSON.coordsToLatLngs(this.getSimplifiedCoords(this._options.simplifyTolerance));if(t.length>this._maxTrackPoints)return this.onBusyChanged(!1),!1;for(var e=0;e<t.length;e++)this._testLayer.addLayer(L.circleMarker(t[e],{radius:6,fill:!1,color:"#FF0000"}));return this.onBusyChanged(!1),!0},cleanup:function(o){this._testLayer.clearLayers(),this._trackLayer&&t.hasLayer(this._trackLayer)&&(!this._options.showTrackLayer||this._closeCanceled)&&(t.removeLayer(this._trackLayer),e.removeLayer(this._trackLayer),this._trackLayer=void 0),this._bounds=void 0,this._trackPoints=[],this._currentGeoJSON={},this._options={ext:"gpx",showTrackLayer:!0,showPointAsPoi:!0,simplifyTolerance:-1,isTestMode:!1,simplifyLastKnownGood:.001}},setSliderRange:function(){$slider=$("#simplify_tolerance"),$slider.prop("min",-500);var t=this.guessSimplifyTolerance(this._trackPoints),e=this.getSimplifiedCoords(t).length;e>this._maxTrackPoints&&(this._maxTrackPoints=e,$slider.prop("min",0)),$slider.data("lastknowngood",0),$slider.data("guess",t.toFixed(20)),$slider.val(0),this._options.simplifyTolerance=t,this.refreshTestLayer()},onToleranceSlider:function(t){var e=parseFloat($(t.target).data("guess")),o=parseFloat(t.target.value),i=parseFloat($(t.target).prop("max"));if(o>e?this._options.simplifyTolerance=e+Math.pow(o,2)*(e/(Math.pow(i,2)/10)):this._options.simplifyTolerance=Math.abs(e+Math.pow(o,3)*(e/Math.pow(i,3))),this.refreshTestLayer())this._options.simplifyLastKnownGood=this._options.simplifyTolerance,$(t.target).data("lastknowngood",t.target.value);else{var s=this.findLowestTolerance(parseInt(t.target.value),parseInt($(t.target).data("lastknowngood")),e,i);$(t.target).prop("min",s),$(t.target).data("lastknowngood",s),t.target.value=$(t.target).data("lastknowngood"),this._options.simplifyTolerance=this._options.simplifyLastKnownGood=Math.abs(e+Math.pow(s,3)*(e/Math.pow(i,3))),this.refreshTestLayer()}},findLowestTolerance:function(t,e,o,i){if(Math.abs(e-t)<=2)return e;var s=Math.round((e+t)/2),a=Math.abs(o+Math.pow(s,3)*(o/Math.pow(i,3))),n=this.getSimplifiedCoords(a);return n.length>this._maxTrackPoints?this.findLowestTolerance(s,e,o,i):this.findLowestTolerance(t,s,o,i)},onBusyChanged:function(t){void 0===typeof t&&(t=!1),t===!0?$("#loadedittrackdlg #msg_busy").removeClass("invisible"):$("#loadedittrackdlg #msg_busy").addClass("invisible")},onManualCollapse:function(t){$("#loadedittrackdlg").is(":hidden")||(this._options.isTestMode=$(t.target).hasClass("show"),this._options.isTestMode?(this.once("file:loaded",this.setSliderRange,this),this.convertTrackLocal()):this.cleanup())},onAdd:function(t){$("#loadedittrackdlg").on("hidden.bs.modal",function(t){this.cleanup()}.bind(this)),$("#loadedittrackdlg").on("show.bs.modal",function(t){$("#manual_collapse").collapse("hide"),this._closeCanceled=!0}.bind(this)),L.DomUtil.get("submitLoadEditTrack").onclick=L.bind(function(){this._closeCanceled=!1,this.onBusyChanged(!0),this._testLayer.getLayers().length>0?(this._testLayer.clearLayers(),setTimeout(function(){this.addRoutingPoints(),this.onBusyChanged(!1),$("#loadedittrackdlg").modal("hide")}.bind(this),0)):setTimeout(function(){this.convertTrackLocal(),$("#loadedittrackdlg").modal("hide")}.bind(this),0)},this),L.DomUtil.get("simplify_tolerance").oninput=L.bind(this.onToleranceSlider,this),L.DomUtil.get("loadedittrackFile").onchange=L.bind(this.onFileChanged,this),this.onFileChanged({target:L.DomUtil.get("loadedittrackFile")}),this.setDialogDraggable($("#loadedittrackdlg .modal-header")),$("#manual_collapse").collapse("hide"),$("#manual_collapse").on("hidden.bs.collapse shown.bs.collapse",function(t){this.onManualCollapse(t)}.bind(this));var e=L.DomUtil.create("div");return e.hidden=!0,e},onRemove:function(t){},onFileChanged:function(t){if(t.target.files[0]){$(t.target).next("label").text(t.target.files[0].name);var e=this._options.isTestMode;this.cleanup(),this._options.isTestMode=e,this._options.isTestMode&&(this.once("file:loaded",this.setSliderRange,this),this.convertTrackLocal())}},setLayerNameFromGeojson:function(t){if("Feature"==t.type&&t.properties&&t.properties.name)return void(this._layerName=t.properties.name);if("FeatureCollection"==t.type)for(var e=0;e<t.features.length;e++)if(t.features[e].properties&&t.features[e].properties.name)return void(this._layerName=t.features[e].properties.name)},getOptions:function(){this._options.showTrackLayer=$("#cb_showtracklayer")[0].checked,this._options.showPointAsPoi=$("#cb_showpois")[0].checked,this._options.simplifyTolerance=-1,this._bounds=void 0},convertTrackLocal:function(){if(0!=$("#loadedittrackFile")[0].files.length){this.onBusyChanged(!0),this.getOptions();var t=$("#loadedittrackFile")[0].files[0];this._layerName=t.name.replace(/\.[^\.]*$/,""),this._options.format||(this._options.format=t.name.split(".").pop());var e=new FileReader;e.onload=L.bind(this.processFile,this),e.readAsText(t)}},addTrackOverlay:function(o){this._trackLayer=L.geoJSON(o,BR.Track.getGeoJsonOptions(e)).addTo(t),e.addOverlay(this._trackLayer,BR.Util.sanitizeHTMLContent(this._layerName)),this._bounds=this._trackLayer.getBounds(),this._bounds&&t.fitBounds(this._bounds)},getLineStringsFromGeoJSON:function(t){var e=[],o=turf.flatten(t);turf.featureEach(o,function(t,o){if("LineString"==turf.getType(t)){t=turf.cleanCoords(t);var i=turf.coordAll(t);e=e.concat(i)}});var i=turf.lineString(e);return i.length=e.length,i},guessSimplifyTolerance:function(t){var e=t.length/1e6;return e>.8&&(e=.8),e},addRoutingPoints:function(e){this._options.simplifyTolerance<0&&(this._options.simplifyTolerance=this.guessSimplifyTolerance(this._trackPoints));for(var s=[],a=L.GeoJSON.coordsToLatLngs(this.getSimplifiedCoords(this._options.simplifyTolerance)),n=0;n<a.length;n++)s.push(a[n]);s.length>0&&(o.setWaypoints(s,function(t){if(t){var e=t.error;BR.message.showError(i18next.t("warning.tracks-load-error",{error:e&&e.message?e.message:e}))}}),this._bounds||(this._bounds=L.latLngBounds(s))),this._bounds||t.fitBounds(this._bounds),this._options.showPointAsPoi&&BR.Track.addPoiMarkers(i,this._currentGeoJSON)},processFile:function(t){var e=t.target.result,o=null;switch(this._options.format){case"kml":case"gpx":var i=(new DOMParser).parseFromString(e,"text/xml");o=toGeoJSON[this._options.format](i);break;default:o=JSON.parse(e)}this._currentGeoJSON=o,this.setLayerNameFromGeojson(o),this._trackPoints=this.getLineStringsFromGeoJSON(o);var s=turf.length(this._trackPoints,{units:"kilometers"});this._maxTrackPoints=Math.min(s*Math.max(-.14*s+10,1),200),this.fire("file:loaded"),(this._options.showTrackLayer||this._options.isTestMode)&&this.addTrackOverlay(o),this._options.isTestMode||this.addRoutingPoints(),this.onBusyChanged(!1)}}),RouteLoader.include(L.Evented.prototype);var s=new RouteLoader;return s.addTo(t),s};
L.Routing.Draw.prototype._hideTrailer=function(){0!==this._trailer.options.opacity&&this._trailer.setStyle({opacity:0})},BR.Routing=L.Routing.extend({options:{position:"topright",icons:{start:L.VectorMarkers.icon({icon:"play",markerColor:BR.conf.markerColors.start}),normal:L.VectorMarkers.icon({icon:"circle",markerColor:BR.conf.markerColors.via}),end:L.VectorMarkers.icon({icon:"stop",markerColor:BR.conf.markerColors.stop}),draw:!1,opacity:1},snapping:null,zIndexOffset:-2e3,distanceMarkers:{iconSize:[6,18],offset:5e3,textFunction:function(t){return t/1e3}},shortcut:{draw:{enable:68,disable:27},reverse:82,deleteLastPoint:90}},onAdd:function(t){function e(){this._hidden&&this._parent._waypoints._first&&this._show()}function i(){!this._hidden&&this._parent._waypoints._first&&this._hide()}this._segmentsCasing=(new L.FeatureGroup).addTo(t),this._loadingTrailerGroup=(new L.FeatureGroup).addTo(t);var s=L.Routing.prototype.onAdd.call(this,t);this._segments.on("layeradd",this._addSegmentCasing,this),this._segments.on("layerremove",this._removeSegmentCasing,this),this._waypoints.on("layeradd",this._setMarkerOpacity,this),this.on("routing:routeWaypointStart routing:rerouteAllSegmentsStart",function(t){this._removeDistanceMarkers()}),this.on("routing:routeWaypointEnd routing:setWaypointsEnd routing:rerouteAllSegmentsEnd",function(t){this._updateDistanceMarkers(t)}),this.on("waypoint:mouseover",function(t){this._dragging||(this._mouseMarker.setOpacity(0),this._map.off("mousemove",this._segmentOnMousemove,this),this._suspended=!0)},this._edit),this.on("waypoint:mouseout",function(t){this._segmentOnMouseover(t),this._suspended=!1},this._edit),this._edit._mouseMarker.setIcon(L.divIcon({className:"line-mouse-marker",iconAnchor:[8,8],iconSize:[16,16]})),this._edit._mouseMarker.on("move",L.bind(function(t){var e=t.latlng;e._feature&&(this._mouseMarker._feature=e._feature,e._feature.fire("mousemove",t,!0))},this._edit));var n=function(t){this._mouseMarker._feature&&(this._mouseMarker._feature.fire("mouseout",t,!0),this._mouseMarker._feature=null)};return this._edit.on("segment:mouseout",n,this._edit),this._edit._mouseMarker.on("dragstart",n,this._edit),this.on("waypoint:mouseover",n,this._edit),this._draw.on("enabled",function(){L.DomUtil.addClass(t.getContainer(),"routing-draw-enabled"),this._marker._icon.style.pointerEvents="none",this._parent.off("waypoint:mouseout",this._catchWaypointEvent,this),this.on("waypoint:mouseout",function(t){this._parent._edit._suspended||this._catchWaypointEvent(t)},this)}),this._draw.on("disabled",function(){L.DomUtil.removeClass(t.getContainer(),"routing-draw-enabled")}),this._draw.on("enabled",function(){this._map.on("mouseout",i,this),this._map.on("mouseover",e,this),L.DomEvent.on(this._map._controlContainer,"mouseout",e,this),L.DomEvent.on(this._map._controlContainer,"mouseover",i,this)}),this._draw.on("disabled",function(){this._map.off("mouseout",i,this),this._map.off("mouseover",e,this),L.DomEvent.off(this._map._controlContainer,"mouseout",e,this),L.DomEvent.off(this._map._controlContainer,"mouseover",i,this)}),this.on("waypoint:click",function(){this._hidden&&!this._parent._waypoints._first&&(this._show(),this._hideTrailer())},this._draw),L.DomEvent.addListener(document,"keydown",this._keydownListener,this),L.DomEvent.addListener(document,"keyup",this._keyupListener,this),this.draw(!0),s},_addSegmentCasing:function(t){var e=L.polyline(t.layer.getLatLngs(),this.options.styles.trackCasing);this._segmentsCasing.addLayer(e),t.layer._casing=e,this._segments.bringToFront()},_removeSegmentCasing:function(t){this._segmentsCasing.removeLayer(t.layer._casing)},setOpacity:function(t){var e=1-Math.sqrt(1-t);this.options.styles.track.opacity=e,this.options.styles.trackCasing.opacity=e,this.options.icons.opacity=t,this._segments.setStyle({opacity:e}),this._segmentsCasing.setStyle({opacity:e}),this._waypoints.eachLayer(function(e){e.setOpacity(t)}),this._distanceMarkers&&this._distanceMarkers.setOpacity(t)},_setMarkerOpacity:function(t){t.layer.setOpacity(this.options.icons.opacity)},_removeMarkerEvents:function(t){t.off("mouseover",this._fireWaypointEvent,this),t.off("mouseout",this._fireWaypointEvent,this),t.off("dragstart",this._fireWaypointEvent,this),t.off("dragend",this._fireWaypointEvent,this),t.off("drag",this._fireWaypointEvent,this),t.off("click",this._fireWaypointEvent,this)},clear:function(){var t=this._draw._enabled,e=this._waypoints._first;if(this.draw(!1),null!==e){for(this._removeMarkerEvents(e);e._routing.nextMarker;){var i=e._routing.nextMarker;this._removeMarkerEvents(i),e=i}this._waypoints._first=null,this._waypoints._last=null,this._waypoints.clearLayers(),this._segments.clearLayers(),this._removeDistanceMarkers(),t&&this.draw(!0)}},setWaypoints:function(t,e){var i,s,n=0,o=this,r=function(i,r){n++,s=s||i,n>=t.length&&(o.fire("routing:setWaypointsEnd",{err:s}),e&&e(s))};for(this.fire("routing:setWaypointsStart"),this._waypoints.remove(),this._waypoints._map=null,this._loadingTrailerGroup.remove(),this._loadingTrailerGroup._map=null,i=0;t&&i<t.length;i++)this.addWaypoint(t[i],this._waypoints._last,null,r);this._loadingTrailerGroup._map=this._map,this._loadingTrailerGroup.addTo(this._map),this._waypoints._map=this._map,this._waypoints.addTo(this._map)},toPolyline:function(){var t=[];return this._eachSegment(function(e,i,s){s&&s.feature&&(t=t.concat(s.getLatLngs()))}),L.polyline(t)},_routeSegment:function(t,e,i){var s;t&&null!==t._routing.nextLine&&t._routing.nextLine.setStyle({color:"dimgray"}),t&&e&&(s=new L.Polyline([t.getLatLng(),e.getLatLng()],{color:this.options.styles.track.color,opacity:this.options.styles.trailer.opacity,dashArray:[10,10],className:"loading-trailer"}),this._loadingTrailerGroup.addLayer(s)),L.Routing.prototype._routeSegment.call(this,t,e,L.bind(function(t,e){s&&this._loadingTrailerGroup.removeLayer(s),i(t,e)},this))},getSegments:function(){var t=[];return this._eachSegment(function(e,i,s){s&&s.feature&&t.push(s)}),t},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&(t.keyCode===this.options.shortcut.draw.disable?this._draw.disable():t.keyCode===this.options.shortcut.draw.enable?this._draw.enable():t.keyCode===this.options.shortcut.reverse?this.reverse():t.keyCode===this.options.shortcut.deleteLastPoint&&this.deleteLastPoint())},_keyupListener:function(t){t.keyCode===this.options.shortcut.draw.enable},isDrawing:function(){return this._draw._enabled},reverse:function(){var t=this.getWaypoints();t.reverse(),this.clear(),this.setWaypoints(t)},deleteLastPoint:function(){(lastPoint=this.getLast())&&this.removeWaypoint(lastPoint,function(t,e){})},_removeDistanceMarkers:function(){this._map&&this._distanceMarkers&&this._map.removeLayer(this._distanceMarkers)},_updateDistanceMarkers:function(t){if(this._removeDistanceMarkers(),this._map){var e=this.options.distanceMarkers||{};this._distanceMarkers=new L.DistanceMarkers(this.toPolyline(),this._map,e),this._map.addLayer(this._distanceMarkers)}}});
BR.RoutingPathQuality=L.Control.extend({options:{shortcut:{toggle:67,muteKeyCode:77}},initialize:function(t,e,i){L.setOptions(this,i),t.createPane("routingQualityPane"),t.getPane("routingQualityPane").style.zIndex=450,t.getPane("routingQualityPane").style.pointerEvents="none";var n=new L.Hotline.Renderer({pane:"routingQualityPane"});this._routingSegments=L.featureGroup(),this._routingSegments.id="route-quality",e.addOverlay(this._routingSegments,i18next.t("map.layer.route-quality")),this.providers={incline:{title:i18next.t("map.route-quality-shortcut",{action:"$t(map.route-quality-incline)",key:"C"}),icon:"fa-line-chart",provider:new HotLineQualityProvider({hotlineOptions:{min:-8.5,max:8.5,palette:{0:"#0000ff",.25:"#00ffff",.5:"#00ff00",.75:"#ffff00",1:"#ff0000"},outlineColor:"dimgray",renderer:n},valueFunction:function(t,e){var i=t.alt-e.alt,n=e.distanceTo(t);return 0===n?0:180*Math.atan(i/n)/Math.PI}})},altitude:{title:i18next.t("map.route-quality-shortcut",{action:"$t(map.route-quality-altitude)",key:"C"}),icon:"fa-area-chart",provider:new HotLineQualityProvider({hotlineOptions:{outlineColor:"dimgray",renderer:n},valueFunction:function(t){return t.alt}})},cost:{title:i18next.t("map.route-quality-shortcut",{action:"$t(map.route-quality-cost)",key:"C"}),icon:"fa-usd",provider:new HotLineQualityProvider({hotlineOptions:{outlineColor:"dimgray",renderer:n},valueFunction:function(t){var e=t.feature,i=e.cost.perKm,n=e.distance/1e3;return n>0&&(i+=(e.cost.elev+e.cost.turn+e.cost.node+e.cost.initial)/n),i}})}},this._initialProvider=this.options.initialProvider||"incline",this.selectedProvider=this._initialProvider,this._active=!1,this._muted=!1},onAdd:function(t){this._map=t,t.on("overlayadd",function(t){t.layer===this._routingSegments&&this._activate(this.routingPathButton)},this),t.on("overlayremove",function(t){t.layer===this._routingSegments&&this._deactivate(this.routingPathButton)},this);var e,i=[],n=Object.keys(this.providers),o=n.length;for(e=0;e<o;++e){var a=this.providers[n[e]],r=n[(e+1)%o];i.push({stateName:n[e],icon:a.icon,title:a.title,onClick:L.bind(function(t){return L.bind(function(e){this._active?(e.state(t),this.setProvider(t),t===this._initialProvider?this._deactivate(e):this._getIcon(e).classList.add("active")):this._activate(e)},this)},this)(r)})}return(this.options.shortcut.muteKeyCode||this.options.shortcut.toggle)&&(L.DomEvent.addListener(document,"keydown",this._keydownListener,this),L.DomEvent.addListener(document,"keyup",this._keyupListener,this)),this.routingPathButton=new L.easyButton({states:i}).addTo(t),new L.DomUtil.create("div")},_activate:function(t){this._active=!0,this._getIcon(t).classList.add("active"),this._routingSegments.addTo(this._map)},_deactivate:function(t){this._active=!1,this._getIcon(t).classList.remove("active"),this._map.removeLayer(this._routingSegments)},_getIcon:function(t){return t.button.firstChild.firstChild},update:function(t,e){var i=[];e.eachLayer(function(t){i.push(t)}),this.segments=i,this._update(this.segments)},setProvider:function(t){this.selectedProvider=t,this._update(this.segments)},_update:function(t){this._routingSegments.clearLayers();var e=this.providers[this.selectedProvider].provider.computeLayers(t);if(e)for(var i=0;i<e.length;i++)this._routingSegments.addLayer(e[i])},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&(this._active&&t.keyCode===this.options.shortcut.muteKeyCode&&(this._muted=!0,this._deactivate(this.routingPathButton)),this._muted||t.keyCode!==this.options.shortcut.toggle||this.routingPathButton.button.click())},_keyupListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&this._muted&&t.keyCode===this.options.shortcut.muteKeyCode&&(this._muted=!1,this._activate(this.routingPathButton))}});var HotLineQualityProvider=L.Class.extend({initialize:function(t){this.hotlineOptions=t.hotlineOptions,this.valueFunction=t.valueFunction},computeLayers:function(t){var e=[];if(t){for(var i=[],n=[],o=0;t&&o<t.length;o++){var a=t[o],r=this._computeLatLngVals(a);i.push(r),Array.prototype.push.apply(n,r)}if(n.length>0){var s=L.extend({},this.hotlineOptions);if(!s.min&&!s.max){var u=this._calcMinMaxValues(n);s.min=u.min,s.max=u.max}for(var o=0;o<i.length;o++){var h=i[o],c=L.hotline(h,s);e.push(c)}}}return e},_computeLatLngVals:function(t){for(var e=[],i=t.getLatLngs(),n=i.length,o=0;o<n;o++){var a=this.valueFunction.call(this,i[o],i[Math.max(o-1,0)],o,i);e.push(this._convertToArray(i[o],a))}return e},_convertToArray:function(t,e){return[t.lat,t.lng,e]},_calcMinMaxValues:function(t){for(var e=t[0][2],i=e,n=1;t&&n<t.length;n++){var o=t[n];i=Math.max(i,o[2]),e=Math.min(e,o[2])}return e===i&&(i=e+1),{min:e,max:i}}});
BR.Search=L.Control.Geocoder.extend({options:{geocoder:new L.Control.Geocoder.LatLng({next:new L.Control.Geocoder.Nominatim({serviceUrl:"https://nominatim.openstreetmap.org/"}),sizeInMeters:800}),position:"topleft",shortcut:{search:70}},initialize:function(e){L.Control.Geocoder.prototype.initialize.call(this,e),L.setOptions(this,{placeholder:i18next.t("map.geocoder-placeholder")}),L.DomEvent.addListener(document,"keydown",this._keydownListener,this)},markGeocode:function(e){return this._map.fitBounds(e.geocode.bbox,{maxZoom:17}),this.clear(),this._geocodeMarker=new L.CircleMarker(e.geocode.center,{interactive:!1,color:"red",opacity:1,weight:3}).addTo(this._map),this},clear:function(){this._geocodeMarker&&this._map.removeLayer(this._geocodeMarker)},_keydownListener:function(e){BR.Util.keyboardShortcutsAllowed(e)&&e.keyCode===this.options.shortcut.search&&($("#map .leaflet-control-geocoder")[0].dispatchEvent(new MouseEvent("mousedown")),e.preventDefault())}});
BR.Sidebar=L.Control.Sidebar.extend({storageId:"sidebar-control",options:{position:"right",container:"sidebar",tabContainer:"sidebarTabs",autopan:!1,defaultTabId:"",shortcut:{toggleTabs:84},listeningTabs:{}},initialize:function(t,i){L.Control.Sidebar.prototype.initialize.call(this,t,i),this.oldTab=null,L.DomEvent.addListener(document,"keydown",this._keydownListener,this)},addTo:function(t){return L.Control.Sidebar.prototype.addTo.call(this,t),this.on("content",this._notifyOnContent,this),this.on("closing",this._notifyOnClose,this),this.on("toggleExpand",this._notifyOnResize,this),this.on("closing",function(){this._map.getContainer().focus()},this),this.recentTab=this.options.defaultTabId,this.on("content",function(t){this.recentTab=t.id},this),this._rememberTabState(),L.Browser.touch&&BR.Browser.touchScreenDetectable&&!BR.Browser.touchScreen&&(L.DomUtil.removeClass(this._container,"leaflet-touch"),L.DomUtil.removeClass(this._tabContainer,"leaflet-touch")),this},showPanel:function(t){var i=this._getTab(t);return i.hidden=!1,this},_rememberTabState:function(){if(BR.Util.localStorageAvailable()){this.on("content closing",this._storeActiveTab,this);var t=localStorage.getItem(this.storageId);"true"===t?t=this.options.defaultTabId:null===t&&(t=""),""!==t&&this._getTab(t)&&this.open(t)}},_notifyShow:function(t){t&&t.show&&t.show()},_notifyHide:function(t){t&&t.hide&&t.hide()},_notifyOnContent:function(t){var i=this.options.listeningTabs[t.id];this._notifyHide(this.oldTab),this._notifyShow(i),this.oldTab=i},_notifyOnClose:function(t){this._notifyHide(this.oldTab),this.oldTab=null},_notifyOnResize:function(t){var i=this.oldTab;i&&i.onResize&&i.onResize()},_storeActiveTab:function(t){localStorage.setItem(this.storageId,t.id||"")},_keydownListener:function(t){if(BR.Util.keyboardShortcutsAllowed(t)&&t.keyCode===this.options.shortcut.toggleTabs&&($("#sidebarTabs > ul > li[class=active]").length?t.shiftKey||this.close():this.open(this.recentTab),t.shiftKey)){var i=$("#sidebarTabs > ul > li[class=active] ~ li:not([hidden]) > a");i.length||(i=$("#sidebarTabs > ul > li:not([hidden]) > a")),this.open(i.attr("href").slice(1))}}}),BR.sidebar=function(t,i){return new BR.Sidebar(t,i)};
BR.tracksLoader=function(e,o,a,t){var r=function(e,o){return BR.Track.addPoiMarkers(t,e),L.geoJSON(e,o)};TracksLoader=L.Control.FileLayerLoad.extend({options:{layer:r,layerOptions:BR.Track.getGeoJsonOptions(o),addToMap:!1,fileSizeLimit:1024,shortcut:{open:79}},_initContainer:function(){var e,o=this.loader,a=L.DomUtil.get("navbarLoadTracksContainer");L.DomEvent.addListener(document,"keydown",this._keydownListener,this),e=L.DomUtil.create("input","hidden",a),e.type="file",e.multiple="multiple",this.options.formats?e.accept=this.options.formats.join(","):e.accept=".gpx,.kml,.json,.geojson",e.style.display="none",e.addEventListener("change",function(){o.loadMultiple(this.files),this.value=""},!1);var t=L.DomUtil.get("navbarLoadTracks");L.DomEvent.disableClickPropagation(t),L.DomEvent.on(t,"click",function(o){e.click(),o.preventDefault()});var r=L.DomUtil.create("div");return r.hidden=!0,r},_keydownListener:function(e){BR.Util.keyboardShortcutsAllowed(e)&&e.keyCode===this.options.shortcut.open&&(e.shiftKey?$("#loadNogos").modal("show"):$("#navbarLoadTracks")[0].click())}});var n=new TracksLoader;return n.addTo(e),n.loader.on("data:loaded",function(a){var t=a.layer;o.addOverlay(t,a.filename),t.addTo(e)}),n.loader.on("data:error",function(e){var o=e.error;BR.message.showError(i18next.t("warning.tracks-load-error",{error:o&&o.message?o.message:o})),console.error(o)}),n};
L.DistanceMarkers=L.LayerGroup.extend({initialize:function(e,t,o){o=o||{};var i=o.offset||1e3,r=Math.min(t.getMaxZoom(),o.showAll||12),a=o.cssClass||"dist-marker",n=void 0!==o.iconSize?o.iconSize:[12,12],s=o.textFunction||function(e,t){return t},l={},m=e;"function"==typeof e.getLatLngs&&(m=e.getLatLngs());for(var c=L.GeometryUtil.accumulatedLengths(e),f=c.length>0?c[c.length-1]:0,v=0,h=Math.floor(f/i),y=1;y<=h;++y){for(var u=i*y;v<c.length-1&&c[v]<u;)++v;var d=s.call(this,u,y,i),g=m[v-1],z=m[v],p=L.polyline([g,z]),_=(u-c[v-1])/(c[v]-c[v-1]),M=L.GeometryUtil.interpolateOnLine(t,p,_),k=[n[0]+n[0]*(""+d).length,n[1]],G=L.divIcon({className:a,html:d,iconSize:k}),O=L.marker(M.latLng,{title:d,icon:G,interactive:!1}),Z=this._minimumZoomLevelForItem(y,r);void 0===l[Z]&&(l[Z]=L.layerGroup()),l[Z].addLayer(O)}var x=0,F=this,I=function(){var e=x,o=x=t.getZoom();if(o>e)for(var i=e+1;i<=o;++i)void 0!==l[i]&&F.addLayer(l[i]);else if(o<e)for(var i=e;i>o;--i)void 0!==l[i]&&F.removeLayer(l[i])};t.on("zoomend",I),this._zoomLayers=l,this._layers={},I()},setOpacity:function(e){var t,o=Object.keys(this._zoomLayers),i=o.length;for(t=0;t<i;++t){var r=this._zoomLayers[o[t]];r.eachLayer(function(t){t.setOpacity(e)})}},_minimumZoomLevelForItem:function(e,t){for(var o=t,i=e;i>0&&i%2===0;)--o,i=Math.floor(i/2);return o}});
!function(t){var a=function(){var a=t.documentMode;return"onhashchange"in t&&(void 0===a||a>7)}();L.Hash=function(t,a){this.onHashChange=L.Util.bind(this.onHashChange,this),t&&this.init(t,a)},L.Hash.parseHash=function(t){0===t.indexOf("#map=")&&(t=t.substr(5));var a=t.split(/\&(.+)/),n=a[0].split("/");if(4==n.length){var e=parseInt(n[0],10),i=parseFloat(n[1]),s=parseFloat(n[2]),h=this.parseLayers(n[3]),r=a[1];return!(isNaN(e)||isNaN(i)||isNaN(s))&&{center:new L.LatLng(i,s),zoom:e,layers:h,additional:r}}return!1},L.Hash.formatHash=function(t){var a=t.getCenter(),n=t.getZoom(),e=Math.max(0,Math.ceil(Math.log(n)/Math.LN2)),i=this.formatLayers(),s=[n,a.lat.toFixed(e),a.lng.toFixed(e),i];if(url="#map="+s.join("/"),null!=this.additionalCb){var h=this.additionalCb();if(null!=h)return url+h}return url},L.Hash.prototype={options:{layerSeparator:","},map:null,lastHash:null,parseHash:L.Hash.parseHash,formatHash:L.Hash.formatHash,init:function(t,a){this.map=t,L.Util.setOptions(this,a),this.lastHash=null,this.onHashChange(),this.isListening||this.startListening()},_parseLayers:function(t,a){var n=t.split(a).map(L.bind(function(t){var a=null,n=decodeURIComponent(t);return n&&(a=this.options.layersControl.getLayerFromString(n)),a},this));return n},parseLayers:function(t){var a=function(t,a){return a&&t++,t},n=this._parseLayers(t,this.options.layerSeparator),e=n.reduce(a,0);if(e<n.length){var i=this._parseLayers(t,"-"),s=i.reduce(a,0);s>e&&(n=i)}return n},activateLayers:function(t){var a=this.options.layersControl,n=!1;a.removeActiveLayers(),t.forEach(L.bind(function(t,e,i){t&&(a.activateLayer(t),t&&!t.overlay&&(n=!0))},this)),n||a.activateDefaultBaseLayer()},formatLayers:function(){var t=this.options.layersControl.getActiveLayers();t=t.filter(function(t){return t.layer instanceof L.GridLayer||t.layer.id});var a=t.map(L.bind(function(t){return encodeURIComponent(this.options.layersControl.toLayerString(t))},this));return a.join(this.options.layerSeparator)},removeFrom:function(t){this.changeTimeout&&clearTimeout(this.changeTimeout),this.isListening&&this.stopListening(),this.map=null},onMapMove:function(){if(this.movingMap||!this.map._loaded)return!1;var t=this.formatHash(this.map);this.lastHash!=t&&(location.replace(t),this.lastHash=t)},movingMap:!1,update:function(){var t=location.hash;if(t!==this.lastHash){var a=this.parseHash(t);if(!a&&null!=this.onInvalidHashChangeCb){var n=this.onInvalidHashChangeCb(t);null!=n&&n!=t&&(a=this.parseHash(n))}a?(this.movingMap=!0,this.map.setView(a.center,a.zoom),this.activateLayers(a.layers),null!=this.onHashChangeCb&&this.onHashChangeCb(a.additional),this.movingMap=!1):this.onMapMove(this.map)}},changeDefer:100,changeTimeout:null,onHashChange:function(){if(!this.changeTimeout){var t=this;this.changeTimeout=setTimeout(function(){t.update(),t.changeTimeout=null},this.changeDefer)}},isListening:!1,hashChangeInterval:null,startListening:function(){this.map.on("moveend layeradd layerremove",this.onMapMove,this),a?L.DomEvent.addListener(t,"hashchange",this.onHashChange):(clearInterval(this.hashChangeInterval),this.hashChangeInterval=setInterval(this.onHashChange,50)),this.isListening=!0},stopListening:function(){this.map.off("moveend layeradd layerremove",this.onMapMove,this),a?L.DomEvent.removeListener(t,"hashchange",this.onHashChange):clearInterval(this.hashChangeInterval),this.isListening=!1},_keyByValue:function(t,a){for(var n in t)if(t.hasOwnProperty(n))return t[n]===a?n:null}},L.hash=function(t,a){return new L.Hash(t,a)},L.Map.prototype.addHash=function(){this._hash=L.hash(this,this.options)},L.Map.prototype.removeHash=function(){this._hash.removeFrom()}}(window);
BR.stravaSegments=function(t,a){var e=L.control.stravaSegments({runningTitle:i18next.t("map.strava-shortcut",{action:"$t(map.strava-running)",key:"S"}),bikingTitle:i18next.t("map.strava-shortcut",{action:"$t(map.strava-biking)",key:"S"}),loadingTitle:i18next.t("map.loading"),stravaToken:BR.keys.strava}).addTo(t);a.addOverlay(e.stravaLayer,i18next.t("map.layer.strava-segments")),e.onError=function(t){BR.message.showError(i18next.t("warning.strava-error",{error:t&&t.message?t.message:t}))},L.setOptions(this,{shortcut:{toggleLayer:83}});var r=function(){var t=e.runningButton.button.parentElement;t.hidden=!t.hidden};return r(),e.stravaLayer.on("add remove",r),L.DomEvent.addListener(document,"keydown",function(a){BR.Util.keyboardShortcutsAllowed(a)&&a.keyCode===this.options.shortcut.toggleLayer&&(t.hasLayer(e.stravaLayer)?t.removeLayer(e.stravaLayer):t.addLayer(e.stravaLayer))},this),e};
BR.ControlLayers=L.Control.Layers.extend({getActiveLayers:function(){for(var e=[],a=0;a<this._layers.length;a++){var r=this._layers[a];this._map.hasLayer(r.layer)&&(r.overlay?e.push(r):e.unshift(r))}return e},getActiveBaseLayer:function(){for(var e=this.getActiveLayers(),a=0;a<e.length;a++){var r=e[a];if(!r.overlay)return r}return null},removeActiveLayers:function(){for(var e=[],a=0;a<this._layers.length;a++){var r=this._layers[a];this._map.hasLayer(r.layer)&&(this._map.removeLayer(r.layer),e.push(r))}return e},getLayer:function(e){for(var a=0;a<this._layers.length;a++){var r=this._layers[a];if(r.name===e)return r}return null},getBaseLayers:function(){return this._layers.filter(function(e){return!e.overlay})},activateLayer:function(e){this._map.hasLayer(e.layer)||this._map.addLayer(e.layer)},activateFirstLayer:function(){for(var e=0;e<this._layers.length;e++){var a=this._layers[e];if(!a.overlay){this.activateLayer(a);break}}},activateBaseLayerIndex:function(e){var a=this.getBaseLayers(),r=a[e];this.activateLayer(r)},_addLayer:function(e,a,r){L.Control.Layers.prototype._addLayer.call(this,e,a,r),this.options.autoZIndex&&e.setZIndex&&(r||(this._lastZIndex--,e.setZIndex(0)))}});
BR.Export=L.Class.extend({latLngs:[],options:{shortcut:{"export":88}},initialize:function(t,e){this.router=t,this.pois=e,this.exportButton=$("#exportButton");var n=this.trackname=document.getElementById("trackname");if(this.tracknameAllowedChars=BR.conf.tracknameAllowedChars,this.tracknameAllowedChars){this.tracknameMessage=document.getElementById("trackname-message");var a=new RegExp("["+this.tracknameAllowedChars+"]+");n.pattern=a.toString().slice(1,-1),n.addEventListener("input",L.bind(this._validationMessage,this))}this.exportButton.on("click",L.bind(this._generateTrackname,this)),L.DomUtil.get("submitExport").onclick=L.bind(this._export,this),L.DomEvent.addListener(document,"keydown",this._keydownListener,this),this.update([])},update:function(t){this.latLngs=t,t.length<2?this.exportButton.addClass("disabled"):this.exportButton.removeClass("disabled")},_export:function(t){var e=document.forms["export"],n=e.format.value||$("#export-format input:radio:checked").val(),a=encodeURIComponent(e.trackname.value),i=e["include-waypoints"].checked,s=this.router.getUrl(this.latLngs,this.pois.getMarkers(),null,n,a,i);t.preventDefault();var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null);var r=document.createElement("a");r.href=s,r.dispatchEvent(o)},_validationMessage:function(){var t=this.trackname,e=new RegExp("[^"+this.tracknameAllowedChars+"]","g");if(t.validity.patternMismatch){var n=t.value.replace(e,""),a=this.tracknameAllowedChars.replace(/\\/g,"");this.tracknameMessage.textContent="["+a+"] --> "+n}else this.tracknameMessage.textContent=""},_generateTrackname:function(){var t=this.trackname;this._getCityAtPosition(this.latLngs[0],L.bind(function(e){this._getCityAtPosition(this.latLngs[this.latLngs.length-1],L.bind(function(n){var a=document.getElementById("distance").innerHTML;this.tracknameAllowedChars&&(a=a.replace(",",".")),e&&n?e===n?t.value=i18next.t("export.route-loop",{from:e,distance:a}):t.value=i18next.t("export.route-from-to",{from:e,to:n,distance:a}):t.value=null,this.tracknameAllowedChars&&(t.value=t.value.replace(/[>)]/g,"").replace(/ \(/g," - "),this._validationMessage())},this))},this))},_getCityAtPosition:function(t,e){var n=L.Util.template("https://nominatim.openstreetmap.org/reverse?lon={lng}&lat={lat}&format=json",t);BR.Util.get(n,L.bind(function(n,a){try{var i=JSON.parse(a).address;e(i.village||i.town||i.hamlet||i.city_district||i.city)}catch(n){return BR.message.showError('Error getting position city "'+t+'": '+n),e(null)}}))},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&t.keyCode===this.options.shortcut["export"]&&!this.exportButton.hasClass("disabled")&&(this._generateTrackname(),$("#export").modal("show"))}}),BR["export"]=function(){return new BR.Export};
BR.Itinerary=L.Class.extend({initialize:function(){this._content=document.getElementById("itinerary"),this.update()},update:function(t,e){var n,i,r,a="";for(a+='<pre class="flexgrow">',n=0;e&&n<e.length;n++)for(r=e[n].feature.iternity,i=0;r&&i<r.length;i++)a+=r[i]+"\n";a+="</pre>",this._content.innerHTML=a}});
BR.Layers=L.Class.extend({_loadLayers:function(){if(this._customLayers={},BR.Util.localStorageAvailable()){var e=JSON.parse(localStorage.getItem("map/customLayers"));for(a in e)this._addLayer(a,e[a].layer,e[a].isOverlay)}},_loadTable:function(){var e=[];for(layer in this._customLayers)e.push([layer,this._customLayers[layer].layer._url,this._customLayers[layer].isOverlay?"Overlay":"Layer"]);null!=this._layersTable&&this._layersTable.destroy(),this._layersTable=$("#custom_layers_table").DataTable({data:e,info:!1,searching:!1,paging:!1,language:{emptyTable:i18next.t("sidebar.layers.table.empty")},columns:[{title:i18next.t("sidebar.layers.table.name")},{title:i18next.t("sidebar.layers.table.URL")},{title:i18next.t("sidebar.layers.table.type")}]})},init:function(e,a,t,s){this._layersControl=a,this._map=e,this._layers={};for(var l in s)this._layers[l]=[s[l],!0];for(var l in t)this._layers[l]=[t[l],!1];L.DomUtil.get("custom_layers_add_base").onclick=L.bind(this._addBaseLayer,this),L.DomUtil.get("custom_layers_add_overlay").onclick=L.bind(this._addOverlay,this),L.DomUtil.get("custom_layers_remove").onclick=L.bind(this._remove,this),this._loadLayers(),this._loadTable();var r=this._layersTable;$("#custom_layers_table tbody").on("click","tr",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):(r.$("tr.selected").removeClass("selected"),$(this).addClass("selected"))}),L.DomUtil.get("custom_layers_button").onclick=function(){$("#custom_layers").modal()}},_remove:function(e){var a=this._layersTable.row(".selected").data();if(null!=a){var t=a[0];this._layersControl.removeLayer(this._customLayers[t].layer),this._map.removeLayer(this._customLayers[t].layer),delete this._customLayers[t],this._layersTable.row(".selected").remove().draw(!1),this._sync()}},_addFromInput:function(e){var a=L.DomUtil.get("layer_name").value,t=L.DomUtil.get("layer_url").value;a.length>0&&t.length>0&&this._addLayer(a,t,e)},_addBaseLayer:function(e){this._addFromInput(!1)},_addOverlay:function(e){this._addFromInput(!0)},_addLayer:function(e,a,t){if(!(e in this._layers||e in this._customLayers))try{var s=L.tileLayer(a);return this._customLayers[e]={layer:s,isOverlay:t},t?this._layersControl.addOverlay(s,e):this._layersControl.addBaseLayer(s,e),this._loadTable(),this._sync(),s}catch(l){return void console.warn("Oops:",l)}},_sync:function(){BR.Util.localStorageAvailable()&&localStorage.setItem("map/customLayers",JSON.stringify(this._customLayers,function(e,a){return a._url||a}))}});
BR.LayersTab=BR.ControlLayers.extend({previewLayer:null,previewBounds:null,saveLayers:[],initialize:function(e,t,r,i){L.Control.Layers.prototype.initialize.call(this,t,r,i),this.layersConfig=e},addTo:function(e){return this._map=e,this.onAdd(e),L.DomUtil.get("layers-control-wrapper").appendChild(this._section),this.initOpacitySlider(e),this.initButtons(),this.initJsTree(),this},onAdd:function(e){BR.ControlLayers.prototype.onAdd.call(this,e),e.on("baselayerchange overlayadd overlayremove",this.storeActiveLayers,this)},onRemove:function(e){BR.ControlLayers.prototype.onRemove.call(this,e),e.off("baselayerchange overlayadd overlayremove",this.storeActiveLayers,this)},initOpacitySlider:function(e){var t=this,r=new BR.OpacitySlider({id:"overlay",reversed:!1,orientation:"horizontal",defaultValue:1,title:i18next.t("layers.opacity-slider"),callback:function(r){for(var i=0;i<t._layers.length;i++)t._layers[i].overlay&&e.hasLayer(t._layers[i].layer)&&(t._layers[i].layer.setOpacity?t._layers[i].layer.setOpacity(r):t._layers[i].layer.setStyle({opacity:r}))}});L.DomUtil.get("leaflet-control-layers-overlays-opacity-slider").appendChild(r.getElement())},initButtons:function(){var e=function(e){this.jstree.open_all()},t=function(e){this.jstree.close_all()},r=function(e){var t=L.DomUtil.get("optional_layers_button"),r=L.DomUtil.get("tree-button-group"),i=L.DomUtil.get("optional-layers");i.hidden=!i.hidden,r.hidden=!r.hidden,t.classList.toggle("active"),i.hidden&&this.deselectNode()};L.DomUtil.get("expand_tree_button").onclick=L.bind(e,this),L.DomUtil.get("collapse_tree_button").onclick=L.bind(t,this),L.DomUtil.get("optional_layers_button").onclick=L.bind(r,this)},initJsTree:function(){var e=BR.layerIndex,t=this.toJsTree(BR.confLayers.tree),r=null,i=function(t,i){var a=e[i.node.id],s=i.selected[0];s!==r?(this.showPreview(a),r=s):i.instance.deselect_node(i.node)},a=function(e,t){this.hidePreview(),r=null},s=function(t,r){var i=e[r.node.id],a=this.createLayer(i),s=i.properties.name,n=i.properties.overlay;n?this.addOverlay(a,s):this.addBaseLayer(a,s),this.storeDefaultLayers();var o=document.getElementById(r.node.a_attr.id);o.classList.add("added"),setTimeout(function(){o.classList.remove("added")},1e3)},n=function(e,t){var r=this.getLayerById(t.node.id);if(r){this.removeLayer(r.layer),this._map.hasLayer(r.layer)&&(this._map.removeLayer(r.layer),r.overlay||this.activateFirstLayer()),this.storeDefaultLayers();var i=document.getElementById(t.node.a_attr.id);i.classList.add("removed"),setTimeout(function(){i.classList.remove("removed")},1e3)}};$("#optional-layers-tree").on("select_node.jstree",L.bind(i,this)).on("deselect_node.jstree",L.bind(a,this)).on("check_node.jstree",L.bind(s,this)).on("uncheck_node.jstree",L.bind(n,this)).on("ready.jstree",function(e,t){t.instance.open_all()}).jstree({plugins:["checkbox"],checkbox:{whole_node:!1,tie_selection:!1},core:{multiple:!1,themes:{icons:!1,dots:!1},data:t}}),this.jstree=$("#optional-layers-tree").jstree(!0)},toJsTree:function(e){function t(e){var t={text:i18next.t("sidebar.layers.category."+e,e),state:{disabled:!0},children:[]};return t}function r(e,t){var r='<span class="tree-text">',i=e.country_code||e.language_code;return i&&t.text!==i&&(r+='<span class="tree-code">'+i+"</span>"),r+=e.name,r+"</span>"}function i(e,t,i){var a=t.properties,s=a.url,o=n.layersConfig.getKeyName(s),l=null;return(!o||o&&BR.keys[o.name])&&(l={id:e,text:r(a,i),state:{checked:n.layersConfig.isDefaultLayer(e,a.overlay)}}),l}function a(e,r){function s(e){for(name in e){var i=e[name],s=t(name);r.children.push(s),a(i,s)}}if(Array.isArray(e))for(var n=0;n<e.length;n++){var o=e[n];if("object"==typeof o)s(o);else{var l=BR.layerIndex[o];if(l){var y=i(o,l,r);y&&r.children.push(y)}else console.error('Layer "'+o+'" not found')}}else s(e)}var s={children:[]},n=this;return a(e,s),s.children},storeDefaultLayers:function(){for(var e=[],t=[],r=0;r<this._layers.length;r++){var i=this._layers[r],a=i.layer.id;a&&this.layersConfig.builtInLayers.indexOf(a)===-1&&(i.overlay?t.push(a):e.push(a))}this.layersConfig.storeDefaultLayers(e,t)},createLayer:function(e){var t=this.layersConfig.createLayer(e),r=e.properties.overlay;return t.options.zIndex=r?this._lastZIndex+1:0,t},getLayerById:function(e){for(var t=0;t<this._layers.length;t++){var r=this._layers[t];if(r.layer.id===e)return r}return null},getLayerByLegacyName:function(e){var t=null,r=this.layersConfig.legacyNameToIdMap[e];return r&&(t=this.getLayerById(r)),t},activateDefaultBaseLayer:function(){var e=BR.conf.defaultBaseLayerIndex||0,t=this.getActiveBaseLayer();t||this.activateBaseLayerIndex(e)},saveRemoveActiveLayers:function(){this.saveLayers=this.removeActiveLayers()},restoreActiveLayers:function(e){for(var t=0;t<this.saveLayers.length;t++){var r=this.saveLayers[t];if(!e||e&&r.overlay){var i=!!this._getLayer(L.Util.stamp(r.layer));i?this.activateLayer(r):r.overlay||this.activateFirstLayer()}}this.saveLayers=[]},removePreviewLayer:function(){return!(!this.previewLayer||!this._map.hasLayer(this.previewLayer))&&(this._map.removeLayer(this.previewLayer),this.previewLayer=null,!0)},showPreviewBounds:function(e){e.geometry&&(this.previewBounds=L.geoJson(e.geometry,{invert:!0,renderer:L.svg({padding:1}),color:"#333",fillOpacity:.4,weight:2}).addTo(this._map))},removePreviewBounds:function(){this.previewBounds&&this._map.hasLayer(this.previewBounds)&&(this._map.removeLayer(this.previewBounds),this.previewBounds=null)},deselectNode:function(){var e=this.jstree.get_selected();e.length>0&&this.jstree.deselect_node(e[0])},onBaselayerchange:function(){setTimeout(L.Util.bind(function(){this.removePreviewBounds(),this.removePreviewLayer(),this.restoreActiveLayers(!0),this.deselectNode()},this),0)},showPreview:function(e){var t=this.createLayer(e);this._map.addLayer(t),this.removePreviewBounds(),this.removePreviewLayer()||(this.saveRemoveActiveLayers(),this._map.once("baselayerchange",this.onBaselayerchange,this)),this.previewLayer=t,this.showPreviewBounds(e),L.DomUtil.get("preview").hidden=!1},hidePreview:function(e){this._map.off("baselayerchange",this.onBaselayerchange,this),this.removePreviewBounds(),this.removePreviewLayer(),this.restoreActiveLayers(),L.DomUtil.get("preview").hidden=!0},toLayerString:function(e){return e.layer.id?e.layer.id:e.name},getLayerFromString:function(e){var t=this.getLayerById(e);return t||(t=this.getLayer(e),t||(t=this.getLayerByLegacyName(e))),t},storeActiveLayers:function(){if(BR.Util.localStorageAvailable()){var e=this.getActiveLayers(),t=e.map(L.bind(function(e){return this.toLayerString(e)},this)),r=JSON.stringify(t);localStorage.setItem("map/activeLayers",r)}},loadActiveLayers:function(){if(BR.Util.localStorageAvailable()){var e=localStorage.getItem("map/activeLayers");if(e)for(var t=JSON.parse(e),r=0;r<t.length;r++){var i=t[r],a=this.getLayerFromString(i);a&&this.activateLayer(a)}}}}),BR.layersTab=function(e,t,r){return new BR.LayersTab(e,t,r)};
BR.Message=L.Class.extend({options:{alert:!1},initialize:function(t,i){L.setOptions(this,i),this.id=t},_show:function(t,i){var n=L.DomUtil.get(this.id),e="warning"===i?"fa-exclamation-triangle":"fa-times-circle",a="warning"===i?"alert-warning":"alert-danger";L.DomEvent.disableClickPropagation(n),n.innerHTML='<div class="alert '+a+' alert-dismissible fade show" role="alert">  <button type="button" class="close" data-dismiss="alert" aria-label="Close">    <span aria-hidden="true">&times;</span>  </button>  <span class="fa '+e+'" aria-hidden="true"/></span>'+t+"</div>",this.options.alert&&$("#"+this.id+" .alert").alert()},hide:function(){$("#"+this.id+" .alert").alert("close")},showError:function(t){t&&t.message&&(t=t.message),"target island detected for section 0\n"==t?t=i18next.t("warning.no-route-found"):"no track found at pass=0\n"==t?t=i18next.t("warning.no-route-found"):"to-position not mapped in existing datafile\n"==t?t=i18next.t("warning.invalid-route-to"):"from-position not mapped in existing datafile\n"==t?t=i18next.t("warning.invalid-route-from"):t&&t.startsWith("null description for: ")&&(t=i18next.t("warning.no-route-found")),this._show(t,"error")},showWarning:function(t){this._show(t,"warning")}}),BR.message=new BR.Message("message");
BR.OpacitySlider=L.Class.extend({options:{id:"",reversed:!0,orientation:"vertical",defaultValue:BR.conf.defaultOpacity,title:"",callback:function(t){}},initialize:function(t){L.setOptions(this,t);var e=this.input=$('<input id="slider-'+this.options.id+'" type="text"/>'),i=BR.Util.localStorageAvailable()?localStorage["opacitySliderValue"+this.options.id]:null,o=i?parseInt(i):100*this.options.defaultValue,s=100*(BR.conf.minOpacity||0);o<s&&(o=s),e.slider({id:this.options.id,min:0,max:100,step:1,value:o,orientation:this.options.orientation,reversed:this.options.reversed,selection:this.options.reversed?"before":"after",tooltip:"hide"}).on("slide slideStop",{self:this},function(t){t.data.self.options.callback(t.value/100)}).on("slideStop",{self:this},function(t){BR.Util.localStorageAvailable()&&(localStorage["opacitySliderValue"+t.data.self.options.id]=t.value)}),this.getElement().title=this.options.title,this.options.callback(o/100),this.options.muteKeyCode&&(L.DomEvent.addListener(document,"keydown",this._keydownListener,this),L.DomEvent.addListener(document,"keyup",this._keyupListener,this))},_keydownListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&t.keyCode===this.options.muteKeyCode&&this.options.callback(0)},_keyupListener:function(t){BR.Util.keyboardShortcutsAllowed(t)&&t.keyCode===this.options.muteKeyCode&&this.options.callback(this.input.val()/100)},getElement:function(){return this.input.slider("getElement")}});
BR.OpacitySliderControl=L.Control.extend({options:{position:"topleft"},onAdd:function(e){var t=L.DomUtil.create("div","leaflet-bar control-slider");if(L.DomEvent.disableClickPropagation(t),BR.Util.localStorageAvailable()){var o=localStorage.getItem("opacitySliderValue");null!==o&&(localStorage.setItem("opacitySliderValue"+this.options.id,o),localStorage.removeItem("opacitySliderValue"))}var i=new BR.OpacitySlider(this.options);t.appendChild(i.getElement());var n=function(e){L.DomEvent.stop(e),l()},l=function(){document.removeEventListener("click",n,!0),document.removeEventListener("mousedown",l,!0)};return i.input.on("slideStart",function(e){L.DomUtil.disableTextSelection()}).on("slideStop",{self:this},function(e){L.DomUtil.enableTextSelection(),document.addEventListener("click",n,!0),document.addEventListener("mousedown",l,!0)}),t}});
BR.Profile=L.Evented.extend({cache:{},saveWarningShown:!1,initialize:function(){var e=L.DomUtil.get("profile_upload");this.editor=CodeMirror.fromTextArea(e,{lineNumbers:!0}),$('#profileEditorTabs a[data-toggle="tab"]').on("shown.bs.tab",L.bind(function(e){this._activateSecondaryTab()},this)),L.DomUtil.get("save").onclick=L.bind(this._save,this),L.DomUtil.get("upload").onclick=L.bind(this._upload,this),L.DomUtil.get("clear").onclick=L.bind(this.clear,this),this.pinned=L.DomUtil.get("profile-pinned"),this.message=new BR.Message("profile_message",{alert:!0})},clear:function(e){var i=e.target||e.srcElement;e.preventDefault(),this.editor.markClean(),this._setValue(""),this.fire("clear"),i.blur()},update:function(e){var i,t=e.profile,a=!this.editor.getValue(),r=this.editor.isClean();t&&BR.conf.profilesUrl&&(a||r?(this.profileName=t,t in this.cache?this._setValue(this.cache[t]):(i=BR.conf.profilesUrl+t+".brf",BR.Util.get(i,L.bind(function(e,a){return e?void console.warn('Error getting profile from "'+i+'": '+e):(this.cache[t]=a,void(this.profileName&&this.profileName!==t||this._setValue(a)))},this))),this.pinned.hidden||(this.pinned.hidden=!0)):this.pinned.hidden&&(this.pinned.hidden=!1))},show:function(){this.editor.refresh()},onResize:function(){this.editor.refresh()},_upload:function(e){var i=e.target||e.srcElement,t=this.editor.getValue();this.message.hide(),e.preventDefault(),this.fire("update",{profileText:t,callback:L.bind(function(e,t,a){$(i).blur(),e||(this.profileName=t,this.cache[t]=a,this.saveWarningShown||(this.message.showWarning(i18next.t("warning.temporary-profile")),this.saveWarningShown=!0))},this)})},_buildCustomProfile:function(e){return document.querySelectorAll("#profile_params input, #profile_params select").forEach(function(i){var t,a=i.name;t="checkbox"==i.type?i.checked:i.value;var r=new RegExp("(assign\\s*"+a+"\\s*=?\\s*)([\\w.]*)(\\s*#\\s*%(.*)%\\s*(\\|\\s*(.*)\\s*\\|\\s*(.*)\\s*)?[\\r\\n])");e=e.replace(r,function(e,i,a,r){return i+t+r})}),e},_save:function(e){var i=this._buildCustomProfile(this.editor.getValue()),t=this;this.fire("update",{profileText:i,callback:function(e,i,a){e||(t.profileName=i,t.cache[i]=a)}})},_setValue:function(e){e=e||"";var i=this.editor.isClean();this.editor.setValue(e),i&&this.editor.markClean(),this._isParamsFormActive()&&this._buildParamsForm(e)},_buildParamsForm:function(e){if(e){var i={},t=e.split("---context:").filter(function(e){return e.startsWith("global")});if(t&&t.length>0){t=t[0].split("\n").slice(1);var a=/assign\s*(\w*)\s*=?\s*([\w\.]*)\s*#\s*%(.*)%\s*(\|\s*(.*)\s*\|\s*(.*)\s*)?$/;t.forEach(function(e){var t,r=e.match(a);if(r){var s=r[1],t=r[2],n=r[5],o=r[6],l={};if(o.match(/\[.*\]/)&&(o.slice(1,-1).split(",").forEach(function(e){var i=e.split("="),t=(i[0]||"").replace(/^\s+|\s+$/g,""),a=(i[1]||"").replace(/^\s+|\s+$/g,"");l[t]=a}),o="select"),o||(o="true"==t||"false"==t?"boolean":"number"),"boolean"==o)t="true"==t;else if("number"==o&&(t=Number.parseFloat(t),Number.isNaN(t)))return;i[s]={description:n,type:o,value:t,possible_values:l}}})}var r=L.DomUtil.get("profile_params");r.innerHTML="",Object.keys(i).length||r.append(i18next.t("sidebar.profile.no_easy_configuration_warning")),Object.keys(i).forEach(function(e){var t=document.createElement("div"),a=document.createElement("label"),s=i[e].type,n=i18next.exists("profileParameters."+e+".name")?i18next.t("profileParameters."+e+".name"):e;if("select"==s){var o=document.createElement("select");o.name=n,o.className="form-control form-control-sm",a.htmlFor=o.id="customize-profile-"+n;var l=i[e].possible_values;Object.keys(l).forEach(function(t){var a=document.createElement("option");a.value=t,t==i[e].value&&(a.selected=!0),a.append(l[t]),o.appendChild(a)}),a.append(n),t.appendChild(a),t.appendChild(o)}else{var c=document.createElement("input");if(c.name=n,a.htmlFor=c.id="customize-profile-"+n,"number"==s)c.type="number",c.value=i[e].value,c.className="form-control form-control-sm",a.append(n),t.appendChild(a),t.appendChild(c),t.className="form-group";else{if("boolean"!=s)return;c.type="checkbox",c.checked=i[e].value,t.appendChild(c),a.append(n),t.appendChild(a)}}var p=document.createElement("p"),h=i18next.exists("profileParameters."+e+".description")?i18next.t("profileParameters."+e+".description"):i[e].description.replace(/^\s+|\s+$/g,"");p.innerHTML=h,p.className="help-block",t.appendChild(p),r.appendChild(t)})}},_isParamsFormActive:function(){return L.DomUtil.get("profile_params_container").classList.contains("active")},_activateSecondaryTab:function(){var e=this.editor.getValue();this._isParamsFormActive()?this._buildParamsForm(e):this._setValue(this._buildCustomProfile(e))}});
BR.RoutingOptions=L.Evented.extend({options:{shortcut:{"switch":71}},initialize:function(){$("#profile-alternative").on("changed.bs.select",this._getChangeHandler());for(var e=BR.conf.profiles,t=L.DomUtil.get("profile"),i=0;i<e.length;i++){var o=document.createElement("option");o.value=e[i],o.text=i18next.t("navbar.profile."+e[i]),t.appendChild(o)}t.children[0].value="Custom",t.children[1].selected=!0,L.DomEvent.addListener(document,"keydown",this._keydownListener,this)},refreshUI:function(){$("#profile-alternative").find("option:disabled").each(function(e){$(this).prop("disabled",!1)}),$("#profile-alternative").find("option:selected").each(function(e){$(this).prop("disabled",!0)});var e=L.DomUtil.get("profile").children[0];"Custom"===e.value&&(e.disabled=!0),$(".selectpicker").selectpicker("refresh");var t=$("#profile-alternative-form button")[0];t.title=t.title+i18next.t("navbar.profile-tooltip",{key:"G"})},getOptions:function(){var e=$("#profile option:selected"),t=$("#alternative option:selected");return this.refreshUI(),{profile:e.val(),alternative:t.val()}},setOptions:function(e){var t=[e.profile?e.profile:$("#profile option:selected").val(),e.alternative?e.alternative:$("#alternative option:selected").val()];$(".selectpicker").selectpicker("val",t),this.refreshUI(),e.profile&&L.BRouter.isCustomProfile(e.profile)&&this.setCustomProfile(e.profile,!0)},setCustomProfile:function(e,t){var i,o;i=L.DomUtil.get("profile"),o=i.children[0],o.value=e||"Custom",o.disabled=!e,e?$("#profile").find("option:selected").each(function(e){$(this).prop("selected",!1)}):o.selected&&(i.children[1].selected=!0),o.selected=!!e,t||this.fire("update",{options:this.getOptions()})},getCustomProfile:function(){var e=L.DomUtil.get("profile"),t=e.children[0],i=null;return"Custom"!==t.value&&(i=t.value),i},_getChangeHandler:function(){return L.bind(function(e){this.fire("update",{options:this.getOptions()})},this)},_keydownListener:function(e){BR.Util.keyboardShortcutsAllowed(e)&&e.keyCode===this.options.shortcut["switch"]&&($("#profile-alternative-form .dropdown").hasClass("show")||$("#profile-alternative-form button").click())}});
BR.TrackAnalysis=L.Class.extend({options:{overlayStyle:{color:"yellow",opacity:.8,weight:8,pane:"routingQualityPane"}},totalRouteDistance:0,initialize:function(t,a){this.map=t,L.setOptions(this,a)},trackEdges:null,trackPolyline:null,active:!1,show:function(){this.active=!0,this.options.requestUpdate(this)},hide:function(){this.active=!1},update:function(t,a){if(this.active){if(0===a.length)return void $("#track_statistics").html("");this.trackPolyline=t,this.trackEdges=new BR.TrackEdges(a);var e=this.calcStats(t,a);this.render(e),$(".track-analysis-table tr").hover(L.bind(this.handleHover,this),L.bind(this.handleHoverOut,this)),$(".track-analysis-table tbody").on("click","tr",L.bind(this.toggleSelected,this))}},calcStats:function(t,a){var e={highway:{},surface:{},smoothness:{}};this.totalRouteDistance=0;for(var s=0;a&&s<a.length;s++)for(var i=1;i<a[s].feature.properties.messages.length;i++){this.totalRouteDistance+=parseFloat(a[s].feature.properties.messages[i][3]);for(var n=a[s].feature.properties.messages[i][9].split(" "),r=0;r<n.length;r++){var o=n[r].split("=");switch(o[0]){case"highway":var h=o[1],l="";"track"===h&&(l=this.getTrackType(n),h="Track "+l),"undefined"==typeof e.highway[h]&&(e.highway[h]={formatted_name:i18next.t("sidebar.analysis.data.highway."+h,h),name:o[1],subtype:l,distance:0}),e.highway[h].distance+=parseFloat(a[s].feature.properties.messages[i][3]);break;case"surface":case"smoothness":"undefined"==typeof e[o[0]][o[1]]&&(e[o[0]][o[1]]={formatted_name:i18next.t("sidebar.analysis.data."+o[0]+"."+o[1],o[1]),name:o[1],subtype:"",distance:0}),e[o[0]][o[1]].distance+=parseFloat(a[s].feature.properties.messages[i][3])}}}return this.sortAnalysisData(e)},sortAnalysisData:function(t){var a={},e={};for(var s in t)if(t.hasOwnProperty(s)){e[s]={},a[s]=[];for(var i in t[s])t[s].hasOwnProperty(i)&&a[s].push(t[s][i]);a[s].sort(function(t,a){return a.distance-t.distance});for(var n=0;n<a[s].length;n++)e[s][a[s][n].formatted_name]=a[s][n]}return e},getTrackType:function(t){for(var a=0;a<t.length;a++){var e=t[a].split("=");if("tracktype"===e[0])return e[1]}return"unknown"},render:function(t){var a=$("#track_statistics");a.html(""),a.append($('<h4 class="track-analysis-heading">'+i18next.t("sidebar.analysis.header.highway")+"</h4>")),a.append(this.renderTable("highway",t.highway)),a.append($('<h4 class="track-analysis-heading">'+i18next.t("sidebar.analysis.header.surface")+"</h4>")),a.append(this.renderTable("surface",t.surface)),a.append($('<h4 class="track-analysis-heading">'+i18next.t("sidebar.analysis.header.smoothness")+"</h4>")),a.append(this.renderTable("smoothness",t.smoothness))},renderTable:function(t,a){var e,s=$('<table data-type="'+t+'" class="mini cell-border stripe dataTable track-analysis-table"></table>'),i=$("<thead></thead>");i.append($("<tr>").append('<th class="track-analysis-header-category">'+i18next.t("sidebar.analysis.table.category")+"</th>").append($('<th class="track-analysis-header-distance">'+i18next.t("sidebar.analysis.table.length")+"</th>"))),s.append(i);var n=$("<tbody></tbody>"),r=0;for(e in a)if(a.hasOwnProperty(e)){var o=$('<tr data-name="'+a[e].name+'" data-subtype="'+a[e].subtype+'" data-distance="'+a[e].distance+'"></tr>');o.append('<td class="track-analysis-title">'+a[e].formatted_name+"</td>"),o.append('<td class="track-analysis-distance">'+this.formatDistance(a[e].distance)+" km</td>"),n.append(o),r+=a[e].distance}return r<this.totalRouteDistance&&n.append($('<tr data-name="internal-unknown" data-distance="'+(this.totalRouteDistance-r)+'"></tr>').append($('<td class="track-analysis-title">'+i18next.t("sidebar.analysis.table.unknown")+"</td>")).append($('<td class="track-analysis-distance">'+this.formatDistance(this.totalRouteDistance-r)+" km</td>"))),s.append(n),s.append($("<tfoot></tfoot>").append("<tr></tr>").append($("<td>"+i18next.t("sidebar.analysis.table.total_known")+"</td>")).append($('<td class="track-analysis-distance track-analysis-distance-total">'+this.formatDistance(r)+" km</td>"))),s},formatDistance:function(t){return(t/1e3).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})},handleHover:function(t){var a=$(t.currentTarget),e=a.parents("table").first(),s=e.data("type"),i=a.data("name"),n=a.data("subtype"),r=this.getPolylinesForDataType(s,i,n);this.highlightedSegments=L.layerGroup(r).addTo(this.map)},handleHoverOut:function(){this.map.removeLayer(this.highlightedSegments)},toggleSelected:function(t){var a=t.currentTarget,e=$(a).parents("table").first(),s=e.data("type"),i=$(a).data("name"),n=$(a).data("subtype");return a.classList.toggle("selected")?(this.highlightedSegment&&(this.map.removeLayer(this.highlightedSegment),this.selectedTableRow.classList.remove("selected")),this.highlightedSegment=L.layerGroup(this.getPolylinesForDataType(s,i,n)).addTo(this.map),void(this.selectedTableRow=a)):(this.map.removeLayer(this.highlightedSegment),this.selectedTableRow=null,void(this.highlightedSegment=null))},getPolylinesForDataType:function(t,a,e){for(var s=[],i=this.trackPolyline.getLatLngs(),n=0;n<this.trackEdges.edges.length;n++)if(this.wayTagsMatchesData(i[this.trackEdges.edges[n]],t,a,e)){var r=n>0?this.trackEdges.edges[n-1]:0,o=this.trackEdges.edges[n]+1;s.push(L.polyline(i.slice(r,o),this.options.overlayStyle))}return s},wayTagsMatchesData:function(t,a,e,s){var i=this.parseWayTags(t);switch(a){case"highway":return"track"===e?"unknown"===s&&"track"===i.highway&&!i.tracktype||"string"==typeof i.tracktype&&i.tracktype===s:i.highway===e;case"surface":return"internal-unknown"===e&&"string"!=typeof i.surface||"string"==typeof i.surface&&i.surface===e;case"smoothness":return"internal-unknown"===e&&"string"!=typeof i.smoothness||"string"==typeof i.smoothness&&i.smoothness===e}return!1},parseWayTags:function(t){for(var a={},e=t.feature.wayTags.split(" "),s=0;s<e.length;s++){var i=e[s].split("=");a[i[0]]=i[1]}return a}});
BR.TrackMessages=L.Class.extend({options:{edgeStyle:{color:"yellow",opacity:.8,weight:8,pane:"routingQualityPane"},syncMap:!0},active:!1,columnOptions:{Longitude:{visible:!1},Latitude:{visible:!1},Elevation:{title:"elev.",className:"dt-body-right"},Distance:{title:"dist.",className:"dt-body-right"},CostPerKm:{title:"$/km",className:"dt-body-right"},ElevCost:{title:"elev$",className:"dt-body-right"},TurnCost:{title:"turn$",className:"dt-body-right"},NodeCost:{title:"node$",className:"dt-body-right"},InitialCost:{title:"initial$",className:"dt-body-right"}},trackEdges:null,trackPolyline:null,initialize:function(t,e){L.setOptions(this,e),this._map=t;var s=document.getElementById("datatable");this.tableClassName=s.className,this.tableParent=s.parentElement;var a=document.getElementById("data-sync-map");L.DomEvent.on(a,"click",this._toggleSyncMap,this)},update:function(t,e){var s,a,i,l,n=[];if(this.active){for(this.trackPolyline=t,this.trackEdges=new BR.TrackEdges(e),s=0;e&&s<e.length;s++)a=e[s].feature.properties.messages,a&&(n=n.concat(a.slice(1)));this._destroyTable(),0!==n.length&&(l=a[0],i=this._getColumns(l,n),this._table=$("#datatable").DataTable({destroy:!0,data:n,columns:i,paging:!1,searching:!1,info:!1,scrollY:50,scrollX:!0,order:[]}),$("#datatable tbody tr").hover(L.bind(this._handleHover,this),L.bind(this._handleHoverOut,this)),$("#datatable tbody").on("click","tr",L.bind(this._toggleSelected,this)))}},show:function(){this.active=!0,this.options.requestUpdate(this)},hide:function(){this.active=!1},_destroyTable:function(){var t;return $.fn.DataTable.isDataTable("#datatable")&&($("#datatable").DataTable().destroy(!0),t=document.createElement("table"),t.id="datatable",t.className=this.tableClassName,this.tableParent.appendChild(t)),t||document.getElementById("datatable")},_getColumns:function(t,e){var s,a,i=[],l=this._getEmptyColumns(e);for(k=0;k<t.length;k++)s={title:t[k],visible:!l[k]},a=L.extend(s,this.columnOptions[t[k]]),i.push(a);return i},_getEmptyColumns:function(t){var e,s=new Array(t[0].length);for(e=0;e<s.length;e++)s[e]=!0;return t.forEach(function(t){t.forEach(function(t,e){s[e]=s[e]&&!t})}),s},_getRowEdge:function(t){var e=this._table.row($(t)),s=this.trackPolyline.getLatLngs(),a=e.index()>0?this.trackEdges.edges[e.index()-1]:0,i=this.trackEdges.edges[e.index()],l=s.slice(a,i+1);return L.polyline(l,this.options.edgeStyle)},_handleHover:function(t){var e=t.currentTarget;this._hoveredEdge=this._getRowEdge(e).addTo(this._map),this.options.syncMap&&!this._selectedEdge&&this._map.panTo(this._hoveredEdge.getCenter())},_handleHoverOut:function(t){this._map.removeLayer(this._hoveredEdge),this._hoveredEdge=null},_toggleSelected:function(t){var e=t.currentTarget;e.classList.toggle("selected")?(this._selectedEdge&&(this._map.removeLayer(this._selectedEdge),this._selectedRow.classList.remove("selected")),this._selectedEdge=this._getRowEdge(e).addTo(this._map),this._selectedRow=e,this._map.panTo(this._selectedEdge.getCenter())):(this._map.removeLayer(this._selectedEdge),this._selectedEdge=null,this._selectedRow=null)},_toggleSyncMap:function(t){var e=t.currentTarget;e.classList.toggle("active"),this.options.syncMap=!this.options.syncMap}});
BR.TrackStats=L.Class.extend({update:function(t,e){if(0==e.length)return $("#stats-container").hide(),void $("#stats-info").show();$("#stats-container").show(),$("#stats-info").hide();var a=this.calcStats(t,e),n=L.Util.formatNum(a.trackLength/1e3,1).toLocaleString(),o=L.Util.formatNum(a.trackLength/1e3,3).toLocaleString(void 0,{minimumFractionDigits:3}),r=a.filteredAscend.toLocaleString(),c=a.plainAscend.toLocaleString(),i=a.cost.toLocaleString(),l=a.trackLength?L.Util.formatNum(a.cost/a.trackLength,2).toLocaleString():"0",s=Math.trunc(a.totalTime/3600)+":"+("0"+Math.trunc(a.totalTime%3600/60)).slice(-2),m=L.Util.formatNum(a.totalEnergy/36e5,2).toLocaleString(),g=a.trackLength?L.Util.formatNum(a.totalEnergy/36/a.trackLength,2).toLocaleString():"0";$("#distance").html(n),$("#distance").attr("title",o+" km"),$("#ascend").html(r),$("#plainascend").html(c),$("#cost").html(i),$("#meancostfactor").html(l),$("#totaltime").html(s),$("#totalenergy").html(m),$("#meanenergy").html(g)},calcStats:function(t,e){var a,n,o={trackLength:0,filteredAscend:0,plainAscend:0,totalTime:0,totalEnergy:0,cost:0};for(a=0;e&&a<e.length;a++)n=e[a].feature.properties,o.trackLength+=+n["track-length"],o.filteredAscend+=+n["filtered ascend"],o.plainAscend+=+n["plain-ascend"],o.totalTime+=+n["total-time"],o.totalEnergy+=+n["total-energy"],o.cost+=+n.cost;return o}});
!function(){function e(e){L.Browser.touch&&BR.Browser.touchScreenDetectable&&!BR.Browser.touchScreen&&L.DomUtil.removeClass(e.map.getContainer(),"leaflet-touch")}function t(e){function t(){bootbox.prompt({size:"small",title:i18next.t("map.clear-route"),inputType:"checkbox",inputOptions:[{text:i18next.t("map.delete-route"),value:"route"},{text:i18next.t("map.delete-nogo-areas"),value:"nogo"},{text:i18next.t("map.delete-pois"),value:"pois"}],value:["route"],callback:function(e){null!==e&&(e.indexOf("route")!==-1&&s.clear(),e.indexOf("nogo")!==-1&&c.clear(),e.indexOf("pois")!==-1&&R.clear(),n(),v.onMapMove())}})}function a(e){r.setOptions(e.options),r.queue.idle()||r.queue.kill(),s.rerouteAllSegments(n)}function o(e){var t=s.toPolyline(),a=s.getSegments();e.update(t,a)}function n(e){if(e)return void(e!==L.BRouter.ABORTED_ERROR&&BR.message.showError(e));BR.message.hide();var t=s.toPolyline(),a=s.getSegments(),o=s.getWaypoints(),n=s._segments;p.update(t,n),routingPathQuality.update(t,n),BR.conf.transit?d.update(t,a):u.update(t,a),y.update(t,a),m.update(t,a),g.update(o)}var i,r,s,l,c,u,d,p,g,f,y,m,B,h,k,R,w,v,b=e.map,x=e.layersControl;$(".selectpicker").selectpicker({iconBase:"fa",tickIcon:"fa-check",windowPadding:[0,0,40,0]}),i=new BR.Search,b.addControl(i),$("#map .leaflet-control-geocoder > button")[0].title=i18next.t("keyboard.generic-shortcut",{action:"$t(map.geocoder)",key:"F"}),r=L.bRouter(),h=L.easyButton({states:[{stateName:"deactivate-draw",icon:"fa-pencil active",onClick:function(e){s.draw(!1),e.state("activate-draw")},title:i18next.t("keyboard.generic-shortcut",{action:"$t(map.draw-route-stop)",key:"$t(keyboard.escape)"})},{stateName:"activate-draw",icon:"fa-pencil",onClick:function(e){s.draw(!0),e.state("deactivate-draw")},title:i18next.t("keyboard.generic-shortcut",{action:"$t(map.draw-route-start)",key:"D"})}]});var C=L.easyButton("fa-random",function(){s.reverse()},i18next.t("keyboard.generic-shortcut",{action:"$t(map.reverse-route)",key:"R"})),M=L.easyButton('<span><i class="fa fa-caret-left"></i><i class="fa fa-map-marker" style="margin-left: 1px; color: gray;"></i></span>',function(){s.deleteLastPoint()},i18next.t("keyboard.generic-shortcut",{action:"$t(map.delete-last-point)",key:"Z"}));k=L.easyButton("fa-trash-o",function(){t()},i18next.t("keyboard.generic-shortcut",{action:"$t(map.clear-route)",key:"$t(keyboard.backspace)"})),L.DomEvent.addListener(document,"keydown",function(e){BR.Util.keyboardShortcutsAllowed(e)&&!$(".modal.show").length&&(8===e.keyCode?t():72===e.keyCode&&$("#about").modal("show"))},this),l=new BR.RoutingOptions,l.on("update",a),l.on("update",function(e){f.update(e.options)}),BR.NogoAreas.MSG_BUTTON=i18next.t("keyboard.generic-shortcut",{action:"$t(map.nogo.draw)",key:"N"}),BR.NogoAreas.MSG_BUTTON_CANCEL=i18next.t("keyboard.generic-shortcut",{action:"$t(map.nogo.cancel)",key:"$t(keyboard.escape)"}),BR.NogoAreas.MSG_CREATE=i18next.t("map.nogo.click-drag"),BR.NogoAreas.MSG_DISABLED=i18next.t("map.nogo.edit"),BR.NogoAreas.MSG_ENABLED=i18next.t("map.nogo.help"),c=new BR.NogoAreas,c.on("update",a),BR.conf.transit?d=new BR.Itinerary:u=new BR.TrackStats,p=new BR.Elevation,f=new BR.Profile,f.on("update",function(e){BR.message.hide();var t=l.getCustomProfile();r.uploadProfile(t,e.profileText,function(t,o){t?(f.message.showError(t),o&&(l.setCustomProfile(o,!0),r.setOptions(l.getOptions()))):(l.setCustomProfile(o,!0),a({options:l.getOptions()})),e.callback&&e.callback(t,o,e.profileText)})}),f.on("clear",function(e){f.message.hide(),l.setCustomProfile(null)}),y=new BR.TrackMessages(b,{requestUpdate:o}),m=new BR.TrackAnalysis(b,{requestUpdate:o}),routingPathQuality=new BR.RoutingPathQuality(b,x),s=new BR.Routing({routing:{router:L.bind(r.getRouteSegment,r)},styles:BR.conf.routingStyles}),R=new BR.PoiMarkers(s),g=new BR.Export(r,R),s.on("routing:routeWaypointEnd routing:setWaypointsEnd",function(e){i.clear(),n(e&&e.err)}),b.on("routing:draw-start",function(){h.state("deactivate-draw")}),b.on("routing:draw-end",function(){h.state("activate-draw")}),s.addTo(b),p.addBelow(b),B=BR.sidebar({defaultTabId:BR.conf.transit?"tab_itinerary":"tab_profile",listeningTabs:{tab_profile:f,tab_data:y,tab_analysis:m}}).addTo(b),BR.conf.transit&&B.showPanel("tab_itinerary"),c.addTo(b);var O=null,T=i18next.languages.length&&i18next.languages[0];T.startsWith("fr")&&(O=2e4),null!=O&&(w=new BR.CircleGoArea(s,c,R),w.options.radius=O,R.circlego=w,w.addTo(b));var P=[h,C,c.getButton()];O&&P.push(w.getButton()),P.push(M,k),L.easyBar(P).addTo(b),c.preventRoutePointOnCreate(s),BR.keys.strava&&BR.stravaSegments(b,x),BR.tracksLoader(b,x,s,R),BR.routeLoader(b,x,s,R),R.addTo(b),routingPathQuality.addTo(b),b.addControl(new BR.OpacitySliderControl({id:"route",title:i18next.t("map.opacity-slider-shortcut",{action:"$t(map.opacity-slider)",key:"M"}),muteKeyCode:77,callback:L.bind(s.setOpacity,s)})),r.setOptions(c.getOptions()),r.setOptions(l.getOptions()),f.update(l.getOptions()),location.hash||x.loadActiveLayers();var A=function(e){var t=function(e){e=e.replace(/;/g,"|");var t={},a="&";e.search("&amp;")!==-1&&(a="&amp;");for(var o=e.split(a),n=0;n<o.length;n++){var i=o[n].split("=");2===i.length&&(t[i[0]]=decodeURIComponent(i[1]))}return t};if(null!=e){var a=r.parseUrlParams(t(e));r.setOptions(a),l.setOptions(a),c.setOptions(a),f.update(a),a.lonlats&&(s.draw(!1),s.clear(),s.setWaypoints(a.lonlats)),a.pois&&R.setMarkers(a.pois),w&&a.circlego&&(w.options.radius=a.circlego[2],w.setCircle([a.circlego[0],a.circlego[1]],null!=a.polylines))}},S=function(e){return e=e.replace("zoom=","map="),e=e.replace("&lat=","/"),e=e.replace("&lon=","/"),e=e.replace("&layer=","/")};v=new L.Hash(null,null),v.additionalCb=function(){var e=r.getUrl(s.getWaypoints(),R.getMarkers(),w?w.getCircle():null,null).substr("brouter?".length+1);return e=e.replace(/\|/g,";"),e.length>0?"&"+e:null},v.onHashChangeCb=A,v.onInvalidHashChangeCb=S,v.init(b,{layersControl:x}),setTimeout(function(){x.activateDefaultBaseLayer()},v.changeDefer),l.on("update",v.onMapMove,v),c.on("update",v.onMapMove,v),R.on("update",v.onMapMove,v),s.on("routing:routeWaypointEnd",v.onMapMove,v),s.on("waypoint:click",function(e){var t=e.marker._routing;t.prevMarker||t.nextMarker||v.onMapMove()},v),$(window).resize(function(){p.addBelow(b)}),p.initCollapse(b)}var a;i18next.on("languageChanged",function(e){for(i=0;i<i18next.languages.length;i++){var t=i18next.languages[i];if(i18next.hasResourceBundle(t,"translation")){var a=document.documentElement;a.getAttribute("lang")!==t&&a.setAttribute("lang",t);break}}}),i18next.use(window.i18nextXHRBackend).use(window.i18nextBrowserLanguageDetector).init({fallbackLng:"en",backend:{loadPath:"dist/locales/{{lng}}.json"}},function(o,n){jqueryI18next.init(i18next,$,{useOptionsAttr:!0}),$("html").localize(),$("#aboutLinks").localize({privacyPolicyUrl:BR.conf.privacyPolicyUrl||"https://brouter.de/privacypolicy.html"}),a=BR.Map.initMap(),e(a),t(a)})}();
//# sourceMappingURL=brouter-web.js.map
